(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[786],{"../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/oroconsent/templates/frontend-dialog/dialog-actions.html":(module,__unused_webpack_exports,__webpack_require__)=>{var _=__webpack_require__("./bundles/oroui/js/extend/underscore.js");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="widget-actions">\n    ',simpleActionTemplate?__p+='\n        <button class="btn" type="reset">\n            '+(null==(__t=_.__("oro.consent.frontend.dialog.close.label"))?"":_.escape(__t))+"\n        </button>\n    ":__p+='\n        <button class="btn btn--info" type="submit">\n            '+(null==(__t=_.__("oro.consent.frontend.dialog.accept.label"))?"":_.escape(__t))+'\n        </button>\n        <button class="btn" type="reset">\n            '+(null==(__t=_.__("oro.consent.frontend.dialog.cancel.label"))?"":_.escape(__t))+"\n        </button>\n    ",__p+="\n</div>\n";return __p}},"../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/oroui/templates/dropdown-menu-collection--item.html":(module,__unused_webpack_exports,__webpack_require__)=>{var _=__webpack_require__("./bundles/oroui/js/extend/underscore.js");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<a href="#" data-emulate-btn-press="" class="dropdown-item" data-value="'+(null==(__t=id)?"":_.escape(__t))+'">'+(null==(__t=text)?"":_.escape(__t))+"</a>\n";return __p}},"../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/orouser/templates/datagrid/action-permissions-field-view.html":(module,__unused_webpack_exports,__webpack_require__)=>{var _=__webpack_require__("./bundles/oroui/js/extend/underscore.js");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="field-name"',_.isEmpty(obj.description)||(__p+=' title="'+(null==(__t=description)?"":_.escape(__t))+'"'),__p+=">"+(null==(__t=label)?"":_.escape(__t))+'</div>\n<ul data-name="field-permissions-items" class="action-permissions"></ul>\n';return __p}},"../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/orouser/templates/datagrid/action-permissions-row-view.html":(module,__unused_webpack_exports,__webpack_require__)=>{var _=__webpack_require__("./bundles/oroui/js/extend/underscore.js");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+="";var labelId=_.uniqueId("label-");__p+="\n";var regionId=_.uniqueId("collapse-region-");__p+='\n<td class="grid-body-cell" colspan="'+(null==(__t=columnsCount)?"":_.escape(__t))+'" role="presentation">\n    <div role="row" aria-rowindex="'+(null==(__t=ariaRowIndex)?"":_.escape(__t))+'" class="entity-permission-container ',0===fields.length&&(__p+=" field-less"),__p+='">\n        <div role="gridcell" aria-colindex="1" class="permissions-cell collapse-expand-action-container">\n            <a href="#" class="collapse-action collapsed" role="button" title="'+(null==(__t=_.__("Expand"))?"":_.escape(__t))+'"\n                ',fields.length||(__p+='\n                    tabindex="-1"\n                '),__p+='\n                data-toggle="collapse" data-target="#'+(null==(__t=regionId)?"":_.escape(__t))+'"\n                aria-controls="'+(null==(__t=regionId)?"":_.escape(__t))+'" aria-expanded="false"\n                aria-label="'+(null==(__t=_.__("Expand")+"/"+_.__("Collapse"))?"":_.escape(__t))+'"></a>\n            <div id="'+(null==(__t=labelId)?"":_.escape(__t))+'" class="entity-name">'+(null==(__t=label)?"":_.escape(__t))+'</div>\n        </div>\n        <div role="gridcell" aria-colindex="2" class="permissions-cell action-permissions-container">\n            <ul data-name="action-permissions-items" class="action-permissions"></ul>\n        </div>\n        ',!0!==obj.readonlyMode&&(__p+='\n        <div role="gridcell" aria-colindex="3" class="permissions-cell entity-row-action more-bar-holder" data-name="row-action"></div>\n        '),__p+="\n    </div>\n    ",obj.fields&&fields.length&&(__p+='\n    <div id="'+(null==(__t=regionId)?"":_.escape(__t))+'" class="collapse fields-list" data-name="fields-list" data-toggle="false" data-collapsed-title="'+(null==(__t=_.__("Expand"))?"":_.escape(__t))+'" data-expanded-title="'+(null==(__t=_.__("Collapse"))?"":_.escape(__t))+'"\n         role="region" aria-labelledby="'+(null==(__t=labelId)?"":_.escape(__t))+'"></div>\n    '),__p+="\n</td>\n"}return __p}},"../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/orouser/templates/datagrid/permission/permission-readonly-view.html":(module,__unused_webpack_exports,__webpack_require__)=>{var _=__webpack_require__("./bundles/oroui/js/extend/underscore.js");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="action-permissions__item-wrapper readonly ',noAccess&&(__p+=" action-permissions__item-wrapper--no-access"),__p+='"\n     title="'+(null==(__t=label)?"":_.escape(__t))+" - "+(null==(__t=access_level_label)?"":_.escape(__t))+'">\n    <span class="action-permissions__label" data-toggle="tooltip">'+(null==(__t=label)?"":_.escape(__t))+'</span>\n    -\n    <span class="action-permissions__value" data-toggle="tooltip">'+(null==(__t=access_level_label)?"":_.escape(__t))+"</span>\n</div>\n";return __p}},"../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/orouser/templates/datagrid/permission/permission-view.html":(module,__unused_webpack_exports,__webpack_require__)=>{var _=__webpack_require__("./bundles/oroui/js/extend/underscore.js");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+="";var togglerId=_.uniqueId("dropdown-");__p+='\n<div\n    data-toggle="dropdown" role="button" id="'+(null==(__t=togglerId)?"":_.escape(__t))+'"\n    aria-label="'+(null==(__t=_.__("oro.role.permission.edit_label",{label}))?"":_.escape(__t))+'"\n    aria-haspopup="true" aria-expanded="false"\n    data-target="'+(null==(__t=dropdownTarget)?"":_.escape(__t))+'"\n    data-placement="bottom-end"\n    class="dropdown-toggle dropdown-toggle--no-caret action-permissions__item-wrapper',isAccessLevelChanged&&(__p+=" action-permissions__item-wrapper_changed"),__p+='"\n>\n    <span class="action-permissions__label" data-toggle="tooltip">'+(null==(__t=label)?"":_.escape(__t))+'</span>\n    -\n    <a href="#"\n       class="action-permissions__dropdown-toggle"\n       data-emulate-btn-press=""\n       data-toggle="tooltip">'+(null==(__t=access_level_label)?"":_.escape(__t))+'</a>\n</div>\n<div class="dropdown-menu dropdown-menu__permissions-item" aria-labelledby="'+(null==(__t=togglerId)?"":_.escape(__t))+'">\n    <div data-role="dropdown-menu-content"></div>\n</div>\n'}return __p}},"../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/orouser/templates/datagrid/role-permissions-action-view.html":(module,__unused_webpack_exports,__webpack_require__)=>{var _=__webpack_require__("./bundles/oroui/js/extend/underscore.js");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+="";var togglerId=_.uniqueId("dropdown-");__p+='\n<a href="#" role="button" data-toggle="dropdown" data-placement="bottom-end" data-modifiers="'+(null==(__t=JSON.stringify({preventOverflow:{enabled:!1},hide:{enabled:!1}}))?"":_.escape(__t))+'"\n   class="dropdown-toggle dropdown-toggle--no-caret role-permissions-action-launcher"\n   id="'+(null==(__t=togglerId)?"":_.escape(__t))+'" aria-haspopup="true" aria-expanded="false" aria-label="'+(null==(__t=_.__("oro.role.permission.mass_edit_label"))?"":_.escape(__t))+'">\n    <span class="fa-ellipsis-h fa--no-offset " aria-hidden="true"></span>\n</a>\n<div class="dropdown-menu dropdown-menu__action-cell dropdown-menu__role-permissions-action" aria-labelledby="'+(null==(__t=togglerId)?"":_.escape(__t))+'">\n    <div data-role="dropdown-menu-content"></div>\n</div>\n'}return __p}},"../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/orouser/templates/role/capability-group.html":(module,__unused_webpack_exports,__webpack_require__)=>{var _=__webpack_require__("./bundles/oroui/js/extend/underscore.js");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",editable&&(__p+='\n<button type="button" data-name="capabilities-select-all" class="'+(null==(__t=selectAllClassName)?"":_.escape(__t))+' role-capability__select-all"\n',allSelected&&(__p+='disabled="disabled"'),__p+="\n>"+(null==(__t=_.__("oro.role.capability_block.select_all"))?"":_.escape(__t))+"</button>\n"),__p+='\n<h2 class="role-capability__group-title">\n    <span class="role-capability__group-own-title">'+(null==(__t=label)?"":_.escape(__t))+'</span>\n    <span class="role-capability__group-common-title">'+(null==(__t=_.__("oro.role.capability_block.label"))?"":_.escape(__t))+'</span>\n</h2>\n<div data-name="capability-empty-items" class="role-capability__empty-items">\n    '+(null==(__t=_.__("oro.role.capability_block.no_capabilities_available"))?"":_.escape(__t))+'\n</div>\n<div data-name="capability-items" class="role-capability__items"></div>\n';return __p}},"../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/orouser/templates/role/capability-item.html":(module,__unused_webpack_exports,__webpack_require__)=>{var _=__webpack_require__("./bundles/oroui/js/extend/underscore.js");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",editable?(__p+="\n<label ",description&&(__p+=' title="'+(null==(__t=description)?"":_.escape(__t))+'"'),__p+='\n    class="checkbox-label role-capability__item-label',isAccessLevelChanged&&(__p+=" role-capability__item-label_changed"),__p+='"\n    ><input type="checkbox" value="'+(null==(__t=selected_access_level)?"":_.escape(__t))+'"\n        ',access_level===selected_access_level&&(__p+=" checked"),__p+=">"+(null==(__t=label)?"":_.escape(__t))+"</label>\n"):(__p+="\n<div",description&&(__p+=' title="'+(null==(__t=description)?"":_.escape(__t))+'"'),__p+=' class="role-capability__item-label',noAccess&&(__p+=" role-capability__item-label--no-access"),__p+='">'+(null==(__t=label)?"":_.escape(__t))+"</div>\n"),__p+="\n";return __p}},"./bundles/oroaddress/js/address-book.js":(e,t,s)=>{var o,i;o=[s("./bundles/oroui/js/extend/jquery.js"),s("./bundles/oroui/js/extend/underscore.js"),s("./bundles/oroui/js/app/views/base/view.js"),s("./bundles/orotranslation/js/translator.js"),s("./bundles/oroui/js/mediator.js"),s("./bundles/oroui/js/messenger.js"),s("./bundles/orowindows/js/widget/dialog-widget.js"),s("./bundles/oroaddress/js/mapservice/googlemaps.js"),s("./bundles/oroaddress/js/address/view.js"),s("./bundles/oroaddress/js/address/collection.js"),s("./bundles/oroui/js/delete-confirmation.js")],void 0===(i=function(e,t,s,o,i,n,r,a,l,d,c){"use strict";return s.extend({isEmpty:!1,options:{mapOptions:{zoom:12},template:null,addressListUrl:null,addressCreateUrl:null,addressUpdateUrl:null,addressDeleteUrl:null,addressesContainerHtml:'<div class="map-address-list"></div>',noDataContainerHtml:'<div class="no-data"></div>',mapView:a,addressMapOptions:{},addressTagName:"div",allowToRemovePrimary:!1,confirmRemove:!0,confirmRemoveComponent:c,showMap:!0},noDataMessage:o("Empty Address Book"),attributes:{class:"map-box"},constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.options=t.defaults(e||{},this.options),this.options.collection=this.options.collection||new d,this.options.collection.url=this._getUrl("addressListUrl"),this.listenTo(this.getCollection(),"activeChange",this.activateAddress),this.listenTo(this.getCollection(),"add",this.addAddress),this.listenTo(this.getCollection(),"reset",this.addAll),this.listenTo(this.getCollection(),"remove",this.onAddressRemove),this._initMainContainers(),this.options.showMap&&this.initializeMap()},initializeMap:function(){if(this.mapView)return;this.$mapContainerFrame=this.$el.find(".map-visual-frame"),this.$mapContainerFrame.length||(this.$mapContainerFrame=e('<div class="map-visual-frame"/>').appendTo(this.$el)),this.$mapContainerFrame.toggle(!this.isEmpty),this.mapView=new this.options.mapView({mapOptions:this.options.mapOptions,el:this.$mapContainerFrame});const t=this.getCollection().find({active:!0});t&&this.activateAddress(t)},disposeMap:function(){this.mapView&&(this.$mapContainerFrame.remove(),this.mapView.dispose(),delete this.$mapContainerFrame,delete this.mapView)},_initMainContainers:function(){this.$noDataContainer=e(this.options.noDataContainerHtml).text(this.noDataMessage),this.$addressesContainer=e(this.options.addressesContainerHtml),e.contains(this.$el[0],this.$addressesContainer[0])||this.$el.append(this.$addressesContainer),e.contains(this.$el[0],this.$noDataContainer[0])||this.$el.append(this.$noDataContainer)},_getUrl:function(e,...s){return t.isFunction(this.options[e])?this.options[e].apply(this,s):this.options[e]},getCollection:function(){return this.options.collection},onAddressRemove:function(){if(!this.getCollection().where({active:!0}).length){const e=this.getCollection().where({primary:!0});e.length?e[0].set("active",!0):this.getCollection().length&&this._activateFirstAddress()}},_activateFirstAddress:function(){this.getCollection().at(0).set("active",!0)},addAll:function(e){this.$addressesContainer.empty(),e.length>0?(this._hideEmptyMessage(),e.each((function(e){this.addAddress(e)}),this)):this._showEmptyMessage(),1===e.length?this._activateFirstAddress():this._activatePreviousAddress(),this.$el.trigger("content:changed")},_hideEmptyMessage:function(){this.isEmpty=!1,this.$noDataContainer.hide(),this.$mapContainerFrame&&this.$mapContainerFrame.show(),this.$addressesContainer.show()},_showEmptyMessage:function(){this.isEmpty=!0,this.$noDataContainer.show(),this.$mapContainerFrame&&this.$mapContainerFrame.hide(),this.$addressesContainer.hide()},_activatePreviousAddress:function(){if(void 0!==this.activeAddress){const e=this.getCollection().where({id:this.activeAddress.get("id")});e.length&&e[0].set("active",!0)}},addAddress:function(e){if(!this.$el.find("#address-book-"+e.id).length){const t=new l({model:e,map:this.options.addressMapOptions,template:this.options.template,allowToRemovePrimary:this.options.allowToRemovePrimary,confirmRemove:this.options.confirmRemove,confirmRemoveComponent:this.options.confirmRemoveComponent,addressDeleteUrl:this._getUrl("addressDeleteUrl",e),tagName:this.options.addressTagName,isAddressHtmlFormatted:this.options.isAddressHtmlFormatted});t.on("edit",this.editAddress.bind(this)),this.$addressesContainer.append(t.render().$el)}},editAddress:function(e,t){this._openAddressEditForm(o("Update Address"),this._getUrl("addressUpdateUrl",t))},createAddress:function(){this._openAddressEditForm(o("Add Address"),this._getUrl("addressCreateUrl"))},_openAddressEditForm:function(e,t){this.addressEditDialog||(this.addressEditDialog=new r({url:t,title:e,regionEnabled:!1,incrementalPosition:!1,dialogOptions:{modal:!0,resizable:!1,width:585,autoResize:!0,close:()=>{delete this.addressEditDialog}}}),this.addressEditDialog.render(),i.on("page:request",(()=>{this.addressEditDialog&&this.addressEditDialog.remove()})),this.addressEditDialog.on("formSave",(()=>{this.addressEditDialog.remove(),n.notificationFlashMessage("success",o("Address saved")),this.reloadAddresses()})))},reloadAddresses:function(){this.getCollection().fetch({reset:!0})},activateAddress:function(e){e.get("primary")||(this.activeAddress=e),this.mapView&&this.mapView.updateMap(e.getSearchableString(),e.get("label"))}})}.apply(t,o))||(e.exports=i)},"./bundles/oroaddress/js/address/collection.js":(e,t,s)=>{var o,i;o=[s("./bundles/oroui/js/extend/underscore.js"),s("./bundles/oroui/js/extend/backbone.js"),s("./bundles/oroaddress/js/address/model.js")],void 0===(i=function(e,t,s){"use strict";return t.Collection.extend({model:s,constructor:function e(...t){e.__super__.constructor.apply(this,t)},initialize:function(){this.on("change:active",this.onActiveChange,this)},onActiveChange:function(t){if(t.get("active")){const s=this.where({active:!0});e.each(s,(function(e){e.get("id")!==t.get("id")&&e.set("active",!1)})),this.trigger("activeChange",t)}}})}.apply(t,o))||(e.exports=i)},"./bundles/oroaddress/js/address/model.js":(e,t,s)=>{var o,i;o=[s("./bundles/oroui/js/extend/backbone.js")],void 0===(i=function(e){"use strict";return e.Model.extend({defaults:{label:"",namePrefix:"",firstName:"",middleName:"",lastName:"",nameSuffix:"",organization:"",street:"",street2:"",city:"",country:"",countryIso2:"",countryIso3:"",postalCode:"",region:"",regionText:"",regionCode:"",primary:!1,types:[],active:!1},constructor:function e(t,s){e.__super__.constructor.call(this,t,s)},getSearchableString:function(){let e="";return this.get("country")&&(e+=this.get("country")+", "),this.get("region")&&(e+=this.get("region")+", "),this.get("city")&&(e+=this.get("city")+", "),this.get("street")&&(e+=this.get("street")+" "),this.get("street2")&&(e+=this.get("street2")+" "),this.get("postalCode")&&(e+=this.get("postalCode")+", "),e}})}.apply(t,o))||(e.exports=i)},"./bundles/oroaddress/js/address/view.js":(e,t,s)=>{var o;void 0===(o=function(e){"use strict";const t=s("./bundles/oroui/js/extend/jquery.js"),o=s("./bundles/oroui/js/extend/underscore.js"),i=s("./bundles/oroui/js/app/views/base/view.js"),n=s("./bundles/oroui/js/mediator.js"),r=s("./bundles/orolocale/js/formatter/address.js"),a=s("./bundles/oroui/js/delete-confirmation.js"),l=s("./bundles/orotranslation/js/translator.js"),d=s("./bundles/oroui/js/app/services/load-modules.js"),c=i.extend({tagName:"div",attributes:{class:"map-item"},confirmRemoveComponent:a,confirmRemoveMessages:{title:l("Delete Confirmation"),content:l("Are you sure you want to delete this item?"),okText:l("Yes, Delete"),cancelText:l("Cancel")},events:{click:"activate","click .item-edit-button":"edit","click .item-remove-button":"close"},defaultMapping:{namePrefix:"prefix",nameSuffix:"suffix",firstName:"first_name",middleName:"middle_name",lastName:"last_name",organization:"organization",street:"street",street2:"street2",city:"city",country:"country",countryIso2:"country_iso2",countryIso3:"country_iso3",postalCode:"postal_code",region:"region",regionText:"region",regionCode:"region_code",phone:"phone"},options:{map:{},allowToRemovePrimary:!1,confirmRemove:!1,addressDeleteUrl:null,isAddressHtmlFormatted:!1},constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.options=o.defaults(e||{},this.options),this.mapping=o.extend({},this.defaultMapping,this.options.map||{}),this.options.confirmRemoveComponent&&(o.isString(this.options.confirmRemoveComponent)?this.confirmRemoveComponentPromise=d(this.options.confirmRemoveComponent):this.confirmRemoveComponent=this.options.confirmRemoveComponent),this.$el.attr("id","address-book-"+this.model.id),this.template=o.template(t(e.template||"#template-addressbook-item").html()),this.listenTo(this.model,"destroy",this.dispose),this.listenTo(this.model,"change:active",this.toggleActive)},dispose:function(e){if(!this.disposed)return delete this.confirmRemoveComponent,c.__super__.dispose.call(this)},activate:function(){this.model.set("active",!0)},toggleActive:function(){this.model.get("active")?this.$el.addClass("active"):this.$el.removeClass("active")},edit:function(){this.trigger("edit",this,this.model)},close:function(){this.model.get("primary")&&!this.options.allowToRemovePrimary?n.execute("showErrorMessage",l("Primary address can not be removed")):this.confirmClose(this.model.destroy.bind(this.model,{url:this.options.addressDeleteUrl,wait:!0}))},confirmClose:function(e){if(this.options.confirmRemove)if(this.confirmRemoveComponentPromise)this.confirmRemoveComponentPromise.then(function(t){if(this.disposed)return;const s=new this.confirmRemoveComponent(this.confirmRemoveMessages);this.subview("confirmRemoveView",s),s.on("ok",e).open(),this.confirmRemoveComponent=t,delete this.confirmRemoveComponentPromise}.bind(this));else{let t=this.subview("confirmRemoveView");void 0===t||t.disposed?(t=new this.confirmRemoveComponent(this.confirmRemoveMessages),this.subview("confirmRemoveView",t)):t.off("ok"),t.on("ok",e).open()}else e()},render:function(){const e=this.options.isAddressHtmlFormatted,t=this.model.toJSON(),s=this.prepareData(t);return t.formatted_address=r.format(s,null,"\n",e),t.searchable_string=this.model.getSearchableString(),t.isAddressHtmlFormatted=e,this.$el.append(this.template(t)),this.model.get("primary")&&this.activate(),this},prepareData:function(e){const t={},s=this.mapping;return e&&o.each(e,(function(e,o){s[o]&&(t[s[o]]=t[s[o]]||e)})),t}});return c}.call(t,s,t,e))||(e.exports=o)},"./bundles/oroaddress/js/region/collection.js":(e,t,s)=>{var o,i;o=[s("./bundles/oroui/js/extend/backbone.js"),s("./bundles/fosjsrouting/js/router.js"),s("./bundles/oroaddress/js/region/model.js"),s("./bundles/oroui/js/extend/underscore.js")],void 0===(i=function(e,t,s,o){"use strict";return e.Collection.extend({defaultOptions:{route:"oro_api_country_get_regions"},url:null,model:s,constructor:function e(...t){e.__super__.constructor.apply(this,t)},initialize:function(e,s){this.options=o.extend({},this.defaultOptions,s),this.url=t.generate(this.options.route)},setCountryId:function(e){this.url=t.generate(this.options.route,{country:e})}})}.apply(t,o))||(e.exports=i)},"./bundles/oroaddress/js/region/model.js":(e,t,s)=>{var o,i;o=[s("./bundles/oroui/js/extend/backbone.js")],void 0===(i=function(e){"use strict";return e.Model.extend({defaults:{country:"",code:"",name:""},constructor:function e(t,s){e.__super__.constructor.call(this,t,s)}})}.apply(t,o))||(e.exports=i)},"./bundles/oroaddress/js/region/view.js":(e,t,s)=>{var o;o=function(e,t,o){"use strict";const i=s("./bundles/oroui/js/extend/underscore.js"),n=s("./bundles/oroui/js/extend/jquery.js"),r=s("./bundles/oroaddress/js/region/collection.js"),a=s("./bundles/oroui/js/extend/backbone.js");let l=s("./bundles/oroui/js/app/services/module-config.js").A(o.id);return l=i.defaults({},l,{switchState:!1}),s("./bundles/oroui/js/extend/select2.js"),s("./bundles/oroform/js/extend/validate.js"),s("./bundles/oroui/js/input-widget-manager.js"),a.View.extend({events:{change:"selectionChanged",redraw:"redraw"},switchState:l.switchState,constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.target=n(e.target),this.$simpleEl="disable"!==this.switchState?n(e.simpleEl):null,this.$simpleEl&&(this.target.after(this.$simpleEl),this.$simpleEl.attr("type","text")),this.showSelect=e.showSelect,this.regionRequired=e.regionRequired,this.template=i.template(n("#region-chooser-template").html()),this.displaySelect2(this.showSelect),this.target.on("input-widget:init",(()=>{this.displaySelect2(this.showSelect)})),this.target.on("input-widget:refresh",(()=>{const e=this.collection&&this.collection.models.length>0||this.target.val();this.displaySelect2(e)})),e.collectionRoute&&!this.collection&&(this.collection=new r([],{route:e.collectionRoute})),this.listenTo(this.collection,"reset",this.render)},displaySelect2:function(e){e?(this.regionRequired&&this.addRequiredFlag(),this.switchInputWidget(e)):(this.switchInputWidget(e),this.regionRequired&&this.removeRequiredFlag())},addRequiredFlag:function(){const e=this.getInputLabel(this.target);e.hasClass("required")||e.addClass("required").find("em").html("*")},removeRequiredFlag:function(){const e=this.getInputLabel(this.target);e.hasClass("required")&&e.removeClass("required").find("em").html("&nbsp;")},getInputLabel:function(e){let t;const s=(i.result(e.data("select2"),"focusser")||e).attr("id");return s&&(t=n('label[for="'+s+'"]')),t&&t.length?t:e.parent().parent().find("label")},sync:function(){""===this.target.val()&&""!==this.$el.val()&&this.$el.trigger("change")},selectionChanged:function(){this.$el.trigger("value:changing");const e=this.target.closest("form").data("validator");e&&e.hideElementErrors(this.target[0]),this.redraw(),this.$el.trigger("value:changed")},redraw:function(){this.$simpleEl&&this.$simpleEl.hide();const e=this.$el.val();e?(this.collection.setCountryId(e),this.collection.fetch({reset:!0})):this.collection.reset([])},render:function(){if(this.collection.models.length>0){this.target.show(),this.displaySelect2(!0),this.target.find('option[value!=""]').remove(),this.target.append(this.template({regions:this.collection.models}));const e=this.target.data("selected-data")||"";this.target.select2("val",e),this.$simpleEl&&this.$simpleEl.hide().val("")}else this.target.hide(),this.target.inputWidget("val",""),this.displaySelect2(!1),this.$simpleEl&&this.$simpleEl.show()},switchInputWidget:function(e){"disable"===this.switchState?this.target.inputWidget("disable",!e):this.target.inputWidget(e?"show":"hide")}})}.call(t,s,t,e),void 0===o||(e.exports=o)},"./bundles/oroconsent/js/app/views/base-consent-item-view.js":(e,t,s)=>{var o;void 0===(o=function(e){"use strict";const t=s("./bundles/oroui/js/extend/underscore.js"),o=s("./bundles/oroui/js/extend/jquery.js"),i=s("../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/oroconsent/templates/frontend-dialog/dialog-actions.html"),n=s("./bundles/oroui/js/app/views/base/view.js"),r=s("./bundles/orofrontend/js/app/components/frontend-dialog-widget.js"),a=n.extend({optionNames:n.prototype.optionNames.concat(["consentId","consentTitle","consentCheckboxSelector","consentsFieldSelector","cmsPageData","required"]),events:{'change [data-role="consent-checkbox"]':"_onChecked","click a":"_onLinkClick"},consentId:null,consentTitle:null,consentCheckboxSelector:'[data-role="consent-checkbox"]',consentsFieldSelector:'[data-name="field__customer-consents"]',cmsPageData:null,required:null,$form:null,$valueField:null,constructor:function e(t){return e.__super__.constructor.call(this,t)},initialize:function(e){this.$form=this.$el.closest("form"),this.$valueField=this.$form.find(this.consentsFieldSelector),a.__super__.initialize.call(this,e),this._updateFromFieldToElement()},renderDialogWidget:function(){this._toggleSubmitButtonOnce=!0,this.subview("popup",new r({autoRender:!0,url:this.cmsPageData.url,title:this.consentTitle,simpleActionTemplate:!this.$valueField.length,renderActionsFromTemplate:!0,actionsTemplate:i,staticPage:!0,fullscreenMode:!1,dialogOptions:{modal:!0,resizable:!0,autoResize:!0,width:800,dialogClass:"consent-dialog-widget"}}));const e=e=>{this.changeCheckboxState(e),this.$valueField.trigger("change"),this.stopListening(this.subview("popup"))};this.listenToOnce(this.subview("popup"),{"frontend-dialog:accept":e.bind(void 0,!0),"frontend-dialog:cancel":e.bind(void 0,!1),"frontend-dialog:close":e.bind(void 0,!1),dispose:e.bind(void 0,!1),renderComplete:this.onRenderComplete})},changeCheckboxState:function(e){this.$(this.consentCheckboxSelector).prop("checked",e),this._updateFormElementToField(e)},_onChecked:function(e){o(e.target).is(":checked")&&this.cmsPageData&&(e.stopPropagation(),this.renderDialogWidget()),o(e.target).is(":checked")&&this.cmsPageData||(this._updateFormElementToField(o(e.target).is(":checked")),this.$valueField.trigger("change"))},_onLinkClick:function(e){e.preventDefault(),this.cmsPageData&&this.renderDialogWidget()},_updateFormElementToField:function(e){let s=this.$valueField.val();t.isEmpty(s)&&(s="[]");const o=t.indexBy(JSON.parse(s),"consentId");e?o[this.consentId]={consentId:this.consentId,cmsPageId:this.cmsPageData?this.cmsPageData.id:null}:o[this.consentId]&&delete o[this.consentId],this.$valueField.val(JSON.stringify(t.toArray(o)))},_updateFromFieldToElement:function(){const e=this.$valueField.val();t.isEmpty(e)||t.has(t.indexBy(JSON.parse(e),"consentId"),this.consentId)&&this.changeCheckboxState(!0)},onRenderComplete:function(){this.disableSubmitElement(),this.subview("popup").widget.on("scroll",this.onScroll.bind(this))},disableSubmitElement:function(){const e=this.subview("popup"),t=o(e.el).outerHeight(!0)>e.widget.outerHeight();this.updateSubmitElementState(t)},onScroll:function(){const e=Math.floor(o(this.subview("popup").el).outerHeight(!0)),t=this.subview("popup").widget,s=e<Math.floor(t.outerHeight()+t.scrollTop());this._toggleSubmitButtonOnce&&this.updateSubmitElementState(!s),s&&(this._toggleSubmitButtonOnce=!1)},updateSubmitElementState:function(e){const t=this.subview("popup").actionsEl.find("[type=submit]");t.length&&(t.toggleClass("disabled",e),t.attr("disabled",e))}});return a}.call(t,s,t,e))||(e.exports=o)},"./bundles/oroconsent/js/app/views/consents-group-view.js":(e,t,s)=>{var o;void 0===(o=function(e){"use strict";const t=s("./bundles/oroui/js/app/views/base/view.js"),o=s("./bundles/oroui/js/extend/jquery.js"),i=s("./bundles/oroui/js/extend/underscore.js"),n=s("./bundles/oroui/js/modal.js"),r=t.extend({optionNames:t.prototype.optionNames.concat(["confirmModalTitle","confirmModalContent","confirmModalOkText","confirmModalCancelText","confirmModalOkButtonClass","confirmModalCancelButtonClass"]),confirmModal:n,confirmModalTitle:i.__("oro.consent.frontend.confirm_modal.title"),confirmModalContent:i.__("oro.consent.frontend.confirm_modal.message"),confirmModalOkText:i.__("oro.consent.frontend.confirm_modal.ok"),confirmModalCancelText:i.__("oro.consent.frontend.confirm_modal.cancel"),confirmModalOkButtonClass:"btn ok btn--info",confirmModalCancelButtonClass:"btn cancel",constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.initModal(),this.$form=this.$el.closest("form"),this.$consents=this.$el.find('[data-role="consent-checkbox"]'),this.delegateEvents(),this._removeValidationRules(),r.__super__.initialize.call(this,e)},initModal:function(){this.confirmModal=new this.confirmModal({title:this.confirmModalTitle,content:this.confirmModalContent,okText:this.confirmModalOkText,cancelText:this.confirmModalCancelText,okButtonClass:this.confirmModalOkButtonClass,cancelButtonClass:this.confirmModalCancelButtonClass,disposeOnHidden:!1}),this.listenTo(this.confirmModal,"ok",this._onModalConfirmed.bind(this))},delegateEvents:function(e){r.__super__.delegateEvents.call(this,e),this.$form&&this.$form.length&&this.$form.on("submit"+this.eventNamespace(),this._onFormSubmit.bind(this))},undelegateEvents:function(){this.$form&&this.$form.length&&this.$form.off(this.eventNamespace()),r.__super__.undelegateEvents.call(this)},_removeValidationRules:function(){this.$consents.removeAttr("data-validation")},_onFormSubmit:function(e){this.$consents.filter((function(){return this.defaultChecked&&o(this).is(":not(:checked)")})).length&&(e.preventDefault(),this.confirmModal.open())},_onModalConfirmed:function(){this.undelegateEvents(),this.$form.submit(),this.delegateEvents()},dispose:function(){this.undelegateEvents(),delete this.$form,delete this.$consents,this.confirmModal&&(this.confirmModal.dispose(),delete this.confirmModal),r.__super__.dispose.call(this)}});return r}.call(t,s,t,e))||(e.exports=o)},"./bundles/orocustomer/js/address-book.js":(e,t,s)=>{var o;void 0===(o=function(e){"use strict";const t=s("./bundles/oroaddress/js/address-book.js"),o=s("./bundles/oroui/js/extend/jquery.js"),i=s("./bundles/oroui/js/extend/underscore.js"),n=s("./bundles/oroui/js/mediator.js"),r=s("./bundles/oroui/js/viewport-manager.js").A,a=t.extend({optionNames:t.prototype.optionNames.concat(["useFormDialog","mapViewport"]),useFormDialog:!0,checkViewport:!1,mapViewport:"all",listen(){return{[`viewport:${this.mapViewport} mediator`]:"_checkMapVisibility"}},constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.checkViewport=i.isUndefined(e.showMap)?this.options.showMap:e.showMap,this.checkViewport&&r.isApplicable(this.mapViewport)&&(e.showMap=!1),a.__super__.initialize.call(this,e)},_openAddressEditForm:function(e,t){this.useFormDialog?a.__super__._openAddressEditForm.call(this,e,t):n.execute("redirectTo",{url:t},{redirect:!0})},addAll:function(e){a.__super__.addAll.call(this,e);let t=o(this.options.manageAddressesLink);t.removeClass("hidden"),"LI"!==t.prop("nodeName")&&["OL","UL"].includes(this.$addressesContainer.prop("nodeName"))&&(t.wrap("<li></li>"),t=t.parent()),t.appendTo(this.$addressesContainer)},_checkMapVisibility:function(e){this.checkViewport&&(this.options.showMap=!e.matches,this.options.showMap?this.initializeMap():this.disposeMap())}});return a}.call(t,s,t,e))||(e.exports=o)},"./bundles/orocustomer/js/app/components/customer-address-component.js":(e,t,s)=>{var o;void 0===(o=function(e){"use strict";const t=s("./bundles/oroui/js/app/components/base/component.js"),o=s("./bundles/oroui/js/extend/jquery.js"),i=s("./bundles/oroui/js/extend/underscore.js"),n=t.extend({targetElement:null,options:{defaultsSelector:'[name$="[defaults][default][]"]',typesSelector:'[name$="[types][]"]',containerSelector:'[data-content="address-form"]'},constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.options=i.defaults(e||{},this.options),this.targetElement=o(e._sourceElement),e.disableDefaultWithoutType&&this.disableDefaultWithoutType(),e.disableRepeatedTypes&&this.disableRepeatedTypes()},dispose:function(){!this.disposed&&this.targetElement&&(this.targetElement.off("click",this.options.defaultsSelector),this.targetElement.off("click",this.options.typesSelector),n.__super__.dispose.call(this))},disableDefaultWithoutType:function(){i.each(this.targetElement.find(this.options.defaultsSelector),this.processDefaultsChange,this),this.targetElement.on("click",this.options.defaultsSelector,function(e){this.processDefaultsChange(e.target)}.bind(this)),i.each(this.targetElement.find(this.options.typesSelector),this.processTypeChange,this),this.targetElement.on("click",this.options.typesSelector,function(e){this.processTypeChange(e.target)}.bind(this))},processDefaultsChange:function(e){e.checked&&o(e).closest(this.options.containerSelector).find(this.options.typesSelector+'[value="'+e.value+'"]').prop("checked",!0)},processTypeChange:function(e){e.checked||o(e).closest(this.options.containerSelector).find(this.options.defaultsSelector+'[value="'+e.value+'"]').prop("checked",!1)},disableRepeatedTypes:function(){this.targetElement.on("click",this.options.defaultsSelector,function(e){e.target.checked&&this.targetElement.find(this.options.defaultsSelector+'[value="'+e.target.value+'"]').not(e.target).prop("checked",!1)}.bind(this))}});return n}.call(t,s,t,e))||(e.exports=o)},"./bundles/orocustomer/js/app/components/customer-user-role-component.js":(e,t,s)=>{var o;void 0===(o=function(e){"use strict";const t=s("./bundles/oroui/js/app/components/base/component.js"),o=s("./bundles/oroui/js/mediator.js"),i=s("./bundles/oroui/js/extend/jquery.js"),n=s("./bundles/orotranslation/js/translator.js"),r=s("./bundles/oroui/js/modal.js"),a=t.extend({options:{customerFieldId:"#customerFieldId",datagridName:"customer-users-datagrid",originalValue:null,previousValueDataAttribute:"previousValue",enableConfirmation:!1,dialogOptions:{title:n("oro.customer.customer_user_role.change_customer_confirmation_title"),okText:n("oro.customer.customer_user_role.continue"),cancelText:n("oro.customer.customer_user_role.cancel"),content:n("oro.customer.customer_user_role.content")}},customerField:null,constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.options=i.extend(!0,{},this.options,e),this.customerField=this.options._sourceElement.find(this.options.customerFieldId),this.customerField.data(this.options.previousValueDataAttribute,this.options.originalValue),this.options._sourceElement.on("change",this.options.customerFieldId,this.onCustomerSelectorChange.bind(this))},onCustomerSelectorChange:function(e){const t=e.target.value;t!==this.options.originalValue&&this.options.enableConfirmation?this._getCustomerConfirmDialog((function(){this._updateGridAndSaveParameters(t)}),(function(){this.customerField.inputWidget("val",this.customerField.data(this.options.previousValueDataAttribute)),this.customerField.data(this.options.previousValueDataAttribute,this.options.originalValue)})):this._updateGridAndSaveParameters(t)},_updateGridAndSaveParameters:function(e){this._updateCustomerUserGrid(e),this.customerField.data(this.options.previousValueDataAttribute,e)},dispose:function(){this.disposed||(delete this.customerField,this.options._sourceElement.off("change"),a.__super__.dispose.call(this))},_getCustomerConfirmDialog:function(e,t){const s=this._createChangeCustomerConfirmationDialog();s.on("ok",e.bind(this)).on("cancel",t.bind(this)),s.open()},_createChangeCustomerConfirmationDialog:function(){return new r(this.options.dialogOptions)},_updateCustomerUserGrid:function(e){e?o.trigger("datagrid:setParam:"+this.options.datagridName,"newCustomer",e):o.trigger("datagrid:removeParam:"+this.options.datagridName,"newCustomer"),o.trigger("datagrid:setParam:"+this.options.datagridName,"changeCustomerAction",1),o.trigger("datagrid:doReset:"+this.options.datagridName)}});return a}.call(t,s,t,e))||(e.exports=o)},"./bundles/orocustomer/js/app/components/frontend-customer-address-book-component.js":(e,t,s)=>{var o;void 0===(o=function(e){"use strict";const t=s("./bundles/oroui/js/app/components/base/component.js"),o=s("./bundles/oroui/js/extend/underscore.js"),i=s("./bundles/fosjsrouting/js/router.js"),n=s("./bundles/orocustomer/js/address-book.js"),r=s("./bundles/oroui/js/delete-confirmation.js");return t.extend({defaultOptions:{entityId:null,addressListUrl:null,addressCreateUrl:null,addressUpdateRouteName:null,addressDeleteRouteName:null,currentAddresses:[],useFormDialog:!1,template:"",manageAddressesLink:"",showMap:!0},constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){e=o.defaults(e||{},this.defaultOptions),new n({el:e._sourceElement.get(0),template:e.template,manageAddressesLink:e.manageAddressesLink,addressListUrl:e.addressListUrl,addressCreateUrl:e.addressCreateUrl,addressUpdateUrl:function(t){return i.generate(e.addressUpdateRouteName,{id:t.get("id"),entityId:t.get("ownerId")})},addressDeleteUrl:function(t){return i.generate(e.addressDeleteRouteName,{addressId:t.get("id"),entityId:t.get("ownerId")})},addressesContainerHtml:'<ul class="map-address-list"></ul>',addressTagName:"li",addressMapOptions:{phone:"phone"},useFormDialog:e.useFormDialog,mapViewport:e.mapViewport,allowToRemovePrimary:!0,confirmRemove:!0,confirmRemoveComponent:r,showMap:e.showMap}).getCollection().reset(JSON.parse(e.currentAddresses)),e._sourceElement.children(".view-loading").remove()}})}.call(t,s,t,e))||(e.exports=o)},"./bundles/orolocale/js/formatter/address.js":(e,t,s)=>{var o;void 0===(o=function(e){"use strict";const t=s("./bundles/oroui/js/extend/underscore.js"),o=s("./bundles/orolocale/js/locale-settings.js"),i=s("./bundles/orolocale/js/formatter/name.js");return{LTRAddressParts:o.getAddressLTRParts(),formats:o.getAddressFormats(),format:function(e,t,s,n){t||(t=o.isFormatAddressByAddressCountry()?e.country_iso2:o.getCountry()),s=s||"<br/>";let r=this.getAddressFormat(t).replace(/%(\w+)%/g,((s,r)=>{const a=r.toLowerCase();let l="";return l="name"===a?i.format(e,o.getCountryLocale(t)):"street"===a?(e.street||"")+" "+(e.street2||""):"street1"===a?e.street:e[a],l&&r!==a&&(l=l.toLocaleUpperCase()),n?this.doFormatWithHtml(a,l):l||""})),a=r.split("\\n");if(a=a.filter((function(e){return""!==e.trim()})),"function"==typeof s){for(let e=0;e<a.length;e++)a[e]=s(a[e]);r=a.join("")}else r=a.join(s);return r.replace(/ +/g," ")},getAddressFormat:function(e){return this.formats.hasOwnProperty(e)||(e=o.getCountry()),this.formats[e]},doFormatWithHtml(e,s){if(!e||!s)return"";const o=e.replace(/_/g,"-"),i=`address-part-${o}`;return this.LTRAddressParts.includes(e)?`<bdo class="${i}" data-part="${o}" dir="ltr">${t.escape(s)}</bdo>`:`<span class="${i}" data-part="${o}">${t.escape(s)}</span>`}}}.call(t,s,t,e))||(e.exports=o)},"./bundles/orolocale/js/formatter/name.js":(e,t,s)=>{var o,i;o=[s("./bundles/orolocale/js/locale-settings.js")],void 0===(i=function(e){"use strict";return{formats:e.getNameFormats(),formatCache:{},format:function(t,s){return s||(s=e.getLocale()),this.getNameFormat(s).replace(/%(\w+)%/g,(function(e,s){const o=s.toLowerCase();let i="";return t.hasOwnProperty(o)&&(i=t[o],s!==o&&(i=i.toLocaleUpperCase())),i||""})).replace(/ +/g," ").replace(/^\s+|\s+$/g,"")},getNameFormat:function(t){if(!this.formatCache.hasOwnProperty(t)){const s=e.getLocaleFallback(t);let o=null;for(let e=0;e<s.length;e++)if(this.formats.hasOwnProperty(s[e])){o=this.formats[s[e]];break}if(!o)throw new Error("Can't find name format for locale "+t);this.formatCache[t]=o}return this.formatCache[t]}}}.apply(t,o))||(e.exports=i)},"./bundles/oroui/js/app/models/base/routing-collection.js":(e,t,s)=>{var o,i;o=[s("./bundles/oroui/js/extend/underscore.js"),s("./bundles/orotranslation/js/translator.js"),s("./bundles/oroui/js/extend/chaplin.js"),s("./bundles/oroui/js/app/models/base/model.js"),s("./bundles/oroui/js/app/models/route-model.js"),s("./bundles/oroui/js/app/models/base/collection.js")],void 0===(i=function(e,t,s,o,i,n){"use strict";const r=n.extend({_route:null,_state:null,routeDefaults:function(){return{routeName:"",routeQueryParameterNames:[]}},stateDefaults:{},_lastUrl:null,constructor:function e(...t){e.__super__.constructor.apply(this,t)},initialize:function(e,t){t||(t={}),this.on("error",this._onErrorResponse,this),this._state=this._createState(t.state),this._state.on("change",this.trigger.bind(this,"stateChange")),this._route=this._createRoute(t.routeParameters),this._route.on("change",this.trigger.bind(this,"routeChange")),this._route.on("change",this.checkUrlChange,this),this.on("add",this._onAdd),this.on("remove",this._onRemove),r.__super__.initialize.call(this,e,t)},_createState:function(t){return new o(e.extend({},this._mergeAllPropertyVersions("stateDefaults"),t))},_createRoute:function(t){return new i(e.extend({},this._mergeAllPropertyVersions("routeDefaults"),t))},_mergeAllPropertyVersions:function(t){let o;const i={},n=s.utils.getAllPropertyVersions(this,t);for(let t=0;t<n.length;t++)o=n[t],e.isFunction(o)&&(o=o.call(this)),e.extend(i,o);return i},getRouteParameters:function(){return this._route.serialize()},getState:function(){return this._state.serialize()},url:function(){return this._route.getUrl()},sync:function(e,t,s){return this.beginSync(),this._lastUrl=s.url||this.url(),this.once("sync error",this.finishSync,this),r.__super__.sync.call(this,e,t,s)},parse:function(e){return e.data},checkUrlChange:function(){this.url()!==this._lastUrl&&this.fetch()},serializeExtraData:function(){return{route:this._route.serialize(),state:this._state.serialize(),syncState:this.syncState()}},_onErrorResponse:function(e,t){this.finishSync()},_onAdd:function(){},_onRemove:function(){},dispose:function(){this._route.dispose(),this._state.dispose(),r.__super__.dispose.call(this)}});return e.extend(r.prototype,s.SyncMachine),r}.apply(t,o))||(e.exports=i)},"./bundles/oroui/js/app/views/dropdown-menu-collection-view.js":(e,t,s)=>{var o;void 0===(o=function(e){"use strict";const t=s("./bundles/oroui/js/extend/underscore.js"),o=s("./bundles/orotranslation/js/translator.js"),i=s("./bundles/oroui/js/app/views/base/collection-view.js"),n=s("./bundles/oroui/js/app/views/base/view.js"),r=s("../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/oroui/templates/dropdown-menu-collection--item.html"),a=i.extend({tagName:"div",className:"dropdown-menu dropdown-menu-collection",animationDuration:0,listSelector:'[data-name="list"]',loadingSelector:'[data-name="loading"]',fallbackSelector:'[data-name="fallback"]',loadingText:o("Loading..."),fallbackText:o("No matches found"),events:{"click li":"onItemClick"},listen:{"sync collection":"onCollectionSync","syncStateChange collection":"onCollectionSyncStateChange"},template:t.template(['<div class="dropdown-item" data-name="fallback"><%- fallbackText %></div>','<div class="dropdown-item" data-name="loading"><%- loadingText %></div>','<ul class="list-unstyled" data-name="list" role="menu"></ul>'].join("")),constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){if(t.extend(this,t.pick(e,["loadingText","fallbackText","keysMap"])),e.keysMap){const t=e.keysMap,s=this.itemView=this.itemView.extend({getTemplateData:function(){const e=s.__super__.getTemplateData.call(this);return e.id=t.id&&e[t.id],e.text=t.text&&e[t.text],e}})}a.__super__.initialize.call(this,e)},getTemplateData:function(){const e=a.__super__.getTemplateData.call(this);return t.extend(e,t.pick(this,["loadingText","fallbackText"])),e},itemView:n.extend({tagName:"li",template:r}),onItemClick:function(e){e.preventDefault(),e.stopPropagation();const s=t.find(this.subviews,(function(t){return t.el===e.currentTarget}));s&&this.trigger("selected",s.model.toJSON())},onCollectionSync:function(){this.$el.trigger("content:changed")},onCollectionSyncStateChange:function(){t.defer((()=>{this.$el.trigger("content:changed")}))}});return a}.call(t,s,t,e))||(e.exports=o)},"./bundles/orouser/js/components/password-generate.js":(e,t,s)=>{var o;void 0===(o=function(e){"use strict";const t=s("./bundles/oroui/js/app/components/base/component.js"),o=s("./bundles/oroui/js/extend/jquery.js");return t.extend({constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.$el=o(e.checkbox),this.passwordInput=o(e.passwordInput),this.togglePassword(),this.$el.click(this.togglePassword.bind(this))},togglePassword:function(){this.$el.is(":checked")?this.passwordInput.attr("disabled",!0):this.passwordInput.attr("disabled",!1)}})}.call(t,s,t,e))||(e.exports=o)},"./bundles/orouser/js/components/role/capability-set-component.js":(e,t,s)=>{var o;void 0===(o=function(e){"use strict";const t=s("./bundles/oroui/js/extend/underscore.js"),o=s("./bundles/oroui/js/mediator.js"),i=s("./bundles/oroui/js/app/components/base/component.js"),n=s("./bundles/oroui/js/app/models/base/collection.js"),r=s("./bundles/orouser/js/models/role/permission-model.js"),a=s("./bundles/orouser/js/views/role/capabilities-view.js"),l=s("./bundles/orouser/js/constants/access-levels.js"),d=s("./bundles/orouser/js/constants/capability-categories.js"),c=i.extend({tabIds:null,constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){t.extend(this,t.pick(e,["tabIds"]));const s=t.map(e.data,(function(s){s.items=t.map(s.items,(function(t){return t.editable=!e.readonly,t})),e.readonly&&(s.items=t.map(s.items,(function(t){return t.editable=!e.readonly,t.noAccess=t.access_level===l.NONE,t})));const o=new n(s.items,{model:r});return this.listenTo(o,"change",this.onAccessLevelChange.bind(this,s.group)),t.extend({},s,{editable:!e.readonly,items:o})}),this);this.currentCategory={id:e.currentCategoryId||d.COMMON},this.view=new a({el:e._sourceElement,collection:new n(s),filterer:s=>{const o=s.get("group"),i=this.currentCategory;return i.id===d.GENERAL?o&&!t.contains(e.tabIds,o):i.id===d.COMMON||o===i.id}}),this.listenTo(o,"role:entity-category:changed",this.onCategoryChange),c.__super__.initialize.call(this,e)},onCategoryChange:function(e){t.extend(this.currentCategory,e),this.view.filter()},onAccessLevelChange:function(e,s){let i=e;i&&!t.contains(this.tabIds,i)&&(i=d.GENERAL),o.trigger("securityAccessLevelsComponent:link:click",{accessLevel:s.get("access_level"),identityId:s.get("identity"),permissionName:s.get("name"),group:e,category:i,isInitialValue:!s.isAccessLevelChanged()})}});return c}.call(t,s,t,e))||(e.exports=o)},"./bundles/orouser/js/components/role/entity-category-tabs-component.js":(e,t,s)=>{var o;o=function(e,t,o){"use strict";const i=s("./bundles/oroui/js/extend/underscore.js"),n=s("./bundles/orotranslation/js/translator.js"),r=s("./bundles/oroui/js/mediator.js"),a=s("./bundles/oroui/js/app/components/base/component.js"),l=s("./bundles/oroui/js/app/models/base/collection.js"),d=s("./bundles/oroui/js/app/views/tab-collection-view.js");let c=s("./bundles/oroui/js/app/services/module-config.js").A(o.id);return c=i.extend({useDropdown:!0},c),a.extend({changesByCategory:null,constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.changesByCategory={};let t=e.data;t.unshift({id:"all",label:n("oro.role.tabs.all.label"),active:!0,multi:!0}),t.push({id:"system_capabilities",label:n("oro.role.tabs.system_capabilities.label"),multi:!0});const s=e.controlTabPanel;t=i.each(t,(function(e){e.uniqueId=i.uniqueId(e.id),"string"==typeof s&&(e.controlTabPanel=s)}),this),this.categories=new l(t),this.view=new d({el:e._sourceElement,animationDuration:0,collection:this.categories,useDropdown:(void 0===e.useDropdown?c:e).useDropdown}),this.listenTo(this.categories,"change",this.onCategoryChange),this.listenTo(r,"securityAccessLevelsComponent:link:click",this.onAccessLevelChange)},onCategoryChange:function(e){e.hasChanged("active")&&!0===e.get("active")&&r.trigger("role:entity-category:changed",{id:e.get("id")})},onAccessLevelChange:function(e){const t=e.identityId+"::"+e.permissionName,s=e.category;if(i.isUndefined(s))return;e.isInitialValue?(delete this.changesByCategory[s][t],i.isEmpty(this.changesByCategory[s])&&delete this.changesByCategory[s]):(this.changesByCategory[s]||(this.changesByCategory[s]={}),this.changesByCategory[s][t]=!0),this.categories.findWhere({id:"all"}).set("changed",!i.isEmpty(this.changesByCategory));const o=this.categories.findWhere({id:s});o&&o.set("changed",!i.isEmpty(this.changesByCategory[s]))}})}.call(t,s,t,e),void 0===o||(e.exports=o)},"./bundles/orouser/js/constants/access-levels.js":e=>{e.exports={NONE:0}},"./bundles/orouser/js/constants/capability-categories.js":e=>{e.exports={GENERAL:"system_capabilities",COMMON:"all"}},"./bundles/orouser/js/datagrid/action-permissions-field-view.js":(e,t,s)=>{var o;void 0===(o=function(e){"use strict";const t=s("./bundles/oroui/js/mediator.js"),o=s("./bundles/orouser/js/datagrid/action-permissions-readonly-field-view.js"),i=s("./bundles/orouser/js/datagrid/permission/permission-view.js"),n=o.extend({autoRender:!1,animationDuration:0,className:"field-permission-container",template:s("../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/orouser/templates/datagrid/action-permissions-field-view.html"),permissionView:i,constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){n.__super__.initialize.call(this,e),this.listenTo(this.model.get("permissions"),"change",this.onAccessLevelChange)},onAccessLevelChange:function(e){t.trigger("securityAccessLevelsComponent:link:click",{accessLevel:e.get("access_level"),identityId:e.get("identity"),permissionName:e.get("name"),group:this.model.get("group"),category:this.model.get("group"),isInitialValue:!e.isAccessLevelChanged()})}});return n}.call(t,s,t,e))||(e.exports=o)},"./bundles/orouser/js/datagrid/action-permissions-readonly-field-view.js":(e,t,s)=>{var o;void 0===(o=function(e){"use strict";const t=s("./bundles/oroui/js/app/views/base/collection-view.js"),o=s("./bundles/orouser/js/datagrid/permission/permission-readonly-view.js"),i=s("./bundles/oroui/js/app/views/base/view.js").extend({autoRender:!1,animationDuration:0,className:"field-permission-container",template:s("../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/orouser/templates/datagrid/action-permissions-field-view.html"),permissionView:o,constructor:function e(t){e.__super__.constructor.call(this,t)},render:function(){return i.__super__.render.call(this),this.subview("permissions-items",new t({el:this.$("[data-name=field-permissions-items]"),tagName:"ul",className:"action-permissions",animationDuration:0,collection:this.model.get("permissions"),itemView:this.permissionView})),this}});return i}.call(t,s,t,e))||(e.exports=o)},"./bundles/orouser/js/datagrid/action-permissions-readonly-row-view.js":(e,t,s)=>{var o;void 0===(o=function(e){"use strict";const t=s("./bundles/oroui/js/extend/underscore.js"),o=s("./bundles/oroui/js/app/models/base/collection.js"),i=s("./bundles/oroui/js/app/views/base/collection-view.js"),n=s("./bundles/orouser/js/datagrid/permission/permission-readonly-view.js"),r=s("./bundles/orouser/js/datagrid/action-permissions-readonly-field-view.js"),a=s("./bundles/orouser/js/models/role/permission-model.js"),l=s("./bundles/oroui/js/app/views/base/view.js"),d=l.extend({tagName:"tr",className:"grid-row collapsed",autoRender:!1,animationDuration:0,template:s("../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/orouser/templates/datagrid/action-permissions-row-view.html"),permissionItemView:n,fieldItemView:r,readonlyMode:!0,optionNames:l.prototype.optionNames.concat(["dataCollection","ariaRowsIndexShift"]),constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){d.__super__.initialize.call(this,e);let s=this.model.get("fields");"string"==typeof s&&(s=JSON.parse(s)),t.isArray(s)||(s=t.values(s)),s.length&&t.each(s,(function(e){e.permissions=new o(t.values(e.permissions),{model:a})})),this.model.set("fields",s,{silent:!0})},render:function(){d.__super__.render.call(this);const e=this.model.get("fields");return this.subview("permissions-items",new i({el:this.$("[data-name=action-permissions-items]"),tagName:"ul",className:"action-permissions",animationDuration:0,collection:this.model.get("permissions"),itemView:this.permissionItemView})),e.length>0&&this.subview("fields-list",new i({el:this.$("[data-name=fields-list]"),collection:new o(e),animationDuration:0,itemView:this.fieldItemView})),this},getTemplateData:function(){const e=d.__super__.getTemplateData.call(this);return e.ariaRowIndex=this.getAriaRowIndex(),e.readonlyMode=this.readonlyMode,e.columnsCount=this.collection.length,e},_attributes:function(){return{role:"presentation","aria-rowindex":null}},getAriaRowIndex(){let e=null;const t=this.dataCollection.filter((e=>!0!==e.get("isAuxiliary"))).findIndex((e=>e.cid===this.model.cid));return-1!==t&&(e=t+this.ariaRowsIndexShift),e}});return d}.call(t,s,t,e))||(e.exports=o)},"./bundles/orouser/js/datagrid/action-permissions-row-view.js":(e,t,s)=>{var o;void 0===(o=function(e){"use strict";const t=s("./bundles/oroui/js/extend/underscore.js"),o=s("./bundles/oroui/js/mediator.js"),i=s("./bundles/orouser/js/datagrid/permission/permission-view.js"),n=s("./bundles/orouser/js/datagrid/role-permissions-action-view.js"),r=s("./bundles/orouser/js/datagrid/action-permissions-readonly-row-view.js"),a=s("./bundles/orouser/js/models/role/access-levels-collection.js"),l=s("./bundles/orouser/js/datagrid/action-permissions-field-view.js"),d=r.extend({permissionItemView:i,fieldItemView:l,readonlyMode:!1,constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){d.__super__.initialize.call(this,e);const s=this.model.get("fields");if(s.length){const e=this.model.get("permissions").accessLevels.getRouteName();t.each(s,(function(t){t.permissions.each((function(t){t.accessLevels=new a([],{routeParameters:{oid:t.get("identity").replace(/\\/g,"_"),permission:t.get("name"),routeName:e}})}))}))}this.listenTo(this.model.get("permissions"),"change",this.onAccessLevelChange)},render:function(){d.__super__.render.call(this);const e=new n({el:this.$("[data-name=row-action]"),accessLevels:this.model.get("permissions").accessLevels});return this.subview("row-action",e),this.listenTo(e,"row-access-level-change",(function(e){this.model.get("permissions").each((function(t){t.set(e)}))})),this},onAccessLevelChange:function(e){o.trigger("securityAccessLevelsComponent:link:click",{accessLevel:e.get("access_level"),identityId:e.get("identity"),permissionName:e.get("name"),group:this.model.get("group"),category:this.model.get("group"),isInitialValue:!e.isAccessLevelChanged()})}});return d}.call(t,s,t,e))||(e.exports=o)},"./bundles/orouser/js/datagrid/permission/permission-readonly-view.js":(e,t,s)=>{var o;void 0===(o=function(e){"use strict";const t=s("./bundles/oroui/js/extend/jquery.js"),o=s("./bundles/oroui/js/app/views/base/view.js"),i=s("./bundles/orouser/js/constants/access-levels.js"),n=o.extend({tagName:"li",className:"action-permissions__item dropdown",template:s("../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/orouser/templates/datagrid/permission/permission-readonly-view.html"),constructor:function e(t){e.__super__.constructor.call(this,t)},getTemplateData:function(){const e=n.__super__.getTemplateData.call(this);return e.noAccess=i.NONE===this.model.get("access_level"),e},initControls(){this.$('[data-toggle="tooltip"]:not([title])').data("title",(function(){const e=t(this),s=e.clone().css({"max-width":"initial",visibility:"hidden",position:"fixed"}).appendTo("body"),o=e.width()<s.width();return s.remove(),o?this.textContent:void 0})),n.__super__.initControls.call(this)}});return n}.call(t,s,t,e))||(e.exports=o)},"./bundles/orouser/js/datagrid/permission/permission-view.js":(e,t,s)=>{var o;void 0===(o=function(e){"use strict";const t=s("./bundles/oroui/js/extend/jquery.js"),o=s("./bundles/oroui/js/extend/underscore.js"),i=s("./bundles/oroui/js/app/views/base/view.js"),n=s("./bundles/oroui/js/app/views/dropdown-menu-collection-view.js"),r=i.extend({tagName:"li",className:"action-permissions__item dropdown",template:s("../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/orouser/templates/datagrid/permission/permission-view.html"),events:{"shown.bs.dropdown":"onDropdownOpen","hide.bs.dropdown":"onDropdownClose"},listen:{"change:access_level model":"render"},constructor:function e(t){e.__super__.constructor.call(this,t)},id:function(){return"ActionPermissionsCell-"+this.cid},getTemplateData:function(){const e=r.__super__.getTemplateData.call(this);return e.dropdownTarget="#"+o.result(this,"id"),e.isAccessLevelChanged=this.model.isAccessLevelChanged(),e},render:function(){const e=this.subview("dropdown");this.$el.trigger("tohide.bs.dropdown"),e&&(this.$('[data-toggle="dropdown"]').dropdown("dispose"),e.$el.detach()),r.__super__.render.call(this),e&&this.$('[data-role="dropdown-menu-content"]').replaceWith(e.$el)},initControls(){this.$('[data-toggle="tooltip"]:not([title])').data("title",(function(){const e=t(this),s=e.clone().css({"max-width":"initial",visibility:"hidden",position:"fixed"}).appendTo("body"),o=e.width()<s.width();return s.remove(),o?this.textContent:void 0})),r.__super__.initControls.call(this)},onDropdownOpen:function(e){let t=this.subview("dropdown");const s=this.model.accessLevels;t||(t=new n({el:this.$('[data-role="dropdown-menu-content"]'),collection:s,keysMap:{id:"access_level",text:"access_level_label"}}),this.listenTo(t,"selected",this.onAccessLevelSelect),this.listenTo(this.model.accessLevels,"sync",(function(){this.$('[data-toggle="dropdown"]').dropdown("update")})),this.subview("dropdown",t)),s.length||s.fetch({success:function(e){o.each(e.models,(function(t){isNaN(t.get("access_level"))&&e.remove(t)}))}}),this.$(".action-permissions__item-wrapper").addClass("active")},onDropdownClose:function(e){this.$(".action-permissions__item-wrapper").removeClass("active")},onAccessLevelSelect:function(e){this.model.set(e)}});return r}.call(t,s,t,e))||(e.exports=o)},"./bundles/orouser/js/datagrid/role-permissions-action-view.js":(e,t,s)=>{var o;void 0===(o=function(e){"use strict";const t=s("./bundles/oroui/js/extend/underscore.js"),o=s("./bundles/oroui/js/app/views/base/view.js"),i=s("./bundles/oroui/js/app/views/dropdown-menu-collection-view.js"),n=o.extend({className:"dropleft",icon:"",autoRender:!0,template:s("../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/orouser/templates/datagrid/role-permissions-action-view.html"),accessLevels:null,action:null,events:{"shown.bs.dropdown":"onDropdownOpen","mouseover .dropdown-toggle":"_showDropdown",mouseleave:"_hideDropdown"},constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){t.extend(this,t.pick(e,["accessLevels","action"])),n.__super__.initialize.call(this,e)},dispose:function(){this.disposed||(delete this.accessLevels,delete this.action,n.__super__.dispose.call(this))},delegateListeners:function(){n.__super__.delegateListeners.call(this),this.listenTo(this.accessLevels,"sync",(function(){this.$('[data-toggle="dropdown"]').dropdown("update")}))},render:function(){const e=this.subview("dropdown");e&&(this.$('[data-toggle="dropdown"]').dropdown("dispose"),e.$el.detach()),n.__super__.render.call(this),e&&this.$('[data-role="dropdown-menu-content"]').replaceWith(e.$el)},onDropdownOpen:function(e){let t=this.subview("dropdown");const s=this.accessLevels;t||(t=new i({el:this.$('[data-role="dropdown-menu-content"]'),collection:s,keysMap:{id:"access_level",text:"access_level_label"}}),this.listenTo(t,"selected",this.onAccessLevelSelect),this.subview("dropdown",t)),s.length||s.fetch()},onAccessLevelSelect:function(e){this.trigger("row-access-level-change",e),this.$('[data-toggle="dropdown"]').parent().hasClass("show")&&this.$('[data-toggle="dropdown"]').dropdown("toggle")},_showDropdown:function(e){this.$('[data-toggle="dropdown"]').parent().hasClass("show")||this.$('[data-toggle="dropdown"]').dropdown("toggle")},_hideDropdown:function(e){this.$('[data-toggle="dropdown"]').parent().hasClass("show")&&this.$('[data-toggle="dropdown"]').dropdown("toggle"),e.stopPropagation()}});return n}.call(t,s,t,e))||(e.exports=o)},"./bundles/orouser/js/datagrid/roles-datagrid-builder.js":(e,t,s)=>{var o;void 0===(o=function(e){"use strict";const t=s("./bundles/oroui/js/extend/underscore.js"),o=s("./bundles/oroui/js/mediator.js"),i=s("./bundles/orouser/js/models/role/permission-model.js"),n=s("./bundles/orouser/js/models/role/access-levels-collection.js"),r=s("./bundles/oroui/js/app/models/base/collection.js"),a=s("./bundles/orouser/js/datagrid/action-permissions-row-view.js"),l=s("./bundles/orouser/js/datagrid/action-permissions-readonly-row-view.js"),d={processDatagridOptions:function(e,s){const o=/\\/g;s.metadata.columns=s.metadata.columns.filter((e=>e.renderable)),s.themeOptions.readonly?(s.metadata.rowActions={},s.themeOptions.rowView=l):s.themeOptions.rowView=a,t.each(s.data.data,(function(e){e.permissions=new r(e.permissions,{model:i});const t={oid:e.identity.replace(o,"_"),permission:""};s.metadata.options.access_level_route&&(t.routeName=s.metadata.options.access_level_route);const a=new n([],{routeParameters:t});e.permissions.accessLevels=a,e.permissions.each((function(e){e.accessLevels=a}))})),e.resolve()},init:function(e,t){t.gridPromise.done((function(s){d.build(s,t),e.resolve()})).fail((function(){e.reject()}))},build:function(e,s){const i={id:s.currentCategoryId||"all"};e.body.filter((function(e){return"all"===i.id||e.get("group")===i.id})),e.body.listenTo(o,"role:entity-category:changed",(function(s){t.extend(i,s),e.body.filter(),e.$el.toggle(e.body.visibleItems.length>0),e.trigger("content:update")}))}};return d}.call(t,s,t,e))||(e.exports=o)},"./bundles/orouser/js/models/role/access-levels-collection.js":(e,t,s)=>{var o;void 0===(o=function(e){"use strict";const t=s("./bundles/oroui/js/extend/underscore.js");return s("./bundles/oroui/js/app/models/base/routing-collection.js").extend({routeDefaults:{routeName:"oro_security_access_levels"},constructor:function e(...t){e.__super__.constructor.apply(this,t)},parse:function(e,s){return t.map(t.pairs(e),(function(e){return{access_level:parseInt(e[0],10),access_level_label:e[1]}}))},getRouteName:function(){return this._route.get("routeName")}})}.call(t,s,t,e))||(e.exports=o)},"./bundles/orouser/js/models/role/permission-model.js":(e,t,s)=>{var o;void 0===(o=function(e){"use strict";const t=s("./bundles/oroui/js/app/models/base/model.js").extend({_initialAccessLevel:null,constructor:function e(t,s){e.__super__.constructor.call(this,t,s)},initialize:function(e,s){this._initialAccessLevel=this.get("access_level"),t.__super__.initialize.call(this,e,s)},isAccessLevelChanged:function(){return this._initialAccessLevel!==this.get("access_level")}});return t}.call(t,s,t,e))||(e.exports=o)},"./bundles/orouser/js/views/role-view.js":(e,t,s)=>{var o,i;o=[s("./bundles/oroui/js/extend/jquery.js"),s("./bundles/oroui/js/extend/underscore.js"),s("./bundles/oroui/js/mediator.js"),s("./bundles/oroui/js/app/views/base/view.js")],void 0===(i=function(e,t,s,o){"use strict";const i=o.extend({options:{elSelector:"",formName:"",formSelector:"",privilegesSelector:"",appendUsersSelector:"",removeUsersSelector:"",fields:""},privileges:null,$form:null,$privileges:null,$appendUsers:null,$removeUsers:null,$fields:null,events:{click:"onSubmit"},listen:{"securityAccessLevelsComponent:link:click mediator":"onAccessLevelsLinkClicked"},constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(s){this.options=t.defaults(s||{},this.options),this.$el=e(this.options.elSelector),this.$form=e(this.options.formSelector),this.$privileges=e(this.options.privilegesSelector),this.$appendUsers=e(this.options.appendUsersSelector),this.$removeUsers=e(this.options.removeUsersSelector);const o={};t.each(this.options.fields,(function(t,s){o[s]=e(t)})),this.$fields=o},dispose:function(){this.disposed||(delete this.$form,delete this.$privileges,delete this.$appendUsers,delete this.$removeUsers,delete this.$fields,i.__super__.dispose.call(this))},onSubmit:function(o){const i=this.$form;let n=!1;if(t.each(this.$fields,(function(e){n=n||!e.valid()})),n)return;if(i.data("nohash")&&!i.data("sent"))return void i.data("sent",!0);if(i.data("sent"))return;i.data("sent",!0);const r=i.attr("action"),a=i.attr("method");let l="string"==typeof r?r.trim():"";l=l||window.location.href||"",l&&(l+="?input_action="+e(o.target).attr("data-action"),l=(l.match(/^([^#]+)/)||[])[1]);const d=this.getData(),c=e(o.target).attr("data-action");c&&(d.input_action=c);const u={url:l,type:a||"GET",data:e.param(d)};s.execute("submitPage",u)},getData:function(){const e={},s=this.options.formName;return t.each(this.$fields,(function(t,o){let i=t.val();"checkbox"===t.attr("type")&&(i=t.is(":checked")?1:0,0===i)||(e[s+"["+o+"]"]=i)})),e[s+"[privileges]"]=this.$privileges.val(),e[s+"[appendUsers]"]=this.$appendUsers.val(),e[s+"[removeUsers]"]=this.$removeUsers.val(),e},onAccessLevelsLinkClicked:function(e){if(this.disposed)return;const s=JSON.parse(this.$privileges.val()),o=t.reduce(s,(function(e,s){return t.reduce(s,(function(e,t){return e[t.identity.id]=t,e}),e)}),{});let i=e.identityId;const n=i.split("::");let r,a,l;void 0!==n[1]&&(i=n[0],r=n[1]),i in o?a=o[i]:(a={identity:{id:i},permissions:{}},"EXECUTE"===e.permissionName?s.action[Object.keys(o).length]=a:s.entity[Object.keys(o).length]=a),r?(l=t.reduce(a.fields,(function(e,t){return e[t.identity.id]=t,e}),{})[e.identityId],l.permissions[e.permissionName].accessLevel=e.accessLevel):(e.permissionName in a.permissions||(a.permissions[e.permissionName]={name:e.permissionName}),a.permissions[e.permissionName].accessLevel=e.accessLevel),this.$privileges.val(JSON.stringify(s)).trigger("change")}});return i}.apply(t,o))||(e.exports=i)},"./bundles/orouser/js/views/role/capabilities-view.js":(e,t,s)=>{var o;void 0===(o=function(e){"use strict";const t=s("./bundles/oroui/js/app/views/base/collection-view.js"),o=s("./bundles/orouser/js/views/role/capability-group-view.js");return t.extend({animationDuration:0,itemView:o,listen:{visibilityChange:"onVisibilityChange"},constructor:function e(t){e.__super__.constructor.call(this,t)},onVisibilityChange:function(){this.$el.toggleClass("role-capabilities_single-group",1===this.visibleItems.length)}})}.call(t,s,t,e))||(e.exports=o)},"./bundles/orouser/js/views/role/capability-group-view.js":(e,t,s)=>{var o;void 0===(o=function(t){"use strict";const o=s("./bundles/oroui/js/extend/underscore.js"),i=s("./bundles/oroui/js/app/views/base/collection-view.js"),n=s("./bundles/orouser/js/views/role/capability-item-view.js");let r=s("./bundles/oroui/js/app/services/module-config.js").A(e.id);r=o.extend({selectAllClassName:"btn btn-link btn-sm"},r);const a=i.extend({animationDuration:0,className:"role-capability",template:s("../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/orouser/templates/role/capability-group.html"),listSelector:'[data-name="capability-items"]',fallbackSelector:'[data-name="capability-empty-items"]',itemView:n,listen:{"change collection":"onChange"},events:{'click [data-name="capabilities-select-all"]':"onSelectAll"},constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.model=e.model,this.collection=e.model.get("items"),a.__super__.initialize.call(this,e)},getTemplateData:function(){const e=a.__super__.getTemplateData.call(this);return o.defaults(e,this.model.toJSON()),e.allSelected=this.isAllSelected(),e.selectAllClassName=r.selectAllClassName,e},onSelectAll:function(e){e.preventDefault(),this.collection.each((function(e){e.set("access_level",e.get("selected_access_level"))}))},onChange:function(){this.$('[data-name="capabilities-select-all"]').attr("disabled",this.isAllSelected())},isAllSelected:function(){return!this.collection.find((function(e){return e.get("access_level")!==e.get("selected_access_level")}))}});return a}.call(t,s,t,e))||(e.exports=o)},"./bundles/orouser/js/views/role/capability-item-view.js":(e,t,s)=>{var o;void 0===(o=function(e){"use strict";const t=s("./bundles/oroui/js/app/views/base/view.js").extend({className:"role-capability__item",template:s("../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/orouser/templates/role/capability-item.html"),autoRender:!0,listen:{"change:access_level model":"render"},events:{"change [type=checkbox]":"onChange"},constructor:function e(t){e.__super__.constructor.call(this,t)},render:function(){t.__super__.render.call(this);const e=this.$("input");e.inputWidget("isInitialized")?e.inputWidget("refresh"):e.inputWidget("create")},getTemplateData:function(){const e=t.__super__.getTemplateData.call(this);return e.isAccessLevelChanged=this.model.isAccessLevelChanged(),e},onChange:function(e){const t=this.model.get(e.currentTarget.checked?"selected_access_level":"unselected_access_level");this.model.set("access_level",t)}});return t}.call(t,s,t,e))||(e.exports=o)}}]);