/*! For license information please see orocheckout.js.LICENSE.txt */
(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[327],{"../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/orocheckout/templates/datagrid/cell/inventory_status.html":(module,__unused_webpack_exports,__webpack_require__)=>{var _=__webpack_require__("./bundles/oroui/js/extend/underscore.js");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){if(__p+="",!obj.isConfigurable&&!obj._isKitItemLineItem){__p+="\n    ";let renderInventoryStatus=_.macros("oroshoppinglist::renderInventoryStatus");__p+="\n    ";let inventoryStatusLabel=_metadata.inventory_statuses[inventoryStatus]?_metadata.inventory_statuses[inventoryStatus]:inventoryStatus;__p+="\n    "+(null==(__t=renderInventoryStatus({name:inventoryStatus,label:inventoryStatusLabel,isLowInventory}))?"":__t)+"\n"}__p+="\n"}return __p}},"../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/orocheckout/templates/datagrid/cell/item-message.html":(module,__unused_webpack_exports,__webpack_require__)=>{var _=__webpack_require__("./bundles/oroui/js/extend/underscore.js");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+="";let oroshoppinglist=_.macros("oroshoppinglist");__p+="\n\n",(obj.isUpcoming||obj.errors&&obj.errors.length||obj.warnings&&obj.warnings.length||obj.success&&obj.message)&&(__p+='\n    <div class="notification-container">\n        ',obj.sku&&(__p+="\n            "+(null==(__t=oroshoppinglist.renderErrors({errors:obj.errors,obj}))?"":__t)+"\n        "),__p+="\n        "+(null==(__t=oroshoppinglist.renderWarnings({warnings:obj.warnings}))?"":__t)+"\n        ",obj.success&&obj.message&&(__p+='\n            <div class="notification--success" role="alert">\n                <span class="fa-check" aria-hidden="true"></span>\n                <span class="notification__text">'+(null==(__t=obj.message)?"":_.escape(__t))+"</span>\n            </div>\n        "),__p+="\n    </div>\n"),__p+="\n"}return __p}},"../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/orocheckout/templates/datagrid/cell/item.html":(module,__unused_webpack_exports,__webpack_require__)=>{var _=__webpack_require__("./bundles/oroui/js/extend/underscore.js");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+="";let clipLength=30;__p+="\n";let oroshoppinglist=_.macros("oroshoppinglist");__p+="\n",productId="undefined"!=typeof productId?productId:null,__p+="\n",variantId="undefined"!=typeof variantId?variantId:null,__p+='\n\n<div class="product-item grid-line-items">\n    <div class="grid-line-items__row">\n        ';let inventoryStatusLabel=function(e){return __p+="\n            ",_metadata.inventory_statuses[e]?_metadata.inventory_statuses[e]:e};__p+="\n\n        ";let productUrl=function(e,t){return __p+="\n            ",oroshoppinglist.routing.generate("oro_product_frontend_product_view",t?{id:e,variantProductId:t}:{id:e})};__p+="\n\n        ",obj._isVariant?(__p+='\n            <div class="grid-line-items__row-item mobile-column show-in-tablet">\n                <span class="highlighted-in-mobile break-all">'+(null==(__t=sku)?"":_.escape(__t))+"</span>\n                "+(null==(__t=oroshoppinglist.renderInventoryStatus({name:inventoryStatus,label:inventoryStatusLabel(inventoryStatus),isLowInventory}))?"":__t)+'\n            </div>\n            <div class="grid-line-items__configuration">\n                ',_.each(productConfiguration,(function(e){__p+='\n                    <div class="grid-line-items__field">\n                        <span class="grid-line-items__field-val">'+(null==(__t=e.label)?"":_.escape(__t))+':</span>\n                        <span class="grid-line-items__field-val bold">'+(null==(__t=e.value)?"":_.escape(__t))+"</span>\n                    </div>\n                "})),__p+="\n            </div>\n            ",notes&&(__p+="\n                "+(null==(__t=oroshoppinglist.renderNotes({notes}))?"":__t)+"\n            "),__p+="\n        "):(__p+="\n            ",obj._isKitItemLineItem?(__p+='\n                <div class="grid-line-items__row-item height-as-image-mobile column-on-mobile">\n                    <div class="bold">'+(null==(__t=obj.kitItemLabel)?"":_.escape(__t))+":</div>\n                    ",name&&name.length<=clipLength?__p+="\n                        "+(null==(__t=oroshoppinglist.renderProductItemName({...obj,link:productId?productUrl(productId,variantId):null,popover_image_src:obj.image}))?"":__t)+"\n                    ":__p+='\n                        <div class="grid-line-items__clip-container">\n                            '+(null==(__t=oroshoppinglist.renderProductItemName({...obj,clip:!0,link:productId?productUrl(productId,variantId):null,popover_image_src:obj.image}))?"":__t)+"\n                        </div>\n                    ",__p+="\n                </div>\n            "):(__p+='\n                <div class="grid-line-items__row-item height-as-image-mobile">\n                    ',name&&name.length<=clipLength?__p+="\n                        "+(null==(__t=oroshoppinglist.renderProductItemName({...obj,link:productId?productUrl(productId,variantId):null,popover_image_src:obj.image}))?"":__t)+"\n                    ":__p+='\n                        <div class="grid-line-items__clip-container">\n                            '+(null==(__t=oroshoppinglist.renderProductItemName({...obj,clip:!0,link:productId?productUrl(productId,variantId):null,popover_image_src:obj.image}))?"":__t)+"\n                        </div>\n                    ",__p+="\n                </div>\n            "),__p+="\n            ",obj.subTitle&&(__p+='\n                <div class="grid-line-items__sub-title mobile-row">\n                    '+(null==(__t=obj.subTitle)?"":__t)+"\n                </div>\n            "),__p+="\n            ",(obj.sku||obj.inventoryStatus)&&(__p+='\n            <div class="grid-line-items__row-entry show-in-tablet mobile-row">\n                ',obj.sku&&(__p+='\n                    <span class="highlighted-in-mobile break-all">'+(null==(__t=sku)?"":_.escape(__t))+"</span>\n                "),__p+="\n                ",obj.inventoryStatus&&!obj.isConfigurable&&(__p+="\n                    "+(null==(__t=oroshoppinglist.renderInventoryStatus({name:inventoryStatus,label:inventoryStatusLabel(inventoryStatus),isLowInventory}))?"":__t)+"\n                "),__p+="\n            </div>\n            "),__p+="\n            ",obj.productConfiguration&&(__p+='\n                <div class="grid-line-items__configuration">\n                    ',_.each(productConfiguration,(function(e){__p+='\n                        <div class="grid-line-items__field">\n                            <span class="grid-line-items__field-val">'+(null==(__t=e.label)?"":_.escape(__t))+':</span>\n                            <span class="grid-line-items__field-val bold">'+(null==(__t=e.value)?"":_.escape(__t))+"</span>\n                        </div>\n                    "})),__p+="\n                </div>\n            "),__p+="\n            ",obj.notes&&(__p+="\n                "+(null==(__t=oroshoppinglist.renderNotes({notes}))?"":__t)+"\n            "),__p+="\n        "),__p+="\n    </div>\n</div>\n\n",obj.filteredOutData&&(__p+="\n    "+(null==(__t=oroshoppinglist.renderMoreVariantsButton(filteredOutData))?"":__t)+"\n"),__p+="\n"}return __p}},"../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/orocheckout/templates/datagrid/cell/price.html":(module,__unused_webpack_exports,__webpack_require__)=>{var _=__webpack_require__("./bundles/oroui/js/extend/underscore.js");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",obj.isConfigurable||(__p+='\n<div class="line-item-price mobile-row label-in-mobile-start label-bold-in-mobile"\n     data-name="prices-hint"\n     data-label="'+(null==(__t=_metadata.label)?"":_.escape(__t))+':"\n     data-page-component-init-on="click"\n     data-page-component-module="oropricing/js/app/components/list-item-product-prices-component"\n     data-page-component-options="'+(null==(__t=JSON.stringify({showValuePrice:!1,showListedPrice:!1,doUpdateQtyForUnit:!1,productId:obj.variantId?variantId:productId,elements:{pricesHint:"[data-prices-hint-trigger]"}}))?"":_.escape(__t))+'"\n>\n    <div class="price-value-container" data-name="price-value">\n        ',void 0!==obj.price&&price?__p+="\n        "+(null==(__t=price)?"":_.escape(__t))+"\n        ":obj._blankContent&&(__p+='\n            <span data-name="price-not-found"\n                data-label="'+(null==(__t=_metadata.label)?"":_.escape(__t))+':"\n                data-blank-content="'+(null==(__t=_blankContent)?"":_.escape(__t))+'"></span>\n        '),__p+="\n        ",obj._isKitItemLineItem||obj.isKit||(__p+='\n            <button type="button"\n                    data-prices-hint-trigger\n                    data-trigger="manual"\n                    data-placement="'+(null==(__t=_.isMobile()?"right":"bottom")?"":_.escape(__t))+'"\n                    data-boundary="viewport"\n                    class="btn btn--link btn--size-xs prices-hint-toggler"\n                    title="'+(null==(__t=_.__("oro.pricing.view_all_prices"))?"":_.escape(__t))+'"\n                    aria-label="'+(null==(__t=_.__("oro.pricing.view_all_prices_extended",{product_attrs:name}))?"":_.escape(__t))+'">\n                <span class="fa-info-circle fa--no-offset fa--loader-icon" aria-hidden="true"></span>\n            </button>\n        '),__p+="\n    </div>\n</div>\n"),__p+="\n";return __p}},"../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/orocheckout/templates/datagrid/cell/quantity.html":(module,__unused_webpack_exports,__webpack_require__)=>{var _=__webpack_require__("./bundles/oroui/js/extend/underscore.js");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){if(__p+="",quantity>0){__p+="\n    ";let oroshoppinglist=_.macros("oroshoppinglist");__p+="\n    ";var formattedQuantity=oroshoppinglist.quantityHelper.formatQuantity(quantity,precision);__p+='\n    <div class="mobile-row label-in-mobile-start label-bold-in-mobile" data-label="'+(null==(__t=_metadata.label)?"":_.escape(__t))+':">\n        <span class="label-in-mobile-end" data-label="'+(null==(__t=oroshoppinglist.renderUnit({unit,quantity}))?"":_.escape(__t))+'">'+(null==(__t=formattedQuantity)?"":_.escape(__t))+"</span>\n    </div>\n"}__p+="\n"}return __p}},"../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/orocheckout/templates/datagrid/cell/subtotal.html":(module,__unused_webpack_exports,__webpack_require__)=>{var _=__webpack_require__("./bundles/oroui/js/extend/underscore.js");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",obj._isKitItemLineItem||(__p+="\n    ","undefined"!=typeof subtotal&&null!==subtotal?(__p+="\n        ","undefined"!=typeof discount&&null!==discount&&(__p+='\n        <div class="mobile-row label-in-mobile-start label-bold-in-mobile" data-name="price-value" data-label="'+(null==(__t=_.__("oro.frontend.shoppinglist.initial_subtotal.label"))?"":_.escape(__t))+':"><s>'+(null==(__t=initialSubtotal)?"":_.escape(__t))+'</s></div>\n        <div class="mobile-row label-in-mobile-start label-bold-in-mobile" data-name="price-value" data-label="'+(null==(__t=_.__("oro.frontend.shoppinglist.discount.label"))?"":_.escape(__t))+':">-'+(null==(__t=discount)?"":_.escape(__t))+"</div>\n        "),__p+='\n    <div class="bold mobile-row label-in-mobile-start" data-name="price-value" data-label="'+(null==(__t=_metadata.label)?"":_.escape(__t))+':">'+(null==(__t=subtotal)?"":_.escape(__t))+"</div>\n    "):(__p+='\n    <div class="mobile-row"\n         data-name="price-not-found"\n        ',obj._blankContent&&(__p+='\n             data-blank-content="'+(null==(__t=_blankContent)?"":_.escape(__t))+'"\n        '),__p+='\n        ><span class="bold label-in-mobile-start" data-label="'+(null==(__t=_metadata.label)?"":_.escape(__t))+':"></span>\n    </div>\n    '),__p+="\n"),__p+="\n";return __p}},"../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/orocheckout/templates/datagrid/cell/unit.html":(module,__unused_webpack_exports,__webpack_require__)=>{var _=__webpack_require__("./bundles/oroui/js/extend/underscore.js");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){if(__p+="",0===quantity&&obj.isConfigurable)__p+="\n    "+(null==(__t=_.__("oro.shoppinglist.lineitem.empty_configurable_product"))?"":_.escape(__t))+"\n";else if(unit){__p+="\n    ";var oroshoppinglist=_.macros("oroshoppinglist");__p+="\n    "+(null==(__t=oroshoppinglist.renderUnit({unit,quantity}))?"":_.escape(__t))+"\n"}else __p+="\n    "+(null==(__t=_blankContent)?"":_.escape(__t))+"\n";__p+="\n"}return __p}},"../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/oropromotion/templates/field-errors.html":(module,__unused_webpack_exports,__webpack_require__)=>{var _=__webpack_require__("./bundles/oroui/js/extend/underscore.js");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="controls">\n    ',_.each(messages,(function(e){__p+='\n        <span class="validation-failed"><span><span>'+(null==(__t=e)?"":_.escape(__t))+"</span></span></span>\n    "})),__p+="\n</div>\n";return __p}},"../node_modules/jquery.cookie/jquery.cookie.js":(e,t,i)=>{var n,o,s;o=[i("./bundles/oroui/js/extend/jquery.js")],void 0===(s="function"==typeof(n=function(e){var t=/\+/g;function i(e){return s.raw?e:encodeURIComponent(e)}function n(e){return i(s.json?JSON.stringify(e):String(e))}function o(i,n){var o=s.raw?i:function(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return e=decodeURIComponent(e.replace(t," ")),s.json?JSON.parse(e):e}catch(e){}}(i);return e.isFunction(n)?n(o):o}var s=e.cookie=function(t,r,a){if(void 0!==r&&!e.isFunction(r)){if("number"==typeof(a=e.extend({},s.defaults,a)).expires){var l=a.expires,d=a.expires=new Date;d.setTime(+d+864e5*l)}return document.cookie=[i(t),"=",n(r),a.expires?"; expires="+a.expires.toUTCString():"",a.path?"; path="+a.path:"",a.domain?"; domain="+a.domain:"",a.secure?"; secure":""].join("")}for(var c=t?void 0:{},u=document.cookie?document.cookie.split("; "):[],h=0,p=u.length;h<p;h++){var _=u[h].split("="),g=(f=_.shift(),s.raw?f:decodeURIComponent(f)),m=_.join("=");if(t&&t===g){c=o(m,r);break}t||void 0===(m=o(m))||(c[g]=m)}var f;return c};s.defaults={},e.removeCookie=function(t,i){return void 0!==e.cookie(t)&&(e.cookie(t,"",e.extend({},i,{expires:-1})),!e.cookie(t))}})?n.apply(t,o):n)||(e.exports=s)},"./bundles/orocheckout/js/app/components/multi-shipping-transition-button-component.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/orocheckout/js/app/components/transition-button-component.js"),n=i("./bundles/oroui/js/extend/jquery.js"),o=i("./bundles/oroui/js/mediator.js"),s=t.extend({selectedShippingMethods:null,defaults:n.extend(!0,{},t.prototype.defaults,{selectors:{checkoutRequire:'[data-role="checkout-require"]',shippingMethod:'[name$="[line_items_shipping_methods]"]'}}),listen:{"multi-shipping-method:changed mediator":"onShippingMethodTypeChange"},constructor:function e(t){e.__super__.constructor.call(this,t)},initialize(e){s.__super__.initialize.call(this,e),this.initSelectedMethods()},initSelectedMethods(){const e=this.getShippingMethodElement().val();this.selectedShippingMethods=e?JSON.parse(e):{}},setElementsValue(e,t,i){this.selectedShippingMethods[i]={method:t,type:e},this.getShippingMethodElement().val(JSON.stringify(this.selectedShippingMethods))},onShippingMethodTypeChange(e,t,i){this.setElementsValue(i,t,e),o.trigger("checkout:shipping-method:changed")},getContent(){return n(this.options.selectors.checkoutContent)},onFail(){this.$el.removeClass("btn--info"),this.$el.prop("disabled",!0),this.$el.closest(this.defaults.selectors.checkoutContent).find(this.defaults.selectors.checkoutRequire).addClass("hidden"),o.trigger("transition:failed"),s.__super__.onFail.call(this)},getShippingMethodElement(){return this.getContent().find(this.options.selectors.shippingMethod)}});return s}.call(t,i,t,e))||(e.exports=n)},"./bundles/orocheckout/js/app/components/payment-additional-data-component.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/extend/jquery.js"),n=i("./bundles/oroui/js/mediator.js"),o=i("./bundles/oroui/js/app/components/base/component.js").extend({$el:null,selectors:{additionalData:'[name$="[additional_data]"]'},constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.$el=t(e._sourceElement),n.on("checkout:payment:additional-data:get",this.onGetAdditionalData,this),n.on("checkout:payment:additional-data:set",this.onSetAdditionalData,this)},onSetAdditionalData:function(e){this.getAdditionalDataElement().val(e)},onGetAdditionalData:function(e){e.additionalData=this.getAdditionalDataElement().val()},getAdditionalDataElement:function(){return this.$el.find(this.selectors.additionalData)},dispose:function(){this.disposed||(n.off("checkout:payment:additional-data:get",this.onGetAdditionalData,this),n.off("checkout:payment:additional-data:set",this.onSetAdditionalData,this),o.__super__.dispose.call(this))}});return o}.call(t,i,t,e))||(e.exports=n)},"./bundles/orocheckout/js/app/components/payment-save-for-later-component.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/extend/jquery.js"),n=i("./bundles/oroui/js/mediator.js"),o=i("./bundles/oroui/js/app/components/base/component.js").extend({$el:null,selectors:{saveForLaterSelector:'[name$="[payment_save_for_later]"]'},defaultState:!0,constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.$el=t(e._sourceElement),this.defaultState=this.getCheckboxState(),n.on("checkout:payment:save-for-later:change",this.onChange,this),n.on("checkout:payment:save-for-later:restore-default",this.onRestoreDefault,this)},onChange:function(e){this.setCheckboxState(e)},onRestoreDefault:function(){this.setCheckboxState(this.defaultState)},setCheckboxState:function(e){this.getPaymentSaveForLaterElement().prop("checked",e).trigger("change")},getCheckboxState:function(){return this.getPaymentSaveForLaterElement().prop("checked")},getPaymentSaveForLaterElement:function(){return this.hasOwnProperty("$paymentSaveForLaterElement")||(this.$paymentSaveForLaterElement=this.$el.find(this.selectors.saveForLaterSelector)),this.$paymentSaveForLaterElement},dispose:function(){this.disposed||(n.off("checkout:payment:save-for-later:change",this.onChange,this),n.off("checkout:payment:save-for-later:restore-default",this.onRestoreDefault,this),o.__super__.dispose.call(this))}});return o}.call(t,i,t,e))||(e.exports=n)},"./bundles/orocheckout/js/app/components/payment-transition-button-component.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/orocheckout/js/app/components/transition-button-component.js"),n=i("./bundles/oroui/js/extend/jquery.js"),o=i("./bundles/oroui/js/mediator.js"),s=t.extend({constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.defaults=n.extend(!0,{},this.defaults,{selectors:{paymentForm:'[data-content="payment_method_form"]',paymentMethodSelectorAbsolute:'[data-content="payment_method_form"] [name="paymentMethod"]',paymentMethodSelector:'[name="paymentMethod"]',paymentMethod:'[name$="[payment_method]"]'}}),s.__super__.initialize.call(this,e),this.onPaymentMethodRendered()},onPaymentMethodRendered:function(){this.getContent().on("change",this.options.selectors.paymentMethodSelectorAbsolute,this.onPaymentMethodChange.bind(this)),this.initPaymentMethod()},initPaymentMethod:function(){const e=this.getContent().next(this.options.selectors.paymentForm),t=this.getPaymentMethodElement().val();if(e.length>0&&(t?(o.trigger("checkout:payment:before-restore-filled-form",e),e.removeClass("hidden"),this.getPaymentForm().replaceWith(e),delete this.$paymentForm):(o.trigger("checkout:payment:remove-filled-form",e),e.remove())),t){const e=this.getPaymentMethodSelector().filter('[value="'+t+'"]');e.prop("checked","checked"),e.trigger("change")}else this.getPaymentMethodElement().val(this.getPaymentMethodSelector().filter(":checked").val())},transit:function(e,t){if(e.preventDefault(),!this.options.enabled)return;const i=this.getPaymentMethodElement().val(),n={stopped:!1,resume:this.continueTransit.bind(this,e,t),data:{paymentMethod:i}};o.trigger("checkout:payment:before-transit",n),n.stopped||this.continueTransit(e,t)},continueTransit:function(e,t){const i=this.getPaymentForm();o.trigger("checkout:payment:before-hide-filled-form",i),i.addClass("hidden").insertAfter(this.getContent()),s.__super__.transit.call(this,e,t)},dispose:function(){this.disposed||(this.getContent().off("change",this.options.selectors.paymentMethodSelectorAbsolute),s.__super__.dispose.call(this))},onPaymentMethodChange:function(e){const t=n(e.target);this.getPaymentMethodElement().val(t.val())},onSubmit:function(e){const t={paymentMethod:this.getPaymentMethodElement().val()};o.trigger("checkout:payment:before-form-serialization",t),s.__super__.onSubmit.call(this,e)},getContent:function(){return n(this.options.selectors.checkoutContent)},getPaymentForm:function(){return this.getContent().find(this.options.selectors.paymentForm)},getPaymentMethodSelector:function(){return this.getPaymentForm().find(this.options.selectors.paymentMethodSelector)},getPaymentMethodElement:function(){return this.getContent().find(this.options.selectors.paymentMethod)}});return s}.call(t,i,t,e))||(e.exports=n)},"./bundles/orocheckout/js/app/components/payment-validate-component.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/extend/jquery.js"),n=i("./bundles/oroui/js/mediator.js"),o=i("./bundles/oroui/js/app/components/base/component.js").extend({$el:null,selectors:{validateCheckboxSelector:'[name$="[payment_validate]"]'},constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.$el=t(e._sourceElement),n.on("checkout:payment:validate:get-value",this.onGetValue,this),n.on("checkout:payment:validate:change",this.onChange,this)},onChange:function(e){this.setCheckboxState(e)},onGetValue:function(e){e.value=this.getCheckboxState()},setCheckboxState:function(e){this.getValidateCheckboxElement().prop("checked",e).trigger("change")},getCheckboxState:function(){return this.getValidateCheckboxElement().prop("checked")},getValidateCheckboxElement:function(){return this.hasOwnProperty("$validateCheckboxElement")||(this.$validateCheckboxElement=this.$el.find(this.selectors.validateCheckboxSelector)),this.$validateCheckboxElement},dispose:function(){this.disposed||(n.off("checkout:payment:validate:get-value",this.onGetValue,this),n.off("checkout:payment:validate:change",this.onChange,this),o.__super__.dispose.call(this))}});return o}.call(t,i,t,e))||(e.exports=n)},"./bundles/orocheckout/js/app/components/shipping-transition-button-component.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/orocheckout/js/app/components/transition-button-component.js"),n=i("./bundles/oroui/js/extend/jquery.js"),o=i("./bundles/oroui/js/mediator.js"),s=t.extend({constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.defaults=n.extend(!0,{},this.defaults,{selectors:{shippingForm:'[data-content="shipping_method_form"]',shippingMethodTypeSelector:'[name$="shippingMethodType"]',shippingMethodTypeSelectorAbsolute:'[data-content="shipping_method_form"] [name$="shippingMethodType"]',checkoutRequire:'[data-role="checkout-require"]',shippingMethod:'[name$="[shipping_method]"]',shippingMethodType:'[name$="[shipping_method_type]"]'}}),s.__super__.initialize.call(this,e),o.on("checkout:shipping-method:rendered",this.onShippingMethodRendered,this)},onShippingMethodRendered:function(){this.getContent().on("change",this.options.selectors.shippingMethodTypeSelectorAbsolute,this.onShippingMethodTypeChange.bind(this)),this.initShippingMethod()},initShippingMethod:function(){const e=this.getShippingMethodTypeElement().val(),t=this.getShippingMethodElement().val();if(this.getShippingMethodTypeSelector().length&&e&&t){const i=this.getShippingMethodTypeSelector().filter('[data-shipping-type="'+e+'"]').filter('[data-shipping-method="'+t+'"]');i.prop("checked","checked"),i.trigger("change")}else{const e=this.getShippingMethodTypeSelector().filter(":checked");if(e.val()){const t=n(e).data("shipping-method"),i=n(e).data("shipping-type");this.setElementsValue(i,t)}else this.setElementsValue(null,null)}},dispose:function(){this.disposed||(this.getContent().off("change",this.options.selectors.shippingMethodTypeSelectorAbsolute),s.__super__.dispose.call(this))},setElementsValue:function(e,t){this.getShippingMethodTypeElement().val(e),this.getShippingMethodElement().val(t)},onShippingMethodTypeChange:function(e){o.trigger("checkout:shipping-method:changed");const t=n(e.target),i=t.data("shipping-method"),s=t.data("shipping-type");this.setElementsValue(s,i)},getContent:function(){return n(this.options.selectors.checkoutContent)},getShippingForm:function(){return n(this.options.selectors.shippingForm)},getShippingMethodTypeSelector:function(){return this.getShippingForm().find(this.options.selectors.shippingMethodTypeSelector)},getShippingMethodTypeElement:function(){return this.getContent().find(this.options.selectors.shippingMethodType)},onFail:function(){this.$el.removeClass("btn--info"),this.$el.prop("disabled",!0),this.$el.closest(this.defaults.selectors.checkoutContent).find(this.defaults.selectors.checkoutRequire).addClass("hidden"),o.trigger("transition:failed"),s.__super__.onFail.call(this)},getShippingMethodElement:function(){return this.getContent().find(this.options.selectors.shippingMethod)}});return s}.call(t,i,t,e))||(e.exports=n)},"./bundles/orocheckout/js/app/components/single-page-checkout-component.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/extend/jquery.js"),n=i("./bundles/oroui/js/extend/underscore.js"),o=i("./bundles/orotranslation/js/translator.js"),s=i("./bundles/oroui/js/mediator.js"),r=i("./bundles/oroui/js/layout-subtree-manager.js"),a=i("./bundles/oroui/js/app/components/base/component.js"),l=i("./bundles/orocheckout/js/app/views/single-page-checkout-form-view.js"),d=a.extend({options:{entityId:null,saveStateUrl:null,transitionUrl:null,targetLayoutBlocks:null,checkoutContentSelector:'[data-role="checkout-content"]',checkoutFlashNotifications:'[data-role="checkout-flash-notifications"]',defaultParameters:{layout_block_ids:["checkout_button_continue_right_wrapper","checkout_consent_subtree"],_widgetContainer:"ajax",_wid:"ajax_checkout"}},queue:null,jqXHR:null,loadingCheckoutMessage:null,constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.options=n.extend({},this.options,e||{}),this.queue=t({}),this.formView=new l({el:this.options._sourceElement.closest("form"),entityId:this.options.entityId}),t(window).on(`beforeunload${this.eventNamespace()}`,this.onWindowUnload.bind(this)),this.formView.on("after-check-form",this.onAfterCheckForm.bind(this)),this.formView.on("submit-form",this.onSubmit.bind(this)),d.__super__.initialize.call(this,this.options)},eventNamespace(){return"."+this.name},onWindowUnload(e){if(this.loadingCheckoutMessage)return e.preventDefault(),e.returnValue=!0,!0},onAfterCheckForm:function(e,i){const n=this._getRequestParameters(i);this._saveStateDeferred({dataType:"json",url:this.options.saveStateUrl,method:"POST",data:e+"&"+t.param(n)},n)},onSubmit:function(e){s.execute("showLoading"),this.showCheckoutLoadingMessage();const i=this.options.transitionUrl+(-1!==n.indexOf(this.options.transitionUrl,"?")?"&":"?")+t.param({_widgetContainer:"ajax",_wid:"ajax_checkout"});t.ajax({url:i,method:"POST",data:e}).done(this.onSuccess.bind(this)).fail((()=>{s.execute("hideLoading"),s.execute("showFlashMessage","error","Could not perform transition"),this.hideCheckoutLoadingMessage()}))},onSuccess:function(e){if(this.hideCheckoutLoadingMessage(),e.hasOwnProperty("responseData")){const t={stopped:!1,responseData:e.responseData};if(s.trigger("checkout:place-order:response",t),t.stopped)return}if(e.hasOwnProperty("redirectUrl"))s.execute("redirectTo",{url:e.redirectUrl},{redirect:!0});else{const i=t("<div/>").html(e);s.trigger("checkout-content:before-update"),t(this.options.checkoutContentSelector).html(i.find(this.options.checkoutContentSelector).html());const o=i.find(this.options.checkoutFlashNotifications);n.each(o,(function(e){const i=t(e),o=i.data("type");let r=i.data("message");r=r.replace(/\n/g,"<br>"),n.delay((function(){s.execute("showFlashMessage",o,r)}),100)})),s.trigger("checkout-content:updated"),s.trigger("layout:reposition")}s.execute("hideLoading")},_getRequestParameters:function(e){const i=this.options.targetLayoutBlocks||{},n=t.extend(!0,{},this.options.defaultParameters);return t.each(i,(function(i,o){e.is(i)&&(n.layout_block_ids=t.merge(n.layout_block_ids,o))})),n},_saveStateDeferred:function(e,i){const n=t.Deferred(),o=n.promise(),s=this;return s.queue.queue((function(t){s._doRequest(t,n,e,i)})),o.abort=function(r){if(s.jqXHR)return s.jqXHR.abort(r);const a=s.queue.queue(),l=t.inArray((function(t){s._doRequest(t,n,e,i)}),a);return l>-1&&a.splice(l,1),n.rejectWith(e.context||e,[o,r,""]),o},o},_doRequest:function(e,i,n,o){this.formView.trigger("before-save-state");const s=o.layout_block_ids||[];this._prepareLayoutSubTreeViews(s),this._beforeLayoutSubTreeViewContentLoading(),this.jqXHR=t.ajax(n).done(function(e){this._setLayoutSubTreeViewContent(e),this._afterLayoutSubTreeViewContentLoading(),this.formView.trigger("after-save-state"),i.resolve(e)}.bind(this)).fail(function(e){this._contentLayoutSubTreeViewContentLoadingFail(),i.reject(e)}.bind(this)).then(e)},_prepareLayoutSubTreeViews:function(e){this.layoutSubTreeViews={},n.each(e,(e=>{if(e in r.viewsCollection){const t=r.viewsCollection[e];this.listenTo(t,"dispose",(()=>delete this.layoutSubTreeViews[e])),this.layoutSubTreeViews[e]=t}}))},_beforeLayoutSubTreeViewContentLoading:function(){s.trigger("single-page-checkout:before-layout-subtree-content-loading"),n.each(this.layoutSubTreeViews,(function(e){e.beforeContentLoading()}))},_setLayoutSubTreeViewContent:function(e){n.each(this.layoutSubTreeViews,(function(t,i){i in e&&("checkout_order_summary_totals_wrapper"===i&&(t.useHiddenElement=!0),t.setContent(e[i]))}))},_afterLayoutSubTreeViewContentLoading:function(){s.trigger("single-page-checkout:after-layout-subtree-content-loading"),n.each(this.layoutSubTreeViews,(e=>{e.afterContentLoading(),this.stopListening(e)}))},_contentLayoutSubTreeViewContentLoadingFail:function(){s.trigger("single-page-checkout:layout-subtree-content-loading-fail"),n.each(this.layoutSubTreeViews,(e=>{e.contentLoadingFail(),this.stopListening(e)}))},showCheckoutLoadingMessage(){this.loadingCheckoutMessage=s.execute("showFlashMessage","warning",o("oro.checkout.please_wait_message"),{container:document.body,hideCloseButton:!0,namespace:"single-page-checkout"}),t(`[data-messenger-namespace="${this.loadingCheckoutMessage.namespace}"]`).addClass("notification-flash--single-page-checkout")},hideCheckoutLoadingMessage(){this.loadingCheckoutMessage&&(this.loadingCheckoutMessage.close(),this.loadingCheckoutMessage=null)},dispose:function(){this.disposed||(this.formView.disposed||(this.formView.dispose(),delete this.formView),t(window).off(this.eventNamespace()),d.__super__.dispose.call(this))}});return d}.call(t,i,t,e))||(e.exports=n)},"./bundles/orocheckout/js/app/components/transition-button-component.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/app/components/base/component.js"),n=i("./bundles/oroui/js/mediator.js"),o=i("./bundles/oroui/js/extend/jquery.js"),s=i("./bundles/oroui/js/extend/underscore.js"),r="btn--disabled",a=t.extend({defaults:{transitionUrl:null,enabled:!0,enableOnLoad:!0,hasForm:!1,flashMessageOnSubmit:null,selectors:{checkoutFlashNotifications:'[data-role="checkout-flash-notifications"]',checkoutSidebar:'[data-role="checkout-sidebar"]',checkoutContent:'[data-role="checkout-content"]',transitionTriggerContainer:'[data-role="transition-trigger-container"]',transitionTrigger:'[data-role="transition-trigger"]',stateToken:'[name$="[state_token]"]'}},constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.options=o.extend(!0,{},this.defaults,e),this.inProgress=!1,this.$el=e._sourceElement,this.initializeTriggers(),this.options.hasForm?(this.$form=this.$el.closest("form"),this.$form.bindFirst("submit."+this.cid,this.preventSubmit.bind(this)),this.$form.on("submit."+this.cid,this.onSubmit.bind(this))):this.$el.on("click."+this.cid,this.transit.bind(this)),this.options.transitionUrl&&(this.options.enableOnLoad&&this.enableTransitionButton(),n.on("checkout:transition-button:enable",this.enableTransitionButton,this),n.on("checkout:transition-button:disable",this.disableTransitionButton,this))},enableTransitionButton:function(){this.options.enabled&&this.$el.removeAttr("disabled",!1).removeClass(r)},disableTransitionButton:function(){this.$el.attr("disabled","disabled").addClass(r)},initializeTriggers:function(){this.$transitionTriggers=this.$el.closest(this.options.selectors.transitionTriggerContainer).find(this.options.selectors.transitionTrigger),this.$transitionTriggers.css("cursor","pointer"),this.$transitionTriggers.on("click."+this.cid,this.transit.bind(this))},preventSubmit:function(e){if(o(document.activeElement).is("button")&&o.contains(this.$form[0],document.activeElement)&&"submit"!==o(document.activeElement).attr("type"))return e.stopImmediatePropagation(),!1},onSubmit:function(e){if(this.options.flashMessageOnSubmit)return e.preventDefault(),n.execute("showFlashMessage","error",this.options.flashMessageOnSubmit),!1;if(this.$form.validate(),this.$form.valid()){const t={stopped:!1,event:e};if(n.trigger("checkout:before-submit",t),t.stopped)return;this.transit(e,{method:"POST"})}},transit:function(e,t){e.preventDefault(),this.options.enabled&&!this.inProgress&&this.options.transitionUrl&&(this.inProgress=!0,n.execute("showLoading"),o.ajax(this.prepareAjaxData(t,this.options.transitionUrl)).done(this.onSuccess.bind(this)).fail(this.onFail.bind(this)))},prepareAjaxData:function(e,t){return(e=e||{method:"GET"}).url=t+(-1!==s.indexOf(t,"?")?"&":"?")+"_widgetContainer=ajax&_wid=ajax_checkout",e.errorHandlerMessage=!1,this.$form&&(e.data=this.getFormData()),e.contentType=!1,e.processData=!1,e},getFormData:function(){return this.$form.find(this.options.selectors.stateToken).prop("disabled",!1).removeAttr("disabled"),new FormData(this.$form[0])},onSuccess:function(e){if(this.inProgress=!1,e.hasOwnProperty("responseData")){const t={stopped:!1,responseData:e.responseData};if(n.trigger("checkout:place-order:response",t),t.stopped)return}if(e.hasOwnProperty("redirectUrl"))n.execute("redirectTo",{url:e.redirectUrl},{redirect:!0});else{const t=o("<div/>").html(e),i=t.find("title");i.length&&(document.title=i.text());const r=this.options.selectors.checkoutFlashNotifications,a=this.options.selectors.checkoutSidebar,l=this.options.selectors.checkoutContent;n.trigger("checkout-content:before-update"),o(a).html(t.find(a).html()),o(l).html(t.find(l).html());const d=t.find(r);s.each(d,(function(e){const t=o(e),i=t.data("type");let r=t.data("message");r=r.replace(/\n/g,"<br>"),s.delay((function(){n.execute("showFlashMessage",i,r)}),100)})),n.trigger("checkout-content:updated"),n.trigger("layout:reposition")}n.execute("hideLoading")},onFail:function(){this.inProgress=!1,n.execute("hideLoading"),n.execute("showFlashMessage","error","Could not perform transition")},disposeTooltip:function(){this.$el.tooltip("dispose")},dispose:function(){this.disposed||(this.disposeTooltip(),this.$form&&this.$form.off("."+this.cid),this.$el.off("."+this.cid),this.$transitionTriggers.off("."+this.cid),n.off(null,null,this),a.__super__.dispose.call(this))}});return a}.call(t,i,t,e))||(e.exports=n)},"./bundles/orocheckout/js/app/views/address-view.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/extend/underscore.js"),n=i("./bundles/oroui/js/extend/jquery.js"),o=i("./bundles/oroui/js/mediator.js");return i("./bundles/oroui/js/app/views/base/view.js").extend({options:{addedAddressOptionClass:"option_added_address",hideNewAddressForm:!1,selectors:{address:null,fieldsContainer:null,region:null,shipToBillingCheckbox:null,externalShipToBillingCheckbox:null}},constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){if(this.options=n.extend(!0,{},this.options,e),this.$addressSelector=this.$el.find(this.options.selectors.address),this.typesMapping=this.$addressSelector.data("addresses-types"),this.$fieldsContainer=this.$el.find(this.options.selectors.fieldsContainer),this.$regionSelector=this.$el.find(this.options.selectors.region),this.$shipToBillingCheckbox=this.$el.find(this.options.selectors.shipToBillingCheckbox),this.shipToBillingContainer=this.$shipToBillingCheckbox.parent(),this.$addressSelector.on("change",this._onAddressChanged.bind(this)),this._onAddressChanged(),this.$regionSelector.on("change",this._onRegionListChanged.bind(this)),this._onRegionListChanged(),this.options.hideNewAddressForm&&(this.$shipToBillingCheckbox.on("change",this._handleShipToBillingAddressCheckbox.bind(this)),this.options.selectors.externalShipToBillingCheckbox)){this.$externalShipToBillingCheckbox=n(this.options.selectors.externalShipToBillingCheckbox);const e=this.$externalShipToBillingCheckbox.parent();e.on("changeHiddenClass",this._handleExternalShipToBillingAddressCheckboxContainer.bind(this,e))}this._handleShipToBillingAddressCheckbox(),this.$fieldsContainer.find(".notification_error").length&&this.$fieldsContainer.removeClass("hidden"),o.on("checkout:address:updated",this._onAddressUpdated,this),o.on("checkout:ship_to_checkbox:changed",this._onShipToCheckboxChanged,this)},_handleShipToBillingAddressCheckbox:function(e){const t=!!this.options.hideNewAddressForm&&this.$shipToBillingCheckbox.prop("checked"),i=this._isFormVisible(),n=!t&&i;this._handleNewAddressForm(n),n||this.$addressSelector.focus();const s=i&&this._isOnlyOneOption();this.$addressSelector.prop("disabled",t||s).inputWidget("refresh"),o.trigger("checkout:ship_to_checkbox:changed",this.$shipToBillingCheckbox),s&&(this.$addressSelector.inputWidget("dispose"),this.$addressSelector.hide().attr("data-skip-input-widgets",!0),this.$addressSelector.siblings("label").parent().toggle(n)),this.$externalShipToBillingCheckbox&&(this.$externalShipToBillingCheckbox.off("change"),this.$externalShipToBillingCheckbox.prop("checked",t),this.$externalShipToBillingCheckbox.on("change",this._handleExternalShipToBillingAddressCheckbox.bind(this)))},_handleNewAddressForm:function(e){e?this._showForm():this._hideForm()},_handleExternalShipToBillingAddressCheckbox:function(){this.$shipToBillingCheckbox.prop("checked",this.$externalShipToBillingCheckbox.prop("checked")).trigger("change")},_handleExternalShipToBillingAddressCheckboxContainer:function(e){e.hasClass("hidden")?this.shipToBillingContainer.addClass("hidden"):this.shipToBillingContainer.removeClass("hidden")},_onAddressChanged:function(){this._isFormVisible()?this._showForm():this._hideForm(),o.trigger("checkout:address:updated",this.$addressSelector)},_onAddressUpdated:function(e){if(e!==this.$addressSelector&&this.$addressSelector.prop("disabled")&&this.$shipToBillingCheckbox.prop("checked")){const t=e.val(),i=e.find("option:selected").text();if(this.$addressSelector.val(t),this.$addressSelector.val()!==t){let e=this.$addressSelector.find("."+this.options.addedAddressOptionClass);e.length||(e=n("<option/>").addClass(this.options.addedAddressOptionClass),this.$addressSelector.append(e)),e.attr("value",t).text(i),this.$addressSelector.val(t)}this.$addressSelector.inputWidget("refresh")}},_onShipToCheckboxChanged:function(e){e&&e!==this.$shipToBillingCheckbox&&e.prop("checked")&&o.trigger("checkout:address:updated",this.$addressSelector)},_isFormVisible:function(){return"0"===this.$addressSelector.val()},_isOnlyOneOption:function(){return 1===this.$addressSelector[0].length},_showForm:function(){void 0===this.$externalShipToBillingCheckbox&&(this.shipToBillingContainer.parents("[data-ship-to-billing-container]").removeClass("hidden"),this.shipToBillingContainer.removeClass("hidden").trigger("changeHiddenClass")),this.$fieldsContainer.removeClass("hidden")},_hideForm:function(e){void 0===this.$externalShipToBillingCheckbox&&(e||"0"===this.$addressSelector.val()||t.indexOf(this.typesMapping[this.$addressSelector.val()],"shipping")>-1?(this.shipToBillingContainer.parents("[data-ship-to-billing-container]").removeClass("hidden"),this.shipToBillingContainer.removeClass("hidden").trigger("changeHiddenClass")):(this.$shipToBillingCheckbox.prop("checked",!1),this.$shipToBillingCheckbox.trigger("change"),this.shipToBillingContainer.addClass("hidden").trigger("changeHiddenClass"))),this.$fieldsContainer.addClass("hidden")},_onRegionListChanged:function(e){this.$regionSelector.inputWidget("refresh")}})}.call(t,i,t,e))||(e.exports=n)},"./bundles/orocheckout/js/app/views/checkout-content-view.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/extend/underscore.js"),n=i("./bundles/oroui/js/extend/jquery.js"),o=i("./bundles/oroui/js/mediator.js"),s=i("./bundles/oroui/js/app/views/base/view.js");i("../node_modules/jquery.cookie/jquery.cookie.js");const r=s.extend({constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(){o.on("checkout-content:updated",this._onContentUpdated,this),o.on("checkout-content:before-update",this._onBeforeContentUpdate,this),this.initTabs(),this._onContentUpdated()},_onContentUpdated:function(){this.initLayout()},_onBeforeContentUpdate:function(){this.disposePageComponents()},initTabs:function(){const e="order-tab:state";this.$el.on("collapse:toggle","[data-collapse-trigger]",(function(i,s){o.trigger("scrollable-table:reload"),t.isObject(s)&&(s.isOpen?n.cookie(e,!0,{path:window.location.pathname}):n.cookie(e,null,{path:window.location.pathname}))}))},dispose:function(){this.disposed||(o.off("checkout-content:updated",this._onContentUpdated,this),o.off("checkout-content:before-update",this._onBeforeContentUpdate,this),r.__super__.dispose.call(this))}});return r}.call(t,i,t,e))||(e.exports=n)},"./bundles/orocheckout/js/app/views/checkout-inner-content-view.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/mediator.js");return i("./bundles/orocheckout/js/app/views/checkout-content-view.js").extend({constructor:function e(t){e.__super__.constructor.call(this,t)},_onContentUpdated:function(){this.initLayout().then((function(){t.trigger("checkout-content:initialized")}))}})}.call(t,i,t,e))||(e.exports=n)},"./bundles/orocheckout/js/app/views/late-checkout-registration-view.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/extend/jquery.js"),n=i("./bundles/oroui/js/extend/underscore.js");return i("./bundles/oroui/js/app/views/base/view.js").extend({$el:null,options:{selectors:{switcher:null,fieldsContainer:null}},constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.options=t.extend(!0,{},this.options,e),this.$switcher=this.$el.find(this.options.selectors.switcher),this.$fieldsContainer=this.$el.find(this.options.selectors.fieldsContainer),this.$switcher.on("change",this.onOptionChange.bind(this)),this.onOptionChange()},onOptionChange:function(){const e=this.$fieldsContainer.find("input");let i=!1;t(this.$switcher).is(":checked")?t(this.$fieldsContainer).show():(t(this.$fieldsContainer).hide(),i=!0),n.each(e,(function(e){t(e).prop("disabled",i).inputWidget("refresh")}))}})}.call(t,i,t,e))||(e.exports=n)},"./bundles/orocheckout/js/app/views/single-page-checkout-address-view.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/extend/underscore.js"),n=i("./bundles/orotranslation/js/translator.js"),o=i("./bundles/fosjsrouting/js/router.js"),s=i("./bundles/oroui/js/app/views/base/view.js"),r=i("./bundles/oroaction/js/button-manager.js"),a=i("./bundles/oroui/js/extend/jquery.js"),l=s.extend({options:{entityId:null,entityClass:"Oro\\Bundle\\CheckoutBundle\\Entity\\Checkout",jsDialogWidget:"orofrontend/js/app/components/frontend-dialog-widget",dialogClass:"ui-dialog--frontend",dialogRoute:"oro_frontend_action_widget_form",dialogWidth:1e3,dialogHeight:"auto",resizable:!1,autoResize:!0,popupIcon:"fa-map-marker",popupBadge:!0},enterManuallyOriginLabel:null,operations:{billing:"b2b_flow_checkout_single_page_new_billing_address",shipping:"b2b_flow_checkout_single_page_new_shipping_address"},titles:{billing:n("oro.checkout.billing_address.label"),shipping:n("oro.checkout.shipping_address.label")},events:{change:"onChange","select2-selecting":"onSelecting"},constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.options=t.defaults(e||{},this.options),this.enterManuallyOriginLabel=this.$el.find('[value="0"]').text(),this._changeEnterManualValueLabel(),l.__super__.initialize.call(this,e)},onChange:function(e){this.isManual(e.val)?e.stopPropagation():this._resetEnterManualValueLabel(e)},onSelecting:function(e){const t=a(e.target).val();this.isManual(e.val)&&this.openDialog(e,t)},onEnableState:function(){this._changeEnterManualValueLabel()},onToggleState:function(e,t,i){e?(this.$el.prop("disabled","disabled"),this.$el.val(t),this.$el.inputWidget("refresh"),this._changeEnterManualValueLabel(i)):this.$el.prop("disabled",!1)},openDialog:function(e,t){const i=a(e.target).data("address-type"),n=o.generate(this.options.dialogRoute,{operationName:this._operationName(i),entityClass:this.options.entityClass,entityId:this.options.entityId});new r({hasDialog:!0,showDialog:!0,hasForm:!0,dialogUrl:n,jsDialogWidget:this.options.jsDialogWidget,onDialogResult:this.onDialogResult.bind(this,e,t),dialogOptions:{title:this._title(i),dialogOptions:{dialogClass:this.options.dialogClass,width:this.options.dialogWidth,height:this.options.dialogHeight,resizable:this.options.resizable,autoResize:this.options.autoResize},fullscreenViewOptions:{popupLabel:this._title(i),popupIcon:this.options.popupIcon,popupBadge:this.options.popupBadge}}}).execute(e)},onDialogResult:function(e,t,i){i.result?(a(e.target).hasClass("custom-address")||a(e.target).addClass("custom-address"),a(e.target).trigger("forceChange")):(a(e.target).val(t),a(e.target).inputWidget("refresh"))},isManual:function(e){return 0===parseInt(e)},isAvailableShippingType:function(e){const i=this.$el.data("addresses-types");return!i.hasOwnProperty(this.$el.val())||t.indexOf(i[this.$el.val()],e)>-1},_changeEnterManualValueLabel:function(e){if(this.isManual(this.$el.val())){let t=this.$el.data("new-address-label");t&&(t=this.enterManuallyOriginLabel+" ("+t+")");const i=e||t;i&&this.$el.find('[value="0"]').text(i),this.$el.inputWidget("refresh")}},_resetEnterManualValueLabel:function(e){if(this.enterManuallyOriginLabel){const t=a(e.target);t.find('[value="0"]').text(this.enterManuallyOriginLabel),t.inputWidget("refresh")}},_title:function(e){return this.titles.hasOwnProperty(e)?this.titles[e]:this.titles.billing},_operationName:function(e){return this.operations.hasOwnProperty(e)?this.operations[e]:this.operations.billing}});return l}.call(t,i,t,e))||(e.exports=n)},"./bundles/orocheckout/js/app/views/single-page-checkout-form-view.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/extend/jquery.js"),n=i("./bundles/oroui/js/extend/underscore.js"),o=i("./bundles/oroui/js/mediator.js"),s=i("./bundles/oroui/js/app/views/base/view.js"),r=i("./bundles/orocheckout/js/app/views/single-page-checkout-submit-button-view.js"),a=i("./bundles/orocheckout/js/app/views/single-page-checkout-address-view.js"),l=s.extend({options:{submitButtonSelector:'[type="submit"]',billingAddressSelector:'select[data-role="checkout-billing-address"]',shippingAddressSelector:'select[data-role="checkout-shipping-address"]',shipToSelector:'[data-role="checkout-ship-to"]',transitionFormFieldSelector:'[name*="oro_workflow_transition"]',originShippingMethodTypeSelector:'[name$="shippingMethodType"]',formShippingMethodSelector:'[name$="[shipping_method]"]',formShippingMethodTypeSelector:'[name$="[shipping_method_type]"]',originPaymentMethodSelector:'[name="paymentMethod"]',formPaymentMethodSelector:'[name$="[payment_method]"]',originPaymentFormSelector:'[data-content="payment_method_form"]',stateTokenSelector:'[name$="[state_token]"]',couponCodeSelector:'[data-role="coupon-code"]',consentCheckboxSelector:'[data-role="consent-checkbox"]',consentsFieldSelector:'[data-name="field__customer-consents"]',entityId:null},events:{change:"onChange",forceChange:"onForceChange",submit:"onSubmit"},listen:{"before-save-state":"onBeforeSaveState","after-save-state":"onAfterSaveState"},lastSerializedData:null,timeout:50,constructor:function e(t){this.onChange=n.debounce(this.onChange,this.timeout),e.__super__.constructor.call(this,t)},initialize:function(e){this.options=n.extend({},this.options,e||{}),this.subview("checkoutSubmitButton",new r({el:this.$el.find(this.options.submitButtonSelector)})),this.subview("checkoutBillingAddress",new a({el:this.$el.find(this.options.billingAddressSelector),entityId:this.options.entityId})),this.subview("checkoutShippingAddress",new a({el:this.$el.find(this.options.shippingAddressSelector),entityId:this.options.entityId})),this._toggleShipTo(),this._disableShippingAddress(),this._changeShippingMethod(),this._changePaymentMethod(),o.on("frontend:coupons:changed",this._afterApplyCoupon,this),l.__super__.initialize.call(this,e)},render(){l.__super__.render.call(this),o.trigger("single-page-checkout:rendered")},delegateEvents:function(e){l.__super__.delegateEvents.call(this,e),this.$el.bindFirst("submit"+this.eventNamespace(),this.preventSubmit.bind(this))},afterCheck:function(e,t){e||(e=this.$el);const i=this.getSerializedData();(this.lastSerializedData!==i||t)&&(this.trigger("after-check-form",i,e),this.lastSerializedData=i)},onChange:function(e){this._isAvailableChange(e)&&(o.trigger("single-page-checkout:before-change"),this._toggleShipTo(),this._disableShippingAddress(),this._changeShippingMethod(),this._changePaymentMethod(),this.afterCheck(t(e.target),!1),o.trigger("single-page-checkout:after-change"))},onForceChange:function(e){o.trigger("single-page-checkout:before-force-change"),this._toggleShipTo(),this._disableShippingAddress(),this._changeShippingMethod(),this._changePaymentMethod(),this.afterCheck(t(e.target),!0),o.trigger("single-page-checkout:after-force-change")},onBeforeSaveState:function(){this._disableShippingAddress(),this.subview("checkoutSubmitButton").onToggleState()},onAfterSaveState:function(){this.subview("checkoutBillingAddress").setElement(this.$el.find(this.options.billingAddressSelector)),this.subview("checkoutBillingAddress").onEnableState(),this.subview("checkoutShippingAddress").setElement(this.$el.find(this.options.shippingAddressSelector)),this.subview("checkoutShippingAddress").onEnableState(),this.subview("checkoutSubmitButton").setElement(this.$el.find(this.options.submitButtonSelector)),this.subview("checkoutSubmitButton").onEnableState()},preventSubmit:function(e){if(t(document.activeElement).is("button")&&t.contains(this.el,document.activeElement)&&"submit"!==t(document.activeElement).attr("type"))return e.stopImmediatePropagation(),!1},onSubmit:function(e){if(e.preventDefault(),!this.$el.validate().form())return;const t=this.$el.find(this.options.formPaymentMethodSelector).val(),i={stopped:!1,resume:this.transit.bind(this),data:{paymentMethod:t}};o.trigger("checkout:payment:before-transit",i),o.trigger("checkout:before-submit",i),i.stopped||this.transit()},transit:function(){this._changeShippingMethod(),this._changePaymentMethod();const e={paymentMethod:this.$el.find(this.options.formPaymentMethodSelector).val()};o.trigger("checkout:payment:before-form-serialization",e),this.subview("checkoutSubmitButton").onToggleState(),this.trigger("submit-form",this.getSerializedData())},getSerializedData:function(){const e=this.$el.closest("form");return e.find(this.options.stateTokenSelector).prop("disabled",!1),e.find(this.options.transitionFormFieldSelector).serialize()},dispose:function(){this.disposed||(o.off("frontend:coupons:changed",this._afterApplyCoupon,this),l.__super__.dispose.call(this))},_isAvailableChange:function(e){return!(this.subview("checkoutSubmitButton").isHovered()||!t(e.target).is(this.options.consentCheckboxSelector)&&!t(e.target).is(this.options.consentsFieldSelector)&&(!t(e.target).is(":visible")||t(e.target).is(this.options.couponCodeSelector)))},_disableShippingAddress:function(){const e=this.$el.find(this.options.shipToSelector),t=e.is(":visible")&&e.is(":checked"),i=this.subview("checkoutBillingAddress").$el,n=i.find(":selected").text();this.subview("checkoutShippingAddress").onToggleState(t,i.val(),n)},_isAvailableShipTo:function(){return this.subview("checkoutBillingAddress").isAvailableShippingType("shipping")},_toggleShipTo:function(){const e=this.$el.find(this.options.shipToSelector),t=e.parent();this._isAvailableShipTo()?t.removeClass("hidden"):(e.prop("checked",!1),t.addClass("hidden"))},_changeShippingMethod:function(){const e=this.$el.find(this.options.originShippingMethodTypeSelector).filter(":checked");e.val()&&(this.$el.find(this.options.formShippingMethodSelector).val(e.data("shipping-method")),this.$el.find(this.options.formShippingMethodTypeSelector).val(e.data("shipping-type")))},_changePaymentMethod:function(){const e=this.$el.find(this.options.originPaymentMethodSelector).filter(":checked").val();e&&this.$el.find(this.options.formPaymentMethodSelector).val(e)},_afterApplyCoupon:function(){this.$el.find(this.options.couponCodeSelector).trigger("forceChange")}});return l}.call(t,i,t,e))||(e.exports=n)},"./bundles/orocheckout/js/app/views/single-page-checkout-submit-button-view.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";return i("./bundles/oroui/js/app/views/base/view.js").extend({events:{mouseover:"onHover",mouseout:"onHoverOut"},isHoveredFlag:!1,constructor:function e(t){e.__super__.constructor.call(this,t)},onToggleState:function(){this.$el.prop("disabled","disabled")},onEnableState:function(){this.$el.prop("disabled",!1)},onHover:function(){this.isHoveredFlag=!0},onHoverOut:function(){this.isHoveredFlag=!1},isHovered:function(){return this.isHoveredFlag}})}.call(t,i,t,e))||(e.exports=n)},"./bundles/oropricing/js/app/components/products-prices-component.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/extend/jquery.js"),n=i("./bundles/oroui/js/extend/underscore.js"),o=i("./bundles/oroui/js/mediator.js"),s=i("./bundles/fosjsrouting/js/router.js");return i("./bundles/oroui/js/app/components/base/component.js").extend({options:{customer:null,currency:null,tierPrices:null,tierPricesRoute:"",requestKeys:{ACCOUNT:"customer_id",CURRENCY:"currency"}},constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.options=t.extend(!0,{},this.options,e||{}),this.initPricesListeners(),this.initFieldsListeners(),o.trigger("pricing:refresh:products-tier-prices",this.options.tierPrices)},initPricesListeners:function(){this.listenTo(o,{"pricing:load:prices":this.reloadPrices,"pricing:get:products-tier-prices":this.getProductsTierPrices,"pricing:load:products-tier-prices":this.loadProductsTierPrices})},initFieldsListeners:function(){this.listenTo(o,{"update:currency":this.setCurrency,"customer-customer-user:change":this.setCustomer})},getProductsTierPrices:function(e){e(this.options.tierPrices)},reloadPrices:function(){this.loadProductsTierPrices(this.getProductsId(),(function(e){o.trigger("pricing:refresh:products-tier-prices",e)}))},loadProductsTierPrices:function(e,i){const r={requestAttributes:{}};o.trigger("pricing:refresh:products-tier-prices:before",r),this.joinSubrequests(this.loadProductsTierPrices,e,i,((e,i)=>{let o={product_ids:e};o[this.options.requestKeys.CURRENCY]=this.getCurrency(),o[this.options.requestKeys.ACCOUNT]=this.getCustomer(),o=n.extend({},o,r.requestAttributes||{}),t.get(s.generate(this.options.tierPricesRoute,o),i)}))},joinSubrequests:function(e,t,i,o){e.timeoutId=e.timeoutId||null,e.data=e.data||[],e.callbacks=e.callbacks||[],e.data=n.union(e.data,t),e.callbacks.push(i),e.timeoutId&&clearTimeout(e.timeoutId),e.timeoutId=setTimeout((function(){const t=e.data,i=e.callbacks;e.timeoutId=null,e.data=[],e.callbacks=[],o(t,(function(e){n.each(i,(function(t){t(e)}))}))}),50)},getProductsId:function(){return n.map(this.getLineItems(),(function(e){return e.product}))},getLineItems:function(){const e=[];return o.trigger("pricing:collect:line-items",e),e},getCurrency:function(){return this.options.currency},setCurrency:function(e){this.options.currency=e,this.reloadPrices()},getCustomer:function(){return this.options.customer},setCustomer:function({customerId:e}){e!==this.options.customer&&(this.options.customer=e,this.reloadPrices())}})}.call(t,i,t,e))||(e.exports=n)},"./bundles/oropromotion/js/app/views/frontend-coupon-add-view.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/extend/jquery.js"),n=i("./bundles/oroui/js/extend/underscore.js"),o=i("./bundles/orotranslation/js/translator.js"),s=i("./bundles/fosjsrouting/js/router.js"),r=i("./bundles/oroui/js/app/views/base/view.js"),a=i("./bundles/oroui/js/app/views/loading-mask-view.js"),l=i("./bundles/oroui/js/mediator.js"),d=i("../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/oropromotion/templates/field-errors.html"),c=r.extend({options:{entityClass:null,entityId:null,addCouponRoute:"oro_promotion_frontend_add_coupon",removeCouponRoute:"oro_promotion_frontend_remove_coupon",skipMaskView:!1,messageNamespace:"frontend-coupon-add-view",refreshOnSuccess:!0,selectors:{couponCodeSelector:null,couponApplySelector:null,couponRemoveSelector:null,messagesContainer:null}},requiredOptions:["entityClass","entityId"],constructor:function e(i){this.options=t.extend(!0,{},this.options,i||{}),this._checkOptions(),e.__super__.constructor.call(this,i)},initialize:function(e){c.__super__.initialize.call(this,e);const t=location.href.replace(/\&?update_checkout_state=1\&?/i,"");t!==location.href&&history.replaceState({},document.title,t)},events:function(){const e={};return e["click "+this.options.selectors.couponApplySelector]="applyCoupon",e["keydown "+this.options.selectors.couponCodeSelector]="updateCouponState",e["change "+this.options.selectors.couponCodeSelector]="updateCouponState",e["click "+this.options.selectors.couponRemoveSelector]="removeCoupon",e["shown.bs.collapse"]="focusCouponField",e},updateCouponState:function(e){this.applyCouponByEnter(e),this._clearMessages()},focusCouponField:function(){this.$(this.options.selectors.couponCodeSelector).trigger("focus")},applyCouponByEnter:function(e){13===e.keyCode&&this.applyCoupon(e)},applyCoupon:function(e){e.preventDefault();const i=this.$(this.options.selectors.couponCodeSelector).val();if(!i)return;const n={couponCode:i,entityClass:this.options.entityClass,entityId:this.options.entityId};this._showLoadingMask(),t.ajax({url:s.generate(this.options.addCouponRoute),type:"POST",data:n,dataType:"json",success:e=>{e.success?(this._showSuccess(o("oro.promotion.coupon.messages.coupon_code_applied_successfully")),this._updatePageData()):this._showErrors(e.errors)}}).always(this._hideLoadingMask.bind(this))},removeCoupon:function(e){e.preventDefault();const i=t(e.currentTarget).data("object-id");this._showLoadingMask(),t.ajax({url:s.generate(this.options.removeCouponRoute,{entityClass:this.options.entityClass,entityId:this.options.entityId,id:i}),type:"DELETE",dataType:"json",success:()=>{this._showSuccess(o("oro.promotion.coupon.messages.removed")),this._updatePageData()}}).always(this._hideLoadingMask.bind(this))},_showSuccess:function(e){this._clearMessages();const t={flash:!0};this.options.refreshOnSuccess&&(t.afterReload=!0),l.execute("showFlashMessage","success",e,t)},_showErrors:function(e){this._clearMessages(),this.$(this.options.selectors.couponCodeSelector).addClass("input--error"),this.$(this.options.selectors.messagesContainer).html(d({messages:e.map((e=>o(e)))}))},_clearMessages:function(){this.$(this.options.selectors.couponCodeSelector).removeClass("input--error"),this.$el.find(this.options.selectors.messagesContainer).html("")},_updatePageData:function(){if(this.options.refreshOnSuccess){l.execute("showLoading");const e=location.href.split("?"),t=(void 0===e[1]?"?":e[1]+"&")+"update_checkout_state=1";l.execute("redirectTo",{url:e[0]+"?"+t},{replace:!0,fullRedirect:!0})}else l.trigger("frontend:coupons:changed")},_showLoadingMask:function(){this.options.skipMaskView||(this._ensureLoadingMaskLoaded(),this.subview("loadingMask").isShown()||this.subview("loadingMask").show())},_hideLoadingMask:function(){this._ensureLoadingMaskLoaded(),this.subview("loadingMask").isShown()&&this.subview("loadingMask").hide()},_ensureLoadingMaskLoaded:function(){this.subview("loadingMask")||this.subview("loadingMask",new a({container:this.$el}))},_checkOptions:function(){const e=this.requiredOptions.filter((e=>n.isUndefined(this.options[e])&&!this.options[e]));if(e.length)throw new TypeError("Missing required option(s): "+e.join(", "));const t=[];if(n.each(this.options.selectors,((e,i)=>{e||t.push(i)})),t.length)throw new TypeError("Missing required selectors(s): "+t.join(", "))}});return c}.call(t,i,t,e))||(e.exports=n)},"./bundles/ororfp/js/app/views/frontend-line-item-view.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/orofrontend/js/app/elements-helper.js"),n=i("./bundles/oroui/js/app/views/base/view.js"),o=i("./bundles/orolocale/js/formatter/number.js"),s=i("./bundles/oroui/js/mediator.js"),r=i("./bundles/oroui/js/extend/jquery.js"),a=i("./bundles/oroui/js/extend/underscore.js"),l=n.extend(a.extend({},t,{elements:{lineItem:'[data-role="line-item"]',editView:'[data-role="line-item-edit"]',viewView:'[data-role="line-item-view"]',template:["$html","#rfp-form-line-item-view-template"],edit:'[data-role="edit"]',update:'[data-role="update"]',decline:'[data-role="decline"]',viewContent:["viewView",'[data-role="content"]'],fieldProduct:'[data-name="field__product"]',fieldQuantity:'[data-name="field__quantity"]',fieldUnit:'[data-name="field__product-unit"]',fieldPrice:'[data-name="field__value"]',fieldCurrency:'[data-name="field__currency"]',fieldCommentCheckbox:'[data-role="field__comment-checkbox"]',fieldComment:'[data-name="field__comment"]',remove:'[data-role="remove"]'},elementsEvents:{edit:["click","edit"],update:["click","update"],decline:["click","decline"]},formState:null,events:{'content:remove [data-role="lineitem"]':"onSubCollectionItemRemove"},constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){l.__super__.initialize.call(this,e),this.initializeElements(e),this.onInit(),this.template=a.template(this.getElement("template").text()),this.listenTo(s,"line-items:show:before",this.onShowBefore),a.isEmpty(this.getProduct())&&this.createInputWidget()},onInit:function(){a.isEmpty(this.formState)&&this.getElement("decline").text(a.__("oro.rfp.request.btn.delete.label"))},onShowBefore:function(){a.isEmpty(this.getProduct())||this.viewMode()},createInputWidget:function(){this.$el.removeAttr("data-skip-input-widgets").inputWidget("seekAndCreate")},render:function(){const e=this.template(this.getData());this.getElement("viewContent").html(e)},toggleEditMode:function(e){"enable"===e?(this.getElement("viewView").addClass("hidden"),this.getElement("editView").removeClass("hidden"),this.getElement("decline").text(a.__("oro.rfp.request.btn.cancel.label"))):(this.getElement("editView").addClass("hidden"),this.getElement("viewView").removeClass("hidden"))},viewMode:function(){this.validate()&&(this.render(),this.toggleEditMode("disable"))},editMode:function(){this.createInputWidget(),this.toggleEditMode("enable")},edit:function(e){e.preventDefault(),this.saveFormState(),this.editMode()},decline:function(e){e.preventDefault(),a.isEmpty(this.formState)?this.remove():(this.revertChanges(),this.viewMode())},update:function(e){e.preventDefault(),this.viewMode()},remove:function(){this.getElement("remove").click()},onSubCollectionItemRemove(e){0===r(e.target).siblings(e.target).length&&a.delay(this.remove.bind(this))},getData:function(){this.clearElementsCache();const e={formatter:o},t=this.getElement("fieldQuantity"),i=this.getElement("fieldUnit"),n=this.getElement("fieldPrice"),s=this.getElement("fieldCurrency");return e.product=this.getProduct(),e.comment=this.getComment()||"",e.lines=[],a.each(t,(function(a,l){e.lines.push({quantity:t[l].value,unit:i[l].value,price:o.unformatStrict(n[l].value),currency:s[l].value,found_price:r(n[l]).data("found_price")})})),e},getComment:function(){return this.getElement("fieldCommentCheckbox").prop("checked")?this.getElement("fieldComment").val():(this.getElement("fieldComment").val(""),null)},getProduct:function(){const e=this.getElement("fieldProduct"),t=e.data("selected-data")||{};return e.inputWidget("data")||t||null},validate:function(){let e=!a.isEmpty(this.getProduct());const t=this.$el.closest("form").validate();return!e&&t?(t.showLabel(this.getElement("fieldProduct")[0],a.__("oro.rfp.requestproduct.product.blank")),e):(t&&this.$el.find(":input").each((function(){r(this).data("name")&&(e=t.element(this)&&e)})),e)},saveFormState:function(){this.formState={},this.$el.find(":input[data-name]").each(((e,t)=>{this.formState[t.name]=t.value}))},revertChanges:function(){this.formState&&this.$el.find(":input[data-name]").each(((e,t)=>{const i=this.formState[t.name];void 0!==i&&t.value!==i&&(t.value=i,r(t).change())}))}}));return l}.call(t,i,t,e))||(e.exports=n)},"./bundles/ororfp/js/app/views/line-item-offer-view.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroproduct/js/app/views/base-product-view.js"),n=i("./bundles/oroui/js/extend/underscore.js"),o=t.extend({constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.$el.trigger("options:set:lineItemModel",e),this.deferredInitializeCheck(e,["lineItemModel"])},deferredInitialize:function(e){this.lineItemModel=e.lineItemModel,this.lineItemModel.on("change",this.updateModel,this),this.updateModel(),e.modelAttr=n.defaults(e.modelAttr||{},{sku:this.lineItemModel.get("sku")}),o.__super__.initialize.call(this,e)},updateModel:function(){this.model?this.model.set({id:this.lineItemModel.get("productId"),product_units:this.lineItemModel.get("product_units"),sku:this.lineItemModel.get("sku")}):(this.modelAttr.id=this.lineItemModel.get("productId"),this.modelAttr.product_units=this.lineItemModel.get("product_units"))}});return o}.call(t,i,t,e))||(e.exports=n)},"./bundles/ororfp/js/app/views/line-item-view.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/app/views/base/view.js"),n=i("./bundles/orofrontend/js/app/elements-helper.js"),o=i("./bundles/oroui/js/app/models/base/model.js"),s=i("./bundles/oroproduct/js/app/units-util.js"),r=i("./bundles/oroui/js/extend/jquery.js"),a=i("./bundles/oroui/js/extend/underscore.js"),l=i("./bundles/orotranslation/js/translator.js"),d=i("./bundles/oroui/js/app/views/loading-mask-view.js"),c=i("./bundles/fosjsrouting/js/router.js"),u=t.extend(a.extend({},n,{options:{ftid:"",selectors:{quantitySelector:'[data-name="field__quantity"]',unitSelector:'[data-name="field__product-unit"]'},syncClass:"synchronized",unitsRoute:"oro_product_frontend_ajaxproductunit_productunits",compactUnits:!1,itemsContainer:'[data-role="lineitems"]',itemWidget:'[data-role="lineitem"]',addItemButton:'[data-role="lineitem-add"]',skipLoadingMask:!1},$el:null,$itemsContainer:null,$addItemButton:null,units:{},loadingMask:null,elements:{productId:'[data-name="field__product"]'},modelElements:{productId:"productId"},modelAttr:{productId:0,product_units:{}},modelEvents:{productId:["change","onProductChanged"]},constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.options=r.extend(!0,{},this.options,e||{}),this.options.ftid||(this.options.ftid=this.$el.data("content").toString().replace(/[^a-zA-Z0-9]+/g,"_").replace(/_+$/,"")),this.delegate("click",".removeLineItem",this.removeRow),this.$itemsContainer=this.$el.find(this.options.itemsContainer),this.$addItemButton=this.$el.find(this.options.addItemButton),this.loadingMask=new d({container:this.$el}),this.$el.on("content:changed",this.onContentChanged.bind(this)),this.initModel(e),this.initializeElements(e),this.model.set("product_units",this.options.units[this.model.get("productId")]||[]),this.$el.on("options:set:lineItemModel",((e,t)=>{t.lineItemModel=this.model})),this.initializeSubviews({lineItemModel:this.model})},initModel:function(e){this.modelAttr=r.extend(!0,{},this.modelAttr,e.modelAttr||{}),this.model=new o,a.each(this.modelAttr,(function(e,t){this.model.has(t)||this.model.set(t,e)}),this)},handleLayoutInit:function(){this.checkAddButton(),this._resolveDeferredRender()},checkAddButton:function(){this.$addItemButton.toggle(Boolean(this.model.get("productId")))},initSelects:function(){this.$el.find(this.options.unitsSelect).addClass(this.options.syncClass)},removeRow:function(){this.$el.trigger("content:remove"),this.remove()},onProductChanged:function(e){void 0!==e&&e.event&&this.model.set("sku",e.event.added.sku),this.checkAddButton(),this.model.get("productId")&&!this.$itemsContainer.children().length&&this.$addItemButton.click(),this.$itemsContainer.children().length&&this.updateContent(!0)},onContentChanged:function(e){this.updateContent(!1)},updateContent:function(e){const t=this.model.get("productId"),i=this.units[t];if(!t||i)this.updateProductUnits(i,e||!1);else{const e=this,i={id:t};this.options.compactUnits&&(i.short=!0),r.ajax({url:c.generate(this.options.unitsRoute,i),type:"GET",beforeSend:function(){e.options.skipLoadingMask||e.loadingMask.show()},success:function(i){e.units[t]=i.units,e.updateProductUnits(i.units,!0)},complete:function(){e.loadingMask.hide()},errorHandlerMessage:l(this.options.errorMessage)})}},updateProductUnits:function(e,t){const i=this;this.model.set("product_units",e);const n=i.$el.find(i.options.itemWidget);r.each(n,(function(e,n){const o=r(n).find(i.options.selectors.unitSelector);!t&&o.hasClass(i.options.syncClass)||(s.updateSelect(i.model,o),o.addClass(i.options.syncClass))})),t&&this.$el.find("select").inputWidget("refresh")},dispose:function(){this.disposed||u.__super__.dispose.call(this)}}));return u}.call(t,i,t,e))||(e.exports=n)},"./bundles/ororfp/js/app/views/line-items-view.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/extend/jquery.js"),n=i("./bundles/oroui/js/extend/underscore.js"),o=i("./bundles/oroui/js/app/views/base/view.js"),s=i("./bundles/orofrontend/js/app/elements-helper.js"),r=i("./bundles/oropricing/js/app/components/products-prices-component.js"),a=i("./bundles/oroui/js/mediator.js"),l=o.extend(n.extend({},s,{options:{},constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.options=t.extend(!0,{},this.options,e||{}),l.__super__.initialize.call(this,e),this.subview("productsPricesComponent",new r({_sourceElement:this.$el,tierPrices:this.options.tierPrices,currency:this.options.currency,tierPricesRoute:this.options.tierPricesRoute})),this.initializeSubviews()},handleLayoutInit:function(){this.$el.find(".add-lineitem").mousedown((function(e){t(this).click()})),a.trigger("line-items:show:before"),this.$el.find(".view-loading").remove(),this.$el.find(".request-form__content").show(),this._resolveDeferredRender()},getProductsId:function(){let e=this.$el.find('input[data-ftid$="_product"]');return e=n.filter(e,(function(e){return e.value.length>0})),e=n.map(e,(function(e){return e.value})),e},getItems:function(){const e=this.$el.find(".order-line-item"),i=[];return n.each(e,(function(e){const n=t(e),o=n.find('input[data-ftid$="_product"]')[0].value;if(0===o.length)return;const s=n.find('select[data-ftid$="_productUnit"]')[0].value,r=n.find('input[data-ftid$="_quantity"]')[0].value;i.push({product:o,unit:s,qty:r})})),i},dispose:function(){this.disposed||l.__super__.dispose.call(this)}}));return l}.call(t,i,t,e))||(e.exports=n)},"./bundles/oroshipping/js/app/views/shipping-methods-view.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/app/views/base/view.js"),n=i("./bundles/oroui/js/extend/underscore.js"),o=i("./bundles/oroui/js/extend/jquery.js"),s=i("./bundles/orolocale/js/formatter/number.js"),r=i("./bundles/oroui/js/mediator.js"),a=t.extend({autoRender:!0,options:{template:""},constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){a.__super__.initialize.call(this,e),this.options=n.defaults(e||{},this.options),this.options.template=n.template(this.options.template),r.on("transition:failed",this.render.bind(this,[]))},render:function(e){this.updateShippingMethods(e),r.trigger("layout:adjustHeight"),r.trigger("checkout:shipping-method:rendered")},updateShippingMethods:function(e){const t=o(this.options.template({methods:e||this.options.data.methods,currentShippingMethod:this.options.data.currentShippingMethod,currentShippingMethodType:this.options.data.currentShippingMethodType,formatter:s}));this.$el.html(t)}});return a}.call(t,i,t,e))||(e.exports=n)},"./bundles/orotax/js/app/components/order-taxes-component.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/extend/underscore.js"),n=i("./bundles/oroui/js/extend/jquery.js"),o=i("./bundles/oroui/js/mediator.js"),s=i("./bundles/oroui/js/app/components/base/component.js"),r=i("./bundles/orotax/js/formatter/tax.js");return s.extend({options:{selectors:{totalsTemplate:"#order-taxes-totals-template",collapseSelector:'[data-role="order-taxes-totals"]'}},totalsTemplate:null,constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.options=t.defaults(e||{},this.options),this.listenTo(o,"entry-point:order:trigger:totals",this.appendTaxResult),this.totalsTemplate=n(this.options.selectors.totalsTemplate).html()},appendTaxResult:function(e){const i=t.extend({subtotals:{}},e).subtotals;t.map(t.where(i,{type:"tax"}),this.prepareItem.bind(this))},prepareItem:function(e,i){e.data.total=r.formatItem(e.data.total),e.data.shipping=r.formatItem(e.data.shipping),e.data.taxes=t.map(e.data.taxes,r.formatTax),e.data.show=n(this.options.selectors.collapseSelector).eq(i).hasClass("show"),e.template=this.totalsTemplate}})}.call(t,i,t,e))||(e.exports=n)},"./bundles/orotax/js/formatter/tax.js":(e,t,i)=>{var n,o;n=[i("./bundles/oroui/js/extend/underscore.js"),i("./bundles/orolocale/js/formatter/number.js"),i("./bundles/orolocale/js/locale-settings.js")],void 0===(o=function(e,t,i){"use strict";return function(){const n=function(n,o){return e.isUndefined(o)&&(o=i.getCurrency()),e.isNaN(parseFloat(n))?n:t.formatCurrency(n,o)};return{formatItem:function(t,o){void 0===o&&(o=i.getCurrency());const s=e.extend({includingTax:0,excludingTax:0,taxAmount:0,currency:o},t);return{includingTax:n(s.includingTax,s.currency),excludingTax:n(s.excludingTax,s.currency),taxAmount:n(s.taxAmount,s.currency)}},formatTax:function(o){const s=e.extend({taxAmount:0,taxableAmount:0,rate:0,tax:"",currency:i.getCurrency()},o);return{tax:s.tax,taxAmount:n(s.taxAmount,s.currency),taxableAmount:n(s.taxableAmount,s.currency),rate:(r=s.rate,r.indexOf("%")>-1?r:t.formatPercent(r))};var r},formatElement:function(e,t){return n(e,t)}}}()}.apply(t,n))||(e.exports=o)}}]);