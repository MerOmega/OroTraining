(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[528],{"../node_modules/@oroinc/oro-webpack-config-builder/loader/text-loader.js!./bundles/oropricing/templates/order/frontend/subtotals.html":t=>{t.exports='<% if (item.visible) { %>\n    <tr>\n        <th scope="row"><%- item.label %></th>\n        <td><%- item.formattedAmount %></td>\n    </tr>\n<% } %>\n'},"../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/oropricing/templates/order/frontend/totals.html":(module,__unused_webpack_exports,__webpack_require__)=>{var _=__webpack_require__("./bundles/oroui/js/extend/underscore.js");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<tr>\n    <th class="order-checkout-widget__total" scope="row">'+(null==(__t=item.label)?"":_.escape(__t))+'</th>\n    <td class="order-checkout-widget__total">\n        <span class="order-checkout-widget__total-price">'+(null==(__t=item.formattedAmount)?"":_.escape(__t))+"</span>\n    </td>\n</tr>\n";return __p}},"../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/oropricing/templates/order/totals-no-data.html":(module,__unused_webpack_exports,__webpack_require__)=>{var _=__webpack_require__("./bundles/oroui/js/extend/underscore.js");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="no-data">\n    '+(null==(__t=_.__("oro.pricing.totals.no_data"))?"":_.escape(__t))+"\n</div>\n";return __p}},"../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/oropricing/templates/product/price.html":(module,__unused_webpack_exports,__webpack_require__)=>{var _=__webpack_require__("./bundles/oroui/js/extend/underscore.js");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<span class="hidden" itemprop="priceCurrency" aria-hidden="true">'+(null==(__t=price.currency)?"":_.escape(__t))+'</span><span itemprop="price" class="hidden" aria-hidden="true">'+(null==(__t=numeral(price.price).format("0.00"))?"":_.escape(__t))+"</span>"+(null==(__t=price.formatted_price.trim())?"":_.escape(__t))+"\n";return __p}},"../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/oropricing/templates/product/prices-price-overridden.html":(module,__unused_webpack_exports,__webpack_require__)=>{var _=__webpack_require__("./bundles/oroui/js/extend/underscore.js");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="product-price-overridden" style="display: none;">\n    <i class="fa-info-circle"\n       data-toggle="popover"\n       data-placement="bottom"\n       data-close="false"\n       data-class="product-price-hint"\n       data-content="'+(null==(__t=["<div class='hint-title'>",_.__("oro.pricing.product_prices.price_is_overridden"),"</div>","<a class='btn' href='#'>","<span class='fa-refresh'></span>",_.__("oro.pricing.product_prices.reset_price"),"</a>"].join(""))?"":__t)+'">\n    </i>\n</div>\n';return __p}},"../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/oropricing/templates/product/prices-tier-button.html":(module,__unused_webpack_exports,__webpack_require__)=>{var _=__webpack_require__("./bundles/oroui/js/extend/underscore.js");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="add-on btn btn-icon btn-square-default product-tier-prices"\n     data-class="prices-tier-popover"\n     role="button"\n     aria-label="'+(null==(__t=_.__("oro.pricing.view_all_prices"))?"":_.escape(__t))+'"\n    >\n    <span class="fa-bars"\n       data-toggle="popover"\n       data-placement="bottom"\n       data-close="false"\n       aria-hidden="true"\n    ></span>\n</div>\n';return __p}},"../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/oropricing/templates/product/prices-tier-table.html":(module,__unused_webpack_exports,__webpack_require__)=>{var _=__webpack_require__("./bundles/oroui/js/extend/underscore.js");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="prices-tier">\n    ',clickable&&(__p+='\n    <h3 class="prices-tier-title">'+(null==(__t=_.__("oro.pricing.click_to_select"))?"":_.escape(__t))+"</h3>\n    "),__p+='\n    <table class="table">\n        ',clickable&&(__p+='\n        <thead>\n            <tr>\n                <th class="text-uppercase">'+(null==(__t=_.__("oro.pricing.qty"))?"":_.escape(__t))+"</th>\n                <th>"+(null==(__t=_.__("oro.pricing.unit_price"))?"":_.escape(__t))+"</th>\n            </tr>\n        </thead>\n        "),__p+="\n        <tbody>\n        ",_.each(prices,(function(t,e){__p+='\n        <tr>\n            <td colspan="2">\n                <b>'+(null==(__t=_.__("oro.product.product_unit."+e+".label.full"))?"":_.escape(__t))+"</b>\n            </td>\n        </tr>\n        ",_.each(t,(function(t){__p+='\n        <tr class="',_.isEmpty(matchedPrice)||e!==matchedPrice.unit||parseFloat(t.price)!==parseFloat(matchedPrice.price)||(__p+="matched-tier-price"),__p+='">\n            <td>'+(null==(__t=t.quantity)?"":_.escape(__t))+"</td>\n            <td>\n                ",clickable?(__p+='\n                <a href="#" data-price="'+(null==(__t=parseFloat(t.price))?"":_.escape(__t))+'"\n                   data-unit="'+(null==(__t=e)?"":_.escape(__t))+'"\n                   role="button"\n                   data-emulate-btn-press=""\n                ',ariaControlsId&&(__p+='\n                aria-controls="'+(null==(__t=ariaControlsId)?"":_.escape(__t))+'"\n                '),__p+="\n                > "+(null==(__t=formatter.formatCurrency(t.price,t.currency))?"":_.escape(__t))+"</a>\n                "):__p+="\n                    "+(null==(__t=formatter.formatCurrency(t.price,t.currency))?"":_.escape(__t))+"\n                ",__p+="\n            </td>\n        </tr>\n        "})),__p+="\n        "})),__p+="\n        </tbody>\n    </table>\n</div>\n";return __p}},"../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/oropricing/templates/product/unit.html":(module,__unused_webpack_exports,__webpack_require__)=>{var _=__webpack_require__("./bundles/oroui/js/extend/underscore.js");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<span class="product-price__unit-full">\n    '+(null==(__t=_.__("oro.product.product_unit."+price.unit+".label.full"))?"":_.escape(__t))+'\n</span>\n<span class="product-price__unit-short">\n    '+(null==(__t=_.__("oro.product.product_unit."+price.unit+".label.short"))?"":_.escape(__t))+"\n</span>\n";return __p}},"../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/oroproduct/templates/product-autocomplete-error.html":(module,__unused_webpack_exports,__webpack_require__)=>{var _=__webpack_require__("./bundles/oroui/js/extend/underscore.js");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="product-autocomplete-error" data-role="autocomplete-error" role="alert">\n    <div class="validation-failed">\n        <span class="validation-failed__icon" aria-hidden="true"></span>\n        <span>'+(null==(__t=_.__("oro.product.validation.sku.not_found"))?"":_.escape(__t))+"</span>\n    </div>\n</div>\n";return __p}},"../node_modules/@oroinc/elevatezoom/jquery.elevatezoom.js":(t,e,i)=>{var o,n,s=i("./bundles/oroui/js/extend/jquery.js");"function"!=typeof Object.create&&(Object.create=function(t){function e(){}return e.prototype=t,new e}),o=s,window,document,n={init:function(t,e){var i=this;i.elem=e,i.$elem=o(e),i.imageSrc=i.$elem.data("zoom-image")?i.$elem.data("zoom-image"):i.$elem.attr("src"),i.options=o.extend({},o.fn.elevateZoom.options,t),i.options.tint&&(i.options.lensColour="none",i.options.lensOpacity="1"),"inner"==i.options.zoomType&&(i.options.showLens=!1),i.$elem.parent().removeAttr("title").removeAttr("alt"),i.zoomImage=i.imageSrc,i.refresh(1),o("#"+i.options.gallery+" a").click((function(t){return i.options.galleryActiveClass&&(o("#"+i.options.gallery+" a").removeClass(i.options.galleryActiveClass),o(this).addClass(i.options.galleryActiveClass)),t.preventDefault(),o(this).data("zoom-image")?i.zoomImagePre=o(this).data("zoom-image"):i.zoomImagePre=o(this).data("image"),i.swaptheimage(o(this).data("image"),i.zoomImagePre),!1}))},refresh:function(t){var e=this;setTimeout((function(){e.fetch(e.imageSrc)}),t||e.options.refresh)},fetch:function(t){var e=this,i=new Image;i.onload=function(){e.largeWidth=i.width,e.largeHeight=i.height,e.startZoom(),e.currentImage=e.imageSrc,e.options.onZoomedImageLoaded(e.$elem)},i.src=t},startZoom:function(){var t=this;if(t.nzWidth=t.$elem.width(),t.nzHeight=t.$elem.height(),t.isWindowActive=!1,t.isLensActive=!1,t.isTintActive=!1,t.overWindow=!1,t.options.imageCrossfade&&(t.zoomWrap=t.$elem.wrap('<div style="height:'+t.nzHeight+"px;width:"+t.nzWidth+'px;" class="zoomWrapper" />'),t.$elem.css("position","absolute")),t.zoomLock=1,t.scrollingLock=!1,t.changeBgSize=!1,t.currentZoomLevel=t.options.zoomLevel,t.nzOffset=t.$elem.offset(),t.widthRatio=t.largeWidth/t.currentZoomLevel/t.nzWidth,t.heightRatio=t.largeHeight/t.currentZoomLevel/t.nzHeight,"window"==t.options.zoomType&&(t.zoomWindowStyle="overflow: hidden;background-position: 0px 0px;text-align:center;background-color: "+String(t.options.zoomWindowBgColour)+";width: "+String(t.options.zoomWindowWidth)+"px;height: "+String(t.options.zoomWindowHeight)+"px;float: left;background-size: "+t.largeWidth/t.currentZoomLevel+"px "+t.largeHeight/t.currentZoomLevel+"px;display: none;z-index:100;border: "+String(t.options.borderSize)+"px solid "+t.options.borderColour+";background-repeat: no-repeat;position: absolute;"),"inner"==t.options.zoomType){var e=t.$elem.css("border-left-width");t.zoomWindowStyle="overflow: hidden;margin-left: "+String(e)+";margin-top: "+String(e)+";background-position: 0px 0px;width: "+String(t.nzWidth)+"px;height: "+String(t.nzHeight)+"px;px;float: left;display: none;cursor:"+t.options.cursor+";px solid "+t.options.borderColour+";background-repeat: no-repeat;position: absolute;"}"window"==t.options.zoomType&&(t.nzHeight<t.options.zoomWindowWidth/t.widthRatio?lensHeight=t.nzHeight:lensHeight=String(t.options.zoomWindowHeight/t.heightRatio),t.largeWidth<t.options.zoomWindowWidth?lensWidth=t.nzWidth:lensWidth=t.options.zoomWindowWidth/t.widthRatio,t.lensStyle="background-position: 0px 0px;width: "+String(t.options.zoomWindowWidth/t.widthRatio)+"px;height: "+String(t.options.zoomWindowHeight/t.heightRatio)+"px;float: right;display: none;overflow: hidden;z-index: 999;-webkit-transform: translateZ(0);opacity:"+t.options.lensOpacity+";filter: alpha(opacity = "+100*t.options.lensOpacity+"); zoom:1;width:"+lensWidth+"px;height:"+lensHeight+"px;background-color:"+t.options.lensColour+";cursor:"+t.options.cursor+";border: "+t.options.lensBorderSize+"px solid "+t.options.lensBorderColour+";background-repeat: no-repeat;position: absolute;"),t.tintStyle="display: block;position: absolute;background-color: "+t.options.tintColour+";filter:alpha(opacity=0);opacity: 0;width: "+t.nzWidth+"px;height: "+t.nzHeight+"px;",t.lensRound="","lens"==t.options.zoomType&&(t.lensStyle="background-position: 0px 0px;float: left;display: none;border: "+String(t.options.borderSize)+"px solid "+t.options.borderColour+";width:"+String(t.options.lensSize)+"px;height:"+String(t.options.lensSize)+"px;background-repeat: no-repeat;position: absolute;"),"round"==t.options.lensShape&&(t.lensRound="border-top-left-radius: "+String(t.options.lensSize/2+t.options.borderSize)+"px;border-top-right-radius: "+String(t.options.lensSize/2+t.options.borderSize)+"px;border-bottom-left-radius: "+String(t.options.lensSize/2+t.options.borderSize)+"px;border-bottom-right-radius: "+String(t.options.lensSize/2+t.options.borderSize)+"px;"),t.zoomContainer=o('<div class="zoomContainer" style="-webkit-transform: translateZ(0);position:absolute;left:'+t.nzOffset.left+"px;top:"+t.nzOffset.top+"px;height:"+t.nzHeight+"px;width:"+t.nzWidth+'px;"></div>'),o("body").append(t.zoomContainer),t.options.containLensZoom&&"lens"==t.options.zoomType&&t.zoomContainer.css("overflow","hidden"),"inner"!=t.options.zoomType&&(t.zoomLens=o("<div class='zoomLens' style='"+t.lensStyle+t.lensRound+"'>&nbsp;</div>").appendTo(t.zoomContainer).click((function(){t.$elem.trigger("click")})),t.options.tint&&(t.tintContainer=o("<div/>").addClass("tintContainer"),t.zoomTint=o("<div class='zoomTint' style='"+t.tintStyle+"'></div>"),t.zoomLens.wrap(t.tintContainer),t.zoomTintcss=t.zoomLens.after(t.zoomTint),t.zoomTintImage=o('<img style="position: absolute; left: 0px; top: 0px; max-width: none; width: '+t.nzWidth+"px; height: "+t.nzHeight+'px;" src="'+t.imageSrc+'">').appendTo(t.zoomLens).click((function(){t.$elem.trigger("click")})))),isNaN(t.options.zoomWindowPosition)?t.zoomWindow=o("<div style='z-index:999;left:"+t.windowOffsetLeft+"px;top:"+t.windowOffsetTop+"px;"+t.zoomWindowStyle+"' class='zoomWindow'>&nbsp;</div>").appendTo("body").click((function(){t.$elem.trigger("click")})):t.zoomWindow=o("<div style='z-index:999;left:"+t.windowOffsetLeft+"px;top:"+t.windowOffsetTop+"px;"+t.zoomWindowStyle+"' class='zoomWindow'>&nbsp;</div>").appendTo(t.zoomContainer).click((function(){t.$elem.trigger("click")})),t.zoomWindowContainer=o("<div/>").addClass("zoomWindowContainer").css("width",t.options.zoomWindowWidth),t.zoomWindow.wrap(t.zoomWindowContainer),"lens"==t.options.zoomType&&t.zoomLens.css({backgroundImage:"url('"+t.imageSrc+"')"}),"window"==t.options.zoomType&&t.zoomWindow.css({backgroundImage:"url('"+t.imageSrc+"')"}),"inner"==t.options.zoomType&&t.zoomWindow.css({backgroundImage:"url('"+t.imageSrc+"')"}),t.$elem.bind("touchmove",(function(e){e.preventDefault();var i=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0];t.setPosition(i)})),t.zoomContainer.bind("touchmove",(function(e){"inner"==t.options.zoomType&&t.showHideWindow("show"),e.preventDefault();var i=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0];t.setPosition(i)})),t.zoomContainer.bind("touchend",(function(e){t.showHideWindow("hide"),t.options.showLens&&t.showHideLens("hide"),t.options.tint&&"inner"!=t.options.zoomType&&t.showHideTint("hide")})),t.$elem.bind("touchend",(function(e){t.showHideWindow("hide"),t.options.showLens&&t.showHideLens("hide"),t.options.tint&&"inner"!=t.options.zoomType&&t.showHideTint("hide")})),t.options.showLens&&(t.zoomLens.bind("touchmove",(function(e){e.preventDefault();var i=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0];t.setPosition(i)})),t.zoomLens.bind("touchend",(function(e){t.showHideWindow("hide"),t.options.showLens&&t.showHideLens("hide"),t.options.tint&&"inner"!=t.options.zoomType&&t.showHideTint("hide")}))),t.$elem.bind("mousemove",(function(e){0==t.overWindow&&t.setElements("show"),t.lastX===e.clientX&&t.lastY===e.clientY||(t.setPosition(e),t.currentLoc=e),t.lastX=e.clientX,t.lastY=e.clientY})),t.zoomContainer.bind("mousemove",(function(e){0==t.overWindow&&t.setElements("show"),t.lastX===e.clientX&&t.lastY===e.clientY||(t.setPosition(e),t.currentLoc=e),t.lastX=e.clientX,t.lastY=e.clientY})),"inner"!=t.options.zoomType&&t.zoomLens.bind("mousemove",(function(e){t.lastX===e.clientX&&t.lastY===e.clientY||(t.setPosition(e),t.currentLoc=e),t.lastX=e.clientX,t.lastY=e.clientY})),t.options.tint&&"inner"!=t.options.zoomType&&t.zoomTint.bind("mousemove",(function(e){t.lastX===e.clientX&&t.lastY===e.clientY||(t.setPosition(e),t.currentLoc=e),t.lastX=e.clientX,t.lastY=e.clientY})),"inner"==t.options.zoomType&&t.zoomWindow.bind("mousemove",(function(e){t.lastX===e.clientX&&t.lastY===e.clientY||(t.setPosition(e),t.currentLoc=e),t.lastX=e.clientX,t.lastY=e.clientY})),t.zoomContainer.add(t.$elem).mouseenter((function(){0==t.overWindow&&t.setElements("show")})).mouseleave((function(){t.scrollLock||(t.setElements("hide"),t.options.onDestroy(t.$elem))})),"inner"!=t.options.zoomType&&t.zoomWindow.mouseenter((function(){t.overWindow=!0,t.setElements("hide")})).mouseleave((function(){t.overWindow=!1})),t.options.zoomLevel,t.options.minZoomLevel?t.minZoomLevel=t.options.minZoomLevel:t.minZoomLevel=2*t.options.scrollZoomIncrement,t.options.scrollZoom&&t.zoomContainer.add(t.$elem).bind("mousewheel DOMMouseScroll MozMousePixelScroll",(function(e){t.scrollLock=!0,clearTimeout(o.data(this,"timer")),o.data(this,"timer",setTimeout((function(){t.scrollLock=!1}),250));var i=e.originalEvent.wheelDelta||-1*e.originalEvent.detail;return e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),i/120>0?t.currentZoomLevel>=t.minZoomLevel&&t.changeZoomLevel(t.currentZoomLevel-t.options.scrollZoomIncrement):t.options.maxZoomLevel?t.currentZoomLevel<=t.options.maxZoomLevel&&t.changeZoomLevel(parseFloat(t.currentZoomLevel)+t.options.scrollZoomIncrement):t.changeZoomLevel(parseFloat(t.currentZoomLevel)+t.options.scrollZoomIncrement),!1}))},setElements:function(t){var e=this;if(!e.options.zoomEnabled)return!1;"show"==t&&e.isWindowSet&&("inner"==e.options.zoomType&&e.showHideWindow("show"),"window"==e.options.zoomType&&e.showHideWindow("show"),e.options.showLens&&e.showHideLens("show"),e.options.tint&&"inner"!=e.options.zoomType&&e.showHideTint("show")),"hide"==t&&("window"==e.options.zoomType&&e.showHideWindow("hide"),e.options.tint||e.showHideWindow("hide"),e.options.showLens&&e.showHideLens("hide"),e.options.tint&&e.showHideTint("hide"))},setPosition:function(t){var e=this;if(!e.options.zoomEnabled)return!1;e.nzHeight=e.$elem.height(),e.nzWidth=e.$elem.width(),e.nzOffset=e.$elem.offset(),e.options.tint&&"inner"!=e.options.zoomType&&(e.zoomTint.css({top:0}),e.zoomTint.css({left:0})),e.options.responsive&&!e.options.scrollZoom&&e.options.showLens&&(e.nzHeight<e.options.zoomWindowWidth/e.widthRatio?lensHeight=e.nzHeight:lensHeight=String(e.options.zoomWindowHeight/e.heightRatio),e.largeWidth<e.options.zoomWindowWidth?lensWidth=e.nzWidth:lensWidth=e.options.zoomWindowWidth/e.widthRatio,e.widthRatio=e.largeWidth/e.nzWidth,e.heightRatio=e.largeHeight/e.nzHeight,"lens"!=e.options.zoomType&&(e.nzHeight<e.options.zoomWindowWidth/e.widthRatio?lensHeight=e.nzHeight:lensHeight=String(e.options.zoomWindowHeight/e.heightRatio),e.nzWidth<e.options.zoomWindowHeight/e.heightRatio?lensWidth=e.nzWidth:lensWidth=String(e.options.zoomWindowWidth/e.widthRatio),e.zoomLens.css("width",lensWidth),e.zoomLens.css("height",lensHeight),e.options.tint&&(e.zoomTintImage.css("width",e.nzWidth),e.zoomTintImage.css("height",e.nzHeight))),"lens"==e.options.zoomType&&e.zoomLens.css({width:String(e.options.lensSize)+"px",height:String(e.options.lensSize)+"px"})),e.zoomContainer.css({top:e.nzOffset.top}),e.zoomContainer.css({left:e.nzOffset.left}),e.mouseLeft=parseInt(t.pageX-e.nzOffset.left),e.mouseTop=parseInt(t.pageY-e.nzOffset.top),"window"==e.options.zoomType&&(e.Etoppos=e.mouseTop<e.zoomLens.height()/2,e.Eboppos=e.mouseTop>e.nzHeight-e.zoomLens.height()/2-2*e.options.lensBorderSize,e.Eloppos=e.mouseLeft<0+e.zoomLens.width()/2,e.Eroppos=e.mouseLeft>e.nzWidth-e.zoomLens.width()/2-2*e.options.lensBorderSize),"inner"==e.options.zoomType&&(e.Etoppos=e.mouseTop<e.nzHeight/2/e.heightRatio,e.Eboppos=e.mouseTop>e.nzHeight-e.nzHeight/2/e.heightRatio,e.Eloppos=e.mouseLeft<0+e.nzWidth/2/e.widthRatio,e.Eroppos=e.mouseLeft>e.nzWidth-e.nzWidth/2/e.widthRatio-2*e.options.lensBorderSize),e.mouseLeft<0||e.mouseTop<0||e.mouseLeft>e.nzWidth||e.mouseTop>e.nzHeight?e.setElements("hide"):(e.options.showLens&&(e.lensLeftPos=String(Math.floor(e.mouseLeft-e.zoomLens.width()/2)),e.lensTopPos=String(Math.floor(e.mouseTop-e.zoomLens.height()/2))),e.Etoppos&&(e.lensTopPos=0),e.Eloppos&&(e.windowLeftPos=0,e.lensLeftPos=0,e.tintpos=0),"window"==e.options.zoomType&&(e.Eboppos&&(e.lensTopPos=Math.max(e.nzHeight-e.zoomLens.height()-2*e.options.lensBorderSize,0)),e.Eroppos&&(e.lensLeftPos=e.nzWidth-e.zoomLens.width()-2*e.options.lensBorderSize)),"inner"==e.options.zoomType&&(e.Eboppos&&(e.lensTopPos=Math.max(e.nzHeight-2*e.options.lensBorderSize,0)),e.Eroppos&&(e.lensLeftPos=e.nzWidth-e.nzWidth-2*e.options.lensBorderSize)),"lens"==e.options.zoomType&&(e.windowLeftPos=String(-1*((t.pageX-e.nzOffset.left)*e.widthRatio-e.zoomLens.width()/2)),e.windowTopPos=String(-1*((t.pageY-e.nzOffset.top)*e.heightRatio-e.zoomLens.height()/2)),e.zoomLens.css({backgroundPosition:e.windowLeftPos+"px "+e.windowTopPos+"px"}),e.changeBgSize&&(e.nzHeight>e.nzWidth?("lens"==e.options.zoomType&&e.zoomLens.css({"background-size":e.largeWidth/e.newvalueheight+"px "+e.largeHeight/e.newvalueheight+"px"}),e.zoomWindow.css({"background-size":e.largeWidth/e.newvalueheight+"px "+e.largeHeight/e.newvalueheight+"px"})):("lens"==e.options.zoomType&&e.zoomLens.css({"background-size":e.largeWidth/e.newvaluewidth+"px "+e.largeHeight/e.newvaluewidth+"px"}),e.zoomWindow.css({"background-size":e.largeWidth/e.newvaluewidth+"px "+e.largeHeight/e.newvaluewidth+"px"})),e.changeBgSize=!1),e.setWindowPostition(t)),e.options.tint&&"inner"!=e.options.zoomType&&e.setTintPosition(t),"window"==e.options.zoomType&&e.setWindowPostition(t),"inner"==e.options.zoomType&&e.setWindowPostition(t),e.options.showLens&&(e.fullwidth&&"lens"!=e.options.zoomType&&(e.lensLeftPos=0),e.zoomLens.css({left:e.lensLeftPos+"px",top:e.lensTopPos+"px"})))},showHideWindow:function(t){var e=this;"show"==t&&(e.isWindowActive||(e.options.zoomWindowFadeIn?e.zoomWindow.stop(!0,!0,!1).fadeIn(e.options.zoomWindowFadeIn):e.zoomWindow.show(),e.isWindowActive=!0)),"hide"==t&&e.isWindowActive&&(e.options.zoomWindowFadeOut?e.zoomWindow.stop(!0,!0).fadeOut(e.options.zoomWindowFadeOut,(function(){e.loop&&(clearInterval(e.loop),e.loop=!1)})):e.zoomWindow.hide(),e.isWindowActive=!1)},showHideLens:function(t){var e=this;"show"==t&&(e.isLensActive||(e.options.lensFadeIn?e.zoomLens.stop(!0,!0,!1).fadeIn(e.options.lensFadeIn):e.zoomLens.show(),e.isLensActive=!0)),"hide"==t&&e.isLensActive&&(e.options.lensFadeOut?e.zoomLens.stop(!0,!0).fadeOut(e.options.lensFadeOut):e.zoomLens.hide(),e.isLensActive=!1)},showHideTint:function(t){var e=this;"show"==t&&(e.isTintActive||(e.options.zoomTintFadeIn?e.zoomTint.css({opacity:e.options.tintOpacity}).animate().stop(!0,!0).fadeIn("slow"):(e.zoomTint.css({opacity:e.options.tintOpacity}).animate(),e.zoomTint.show()),e.isTintActive=!0)),"hide"==t&&e.isTintActive&&(e.options.zoomTintFadeOut?e.zoomTint.stop(!0,!0).fadeOut(e.options.zoomTintFadeOut):e.zoomTint.hide(),e.isTintActive=!1)},setLensPostition:function(t){},setWindowPostition:function(t){var e=this;if(isNaN(e.options.zoomWindowPosition))e.externalContainer=o("#"+e.options.zoomWindowPosition),e.externalContainerWidth=e.externalContainer.width(),e.externalContainerHeight=e.externalContainer.height(),e.externalContainerOffset=e.externalContainer.offset(),e.windowOffsetTop=e.externalContainerOffset.top,e.windowOffsetLeft=e.externalContainerOffset.left;else switch(e.options.zoomWindowPosition){case 1:e.windowOffsetTop=e.options.zoomWindowOffety,e.windowOffsetLeft=+e.nzWidth;break;case 2:e.options.zoomWindowHeight>e.nzHeight&&(e.windowOffsetTop=-1*(e.options.zoomWindowHeight/2-e.nzHeight/2),e.windowOffsetLeft=e.nzWidth);break;case 3:e.windowOffsetTop=e.nzHeight-e.zoomWindow.height()-2*e.options.borderSize,e.windowOffsetLeft=e.nzWidth;break;case 4:e.windowOffsetTop=e.nzHeight,e.windowOffsetLeft=e.nzWidth;break;case 5:e.windowOffsetTop=e.nzHeight,e.windowOffsetLeft=e.nzWidth-e.zoomWindow.width()-2*e.options.borderSize;break;case 6:e.options.zoomWindowHeight>e.nzHeight&&(e.windowOffsetTop=e.nzHeight,e.windowOffsetLeft=-1*(e.options.zoomWindowWidth/2-e.nzWidth/2+2*e.options.borderSize));break;case 7:e.windowOffsetTop=e.nzHeight,e.windowOffsetLeft=0;break;case 8:e.windowOffsetTop=e.nzHeight,e.windowOffsetLeft=-1*(e.zoomWindow.width()+2*e.options.borderSize);break;case 9:e.windowOffsetTop=e.nzHeight-e.zoomWindow.height()-2*e.options.borderSize,e.windowOffsetLeft=-1*(e.zoomWindow.width()+2*e.options.borderSize);break;case 10:e.options.zoomWindowHeight>e.nzHeight&&(e.windowOffsetTop=-1*(e.options.zoomWindowHeight/2-e.nzHeight/2),e.windowOffsetLeft=-1*(e.zoomWindow.width()+2*e.options.borderSize));break;case 11:e.windowOffsetTop=e.options.zoomWindowOffety,e.windowOffsetLeft=-1*(e.zoomWindow.width()+2*e.options.borderSize);break;case 12:e.windowOffsetTop=-1*(e.zoomWindow.height()+2*e.options.borderSize),e.windowOffsetLeft=-1*(e.zoomWindow.width()+2*e.options.borderSize);break;case 13:e.windowOffsetTop=-1*(e.zoomWindow.height()+2*e.options.borderSize),e.windowOffsetLeft=0;break;case 14:e.options.zoomWindowHeight>e.nzHeight&&(e.windowOffsetTop=-1*(e.zoomWindow.height()+2*e.options.borderSize),e.windowOffsetLeft=-1*(e.options.zoomWindowWidth/2-e.nzWidth/2+2*e.options.borderSize));break;case 15:e.windowOffsetTop=-1*(e.zoomWindow.height()+2*e.options.borderSize),e.windowOffsetLeft=e.nzWidth-e.zoomWindow.width()-2*e.options.borderSize;break;case 16:e.windowOffsetTop=-1*(e.zoomWindow.height()+2*e.options.borderSize),e.windowOffsetLeft=e.nzWidth;break;default:e.windowOffsetTop=e.options.zoomWindowOffety,e.windowOffsetLeft=e.nzWidth}e.isWindowSet=!0,e.windowOffsetTop=e.windowOffsetTop+e.options.zoomWindowOffety,e.windowOffsetLeft=e.windowOffsetLeft+e.options.zoomWindowOffetx,e.zoomWindow.css({top:e.windowOffsetTop}),e.zoomWindow.css({left:e.windowOffsetLeft}),"inner"==e.options.zoomType&&(e.zoomWindow.css({top:0}),e.zoomWindow.css({left:0})),e.windowLeftPos=String(-1*((t.pageX-e.nzOffset.left)*e.widthRatio-e.zoomWindow.width()/2)),e.windowTopPos=String(-1*((t.pageY-e.nzOffset.top)*e.heightRatio-e.zoomWindow.height()/2)),e.Etoppos&&(e.windowTopPos=0),e.Eloppos&&(e.windowLeftPos=0),e.Eboppos&&(e.windowTopPos=-1*(e.largeHeight/e.currentZoomLevel-e.zoomWindow.height())),e.Eroppos&&(e.windowLeftPos=-1*(e.largeWidth/e.currentZoomLevel-e.zoomWindow.width())),e.fullheight&&(e.windowTopPos=0),e.fullwidth&&(e.windowLeftPos=0),"window"!=e.options.zoomType&&"inner"!=e.options.zoomType||(1==e.zoomLock&&(e.widthRatio<=1&&(e.windowLeftPos=0),e.heightRatio<=1&&(e.windowTopPos=0)),"window"==e.options.zoomType&&(e.largeHeight<e.options.zoomWindowHeight&&(e.windowTopPos=0),e.largeWidth<e.options.zoomWindowWidth&&(e.windowLeftPos=0)),e.options.easing?(e.xp||(e.xp=0),e.yp||(e.yp=0),e.loop||(e.loop=setInterval((function(){e.xp+=(e.windowLeftPos-e.xp)/e.options.easingAmount,e.yp+=(e.windowTopPos-e.yp)/e.options.easingAmount,e.scrollingLock?(clearInterval(e.loop),e.xp=e.windowLeftPos,e.yp=e.windowTopPos,e.xp=-1*((t.pageX-e.nzOffset.left)*e.widthRatio-e.zoomWindow.width()/2),e.yp=-1*((t.pageY-e.nzOffset.top)*e.heightRatio-e.zoomWindow.height()/2),e.changeBgSize&&(e.nzHeight>e.nzWidth?("lens"==e.options.zoomType&&e.zoomLens.css({"background-size":e.largeWidth/e.newvalueheight+"px "+e.largeHeight/e.newvalueheight+"px"}),e.zoomWindow.css({"background-size":e.largeWidth/e.newvalueheight+"px "+e.largeHeight/e.newvalueheight+"px"})):("lens"!=e.options.zoomType&&e.zoomLens.css({"background-size":e.largeWidth/e.newvaluewidth+"px "+e.largeHeight/e.newvalueheight+"px"}),e.zoomWindow.css({"background-size":e.largeWidth/e.newvaluewidth+"px "+e.largeHeight/e.newvaluewidth+"px"})),e.changeBgSize=!1),e.zoomWindow.css({backgroundPosition:e.windowLeftPos+"px "+e.windowTopPos+"px"}),e.scrollingLock=!1,e.loop=!1):Math.round(Math.abs(e.xp-e.windowLeftPos)+Math.abs(e.yp-e.windowTopPos))<1?(clearInterval(e.loop),e.zoomWindow.css({backgroundPosition:e.windowLeftPos+"px "+e.windowTopPos+"px"}),e.loop=!1):(e.changeBgSize&&(e.nzHeight>e.nzWidth?("lens"==e.options.zoomType&&e.zoomLens.css({"background-size":e.largeWidth/e.newvalueheight+"px "+e.largeHeight/e.newvalueheight+"px"}),e.zoomWindow.css({"background-size":e.largeWidth/e.newvalueheight+"px "+e.largeHeight/e.newvalueheight+"px"})):("lens"!=e.options.zoomType&&e.zoomLens.css({"background-size":e.largeWidth/e.newvaluewidth+"px "+e.largeHeight/e.newvaluewidth+"px"}),e.zoomWindow.css({"background-size":e.largeWidth/e.newvaluewidth+"px "+e.largeHeight/e.newvaluewidth+"px"})),e.changeBgSize=!1),e.zoomWindow.css({backgroundPosition:e.xp+"px "+e.yp+"px"}))}),16))):(e.changeBgSize&&(e.nzHeight>e.nzWidth?("lens"==e.options.zoomType&&e.zoomLens.css({"background-size":e.largeWidth/e.newvalueheight+"px "+e.largeHeight/e.newvalueheight+"px"}),e.zoomWindow.css({"background-size":e.largeWidth/e.newvalueheight+"px "+e.largeHeight/e.newvalueheight+"px"})):("lens"==e.options.zoomType&&e.zoomLens.css({"background-size":e.largeWidth/e.newvaluewidth+"px "+e.largeHeight/e.newvaluewidth+"px"}),e.largeHeight/e.newvaluewidth<e.options.zoomWindowHeight?e.zoomWindow.css({"background-size":e.largeWidth/e.newvaluewidth+"px "+e.largeHeight/e.newvaluewidth+"px"}):e.zoomWindow.css({"background-size":e.largeWidth/e.newvalueheight+"px "+e.largeHeight/e.newvalueheight+"px"})),e.changeBgSize=!1),e.zoomWindow.css({backgroundPosition:e.windowLeftPos+"px "+e.windowTopPos+"px"})))},setTintPosition:function(t){var e=this;e.nzOffset=e.$elem.offset(),e.tintpos=String(-1*(t.pageX-e.nzOffset.left-e.zoomLens.width()/2)),e.tintposy=String(-1*(t.pageY-e.nzOffset.top-e.zoomLens.height()/2)),e.Etoppos&&(e.tintposy=0),e.Eloppos&&(e.tintpos=0),e.Eboppos&&(e.tintposy=-1*(e.nzHeight-e.zoomLens.height()-2*e.options.lensBorderSize)),e.Eroppos&&(e.tintpos=-1*(e.nzWidth-e.zoomLens.width()-2*e.options.lensBorderSize)),e.options.tint&&(e.fullheight&&(e.tintposy=0),e.fullwidth&&(e.tintpos=0),e.zoomTintImage.css({left:e.tintpos+"px"}),e.zoomTintImage.css({top:e.tintposy+"px"}))},swaptheimage:function(t,e){var i=this,n=new Image;i.options.loadingIcon&&(i.spinner=o("<div style=\"background: url('"+i.options.loadingIcon+"') no-repeat center;height:"+i.nzHeight+"px;width:"+i.nzWidth+'px;z-index: 2000;position: absolute; background-position: center center;"></div>'),i.$elem.after(i.spinner)),i.options.onImageSwap(i.$elem),n.onload=function(){i.largeWidth=n.width,i.largeHeight=n.height,i.zoomImage=e,i.zoomWindow.css({"background-size":i.largeWidth+"px "+i.largeHeight+"px"}),i.swapAction(t,e)},n.src=e},swapAction:function(t,e){var i=this,n=new Image;if(n.onload=function(){i.nzHeight=n.height,i.nzWidth=n.width,i.options.onImageSwapComplete(i.$elem),i.doneCallback()},n.src=t,i.currentZoomLevel=i.options.zoomLevel,i.options.maxZoomLevel=!1,"lens"==i.options.zoomType&&i.zoomLens.css({backgroundImage:"url('"+e+"')"}),"window"==i.options.zoomType&&i.zoomWindow.css({backgroundImage:"url('"+e+"')"}),"inner"==i.options.zoomType&&i.zoomWindow.css({backgroundImage:"url('"+e+"')"}),i.currentImage=e,i.options.imageCrossfade){var s=i.$elem,r=s.clone();if(i.$elem.attr("src",t),i.$elem.after(r),r.stop(!0).fadeOut(i.options.imageCrossfade,(function(){o(this).remove()})),i.$elem.width("auto").removeAttr("width"),i.$elem.height("auto").removeAttr("height"),s.fadeIn(i.options.imageCrossfade),i.options.tint&&"inner"!=i.options.zoomType){var a=i.zoomTintImage,l=a.clone();i.zoomTintImage.attr("src",e),i.zoomTintImage.after(l),l.stop(!0).fadeOut(i.options.imageCrossfade,(function(){o(this).remove()})),a.fadeIn(i.options.imageCrossfade),i.zoomTint.css({height:i.$elem.height()}),i.zoomTint.css({width:i.$elem.width()})}i.zoomContainer.css("height",i.$elem.height()),i.zoomContainer.css("width",i.$elem.width()),"inner"==i.options.zoomType&&(i.options.constrainType||(i.zoomWrap.parent().css("height",i.$elem.height()),i.zoomWrap.parent().css("width",i.$elem.width()),i.zoomWindow.css("height",i.$elem.height()),i.zoomWindow.css("width",i.$elem.width()))),i.options.imageCrossfade&&(i.zoomWrap.css("height",i.$elem.height()),i.zoomWrap.css("width",i.$elem.width()))}else i.$elem.attr("src",t),i.options.tint&&(i.zoomTintImage.attr("src",e),i.zoomTintImage.attr("height",i.$elem.height()),i.zoomTintImage.css({height:i.$elem.height()}),i.zoomTint.css({height:i.$elem.height()})),i.zoomContainer.css("height",i.$elem.height()),i.zoomContainer.css("width",i.$elem.width()),i.options.imageCrossfade&&(i.zoomWrap.css("height",i.$elem.height()),i.zoomWrap.css("width",i.$elem.width()));i.options.constrainType&&("height"==i.options.constrainType&&(i.zoomContainer.css("height",i.options.constrainSize),i.zoomContainer.css("width","auto"),i.options.imageCrossfade?(i.zoomWrap.css("height",i.options.constrainSize),i.zoomWrap.css("width","auto"),i.constwidth=i.zoomWrap.width()):(i.$elem.css("height",i.options.constrainSize),i.$elem.css("width","auto"),i.constwidth=i.$elem.width()),"inner"==i.options.zoomType&&(i.zoomWrap.parent().css("height",i.options.constrainSize),i.zoomWrap.parent().css("width",i.constwidth),i.zoomWindow.css("height",i.options.constrainSize),i.zoomWindow.css("width",i.constwidth)),i.options.tint&&(i.tintContainer.css("height",i.options.constrainSize),i.tintContainer.css("width",i.constwidth),i.zoomTint.css("height",i.options.constrainSize),i.zoomTint.css("width",i.constwidth),i.zoomTintImage.css("height",i.options.constrainSize),i.zoomTintImage.css("width",i.constwidth))),"width"==i.options.constrainType&&(i.zoomContainer.css("height","auto"),i.zoomContainer.css("width",i.options.constrainSize),i.options.imageCrossfade?(i.zoomWrap.css("height","auto"),i.zoomWrap.css("width",i.options.constrainSize),i.constheight=i.zoomWrap.height()):(i.$elem.css("height","auto"),i.$elem.css("width",i.options.constrainSize),i.constheight=i.$elem.height()),"inner"==i.options.zoomType&&(i.zoomWrap.parent().css("height",i.constheight),i.zoomWrap.parent().css("width",i.options.constrainSize),i.zoomWindow.css("height",i.constheight),i.zoomWindow.css("width",i.options.constrainSize)),i.options.tint&&(i.tintContainer.css("height",i.constheight),i.tintContainer.css("width",i.options.constrainSize),i.zoomTint.css("height",i.constheight),i.zoomTint.css("width",i.options.constrainSize),i.zoomTintImage.css("height",i.constheight),i.zoomTintImage.css("width",i.options.constrainSize))))},doneCallback:function(){var t=this;t.options.loadingIcon&&t.spinner.hide(),t.nzOffset=t.$elem.offset(),t.nzWidth=t.$elem.width(),t.nzHeight=t.$elem.height(),t.currentZoomLevel=t.options.zoomLevel,t.widthRatio=t.largeWidth/t.nzWidth,t.heightRatio=t.largeHeight/t.nzHeight,"window"==t.options.zoomType&&(t.nzHeight<t.options.zoomWindowWidth/t.widthRatio?lensHeight=t.nzHeight:lensHeight=String(t.options.zoomWindowHeight/t.heightRatio),t.options.zoomWindowWidth<t.options.zoomWindowWidth?lensWidth=t.nzWidth:lensWidth=t.options.zoomWindowWidth/t.widthRatio,t.zoomLens&&(t.zoomLens.css("width",lensWidth),t.zoomLens.css("height",lensHeight)))},getCurrentImage:function(){return this.zoomImage},getGalleryList:function(){var t=this;return t.gallerylist=[],t.options.gallery?o("#"+t.options.gallery+" a").each((function(){var e="";o(this).data("zoom-image")?e=o(this).data("zoom-image"):o(this).data("image")&&(e=o(this).data("image")),e==t.zoomImage?t.gallerylist.unshift({href:""+e,title:o(this).find("img").attr("title")}):t.gallerylist.push({href:""+e,title:o(this).find("img").attr("title")})})):t.gallerylist.push({href:""+t.zoomImage,title:o(this).find("img").attr("title")}),t.gallerylist},changeZoomLevel:function(t){var e=this;e.scrollingLock=!0,e.newvalue=parseFloat(t).toFixed(2),newvalue=parseFloat(t).toFixed(2),maxheightnewvalue=e.largeHeight/(e.options.zoomWindowHeight/e.nzHeight*e.nzHeight),maxwidthtnewvalue=e.largeWidth/(e.options.zoomWindowWidth/e.nzWidth*e.nzWidth),"inner"!=e.options.zoomType&&(maxheightnewvalue<=newvalue?(e.heightRatio=e.largeHeight/maxheightnewvalue/e.nzHeight,e.newvalueheight=maxheightnewvalue,e.fullheight=!0):(e.heightRatio=e.largeHeight/newvalue/e.nzHeight,e.newvalueheight=newvalue,e.fullheight=!1),maxwidthtnewvalue<=newvalue?(e.widthRatio=e.largeWidth/maxwidthtnewvalue/e.nzWidth,e.newvaluewidth=maxwidthtnewvalue,e.fullwidth=!0):(e.widthRatio=e.largeWidth/newvalue/e.nzWidth,e.newvaluewidth=newvalue,e.fullwidth=!1),"lens"==e.options.zoomType&&(maxheightnewvalue<=newvalue?(e.fullwidth=!0,e.newvaluewidth=maxheightnewvalue):(e.widthRatio=e.largeWidth/newvalue/e.nzWidth,e.newvaluewidth=newvalue,e.fullwidth=!1))),"inner"==e.options.zoomType&&(maxheightnewvalue=parseFloat(e.largeHeight/e.nzHeight).toFixed(2),maxwidthtnewvalue=parseFloat(e.largeWidth/e.nzWidth).toFixed(2),newvalue>maxheightnewvalue&&(newvalue=maxheightnewvalue),newvalue>maxwidthtnewvalue&&(newvalue=maxwidthtnewvalue),maxheightnewvalue<=newvalue?(e.heightRatio=e.largeHeight/newvalue/e.nzHeight,newvalue>maxheightnewvalue?e.newvalueheight=maxheightnewvalue:e.newvalueheight=newvalue,e.fullheight=!0):(e.heightRatio=e.largeHeight/newvalue/e.nzHeight,newvalue>maxheightnewvalue?e.newvalueheight=maxheightnewvalue:e.newvalueheight=newvalue,e.fullheight=!1),maxwidthtnewvalue<=newvalue?(e.widthRatio=e.largeWidth/newvalue/e.nzWidth,newvalue>maxwidthtnewvalue?e.newvaluewidth=maxwidthtnewvalue:e.newvaluewidth=newvalue,e.fullwidth=!0):(e.widthRatio=e.largeWidth/newvalue/e.nzWidth,e.newvaluewidth=newvalue,e.fullwidth=!1)),scrcontinue=!1,"inner"==e.options.zoomType&&(e.nzWidth>=e.nzHeight&&(e.newvaluewidth<=maxwidthtnewvalue?scrcontinue=!0:(scrcontinue=!1,e.fullheight=!0,e.fullwidth=!0)),e.nzHeight>e.nzWidth&&(e.newvaluewidth<=maxwidthtnewvalue?scrcontinue=!0:(scrcontinue=!1,e.fullheight=!0,e.fullwidth=!0))),"inner"!=e.options.zoomType&&(scrcontinue=!0),scrcontinue&&(e.zoomLock=0,e.changeZoom=!0,e.options.zoomWindowHeight/e.heightRatio<=e.nzHeight&&(e.currentZoomLevel=e.newvalueheight,"lens"!=e.options.zoomType&&"inner"!=e.options.zoomType&&(e.changeBgSize=!0,e.zoomLens.css({height:String(e.options.zoomWindowHeight/e.heightRatio)+"px"})),"lens"!=e.options.zoomType&&"inner"!=e.options.zoomType||(e.changeBgSize=!0)),e.options.zoomWindowWidth/e.widthRatio<=e.nzWidth&&("inner"!=e.options.zoomType&&e.newvaluewidth>e.newvalueheight&&(e.currentZoomLevel=e.newvaluewidth),"lens"!=e.options.zoomType&&"inner"!=e.options.zoomType&&(e.changeBgSize=!0,e.zoomLens.css({width:String(e.options.zoomWindowWidth/e.widthRatio)+"px"})),"lens"!=e.options.zoomType&&"inner"!=e.options.zoomType||(e.changeBgSize=!0)),"inner"==e.options.zoomType&&(e.changeBgSize=!0,e.nzWidth>e.nzHeight&&(e.currentZoomLevel=e.newvaluewidth),e.nzHeight>e.nzWidth&&(e.currentZoomLevel=e.newvaluewidth))),e.setPosition(e.currentLoc)},closeAll:function(){self.zoomWindow&&self.zoomWindow.hide(),self.zoomLens&&self.zoomLens.hide(),self.zoomTint&&self.zoomTint.hide()},changeState:function(t){"enable"==t&&(this.options.zoomEnabled=!0),"disable"==t&&(this.options.zoomEnabled=!1)}},o.fn.elevateZoom=function(t){return this.each((function(){var e=Object.create(n);e.init(t,this),o.data(this,"elevateZoom",e)}))},o.fn.elevateZoom.options={zoomActivation:"hover",zoomEnabled:!0,preloading:1,zoomLevel:1,scrollZoom:!1,scrollZoomIncrement:.1,minZoomLevel:!1,maxZoomLevel:!1,easing:!1,easingAmount:12,lensSize:200,zoomWindowWidth:400,zoomWindowHeight:400,zoomWindowOffetx:0,zoomWindowOffety:0,zoomWindowPosition:1,zoomWindowBgColour:"#fff",lensFadeIn:!1,lensFadeOut:!1,debug:!1,zoomWindowFadeIn:!1,zoomWindowFadeOut:!1,zoomWindowAlwaysShow:!1,zoomTintFadeIn:!1,zoomTintFadeOut:!1,borderSize:4,showLens:!0,borderColour:"#888",lensBorderSize:1,lensBorderColour:"#000",lensShape:"square",zoomType:"window",containLensZoom:!1,lensColour:"white",lensOpacity:.4,lenszoom:!1,tint:!1,tintColour:"#333",tintOpacity:.4,gallery:!1,galleryActiveClass:"zoomGalleryActive",imageCrossfade:!1,constrainType:!1,constrainSize:!1,loadingIcon:!1,cursor:"default",responsive:!0,onComplete:o.noop,onDestroy:function(){},onZoomedImageLoaded:function(){},onImageSwap:o.noop,onImageSwapComplete:o.noop}},"./bundles/orofrontend/js/app/views/fit-matrix-view.js":(t,e,i)=>{var o;void 0===(o=function(t){"use strict";const e=i("./bundles/oroui/js/app/views/base/view.js"),o=i("./bundles/oroui/js/extend/underscore.js"),n=e.extend({$matrixContainer:null,$scrollView:null,listen:{"layout:reposition mediator":"fitMatrix"},states:["state-labels-above","state-multiline"],constructor:function t(e){t.__super__.constructor.call(this,e)},initialize:function(t){n.__super__.initialize.call(this,t),this.$matrixContainer=this.$("[data-matrix-grid-container]"),this.$scrollView=this.$("[data-scroll-view]"),this.fitMatrix(),this.fitMatrix=o.debounce(this.fitMatrix,100).bind(this)},fitMatrix:function(){this.resetState();for(let t=0;t<this.states.length;t++){if(!this.isFittedContainer())return;this.resetState(),this.$matrixContainer.addClass(this.states[t])}},isFittedContainer:function(){const t=this.$scrollView.get(0);return t.clientWidth<t.scrollWidth},resetState:function(){this.$matrixContainer.removeClass(this.states.join(" "))},dispose:function(){this.disposed||(delete this.$matrixContainer,delete this.$row,n.__super__.dispose.call(this))}});return n}.call(e,i,e,t))||(t.exports=o)},"./bundles/oroorder/js/app/components/totals-component.js":(t,e,i)=>{var o;void 0===(o=function(t){"use strict";const e=i("./bundles/oroui/js/mediator.js"),o=i("./bundles/oroui/js/extend/jquery.js"),n=i("./bundles/oroui/js/extend/underscore.js"),s=i("./bundles/oropricing/js/app/components/totals-component.js"),r=i("./bundles/oroui/js/app/views/loading-mask-view.js"),a=s.extend({currentTotals:{},constructor:function t(e){t.__super__.constructor.call(this,e)},initialize:function(t){this._deferredInit(),o.when(...n.compact(t._subPromises)).then((()=>{this.handleSubLayoutInit(),this._resolveDeferredInit()})),this.options=n.defaults(t||{},this.options)},handleSubLayoutInit:function(){this.currentTotals=this._getDefaultTotals(),this.listenTo(e,{"entry-point:order:load:before":this.showLoadingMask,"entry-point:order:load":this.setTotals,"entry-point:order:load:after":this.hideLoadingMask,"line-items-totals:update":this.updateTotals,"shipping-cost:updated":this.setTotals,"order:totals:get:current":this.getCurrentTotals}),this.$totals=this.options._sourceElement.find(this.options.selectors.totals),this.resolveTemplates(),this.loadingMaskView=new r({container:this.options._sourceElement}),this.setTotals(this.options)},_getDefaultTotals:function(){return{totals:{total:{},subtotals:{}}}},getCurrentTotals:function(t){t.result=this.currentTotals},setTotals:function(t){this.currentTotals=n.defaults(t,this._getDefaultTotals()).totals,e.trigger("entry-point:order:trigger:totals",this.currentTotals),a.__super__.triggerTotalsUpdateEvent.call(this,t.totals),this.render(this.currentTotals)},updateTotals:function(){e.trigger("entry-point:order:trigger")}});return a}.call(e,i,e,t))||(t.exports=o)},"./bundles/oropricing/js/app/components/currency-switcher-component.js":(t,e,i)=>{var o;void 0===(o=function(t){"use strict";const e=i("./bundles/oroui/js/app/components/base/component.js"),o=i("./bundles/oroui/js/mediator.js"),n=i("./bundles/oroui/js/extend/underscore.js"),s=i("./bundles/oroui/js/extend/jquery.js"),r=i("./bundles/fosjsrouting/js/router.js"),a=e.extend({options:{currencySwitcherRoute:"oro_pricing_frontend_set_current_currency",currencyElement:"[data-currency]",selectedCurrency:null},constructor:function t(e){t.__super__.constructor.call(this,e)},initialize:function(t){this.options=n.defaults(t||{},this.options),this.options._sourceElement.on("click",this.options.currencyElement,this.onCurrencyChange.bind(this))},onCurrencyChange:function(t){t.preventDefault();const e=s(t.target).data("currency"),{selectedCurrency:i}=this.options;o.execute("showLoading"),this.syncActiveCurrency(e).then((()=>o.execute("refreshPage"))).fail((()=>{this.syncActiveCurrency(i).done((()=>o.execute("hideLoading")))}))},syncActiveCurrency(t){const e=r.generate(this.options.currencySwitcherRoute);return s.post(e,{currency:t})},dispose:function(){this.disposed||(this.options._sourceElement.off(),a.__super__.dispose.call(this))}});return a}.call(e,i,e,t))||(t.exports=o)},"./bundles/oropricing/js/app/components/list-item-product-prices-component.js":(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>g});var o=i("./bundles/oroui/js/extend/underscore.js"),n=i.n(o),s=i("./bundles/fosjsrouting/js/router.js"),r=i.n(s),a=i("./bundles/oroui/js/app/components/base/component.js"),l=i.n(a),d=i("./bundles/orolocale/js/locale-settings.js"),u=i.n(d),c=i("./bundles/oroui/js/error.js"),h=i.n(c),p=i("./bundles/oropricing/js/app/views/list-item-product-prices-view.js"),m=i.n(p);const g=l().extend({tierPricesRoute:"oro_pricing_frontend_price_by_customer",productId:void 0,viewOptions:null,constructor:function t(e){t.__super__.constructor.call(this,e)},initialize:function(t){Object.assign(this,n().pick(t,"tierPricesRoute","productId")),this.viewOptions={el:t._sourceElement,...n().pick(t,"showValuePrice","showListedPrice","doUpdateQtyForUnit","elements")},this.loadPrices()},loadPrices:function(){this.viewOptions.el.addClass("loader-in-process");const t={currency:u().getCurrency(),product_ids:[this.productId]},e=r().generate(this.tierPricesRoute,t);fetch(e).then((t=>t.json())).then((t=>this.onPricesLoad(t[this.productId]||{}))).catch((()=>h().showErrorInConsole(new Error(`Unable to load prices for ${this.productId} product`)))).finally((()=>{this.viewOptions.el.removeClass("loader-in-process")}))},onPricesLoad:function(t){this.view=new(m())({...this.viewOptions,modelAttr:{prices:t}}),this.view.getElement("pricesHint").click()}})},"./bundles/oropricing/js/app/components/totals-component.js":(t,e,i)=>{var o;void 0===(o=function(t){"use strict";const e=i("../node_modules/@oroinc/oro-webpack-config-builder/loader/text-loader.js!./bundles/oropricing/templates/order/frontend/subtotals.html"),o=i("../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/oropricing/templates/order/frontend/totals.html"),n=i("../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/oropricing/templates/order/totals-no-data.html"),s=i("./bundles/oroui/js/extend/jquery.js"),r=i("./bundles/oroui/js/extend/underscore.js"),a=i("./bundles/fosjsrouting/js/router.js"),l=i("./bundles/oroui/js/mediator.js"),d=i("./bundles/orolocale/js/formatter/number.js"),u=i("./bundles/oroui/js/app/views/loading-mask-view.js"),c=i("./bundles/oroui/js/app/components/base/component.js"),h=i("./bundles/orolocale/js/locale-settings.js"),p=c.extend({options:{route:"",entityClassName:"",entityId:0,selectors:{form:"",subtotalTemplate:null,template:null,noDataTemplate:null,totals:"[data-totals-container]"},events:["update:totals"],skipMaskView:!1,application:""},$el:null,$form:null,$method:null,$totals:null,template:o,subtotalTemplate:e,noDataTemplate:n,formData:"",eventName:"",loadingMaskView:null,items:[],constructor:function t(e){t.__super__.constructor.call(this,e)},initialize:function(t){if(this.options=s.extend(!0,{},this.options,t||{}),0===this.options.route.length)return;this.$el=t._sourceElement,this.$form=s(this.options.selectors.form),this.$totals=this.$el.find(this.options.selectors.totals),this.resolveTemplates(),this.loadingMaskView=new u({container:this.$el}),this.eventName="total-target:changing",this.initializeListeners();const e=this.setDefaultTemplatesForData(this.options.data);this.render(e)},resolveTemplates:function(){"string"==typeof this.options.selectors.template&&(this.template=r.template(s(this.options.selectors.template).text())),"string"==typeof this.options.selectors.subtotalTemplate&&(this.subtotalTemplate=s(this.options.selectors.subtotalTemplate).text()),"string"==typeof this.options.selectors.noDataTemplate&&(this.noDataTemplate=r.template(s(this.options.selectors.noDataTemplate).text()))},setDefaultTemplatesForData:function(t){return t.subtotals&&r.map(t.subtotals,(t=>(t.template||(t.template=this.subtotalTemplate),t))),t},initializeListeners:function(){r.each(this.options.events,(t=>{this.listenTo(l,t,this.updateTotals)}))},showLoadingMask:function(){this.options.skipMaskView||this.loadingMaskView.show()},hideLoadingMask:function(){this.loadingMaskView.isShown()&&this.loadingMaskView.hide()},updateTotals:function(t){this.showLoadingMask(),this.getTotals.timeoutId&&clearTimeout(this.getTotals.timeoutId),this.getTotals.timeoutId=setTimeout((()=>{this.getTotals.timeoutId=null;const e=[];l.trigger(this.eventName,e),e.length?s.when(...e).done(this.updateTotals.bind(this,t)):this.getTotals((t=>{this.hideLoadingMask(),this.triggerTotalsUpdateEvent(t),t=this.setDefaultTemplatesForData(t),this.render(t)}))}),100)},triggerTotalsUpdateEvent:function(t){r.isUndefined(t)||r.isEmpty(t)||l.trigger("totals:update",t)},getTotals:function(t){const e=this;let i="GET",o=null;const n={entityClassName:this.options.entityClassName,entityId:this.options.entityId?this.options.entityId:0},r=this.$form.find(":input[data-ftid]").serialize();this.formData=r,r&&(i="POST",o=r),s.ajax({url:a.generate(this.options.route,n),type:i,data:o,success:function(i){r!==e.formData||e.disposed||t(i||{})}})},render:function(t){this.items=[],r.each(t.subtotals,this.pushItem.bind(this)),this.pushItem(t.total);let e=r.filter(this.items);r.isEmpty(e)&&(e=[this.noDataTemplate()]),this.$totals.html(e.join("")),this.items=[]},pushItem:function(t){const e=r.defaults(t,{amount:0,currency:h.getCurrency(),visible:!1,template:null,signedAmount:0,data:{}});if(!1===e.visible)return;t.formattedAmount=d.formatCurrency(t.signedAmount,t.currency),t.data&&t.data.baseAmount&&t.data.baseCurrency&&(t.formattedBaseAmount=d.formatCurrency(t.data.baseAmount,t.data.baseCurrency));let i=null;i=e.template?r.template(t.template)({item:t}):this.template({item:t}),this.items.push(i)},dispose:function(){this.disposed||(delete this.items,p.__super__.dispose.call(this))}});return p}.call(e,i,e,t))||(t.exports=o)},"./bundles/oropricing/js/app/views/base-product-matrix-view.js":(t,e,i)=>{var o;void 0===(o=function(t){"use strict";const e=i("./bundles/oroui/js/app/views/base/view.js"),o=i("./bundles/orolocale/js/formatter/number.js"),n=i("./bundles/oropricing/js/app/prices-helper.js"),s=i("./bundles/orofrontend/js/app/views/scroll-view.js"),r=i("./bundles/orofrontend/js/app/views/fit-matrix-view.js"),a=i("./bundles/oroproduct/js/app/quantity-helper.js"),l=i("./bundles/orolocale/js/numeral-l10n.js"),d=i("./bundles/oroui/js/extend/jquery.js"),u=i("./bundles/oroui/js/extend/underscore.js"),c=e.extend({autoRender:!1,optionNames:e.prototype.optionNames.concat(["dimension"]),events:{'input [data-name="field__quantity"]:enabled':"_onQuantityChange",'change [data-name="field__quantity"]:enabled':"_onQuantityChange",'click [data-role="clear"]':"clearForm"},total:null,prices:null,minValue:1,dimension:null,constructor:function t(e){t.__super__.constructor.call(this,e)},initialize:function(t){c.__super__.initialize.call(this,t),this.initModel(t),this.setPrices(t),u.isDesktop()&&1===this.dimension&&this.subview("fitMatrixView",new r({el:this.el})),1!==this.dimension&&this.$el.find("[data-scroll-view]").length&&this.subview("scrollView",new s({el:this.el})),this.setDefaultTotals(),this.updateTotals()},initModel:function(t){t.productModel&&(this.model=t.productModel)},dispose:function(){delete this.prices,delete this.total,delete this.minValue,c.__super__.dispose.call(this)},setDefaultTotals:function(){this.total={price:0,quantity:0,rows:{},columns:{},cells:{}}},setPrices:function(t){this.prices={},t.prices&&!u.isObject(t.prices)&&(t.prices=JSON.parse(t.prices)),u.each(t.prices,(function(t,e){this.prices[e]=n.preparePrices(t)}),this)},_onQuantityChange:function(t){if(!this._isSafeNumber(t.currentTarget.value))return t.preventDefault(),!1;this.updateTotal(d(t.currentTarget)),this.checkClearButtonVisibility(),this.render()},updateTotals:function(){u.each(this.$('[data-name="field__quantity"]:enabled'),(function(t){this.updateTotal(d(t))}),this)},updateTotal:function(t){const e=t.closest("[data-index]"),i=e.data("index"),s=e.data("product-id"),r=i.row+"."+i.column,a=this.total.cells,l=this.total.columns,d=this.total.rows,u=a[r]=this.getTotal(a,r),c=l[i.column]=this.getTotal(l,i.column);c.precision=this.getLineMaxPrecision("column",i);const h=d[i.row]=this.getTotal(d,i.row);h.precision=this.getLineMaxPrecision("row",i),void 0===this.total.precision&&(this.total.precision=this.getMatrixMaxPrecision()),this.changeTotal(this.total,u,-1),this.changeTotal(c,u,-1),this.changeTotal(h,u,-1),u.quantity=o.unformatStrict(t.val());const p=u.quantity>0?u.quantity.toString():"";u.price=n.calcTotalPrice(this.prices[s],this.model.get("unit"),p),this.changeTotal(this.total,u),this.changeTotal(c,u),this.changeTotal(h,u)},getLineMaxPrecision(t="",e){const i=u.reduce(this.$el.find('[data-name="field__quantity"]:enabled'),((i,o)=>{const n=d(o).data("precision");return d(o).closest("[data-index]").data("index")[t]===e[t]&&void 0!==n&&i.push(n),i}),[]);return this.getMaxValue(i)},getMatrixMaxPrecision(){const t=u.reduce(this.$el.find('[data-name="field__quantity"]:enabled'),((t,e)=>{const i=d(e).data("precision");return void 0!==i&&t.push(i),t}),[]);return this.getMaxValue(t)},getMaxValue:t=>t.length?Math.max.apply(null,t):null,getTotal:function(t,e){return t[e]||{quantity:0,price:0}},changeTotal:function(t,e,i){i=i||1,t.quantity=l(e.quantity).multiply(i).add(t.quantity).value(),t.price=l(e.price).multiply(i).add(t.price).value(),"NaN"===o.formatDecimal(t.price)&&(t.price=0)},getValidQuantity:function(t){const e=parseInt(t,10)||0;return u.isEmpty(t)?0:e<this.minValue?this.minValue:e},render:function(){this.$('[data-role="total-quantity"]').text(this.formatQuantity(this.total.quantity,this.total.precision)),this.$('[data-role="total-price"]').text(o.formatCurrency(this.total.price,this.total.currency)),u.each(u.pick(this.total,"rows","columns"),this.renderSubTotals,this)},renderSubTotals:function(t,e){u.each(t,(function(t,i){const n=this.$el.find("[data-"+e+'-quantity="'+i+'"]'),s=this.$el.find("[data-"+e+'-price="'+i+'"]');n.toggleClass("valid",t.quantity>0).text(this.formatQuantity(t.quantity,t.precision)),s.toggleClass("valid",t.price>0).text(o.formatCurrency(t.price,t.currency))}),this)},formatQuantity(t,e){const i=[t];return u.isNumber(e)&&i.push(e),a.formatQuantity.apply(null,i)},_isSafeNumber:function(t){return o.unformatStrict(""===t?0:t)<=Number.MAX_SAFE_INTEGER},checkClearButtonVisibility:function(){const t=u.every(this.$('[data-name="field__quantity"]:enabled'),(function(t){return u.isEmpty(t.value)}));this.$('[data-role="clear"]').toggleClass("disabled",t)},clearForm:function(){this.$('[data-name="field__quantity"]:enabled').filter((function(){return this.value.length>0})).val("").trigger("change")}});return c}.call(e,i,e,t))||(t.exports=o)},"./bundles/oropricing/js/app/views/base-product-prices-view.js":(t,e,i)=>{var o;void 0===(o=function(t){"use strict";const e=i("./bundles/oroui/js/app/views/base/view.js"),o=i("./bundles/orofrontend/js/app/elements-helper.js"),n=i("./bundles/oroui/js/layout.js"),s=i("./bundles/oroui/js/mediator.js"),r=i("./bundles/orolocale/js/formatter/number.js"),a=i("./bundles/orolocale/js/numeral-l10n.js"),l=i("./bundles/orolocale/js/locale-settings.js"),d=i("./bundles/oroui/js/app/models/base/model.js"),u=i("./bundles/oropricing/js/app/prices-helper.js"),c=i("../node_modules/@oroinc/bootstrap/js/dist/popover.js"),h=i("./bundles/oroui/js/extend/underscore.js"),p=i("./bundles/oroui/js/extend/jquery.js"),m=e.extend(h.extend({},o,{priceTemplate:i("../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/oropricing/templates/product/price.html"),unitTemplate:i("../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/oropricing/templates/product/unit.html"),keepElement:!0,optionNames:e.prototype.optionNames.concat(["changeQuantity","changeUnitLabel"]),options:{defaultQuantity:1},elements:{price:'[data-name="price"]',unit:'[data-name="unit"]',priceValue:'[data-name="price-value"]',priceNotFound:'[data-name="price-not-found"]',pricesHint:'[data-name="prices-hint"]',pricesHintContent:'[data-name="prices-hint-content"]'},modelAttr:{prices:{},price:0},modelEvents:{"prices setPrices":["change","setPrices"],"quantity setFoundPrice":["change","onQuantityChange"],"unit setFoundPrice":["change","onUnitChange"],"price updateUI":["change","updateUI"]},prices:null,foundPrice:null,changeQuantity:!1,changeUnitLabel:!1,rendered:!1,constructor:function t(e){t.__super__.constructor.call(this,e)},initialize:function(t){m.__super__.initialize.call(this,t),this.deferredInitializeCheck(t,["productModel"])},deferredInitialize:function(t){this.initModel(t),this.model&&(this.initializeElements(t),this.render())},dispose:function(){delete this.modelAttr,delete this.prices,delete this.foundPrice,this.setUnitLabel(!0),this.disposeElements(),m.__super__.dispose.call(this)},render:function(){this.setPrices()},initModel:function(t){this.modelAttr=p.extend(!0,{},this.modelAttr,t.modelAttr||{}),t.productModel&&(this.model=t.productModel),this.model||(this.model=new d),h.each(this.modelAttr,(function(t,e){this.model.has(e)&&h.isEmpty(t)||this.model.set(e,t)}),this)},renderHint:function(){const t=this.getElement("pricesHint");if(!t.length)return;const e=this.getHintContent();t.toggleClass("disabled",0===e.length).attr("disabled",0===e.length),e.length&&(t.data(c.DATA_KEY)||n.initPopoverForElements(t,{container:"body",forceToShowTitle:!0},!0),t.data(c.DATA_KEY).updateContent(e))},getHintContent:function(){return this.getElement("pricesHintContent").html()||""},setPrices:function(){this.prices=u.preparePrices(this.model.get("prices")),this.foundPrice={},this.rendered?this.setFoundPrice():(this.setFoundPrice(!0),this.rendered||this.updateUI())},onQuantityChange:function(t){this.setFoundPrice()},onUnitChange:function(t){this.setFoundPrice(t.manually||!1)},setUnitLabel:function(t){if(!this.changeUnitLabel)return;const e=this.model.get("price");let i=null;!t&&e&&(i=h.__("oro.pricing.price.formatted.unit",{formattedUnit:h(e.formatted_unit).capitalize(),formattedPrice:e.formatted_price})),this.model.set("unit_label",i)},setFoundPrice:function(t){this.setPriceValue(this.findPrice(t))},setPriceValue:function(t){this.model.set("price",t),this.setUnitLabel()},findPrice:function(t){this.model.get("quantity_changed_manually")&&(this.changeQuantity=!1);const e=this.model.get("quantity"),i=this.model.get("unit"),o=i+" "+e+" "+((t=t&&this.changeQuantity)?1:0);let n=this.foundPrice[o]||null;if(n||(n=t?h.last(this.prices[i])||null:u.findPrice(this.prices,i,e),this.foundPrice[o]=n),t){const t=n?n.quantity:this.options.defaultQuantity;e.toString()!==t.toString()&&this.model.set("quantity",t)}return n},findPriceValue:function(){const t=this.findPrice();return t?t.price:null},updateUI:function(){this.rendered=!0;const t=this.model.get("price");null===t?(this.getElement("price").addClass("hidden"),this.getElement("priceNotFound").removeClass("hidden")):(this.getElement("unit").html(this.unitTemplate({price:t})),this.getElement("priceValue").html(this.priceTemplate({price:t,numberFormatter:r,localeSettings:l,numeral:a})),this.getElement("priceNotFound").addClass("hidden"),this.getElement("price").removeClass("hidden")),this.renderHint(),s.trigger("layout:reposition")}}));return m}.call(e,i,e,t))||(t.exports=o)},"./bundles/oropricing/js/app/views/line-item-product-prices-view.js":(t,e,i)=>{var o;void 0===(o=function(t){"use strict";const e=i("./bundles/oroui/js/extend/underscore.js"),o=i("./bundles/oroui/js/extend/jquery.js"),n=i("./bundles/oroui/js/mediator.js"),s=i("./bundles/oropricing/js/app/views/product-prices-editable-view.js"),r=s.extend({elements:e.extend({},s.prototype.elements,{currency:'[data-name="field__currency"]'}),modelElements:e.extend({},s.prototype.modelElements,{currency:"currency"}),modelEvents:e.extend({},s.prototype.modelEvents,{"id updateTierPrices":["change","updateTierPrices"],"currency updatePriceValue":["change","updatePriceValue"],"unit updateTierPrices":["change","updateTierPrices"],"quantity updatePriceValue":["change","updatePriceValue"],"checksum updateTierPrices":["change","updateTierPrices"]}),storedValues:{},constructor:function t(e){t.__super__.constructor.call(this,e)},deferredInitialize:function(t){if(r.__super__.deferredInitialize.call(this,t),!this.options.editable){this.getElement("priceValue").prop("readonly",!0);const t=this.model.get("id");!e.isUndefined(t)&&t.length&&this.model.get("price")&&(this.storedValues=e.extend({},this.model.attributes))}this.listenTo(n,{"pricing:collect:line-items":this.collectLineItems,"pricing:refresh:products-tier-prices":this.refreshTierPrices,"pricing:currency:changed":this.currencyChanged}),n.trigger("pricing:currency:load",this.currencyChanged.bind(this)),n.trigger("pricing:get:products-tier-prices",(t=>{const i=this.model.get("id");!e.isUndefined(i)&&e.isUndefined(t[i])&&this.updateTierPrices(),this.setTierPrices(t,!1)}))},updateTierPrices:function(){const t=this.model.get("id");0===t.length?this.refreshTierPrices({}):n.trigger("pricing:load:products-tier-prices",[t],this.refreshTierPrices.bind(this))},setTierPrices:function(t,i){this.tierPrices=t;let o={};const n=this.model.get("id");if(!e.isUndefined(n)&&0!==n.length){const i=this.model.get("checksum");o=e.isUndefined(i)||0===i.length||e.isUndefined(t[n])?t[n]||{}:t[n][i]||{}}const s=this.model.get("currency");s&&(o=e.filter(o,(function(t){return t.currency===s}))),this.model.set("prices",o,{silent:i||!1})},refreshTierPrices:function(t){const e=this.model.get("id");this.setTierPrices(t,!1),this.options.editable||(this.filterValues(),e&&this.updatePriceValue())},collectLineItems:function(t){const i=this.model.get("id");!e.isUndefined(i)&&i.length&&t.push({product:i,unit:this.model.get("unit"),quantity:this.model.get("quantity"),currency:this.model.get("currency")})},filterValues:function(){const t=this.model.get("id");let i={};e.isUndefined(t)||0===t.length||(i=this.tierPrices[t]||{});const n=[],s=[];e.each(i,(function(t){n.push(t.currency),s.push(t.unit)})),e.isUndefined(this.storedValues.price)?(e.isUndefined(t)||0===t.length)&&(n.push(this.model.get("currency")),s.push(this.model.get("unit"))):(n.push(this.storedValues.currency),s.push(this.storedValues.unit)),this.getElement("currency").find("option").filter((function(){return-1===o.inArray(this.value,n)})).remove(),this.model.trigger("product:unit:filter-values",s)},updatePriceValue:function(){if(this.setTierPrices(this.tierPrices),!this.options.editable){let t;t=this.storedValues&&this.model.get("id")===this.storedValues.id&&this.model.get("checksum")===this.storedValues.checksum&&this.model.get("unit")===this.storedValues.unit&&this.model.get("quantity")===this.storedValues.quantity&&this.model.get("currency")===this.storedValues.currency?this.storedValues:this.findPrice(),this.setPriceValue(t?t.price:null),this.getElement("priceValue").addClass("matched-price")}},currencyChanged:function(t){t.currency&&this.model.set("currency",t.currency)},dispose:function(){this.disposed||(delete this.storedValues,r.__super__.dispose.call(this))}});return r}.call(e,i,e,t))||(t.exports=o)},"./bundles/oropricing/js/app/views/product-prices-editable-view.js":(t,e,i)=>{var o;void 0===(o=function(t){"use strict";const e=i("../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/oropricing/templates/product/prices-tier-button.html"),o=i("../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/oropricing/templates/product/prices-tier-table.html"),n=i("../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/oropricing/templates/product/prices-price-overridden.html"),s=i("./bundles/oropricing/js/app/views/base-product-prices-view.js"),r=i("./bundles/orolocale/js/formatter/number.js"),a=i("../node_modules/@oroinc/bootstrap/js/dist/popover.js"),l=i("./bundles/oroui/js/layout.js"),d=i("./bundles/oroui/js/extend/jquery.js"),u=i("./bundles/oroui/js/extend/underscore.js"),c=i("./bundles/oroui/js/mediator.js"),h=i("./bundles/oropricing/js/app/prices-helper.js"),p=s.extend({elements:u.extend({},s.prototype.elements,{pricesHint:null,pricesHintContent:null,priceOverridden:null,priceValue:'[data-name="field__value"]'}),modelAttr:{found_price:null},elementsEvents:u.extend({},s.prototype.elementsEvents,{"priceValue onPriceSetManually":["change","onPriceSetManually"]}),modelElements:u.extend({},s.prototype.modelElements,{price:"priceValue"}),options:{matchedPriceEnabled:!0,precision:4,editable:!0,ariaControlsId:null},templates:{priceOverridden:n,pricesHint:e,pricesHintContent:o},events:function(){const t={},e=this.eventNamespace(),i=function(t,i){const o=d(i.target).data(a.DATA_KEY);d(o.getTipElement()).off(e).on("click"+e,"a",(function(e){e.preventDefault(),o.hide(),t(this)}))};return t[a.Event.SHOWN+" .product-price-overridden"]=u.wrap(this.useFoundPrice.bind(this),i),t[a.Event.SHOWN+" .product-tier-prices"]=u.wrap(this.setPriceFromHint.bind(this),i),t[a.Event.HIDDEN+" [data-toggle=popover]"]=function(t){const i=d(t.target).data(a.DATA_KEY).getTipElement();d(i).off(e)},t},constructor:function t(e){t.__super__.constructor.call(this,e)},initialize:function(t){this.options=d.extend(!0,{},this.options,u.pick(t,u.keys(this.options))),this.templates=d.extend(!0,{},this.templates,t.templates||{}),p.__super__.initialize.call(this,t)},deferredInitialize:function(t){p.__super__.deferredInitialize.call(this,t)},dispose:function(t){delete this.templates,p.__super__.dispose.call(this)},findPrice:function(...t){const e=p.__super__.findPrice.apply(this,t);return this.model.set("found_price",e),this.getElement("priceValue").data("found_price",e),e},setFoundPrice:function(){this.findPrice(),this.options.matchedPriceEnabled&&this.getElement("priceValue").hasClass("matched-price")&&this.setPriceValue(this.findPriceValue()),this.updateUI()},setPriceValue:function(t){this.model.set("price",this.calcTotalPrice(t)),this.getElement("priceValue").trigger("change")},updateUI:function(){this.renderPriceOverridden(),this.renderHint()},initPriceOverridden:function(){if(this.priceOverriddenInitialized=!0,!this.options.matchedPriceEnabled||!this.options.editable)return;if(!this.getElement("priceValue").val()&&!this.getElement("priceValue").data("match-price-on-null"))return;const t=this.createElementByTemplate("priceOverridden");l.initPopover(t),t.insertAfter(this.getElement("priceValue")),u.isEmpty(this.getElement("priceValue").val())&&this.options.matchedPriceEnabled&&this.unlockPrice()},initHint:function(){this.hintInitialized=!0,"function"!=typeof this.templates.pricesHintContent&&(this.templates.pricesHintContent=u.template(this.getElement("pricesHintContent").html()));const t=this.createElementByTemplate("pricesHint"),e=this.model.get("sku"),i=e=>{t.attr("aria-label",u.__("oro.pricing.view_all_prices_extended",{product_attrs:e}))};e&&i(e),this.model.on("change:sku",((t,e)=>i(e))),this.getElement("priceValue").after(t)},getHintContent:function(){return u.isEmpty(this.prices)?"":this.templates.pricesHintContent({model:this.model.toJSON(),prices:h.sortUnitPricesByLowQuantity(this.prices),matchedPrice:this.findPrice(),clickable:this.options.editable,formatter:r,ariaControlsId:this.options.ariaControlsId})},renderHint:function(){return this.hintInitialized||this.initHint(),p.__super__.renderHint.call(this)},onPriceSetManually:function(t,e){e.manually&&this.options.matchedPriceEnabled&&this.lockPrice()},setPriceFromHint:function(t){this.lockPrice();const e=d(t);this.model.set("unit",e.data("unit")),this.setPriceValue(e.data("price"))},renderPriceOverridden:function(){if(!this.options.matchedPriceEnabled)return;this.priceOverriddenInitialized||this.initPriceOverridden();const t=r.unformatStrict(this.model.get("price")),e=this.findPriceValue();null!==e&&this.calcTotalPrice(e)!==this.calcTotalPrice(t)?(this.getElement("priceOverridden").show(),this.getElement("priceValue").addClass("overridden-price")):(this.getElement("priceOverridden").hide(),this.getElement("priceValue").removeClass("overridden-price"))},calcTotalPrice:function(t){return null===t?t:r.formatMonetary(t)},useFoundPrice:function(){this.options.matchedPriceEnabled&&(this.setPriceValue(this.findPriceValue()),this.unlockPrice())},lockPrice:function(){this.getElement("priceValue").removeClass("matched-price"),c.trigger("pricing:product-price:lock",this.getElement("priceValue"))},unlockPrice:function(){this.getElement("priceValue").addClass("matched-price"),c.trigger("pricing:product-price:unlock",this.getElement("priceValue"))}});return p}.call(e,i,e,t))||(t.exports=o)},"./bundles/oropricing/js/app/views/product-total-price-view.js":(t,e,i)=>{var o;void 0===(o=function(t){"use strict";const e=i("./bundles/oroui/js/app/views/base/view.js"),o=i("./bundles/oropricing/js/app/prices-helper.js"),n=i("./bundles/orolocale/js/formatter/number.js"),s=i("./bundles/orofrontend/js/app/elements-helper.js"),r=i("./bundles/oroshoppinglist/js/shoppinglist-collection-service.js"),a=i("./bundles/oroui/js/extend/underscore.js"),l=e.extend(a.extend({},s,{autoRender:!1,elements:{totalQty:'[data-role="total-quantity"]',totalPrice:'[data-role="total-price"]'},prices:null,constructor:function t(e){t.__super__.constructor.call(this,e)},initialize:function(t){l.__super__.initialize.call(this,t),this.initModel(t),this.setPrices(),this.initializeElements(t),r.shoppingListCollection.done((t=>{this.shoppingListCollection=t,this.listenTo(t,"change",this.render)}))},initModel:function(t){t.productModel&&(this.model=t.productModel)},render:function(){const t=this._calcTotals();this.$el.toggleClass("hide",0===t.quantity),this.getElement("totalQty").text(t.quantity),this.getElement("totalPrice").text(n.formatCurrency(t.price))},setPrices:function(){this.prices={};const t=this.model.get("prices");a.each(t,(function(t,e){this.prices[e]=o.preparePrices(t)}),this)},_getCurrentShoppingList:function(){return this.shoppingListCollection.find({is_current:!0})},_getCurrentLineItems:function(){const t=this._getCurrentShoppingList();return t&&a.find(this.model.get("shopping_lists"),{id:t.get("id")})||null},_calcTotals:function(){let t={price:0,quantity:0};const e=this._getCurrentLineItems();return a.isNull(e)||(t=a.reduce(e.line_items,(function(t,e){const i=e.quantity>0?e.quantity.toString():"";return t.price+=o.calcTotalPrice(this.prices[e.productId],e.unit,i),t.quantity+=e.quantity,t}),t,this)),t}}));return l}.call(e,i,e,t))||(t.exports=o)},"./bundles/oropricing/js/app/views/quick-add-row-price-view.js":(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>y});var o=i("./bundles/oroui/js/app/views/base/view.js"),n=i.n(o),s=i("./bundles/orolocale/js/formatter/number.js"),r=i.n(s),a=i("./bundles/orotranslation/js/translator.js"),l=i.n(a),d=i("./bundles/oroui/js/extend/jquery.js"),u=i.n(d),c=i("./bundles/oroui/js/extend/underscore.js"),h=i.n(c),p=i("./bundles/oropricing/js/app/prices-helper.js"),m=i.n(p),g=i("./bundles/oroui/js/layout.js"),f=i.n(g),_=i("../node_modules/@oroinc/bootstrap/js/dist/popover.js"),w=i.n(_),b=i("./bundles/orolocale/js/numeral-l10n.js"),v=i.n(b);const z=n().extend({defaults:{defaultQuantity:"",subtotalNotAvailable:l()("oro.pricing.price.not_available")},priceNotFoundTemplate:'<div class="text-center"><%- _.__("oro.pricing.product_prices.price_not_found") %></div>',elem:{subtotal:'[data-name="field__product-subtotal"]',pricesHint:'[data-role="price-hint-trigger"]'},listen:{"change:prices model":"indexPrices","change:prices_index model":"updatePrice","change:quantity model":"updatePrice","change:unit model":"updatePrice","change:subtotal model":"updateUI"},events:{'click [data-role="price-hint-trigger"]':"updateHintContent",'focus [data-role="price-hint-trigger"]':"updateHintContent"},constructor:function t(e){t.__super__.constructor.call(this,e),this.model.get("prices")&&this.indexPrices()},initialize(t){this.options=Object.assign({},this.defaults,h().pick(t,Object.keys(this.defaults))),this.elem=Object.assign({},this.elem,t.elements||{}),Object.assign(this,h().pick(t,"pricesHintTemplateContentSelector")),z.__super__.initialize.call(this,t)},dispose(){this.disposed||(delete this.$pricesHint,z.__super__.dispose.call(this))},indexPrices(){const t=this.model.get("prices")||{},e=m().indexPrices(t);this.prices=m().preparePrices(e),this.model.set("prices_index",e)},updatePrice(){const t=this.model.get("quantity"),e=this.model.get("unit"),i=m().findPrice(this.prices,e,t);this.model.set("price",i),this.model.set("subtotal",this.calcSubtotal())},calcSubtotal(){const t=this.model.get("price"),e=this.model.get("quantity");return t&&e?r().formatCurrency(v()(t.price).multiply(e).value(),t.currency):this.model.get("unit")?this.options.subtotalNotAvailable:null},updateUI(){this.$(this.elem.subtotal).val(this.model.get("subtotal")),this.renderHint(),this.$pricesHint.toggleClass("hidden",!this.model.get("subtotal"))},renderHint(){void 0===this.$pricesHint&&(this.$pricesHint=this.$(this.elem.pricesHint))},updateHintContent(t){if(!this.$pricesHint.length)return;const{prices_index:e,...i}=this.model.getAttributes();i.prices=e,this.$pricesHint.data(w().DATA_KEY)||(this.$pricesHint.attr("data-toggle","popover"),f().initPopoverForElements(this.$pricesHint,{container:"body",forceToShowTitle:!0},!0),u()(t.target).trigger(t));const o=h().isEmpty(i.prices)?"priceNotFoundTemplate":"pricesHintTemplateContent",n=this.getTemplateFunction(o);this.$pricesHint.data(w().DATA_KEY).updateContent(n({model:i,prices:this.prices,matchedPrice:this.model.get("price"),clickable:!1,formatter:r()}))}}),y=z},"./bundles/oroproduct/js/app/components/breadcrumbs-navigation-block.js":(t,e,i)=>{var o;void 0===(o=function(t){"use strict";const e=i("./bundles/oroui/js/app/components/base/component.js"),o=i("./bundles/oroui/js/extend/jquery.js"),n=i("./bundles/orotranslation/js/translator.js"),s=e.extend({$element:null,constructor:function t(e){t.__super__.constructor.call(this,e)},listen:{"datagrid_filters:update mediator":"onFiltersUpdate"},initialize:function(t){this.$element=t._sourceElement,s.__super__.initialize.call(this,t)},onFiltersUpdate:function(t){this.updateFiltersInfo(t),this.updateSortingInfo(t),this.updatePaginationInfo(t)},updateFiltersInfo:function(t){const e=[],i=function(i,o){if(o.name===i&&o.visible){const i=t.filterManager.filters[o.name].getState().hint;e.push({hint:i,label:o.label})}};for(const e in t.collection.state.filters)t.collection.state.filters.hasOwnProperty(e)&&t.metadata.filters.forEach(i.bind(null,e));if(0===e.length)return void o(".filters-info",this.$element).html("");const n=[];e.forEach((function(t){n.push(function(t){return t.label+" "+t.hint}(t))}));const s="["+n.join(", ")+"]";o(".filters-info",this.$element).text(s)},updateSortingInfo:function(t){let e=n("oro.product.grid.navigation_bar.sorting.label");const i=t.collection.state.sorters;let s="",r="";for(const t in i)if(i.hasOwnProperty(t)){s=t,r=n("oro.product.grid.navigation_bar.sorting."+(i[t]>0?"desc":"asc"));break}e=e.replace("%column%",s).replace("%direction%",r),o(".sorting-info",this.$element).html(e)},updatePaginationInfo:function(t){let e=n("oro.product.grid.navigation_bar.pagination.label");const i=t.collection.state,s=(i.currentPage-1)*i.pageSize+1,r=i.totalRecords<i.pageSize?i.totalRecords:i.currentPage*i.pageSize;e=e.replace("%start%",s).replace("%end%",r).replace("%total%",i.totalRecords),o(".pagination-info",this.$element).html(e)}});return s}.call(e,i,e,t))||(t.exports=o)},"./bundles/oroproduct/js/app/components/fullscreen-attribute-group-tab-content-component.js":(t,e,i)=>{var o;void 0===(o=function(t){"use strict";const e=i("./bundles/oroui/js/mediator.js"),o=i("./bundles/oroentityconfig/js/components/attribute-group-tab-content-component.js"),n=i("./bundles/orofrontend/default/js/app/views/fullscreen-popup-view.js"),s=i("./bundles/oroui/js/viewport-manager.js").A,r=o.extend({constructor:function t(e){t.__super__.constructor.call(this,e)},initialize:function(t){r.__super__.initialize.call(this,t),this.viewport=t.viewport||{},this.listenTo(e,"entity-config:attribute-group:click",this.onGroupClick)},onGroupClick:function(t,e){!e&&this.id===t.get("id")&&s.isApplicable(this.viewport)&&(this.fullscreenView||(this.fullscreenView=new n({disposeOnClose:!0,contentElement:this.el}),this.fullscreenView.on("close",(function(){this.fullscreenView.dispose(),delete this.fullscreenView}),this),this.fullscreenView.show()))}});return r}.call(e,i,e,t))||(t.exports=o)},"./bundles/oroproduct/js/app/components/product-autocomplete-component.js":(t,e,i)=>{var o;void 0===(o=function(t){"use strict";const e=i("./bundles/oroui/js/extend/jquery.js"),o=i("./bundles/oroui/js/extend/underscore.js"),n=i("./bundles/fosjsrouting/js/router.js"),s=i("./bundles/oroui/js/mediator.js"),r=i("./bundles/oroproduct/js/app/product-helper.js"),a=i("../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/oroproduct/templates/product-autocomplete-error.html"),l=i("./bundles/oroform/js/app/components/autocomplete-component.js").extend({product:{},previousValue:"",autocompleteErrorTemplate:a,constructor:function t(e){t.__super__.constructor.call(this,e)},initialize:function(t){this.options=e.extend(!0,{product:{},productBySkuRoute:"oro_frontend_autocomplete_search",selectors:{row:'[data-role="row"]',sku:'[data-name="field__product-sku"]',displayName:'[data-name="field__product-display-name"]',error:'[data-role="autocomplete-error"]'},errorClass:"error"},t),l.__super__.initialize.call(this,t),this.$row=this.$el.closest(this.options.selectors.row),this.$sku=this.$row.find(this.options.selectors.sku),this.$displayName=this.$row.find(this.options.selectors.displayName),this.product=e.extend(!0,{sku:this.$sku.val()||null,name:null,displayName:this.$el.val()||null},this.options.product),this.updateProduct(),this.$el.on(`blur${this.eventNamespace()}`,o.debounce(this.onBlur.bind(this),150)),this.$el.on(`input${this.eventNamespace()}`,this.abortRequestIfEmpty.bind(this)),this.$sku.on(`validate-element${this.eventNamespace()}`,(({invalid:t,errorClass:e})=>{t&&this.$el&&this.$el.val().length>0&&this.$row.find('.fields-row-error [id*=productSku].validation-failed [role="alert"] span:last-child').text(o.escape(o.__("oro.product.validation.sku.not_found"))),o.defer((()=>{this.$displayName.toggleClass(e,t)}))})),s.on("autocomplete:validate-response",this.validateResponse,this)},eventNamespace:function(){return".product-autocomplete-component"},onBlur:function(t){if(this.disposed)return;const i=r.trimWhiteSpace(t.target.value),o=this.hasChanged(i),n=e(t.relatedTarget).parents("ul.select2-results");o&&!n.length&&(this.resetProduct(),this.validateProduct(i))},abortRequestIfEmpty(){this.disposed||this.$el.val()||!this.jqXHR||this.jqXHR.abort()},_searchForResults(...t){l.__super__._searchForResults.apply(this,t),this.abortRequestIfEmpty()},hasChanged:function(t){return t!==this.previousValue},updater:function(t){const e=this.resultsMapping[t];return this.resetProduct(),this.validateProduct(this.getProductDisplayName(e)),this.getProductDisplayName(e)},validateProduct:function(t){const[e,i]=this.parseVal(t);this.sendValidateProductRequest({name:"oro_product_visibility_limited_with_prices",per_page:1,sku:[e],productName:i,query:t})},sendValidateProductRequest:function(t){e.ajax({url:n.generate(this.options.productBySkuRoute),method:"post",data:t,success:t=>{this.disposed||this.validateResponse(t)},error:()=>{this.disposed||(this.$el.trigger({type:"productNotFound.autocomplete",item:{sku:t.sku[0]}}),this.resetProduct())}})},validateResponse:function(t){const e=this.$el.val();if(e&&this.hasChanged(e)){this.previousValue=e,this.resetProduct();const i=this.findItem(t.results,e);i?(this.product.sku=i.sku,this.product.name=i["defaultName.string"],this.product.displayName=this.getProductDisplayName(i),this.$el.trigger({type:"productFound.autocomplete",item:i}),this.previousValue=this.product.displayName):this.$el.trigger({type:"productNotFound.autocomplete",item:{sku:e}}),this.updateProduct()}else this.hasChanged(e)&&(this.previousValue=e,this.resetProduct())},findItem:function(t,e){const[i,n]=this.parseVal(e);let s=null;return n&&(s=o.find(t,(function(t){return t.sku.toUpperCase()===i.toUpperCase()&&t["defaultName.string"]===n}))),s||(s=o.find(t,(function(t){return t.sku.toUpperCase()===i.toUpperCase()}))),s},getProductDisplayName:function(t){return[t.sku,t["defaultName.string"]].join(" - ")},parseVal:function(t){const e=t.indexOf(" ");if(-1===e)return[t,null];const i=t.substring(t,e);let o=t.substring(e+1).trim();return o&&0===o.indexOf("-")&&(o=o.substring(1).trim()),[i,o]},resetProduct:function(){this.product.sku=this.product.name=this.product.displayName=null,this.hideError(),this.$el.removeClass(this.options.errorClass)},updateProduct:function(){this.product.sku?(this.$el.val(this.product.displayName),this.$sku.valid()):this.$el&&this.$el.val().length>0&&(this.showError(),o.defer((()=>{this.$el.addClass(this.options.errorClass)})))},showError:function(){this.$row.find(".fields-row-error [id*=productSku].validation-failed").remove(),this.$error?this.$error.show():(this.$row.find(".fields-row-error").append(this.autocompleteErrorTemplate()),this.$error=this.$row.find(this.options.selectors.error))},hideError:function(){this.$error&&this.$error.hide()},show:function(){l.__super__.show.call(this),this.focus()},dispose:function(){this.disposed||(delete this.product,delete this.previousValue,this.$sku.off(this.eventNamespace()),this.$el.off(this.eventNamespace()),s.off("autocomplete:validate-response",this.validateResponse,this),l.__super__.dispose.call(this))}});return l}.call(e,i,e,t))||(t.exports=o)},"./bundles/oroproduct/js/app/components/product-unit-component.js":(t,e,i)=>{var o;void 0===(o=function(t){"use strict";const e=i("./bundles/oroui/js/app/components/base/component.js"),o=i("./bundles/oroui/js/app/models/base/model.js"),n=i("./bundles/oroproduct/js/app/units-util.js"),s=i("./bundles/oroui/js/app/views/loading-mask-view.js"),r=i("./bundles/fosjsrouting/js/router.js"),a=i("./bundles/oroui/js/extend/underscore.js"),l=i("./bundles/oroui/js/extend/jquery.js"),d=i("./bundles/orotranslation/js/translator.js"),u=e.extend({options:{productSelector:'.product-product [data-name="field__product"]',quantitySelector:".product-quantity input",unitSelector:".product-unit select",routeName:"oro_product_unit_product_units",routingParams:{},errorMessage:"Sorry, an unexpected error has occurred.",loadingMaskEnabled:!0,dropQuantityOnLoad:!0,defaultValues:null},loadingMaskView:null,productSelector:null,quantitySelector:null,unitSelector:null,constructor:function t(e){t.__super__.constructor.call(this,e)},initialize:function(t){this.options=a.defaults(t||{},this.options),this.model||(this.model=new o),this.initializeLoadingMask(t),this.options._sourceElement.on("change",this.options.productSelector,this.onProductChange.bind(this)),this.quantitySelector=this.options._sourceElement.find(this.options.quantitySelector),this.unitSelector=this.options._sourceElement.find(this.options.unitSelector),this.productSelector=this.options._sourceElement.find(this.options.productSelector),this.productSelector.val()||this._dropValues()},initializeLoadingMask:function(t){t.loadingMaskEnabled&&(this.loadingMaskView=new s({container:this.options._sourceElement}))},onProductChange:function(t){this.unitSelector.trigger("value:changing");const e=t.target.value;if(!e)return void this._dropValues();const i=l.extend({},this.options.routingParams,{id:e});l.ajax({url:r.generate(this.options.routeName,i),beforeSend:this._beforeSend.bind(this),success:this._success.bind(this),complete:this._complete.bind(this),errorHandlerMessage:d(this.options.errorMessage),error:this._dropValues.bind(this)})},_beforeSend:function(){this.loadingMaskView&&this.loadingMaskView.show()},_dropValues:function(){this.options.dropQuantityOnLoad&&this.handleQuantityState(!0),this.handleUnitsState(this.options.defaultValues)},_success:function(t){this.handleQuantityState(!1),this.handleUnitsState(t.units)},_complete:function(){this.loadingMaskView&&this.loadingMaskView.hide()},handleQuantityState:function(t){this.quantitySelector.prop("disabled",t),this.options.dropQuantityOnLoad&&this.quantitySelector.val(null)},handleUnitsState:function(t){this.model.set("product_units",t),n.updateSelect(this.model,this.unitSelector),this.unitSelector.trigger("value:changed").trigger("change")},dispose:function(){this.disposed||(this.options._sourceElement.off(),u.__super__.dispose.call(this))}});return u}.call(e,i,e,t))||(t.exports=o)},"./bundles/oroproduct/js/app/components/product-variant-field-component.js":(t,e,i)=>{var o;void 0===(o=function(t){"use strict";const e=i("./bundles/oroui/js/extend/underscore.js"),o=i("./bundles/oroui/js/extend/jquery.js"),n=i("./bundles/oroui/js/app/components/view-component.js"),s=i("./bundles/oroui/js/error.js"),r=i("./bundles/oroui/js/tools.js"),{validator:a}=i("./bundles/oroform/js/extend/validate.js"),l=n.extend({options:{simpleProductVariants:{}},$el:null,filteredOptions:null,_filtered:null,_hierarchy:null,state:null,simpleProductVariants:{},constructor:function t(e){t.__super__.constructor.call(this,e)},initialize:function(t){this.filteredOptions=[],this._hierarchy=[],this.state={},this.options=e.defaults(t||{},r.deepClone(this.options)),l.__super__.initialize.call(this,t),this.$el=this.options._sourceElement,this._prepareProductVariants(),this.deferredInit.done(this._initVariantInstances.bind(this))},setState:function(t,i){return e.isUndefined(i)?s.showErrorInConsole("The value should be defined"):(this.state[t]=i,this.state)},getState:function(t){return t?this.state[t]:this.state},updateFields:function(){this.$el.find("select").each(((t,e)=>{-1===this._filtered.indexOf(o(e).val())&&(o(e).val(""),this.setState(this._extractName(o(e).data("name")),null)),o(e).trigger("change.select2")}))},dispose:function(){this.disposed||(this.$el.off(),delete this._filtered,delete this._hierarchy,delete this.state,delete this.filteredOptions,l.__super__.dispose.call(this))},_initVariantInstances:function(){const t=this._onVariantFieldChange.bind(this,this.simpleProductVariants);this.view.el.reset(),this.$el.find("select").length&&this.$el.find("select").each(((t,e)=>{const i=o(e),n=this._extractName(i.data("name"));this.filteredOptions=this.filteredOptions.concat(i.find("option").get().filter((t=>(t.value=""!==t.value?n+"_"+t.value:"",!t.disabled&&""!==t.value)))),this._appendToHierarchy(n),this.setState(n,i.val())})),this._resolveVariantFieldsChain(this.simpleProductVariants),this.$el.on("change","select",t)},_prepareProductVariants:function(){this.simpleProductVariants=e.mapObject(this.options.simpleProductVariants,(function(t){return e.reduce(t.attributes,(function(t,e,i){return t[this._extractName(i)]=this._extractName(i)+"_"+this._normalizeBool(e),t}),{},this)}),this)},_appendToHierarchy:function(t){return e.isString(t)?-1!==this._hierarchy.indexOf(t)?s.showErrorInConsole("Item: "+t+" is already exist!"):(this._hierarchy.push(t),this._hierarchy):s.showErrorInConsole(t+" should be string")},_onVariantFieldChange:function(t,e){const i=o(e.target);this.setState(this._extractName(i.data("name")),i.val()),this._resolveVariantFieldsChain(t)},_resolveVariantFieldsChain:function(t){this._filtered=this._resolveHierarchy(t),this.filteredOptions.forEach((t=>{t.disabled=-1===e.indexOf(this._filtered,t.value)})),this._updateProduct(),this.updateFields()},_resolveHierarchy:function(t){let i=[];return this._hierarchy.forEach(((o,n)=>{const s=this._hierarchy[n-1];t=e.isUndefined(s)?t:e.where(t,this._prepareFoundKeyValue(s)),i=i.concat(e.uniq(e.pluck(t,o)))})),i},_prepareFoundKeyValue:function(t){const e={};return e[t]=this.getState(t),e},_updateProduct:function(){const t=this.simpleProductVariants,i=!Object.values(this.getState()).some((t=>!t));if(this.view.$el.data("validator")&&a.preloadMethods().then((()=>this.view.$el.valid())),i){for(const i in t)if(t.hasOwnProperty(i)&&e.isEqual(this.getState(),t[i])){const{attributes:t,...e}=this.options.simpleProductVariants[i];this.view.updateProductModel({id:i,...e});break}}else this.view.updateProductModel({id:0},!0)},_extractName:function(t){return(t=t.toLowerCase().split("__").slice(-1)[0]).replace(/[-_]/g,"")},_normalizeBool:function(t){return e.isBoolean(t)?+t:t}});return l}.call(e,i,e,t))||(t.exports=o)},"./bundles/oroproduct/js/app/components/quick-add-form-button-component.js":(t,e,i)=>{var o;void 0===(o=function(t){"use strict";const e=i("./bundles/oroui/js/extend/underscore.js"),o=i("./bundles/orotranslation/js/translator.js"),n=i("./bundles/oroui/js/extend/jquery.js"),s=i("./bundles/oroui/js/app/components/base/component.js"),r=i("./bundles/oroui/js/modal.js"),a=s.extend({options:{},$button:null,$form:null,messages:null,defaultMessages:{confirm_title:"oro.product.dialog.quick_add.confirm.title",confirm_content:"oro.product.dialog.quick_add.confirm.content",confirm_ok:"oro.product.dialog.quick_add.confirm.continue",confirm_cancel:"oro.product.dialog.quick_add.confirm.cancel"},confirmation:!1,confirmModalConstructor:r,confirmMessage:null,constructor:function t(e){t.__super__.constructor.call(this,e)},initialize:function(t){this.options=e.defaults(t||{},this.options),this.$button=this.options._sourceElement,this.$form=this.$button.closest("form"),this.confirmMessage=o(this.defaultMessages.confirm_content),t.confirmation&&(t.shopping_list_limit&&(this.confirmMessage=o(this.defaultMessages.confirm_content,{count:t.shopping_list_limit},t.shopping_list_limit)),this.confirmation=n.extend(!0,{},this.confirmation,t.confirmation)),this.messages=e.extend({},this.defaultMessages,this.messages),this.$button.on("click",this.submit.bind(this))},dispose:function(){this.disposed||(delete this.messages,a.__super__.dispose.call(this))},submit:function(t){t.preventDefault(),t.stopPropagation(),this.formHasErrors()||(e.each(this.options,((t,e)=>{"_sourceElement"!==e&&this.$form.find(t).val(this.$button.data(e))})),this.confirmation?this.getConfirmDialog(this.executeConfiguredAction.bind(this)).open():this.executeConfiguredAction())},formHasErrors:function(){return!this.$form.validate().valid()||this.$form.find(".product-autocomplete-error .validation-failed:visible").length},getConfirmDialog:function(t){const e=new this.confirmModalConstructor({title:o(this.messages.confirm_title),content:this.confirmMessage,okText:o(this.messages.confirm_ok),cancelText:o(this.messages.confirm_cancel)});return e.on("ok",t),e},executeConfiguredAction:function(){this.$form.submit()}});return a}.call(e,i,e,t))||(t.exports=o)},"./bundles/oroproduct/js/app/components/quick-add-row-extension-view-component.js":(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>s});var o=i("./bundles/oroui/js/app/components/view-component.js");const n=i.n(o)().extend({relatedSiblingComponents:{quickAddRowComponent:"quick-add-row-component"},constructor:function t(e){t.__super__.constructor.call(this,e)},_initializeView(t,e){const{relatedSiblingComponents:i,productsCollection:o,...s}=t;this.disposed||i.quickAddRowComponent.disposed?this._resolveDeferredInit():(s.model=i.quickAddRowComponent.view.model,n.__super__._initializeView.call(this,s,e))}}),s=n},"./bundles/oroproduct/js/app/components/redirect-component.js":(t,e,i)=>{var o;void 0===(o=function(t){"use strict";const e=i("./bundles/oroui/js/app/components/base/component.js"),o=i("./bundles/oroui/js/mediator.js");return e.extend({options:{targetUrl:null},constructor:function t(e){t.__super__.constructor.call(this,e)},initialize:function(t){const e=t.targetUrl||null;this.redirectTo(e)},redirectTo:function(t){t&&o.execute("redirectTo",{url:t},{redirect:!0})}})}.call(e,i,e,t))||(t.exports=o)},"./bundles/oroproduct/js/app/product-helper.js":(t,e,i)=>{var o;void 0===(o=function(t){"use strict";const e=i("./bundles/oroui/js/extend/underscore.js");return{trimWhiteSpace:function(t){return t.replace(/(\n|\r\n|^)\s+/g,"$1").replace(/\s+(\n|\r\n|$)/g,"$1")},trimAllWhiteSpace:function(t,i){return i=i||[",",";"],t=this.trimWhiteSpace(t),e.each(i,(function(e){t=t.replace(new RegExp(" *"+e+" *","g"),e)}),this),t=t.replace(/ +/g," ")}}}.call(e,i,e,t))||(t.exports=o)},"./bundles/oroproduct/js/app/views/base-product-variants-view.js":(t,e,i)=>{var o;void 0===(o=function(t){"use strict";const e=i("./bundles/oroui/js/app/views/base/view.js"),o=i("./bundles/orofrontend/js/app/elements-helper.js"),n=i("./bundles/oroui/js/app/views/loading-mask-view.js"),s=i("./bundles/oroui/js/extend/jquery.js"),r=i("./bundles/oroui/js/extend/underscore.js"),a=e.extend(r.extend({},o,{options:{showLoading:!0},elements:{variantForm:'[data-name="form__oro-product-product-variant-frontend-variant-field"]',variantFields:["variantForm",":input[data-name]"]},elementsEvents:{},events:{submit:"onSubmit"},constructor:function t(e){t.__super__.constructor.call(this,e)},initialize:function(t){this.options=s.extend(!0,{},this.options,r.pick(t,r.keys(this.options))),a.__super__.initialize.call(this,t),this.initModel(t),this.initializeElements(t)},initModel:function(t){t.productModel&&(this.model=t.productModel)},onSubmit:function(t){t.preventDefault()},updateProductModel:function(t={id:0},e=!1){r.isObject(t)&&(t.id=t.id?parseInt(t.id,10):0,this.model.set(t,{silent:e}))},showLoading:function(){if(!this.options.showLoading)return;let t=this.$el.closest('[data-role="layout-subtree-loading-container"]');t.length||(t=this.$el),this.subview("loadingMask",new n({container:t})),this.subview("loadingMask").show()},hideLoading:function(){this.options.showLoading&&this.removeSubview("loadingMask")},dispose:function(){this.disposeElements(),a.__super__.dispose.call(this)}}));return a}.call(e,i,e,t))||(t.exports=o)},"./bundles/oroproduct/js/app/views/product-quantity-editable-view.js":(t,e,i)=>{var o;void 0===(o=function(t){"use strict";const e=i("./bundles/oroui/js/app/views/base/view.js"),o=i("./bundles/oroui/js/tools/api-accessor.js"),n=i("./bundles/oroui/js/mediator.js"),s=i("./bundles/oroui/js/app/services/load-modules.js"),r=i("./bundles/oroui/js/extend/jquery.js"),a=i("./bundles/oroui/js/extend/underscore.js"),l=i("./bundles/orotranslation/js/translator.js"),d=i("./bundles/oroproduct/js/app/quantity-helper.js"),u=e.extend({options:{quantityFieldName:"quantity",unitFieldName:"unit",dataKey:null,enable:!1,save_api_accessor:{http_method:"PUT"},messages:{success:l("oro.form.inlineEditing.successMessage"),processingMessage:l("oro.form.inlineEditing.saving_progress"),preventWindowUnload:l("oro.form.inlineEditing.inline_edits")},successMessageOptions:{},elements:{saveButton:"",quantity:'[name$="[quantity]"]',unit:'[name$="[unit]"]'},validation:{showErrorsHandler:null,rules:{quantity:{NotBlank:{message:"oro.product.validation.quantity.required"},OpenRange:{min:0,minMessage:"oro.product.validation.quantity.greaterThanZero"}},unit:{NotBlank:{message:"oro.product.validation.unit.required"}}}}},constructor:function t(e){t.__super__.constructor.call(this,e)},initialize:function(t){(t=r.extend(!0,{},this.options,t)).enable&&(this._isSaving=!1,this.messages=t.messages,this.successMessageOptions=t.successMessageOptions,this.dataKey=t.dataKey,this.quantityFieldName=t.quantityFieldName,this.unitFieldName=t.unitFieldName,this.triggerData=t.triggerData||null,this.initElements(t),this.saveModelState(),this.saveApiAccessor=new o(t.save_api_accessor))},initElements:function(t){this.elements={},a.each(t.elements,(function(t,e){this.elements[e]=t?this.$el.find(t):null}),this),this.elements.unit.prop("disabled",!1),this.elements.unit.find(":selected").is(":disabled")||this.enableQuantity(),this.initValidator(t),this.deferredInit?this.deferredInit.done(this.initListeners.bind(this)):this.initListeners(),this._bindEvents(),this.disableOptions()},_bindEvents:function(){this.elements.unit.on("change"+this.eventNamespace(),(()=>{n.trigger("unitChanged")})),n.on("unitChanged",this.disableOptions,this)},disableOptions:function(){this.elements.unit.find("option").prop("disabled",!1),this.$el.siblings().each(((t,e)=>{const i=r(e).find('[name="unit"]').val();this.elements.unit.find('[value="'+i+'"]').prop("disabled",!0)})),this._updateQuantityPrecision()},enableAccept:function(){this.elements.saveButton.attr("disabled",!1).inputWidget("refresh")},enableQuantity:function(){this.elements.quantity.attr("disabled",!1).inputWidget("refresh")},initValidator:function(t){const e=this.$el.find("form"),i={};i[this.elements.quantity.attr("name")]=t.validation.rules.quantity,i[this.elements.unit.attr("name")]=t.validation.rules.unit;const o={rules:i};if(t.validation.showErrorsHandler){const i=[];i.push(s.fromObjectProp(t.validation,"showErrorsHandler").then((()=>{o.showErrors=t.validation.showErrorsHandler,this.updateValidation(e,o)}))),this.deferredInit=r.when(...i)}else this.updateValidation(e,o)},updateValidation:function(t,e){if(this.validator=t.validate(),a.isObject(e)){const t=this.validator.settings;r.extend(!0,t,e)}},initListeners:function(){let t=this.onViewChange;this.elements.saveButton&&(this.elements.saveButton.on("click",this.onViewChange.bind(this)),t=this.enableAccept),this.$el.on("change",this.elements.quantity,t.bind(this)),this.$el.on("change",this.elements.unit,t.bind(this))},saveModelState:function(){this.oldModelState=this.getValue()},restoreSavedState:function(){const t=this.oldModelState.quantity,e=d.formatQuantity(t);this.elements.quantity.val(e).change(),this.elements.unit.val(this.oldModelState.unit).change()},onViewChange:function(t){this.isValid()&&(this.triggerData&&(this.triggerData.event=t),this.enableQuantity(),this.saveChanges())},getValue:function(){const t=this.elements.quantity.val();return{quantity:d.getQuantityNumberOrDefaultValue(t),unit:this.elements.unit.val()}},isChanged:function(){const t=this.getValue();for(const e in t)if(t.hasOwnProperty(e)&&this.oldModelState[e]!==t[e])return!0;return!1},isValid:function(){return this.validator.form()},requireSave:function(){return!this._isSaving&&this.isChanged()&&this.isValid()},saveChanges:function(){if(!this.requireSave())return!1;this._isSaving=!0;const t=this.getValue(),e=a.clone(t);e.quantity=d.formatQuantity(e.quantity);let i={};this.dataKey?i[this.dataKey]=e:i=e,this.saveApiAccessor.send(t,i,{},{processingMessage:this.messages.processingMessage,preventWindowUnload:this.messages.preventWindowUnload,errorHandlerMessage:!1}).done(this.onSaveSuccess.bind(this)).fail(this.onSaveError.bind(this)).always((()=>{this.disposed||(this._isSaving=!1)}))},onSaveSuccess:function(t){this.saveModelState(),this.restoreSavedState();const e=a.extend({},this.triggerData||{},{value:this.getValue()});this.trigger("product:quantity-unit:update",e),n.trigger("product:quantity-unit:update",e),n.execute("showFlashMessage","success",this.messages.success,this.successMessageOptions)},onSaveError:function(t){const e="responseJSON"in t?t.responseJSON.code:t.status,i="responseJSON"in t?t.responseJSON.errors.errors:[];switch(this.restoreSavedState(),e){case 400:const e="responseJSON"in t?t.responseJSON.errors.children:[];for(const t in e)e.hasOwnProperty(t)&&e[t].errors&&i.push(...a.values(e[t].errors));i.length||i.push(l("oro.ui.unexpected_error"));break;case 403:i.push(l("oro.ui.forbidden_error"));break;default:i.push(l("oro.ui.unexpected_error"))}a.each(i,(function(t){n.execute("showFlashMessage","error",t)}))},dispose:function(){this.disposed||(n.off("unitChanged",this.disableOptions,this),this.elements.unit.off("change"+this.eventNamespace()),this.elements.quantity.off(this.eventNamespace()),u.__super__.dispose.call(this))},_updateQuantityPrecision:function(){const t=this.$el.data("unit-precisions")||{},e=this.elements.unit.val();if(e in t){const i=t[e];this.elements.quantity.data("precision",i).inputWidget("refresh")}}});return u}.call(e,i,e,t))||(t.exports=o)},"./bundles/oroproduct/js/app/views/product-unit-quantity-view.js":(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>l});var o=i("./bundles/oroui/js/extend/jquery.js"),n=i.n(o),s=i("./bundles/oroui/js/app/views/base/view.js"),r=i.n(s);const a=r().extend({optionNames:r().prototype.optionNames.concat(["unitSelector","quantitySelector"]),unitSelector:'[data-role="unit"]',quantitySelector:'[data-role="quantity"]',events(){const t={};return t[`change ${this.unitSelector}`]=this.onChange,t},constructor:function t(e){t.__super__.constructor.call(this,e)},onChange(t){this._actualizePrecision()},initialize(t){a.__super__.initialize.call(this,t),this._actualizePrecision()},_actualizePrecision(t=this.$(this.unitSelector)){const e=t.val(),i=t.data("unit-precisions");e in i&&n()(this.$(this.quantitySelector)).data("precision",i[e]).inputWidget("refresh")}}),l=a},"./bundles/oroproduct/js/app/views/quick-add-copy-paste-form-view.js":(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>m});var o=i("./bundles/oroui/js/extend/underscore.js"),n=i.n(o),s=i("./bundles/oroui/js/extend/jquery.js"),r=i.n(s),a=i("./bundles/oroui/js/mediator.js"),l=i.n(a),d=i("./bundles/oroui/js/app/views/base/view.js"),u=i.n(d),c=i("./bundles/oroui/js/tools/form-to-ajax-options.js"),h=i.n(c);const p=u().extend({field:"textarea",validator:null,disabled:!1,events:{"keyup textarea":"onFieldChange","focusout textarea":"onFieldChange",submit:"onSubmit"},constructor:function t(e){this.onFieldChange=n().debounce(this.onFieldChange.bind(this),50),t.__super__.constructor.call(this,e)},initialize(t){if(!t.productsCollection)throw new Error("Option `productsCollection` is require for QuickAddCopyPasteFormComponent");this.productsCollection=t.productsCollection,p.__super__.initialize.call(this,t),this.$field=this.$(this.field),this.validator=this.$el.validate(),this.validator.element(this.$field);const e=this.$field.data("item-parse-pattern").match(/^\/(.*?)\/(g?i?m?y?)$/);if(null===e||e.length<2)throw new Error("The field must must have a data attribute with valid RegExp string");this.itemParseRegExp=new RegExp(e[1],e[2])},dispose(){this.disposed&&(delete this.$field,delete this.validator,p.__super__.dispose.call(this))},onFieldChange(){this._toggleSubmitButton(this.disabled||this.$field.hasClass("error"))},_toggleSubmitButton:function(t){const e=t||this.isEmptyField();this.$("button:submit").attr("disabled",e)},onSubmit(t){if(t.preventDefault(),!this.validator.element(this.$field))return!1;this.submitForm({beforeSend:()=>{this.disableForm()}}).always((()=>this.enableForm()))},submitForm(t){const e=h()(this.$el,{...t,success:t=>{if(t.messages&&Object.entries(t.messages).forEach((([t,e])=>{e.forEach((e=>l().execute("showMessage",t,e)))})),t.collection){const{errors:e=[],items:i}=t.collection;if(e.forEach((t=>l().execute("showMessage","error",t.message))),i&&i.length&&!this.disposed){const t=i.map((t=>{const{index:e,...i}=t;return i}));this.productsCollection.addQuickAddRows(t,{ignoreIncorrectUnit:!1})}}}});return r().ajax(e)},disableForm(){this.disabled=!0,this.$field.attr("disabled",!0),this._toggleSubmitButton(!0)},enableForm(){this.disabled=!1,this.$field.removeAttr("disabled"),this._toggleSubmitButton(!1)},isEmptyField(){return 0===this.$field.val().length}}),m=p},"./bundles/oroproduct/js/app/views/quick-add-form-view.js":(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>m});var o=i("./bundles/oroui/js/extend/underscore.js"),n=i.n(o),s=i("./bundles/oroui/js/extend/jquery.js"),r=i.n(s),a=i("./bundles/oroui/js/mediator.js"),l=i.n(a),d=i("./bundles/oroui/js/app/views/base/view.js"),u=i.n(d),c=i("./bundles/oroui/js/messenger.js"),h=i.n(c);const p=u().extend({defaults:{componentSelector:'[name$="[component]"]',additionalSelector:'[name$="[additional]"]',componentButtonSelector:".component-button",componentPrefix:"quick-add"},productsCollection:null,events(){return{[`click ${this.componentButtonSelector}`]:"fillComponentData"}},listen(){return{[`${this.componentPrefix}:submit mediator`]:"_submit"}},constructor:function t(e){if(!e.productsCollection)throw new Error("Option `productsCollection` is require for QuickAddCopyPasteFormComponent");Object.assign(this,this.defaults,n().pick(e,"productsCollection",...Object.keys(this.defaults))),t.__super__.constructor.call(this,e)},delegateEvents(t){p.__super__.delegateEvents.call(this,t),this.$el.parent().on(`submit${this.eventNamespace()}`,this.onSubmit.bind(this))},undelegateEvents(){this.$el&&this.$el.parent().off(this.eventNamespace()),p.__super__.undelegateEvents.call(this)},fillComponentData(t){const e=r()(t.target);this._submit(e.data("component-name"),e.data("component-additional"))},_submit(t,e){this.$(this.componentSelector).val(t),this.$(this.additionalSelector).val(e),this.$el.submit()},onSubmit(t){t.preventDefault();const e=new FormData;this.$('fieldset[data-name="rest-fields"]').serializeArray().forEach((t=>e.append(t.name,t.value)));const i=this.productsCollection.map((t=>t.toBackendJSON())).filter((t=>""!==t.sku));e.append(`${this.$el.attr("name")}[products]`,JSON.stringify(i)),r().ajax({type:"POST",url:this.$el.attr("action"),contentType:!1,beforeSend(t,i){i.data=e},success:t=>{t.hasOwnProperty("redirectUrl")?l().execute("redirectTo",{url:t.redirectUrl},{redirect:!0}):(t.success&&l().trigger("shopping-list:refresh"),t.messages&&Object.entries(t.messages).forEach((([t,e])=>{e.forEach((e=>h().notificationMessage(t,e)))})),t?.collection?.errors&&Object.values(t.collection.errors).forEach((t=>h().notificationMessage("error",t.message))),t?.collection?.items&&this.productsCollection.addQuickAddRows(t.collection.items,{strategy:"replace"}))}})}}),m=p},"./bundles/oroproduct/js/app/views/quick-add-import-form-view.js":(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>h});var o=i("./bundles/oroui/js/extend/jquery.js"),n=i.n(o),s=i("./bundles/oroui/js/app/views/base/view.js"),r=i.n(s),a=i("./bundles/oroui/js/mediator.js"),l=i.n(a),d=i("./bundles/oroui/js/tools/form-to-ajax-options.js"),u=i.n(d);const c=r().extend({droppableContainer:"#container",events:{"change input:file":"onFileChange",submit:"onSubmit",dragenter:"onDragenter",dragover:"onDragover",dragleave:"onDragleave",drop:"onDrop"},constructor:function t(e){t.__super__.constructor.call(this,e)},initialize(t){if(!t.productsCollection)throw new Error("Option `productsCollection` is require for QuickAddCopyPasteFormComponent");const{droppableContainer:e,productsCollection:i}=t;Object.assign(this,{droppableContainer:e,productsCollection:i}),c.__super__.initialize.call(this,t),""!==this.$("input:file").val()&&this.onFileChange()},delegateEvents(){if(c.__super__.delegateEvents.call(this),this.droppableContainer){const t=Object.entries({dragenter:"onDragenter",dragover:"onDragover",dragleave:"onDragleave",drop:"onDrop"}).map((([t,e])=>[`${t}${this.eventNamespace()}`,this[e].bind(this)]));this.$el.closest(this.droppableContainer).on(Object.fromEntries(t))}return this},undelegateEvents(){return c.__super__.undelegateEvents.call(this),this.$el&&this.droppableContainer&&this.$el.closest(this.droppableContainer).off(this.eventNamespace()),this},onFileChange(){this.$el.submit()},onSubmit(t){if(t.isDefaultPrevented()||!this.find("input:file")[0].value)return!1;t.preventDefault(),this.submitForm().always((()=>this.resetFileInput()))},submitForm(t){const e=u()(this.$el,{...t,success:t=>{if(t.messages&&Object.entries(t.messages).forEach((([t,e])=>{e.forEach((e=>l().execute("showMessage",t,e)))})),t.collection){const{errors:e=[],items:i}=t.collection;if(e.forEach((t=>l().execute("showMessage","error",t.message))),i&&i.length&&!this.disposed){const t=i.map((t=>{const{index:e,...i}=t;return i}));this.productsCollection.addQuickAddRows(t,{ignoreIncorrectUnit:!1})}}}});return n().ajax(e)},resetFileInput(){this.find("input:file")[0].value=""},onDragenter(t){t.preventDefault(),t.stopPropagation(),this.highlight()},onDragover(t){t.preventDefault(),t.stopPropagation(),this.highlight()},onDragleave(t){t.preventDefault(),t.stopPropagation(),this.unhighlight()},onDrop(t){t.preventDefault(),t.stopPropagation(),this.unhighlight();const{dataTransfer:e}=t.originalEvent;if(e&&e.files.length){const t=new DataTransfer;t.items.add(e.files[0]),this.find("input:file")[0].files=t.files,this.$el.submit()}},highlight(){this.$el.addClass("highlight")},unhighlight(){this.$el.removeClass("highlight")}}),h=c},"./bundles/oroproduct/js/app/views/quick-add-row-view.js":(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>f});var o=i("./bundles/oroui/js/extend/underscore.js"),n=i.n(o),s=i("./bundles/oroui/js/app/views/base/view.js"),r=i.n(s),a=i("./bundles/oroproduct/js/app/units-util.js"),l=i.n(a),d=i("./bundles/oroproduct/js/app/quantity-helper.js"),u=i.n(d),c=i("./bundles/orotranslation/js/translator.js"),h=i.n(c),p=i("../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/oroform/templates/error-template.html"),m=i.n(p);const g=r().extend({optionNames:r().prototype.optionNames.concat(["defaultQuantity","unitErrorText"]),defaultQuantity:1,unitErrorText:"oro.product.validation.unit.invalid",elem:{remove:'[data-role="row-remove"]'},attrElem:{product:'[data-name="field__product"]',sku:'[data-name="field__sku"]',unit:'[data-name="field__unit"]',quantity:'[data-name="field__quantity"]'},listen(){return{"change:product_name model":()=>this.updateControlValue("product"),"change:sku model":()=>this.updateControlValue("sku","product"),"change:quantity model":()=>this.updateControlValue("quantity"),"change:product_units model":()=>this.updateUnitsSelector(),"removed model":"onModelRemoved","change model":"updateUI","change:errors model":"onErrorsChange"}},events(){return{keyup:"updateRemoveRowButton",change:"updateRemoveRowButton",[`keyup ${this.attrElem.quantity}`]:"onQuantityChange",[`change ${this.attrElem.unit}`]:"onUnitChange",[`change ${this.attrElem.product}`]:"onProductChange",[`productFound.autocomplete ${this.attrElem.product}`]:"onProductFound",[`productNotFound.autocomplete ${this.attrElem.product}`]:"onProductNotFound","validate-element":"onAttrElementValidate"}},constructor:function t(e){this.attrElem=Object.assign({},this.attrElem,e.selectors||{}),t.__super__.constructor.call(this,e)},initialize(t){const{productsCollection:e}=t;if(!e)throw new Error("Option `productsCollection` is require for QuickAddRowView");this.initModel(e,t),this.$(this.attrElem.unit).removeClass("disabled"),g.__super__.initialize.call(this,t)},dispose(){if(!this.disposed)return this.stopListening(this.model),this.model.collection&&this.model.collection.remove(this.model),this.model.dispose(),g.__super__.dispose.call(this)},initModel(t,e){const i=t.findLastIndex((t=>!t.has("index")));-1!==i?(this.model=t.models[i],this.model.set({index:this.getRowNumber()})):this.model=t.add({index:this.getRowNumber()}),this.updateUnitsSelector(!0),this._writeDOMValues(!0),this.updateRemoveRowButton(),this.showErrors()},getRowNumber(){return Number(this.$el.closest('[data-role="row"]').attr("data-content").match(/\[(\d+)]$/)[1])},getProductDisplayName(){const t=this.model.get("sku"),e=this.model.get("product_name");return e?`${t} - ${e}`:t},_readDOMValue(t){let e=this.$(this.attrElem[t]).val();return"quantity"===t&&(e=u().getQuantityNumberOrDefaultValue(e,null)),e},_readDOMValues(){const t=Object.keys(this.attrElem).map((t=>[t,this._readDOMValue(t)]));return Object.fromEntries(t)},_writeDOMValue(t,e){const i=this.$(this.attrElem[t]),o=this._readDOMValue(t);let n=null;switch(t){case"product":n=this.getProductDisplayName();break;case"quantity":n=u().formatQuantity(this.model.get(t),i.data("precision"),!0);break;default:n=this.model.get(t)}n!==o&&(i.val(n),e||i.change())},_writeDOMValues(t=!1){Object.keys(this.attrElem).forEach((e=>this._writeDOMValue(e,t)))},updateControlValue(...t){t.forEach((t=>this._writeDOMValue(t)))},onQuantityChange(){const t=this._readDOMValue("quantity");this.model.set({quantity:t,quantity_changed_manually:!0}),this.removeErrorForAttribute("quantity")},onUnitChange(){const t=this._readDOMValue("unit");if(this.updateQuantityPrecision(t),t!==this.model.get("unit")&&this.model.set({unit:t,unit_label:l().getUnitsLabel(this.model)[t]}),this.model.previous("unit")!==this.model.get("unit"))if(this.model.isValidUnit())this.removeErrorForAttribute("unit");else{const t=[...this.model.get("errors")],e=this.model.get("unit")||this.model.get("unit_label");t.push({propertyPath:"unit",message:h()(this.unitErrorText,{unit:n().escape(e),sku:n().escape(this.model.get("sku"))})}),this.model.set("errors",t)}},updateQuantityPrecision(t,e=!1){const i=this.model.get("product_units")[t],o=this.$(this.attrElem.quantity);o.data("precision")!==i&&(o.data("precision",i).inputWidget("refresh"),this._writeDOMValue("quantity",e))},onProductChange(){""===this._readDOMValue("product")&&""!==this.model.get("sku")&&this.model.clear()},onProductFound(t){const{id:e,sku:i,units:o,quantity:n,"defaultName.string":s,...r}=t.item,a={sku:i,product_name:s,quantity:n||this.model.get("quantity")||this.defaultQuantity,units_loaded:void 0!==o,product_units:{...o},...r};this.model.set(a),this.removeErrorForAttribute("product")},onProductNotFound(t){if(this.disposed)return;const{id:e,sku:i,...o}=t.item,n={sku:i,...o};this.model.clear(),this.model.set(n)},updateUnitsSelector(t=!1){l().updateSelect(this.model,this.$(this.attrElem.unit),t),t&&this.updateQuantityPrecision(this.model.get("unit"),t)},updateUI(){this.updateRemoveRowButton()},updateRemoveRowButton(){const{index:t,...e}=this.model.toBackendJSON(),i=Object.values(e).some((t=>Boolean(t)));this.$(this.elem.remove).toggleClass("hidden",!i)},showErrors(){const t=this.model.get("errors");if(!t||!t.length)return;const e=this.$el.parent().find(".fields-row-error");t.map((({propertyPath:t,message:i})=>{const o=this.$(this.attrElem[t]);o.addClass(`${o[0].tagName.toLowerCase()}--error`);const n=o.attr("id");e.append(`<span id="${n}-error" class="validation-failed">${m()({message:i})}</span>`)}))},onErrorsChange(){this.model.previous("errors").map((({propertyPath:t})=>{const e=this.$(this.attrElem[t]);e.removeClass(`${e[0].tagName.toLowerCase()}--error`);const i=e.attr("id");this.$el.parent().find(`#${i}-error`).remove()})),this.showErrors()},onAttrElementValidate(t){if(t.invalid)return;const[e]=Object.entries(this.attrElem).find((([,e])=>this.$(t.target).is(e)));e&&this.removeErrorForAttribute(e)},removeErrorForAttribute(t){const e=this.model.get("errors").filter((e=>e.propertyPath!==t));this.model.set("errors",e)},onModelRemoved(){this.$(this.elem.remove).click()}}),f=g},"./bundles/oroproduct/js/app/views/quick-order-view.js":(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>W});var o=i("./bundles/oroui/js/extend/jquery.js"),n=i.n(o),s=i("./bundles/oroui/js/extend/underscore.js"),r=i.n(s),a=i("./bundles/oroui/js/app/views/base/view.js"),l=i.n(a),d=i("./bundles/oroui/js/app/models/base/model.js"),u=i.n(d),c=i("./bundles/oroproduct/js/app/units-util.js"),h=i.n(c),p=i("./bundles/orotranslation/js/translator.js"),m=i.n(p);const g=u().extend({defaults:function(){return{index:void 0,sku:"",product_name:"",organization:"",quantity:null,unit:"",product_units:{},units_loaded:!1,quantity_changed_manually:!1,unit_label:null,unit_placeholder:m()("oro.product.frontend.quick_add.form.unit.default"),errors:[]}},constructor:function t(e,i){t.__super__.constructor.call(this,e,i)},initialize(t,e){this.listenTo(this,{"change:unit":this.onUnitChange,"change:product_units":this.onUnitsLoaded}),g.__super__.initialize.call(this,t,e)},get(t){return"function"==typeof this[`get_${t}`]?this[`get_${t}`]():g.__super__.get.call(this,t)},toBackendJSON(){const{sku:t,unit:e,quantity:i,organization:o,index:n}=this.getAttributes();return{sku:t,unit:e,quantity:i,organization:o,index:n}},onUnitsLoaded(){if(!this.get("unit")&&this.get("unit_label")){const t=this._resolveUnitCode(this.get("unit_label"));t&&this.set("unit",t)}},onUnitChange(){const t=this.get("unit")?h().getUnitLabel(this,this.get("unit")):null;this.set("unit_label",t)},_resolveUnitCode(t){"string"==typeof t&&(t=t.toLowerCase());const e=h().getUnitsLabel(this);return r().findKey(e,(e=>e.toLowerCase()===t))},clear(){const{index:t,...e}=r().result(this,"defaults");this.set(e)},isValidUnit(){return!this.get("units_loaded")||r().has(this.get("product_units"),this.get("unit"))}}),f=g;var _=i("./bundles/oroui/js/app/models/base/collection.js");const w=i.n(_)().extend({_index:null,comparator:"index",model:f,constructor:function t(e,i){this._index={__:[]},this.listenTo(this,{add:this.onModelAdd,remove:this.onModelRemove,change:this.onModelChange,reset:this.onReset,update:this.onUpdate}),t.__super__.constructor.call(this,e,i)},onModelAdd(t){const e=this._formatIndexKey(t.get("sku"),t.get("unit_label"),t.get("organization"));this._addToIndex(e,t)},onModelRemove(t){const e=this._formatIndexKey(t.get("sku"),t.get("unit_label"),t.get("organization"));this._removeFromIndex(e,t)},onModelChange(t){const e=this._formatIndexKey(t.previous("sku"),t.previous("unit_label"),t.previous("organization")),i=this._formatIndexKey(t.get("sku"),t.get("unit_label"),t.get("organization"));i!==e&&(this._removeFromIndex(e,t),this._addToIndex(i,t))},onReset(t,e){e.previousModels.forEach((t=>this.onModelRemove(t)))},onUpdate(t,e){const{removed:i=[]}=e.changes||{};i.forEach((t=>t.trigger("removed")))},_formatIndexKey:(t,e,i)=>`${(t||"").toUpperCase()}_${(e||"").toUpperCase()}_${(i||"").toUpperCase()}`,_addToIndex(t,e){this._index[t]||(this._index[t]=[]),this._index[t].push(e)},_removeFromIndex(t,e){if(this._index[t]){const i=this._index[t].indexOf(e);-1!==i&&this._index[t].splice(i,1),this._index[t].length||delete this._index[t]}},findCompatibleModel({sku:t,unit_label:e,organization:i}){const o=this._formatIndexKey(t,e,i),n=this._index[o];return n&&n.length?n[0]:null},getEmptyModel(){let t=(this._index.__||[])[0];return t||(t=this.push({})),t},addQuickAddRows(t,e={}){this._index.__&&this._index.__.sort(((t,e)=>t.get("index")-e.get("index"))),t.forEach((t=>{const{product_name:i="",units:o={},unit_label:n,quantity:s}=t,r=void 0!==t.units,a=t.sku.toUpperCase(),l=t.organization||"";let d;if(d=t.index?this.find((e=>e.get("index")===t.index)):this.findCompatibleModel(t),d){let n=t.quantity;"replace"!==e.strategy&&(n+=d.get("quantity")),d.set({product_name:i,organization:l,product_units:o,units_loaded:r,quantity:n})}else d=this.getEmptyModel(),d.set({sku:a,product_name:i,organization:l,product_units:o,units_loaded:r,unit_label:n,quantity:s});void 0!==d.get("errors")&&d.set("errors",[],{silent:!0});const{additional:u={},errors:c=[]}=t;d.set({errors:c,...u})})),this.trigger("quick-add-rows")}}),b=w;var v=i("./bundles/oroui/js/app/views/loading-mask-view.js"),z=i.n(v),y=i("./bundles/oroui/js/app/views/loading-bar-view.js"),j=i.n(y),x=i("./bundles/oroui/js/extend/backbone.js"),C=i.n(x);class k{constructor(t){this.todo=t,this.done=0}step(){this.done++;const t=this.progress();this.trigger("progress",t),100===t&&this.trigger("done")}progress(){const{done:t,todo:e}=this;return Math.round(t/e*100)}}Object.setPrototypeOf(k.prototype,C().Events);const T=k,S=l().extend({elem:{form:'[data-role="quick-order-add-container"] form',rowsCollection:".js-item-collection",rows:'[data-name="field__row"]',buttons:'[data-role="quick-order-add-buttons"]',clear:'[data-role="quick-order-add-clear"]',add:".add-list-item",productSkus:'[data-name="field__sku"]',collectionValidation:'[data-name="collection-validation"]'},events(){return{[`content:initialized ${this.elem.rowsCollection}`]:"onContentInitialized",[`click ${this.elem.clear}`]:"clearRows",[`change ${this.elem.productSkus}`]:"onProductSkuUpdate"}},options:{rowsCountThreshold:20,rowsBatchSize:250,selectors:{}},listen:{"rows-initialization-progress":"updateLoadingBarProgress","quick-add-rows collection":"onCollectionQuickAddRows","update collection":"checkRowsQuantity","rows-initialization-done":"updateTopButtons"},topButtons:null,constructor:function t(e){this.checkRowsQuantity=r().debounce(this.checkRowsQuantity.bind(this),25),this.onProductSkuUpdate=r().debounce(this.onProductSkuUpdate.bind(this),25),t.__super__.constructor.call(this,e)},initialize(t){this.options=n().extend(!0,{},this.options,t),this.elem=n().extend(this.elem,this.options.selectors||{}),this.collection=new b,this.createTopButtonCache(),this.initLayout({productsCollection:this.collection}),this.updateTopButtons(),this.rowsCountInitial=this.getRowsCount()},onCollectionQuickAddRows(){this.subview("loadingMask")||(this.subview("loadingMask",new(z())({container:this.$el})),this.subview("loadingBar",new(j())({container:this.$el,className:"loading-bar loading-bar__actual-progress"}))),this.$el.attr("data-ignore-tabbable",""),this.$el.addClass("quick-order__progress"),this.subview("loadingMask").show(),this.subview("loadingBar").showLoader(),this.once("rows-initialization-done",(()=>{this.subview("loadingBar").hideLoader((()=>{this.$el.removeAttr("data-ignore-tabbable"),this.$el.removeClass("quick-order__progress"),this.subview("loadingMask").hide(),this.$('[class$="--error"]:input:first').focus()}))})),this.checkRowsAvailability()},updateLoadingBarProgress(t){this.subview("loadingBar")&&this.subview("loadingBar").setProgress(t)},onContentInitialized(){this._initProgress&&this._initProgress.step(),this._initProgress||this.updateTopButtons()},updateTopButtons(){const t=this.getRowsCount();t>this.options.rowsCountThreshold?this.showTopButtons():t<=this.rowsCountInitial&&this.hideTopButtons()},createTopButtonCache(){const t=this.$(this.elem.buttons),e=r().uniqueId("clone");this.topButtons=t[0].outerHTML;const i=this.topButtons.matchAll(/\sid="([\w\-]+)"/gm);for(const[,t]of i)this.topButtons.replace(new RegExp(t,"g"),`${t}-${e}`)},showTopButtons(){let t=!1;"string"==typeof this.topButtons&&(this.topButtons=n()(this.topButtons),t=!0),this.$(this.elem.form).prepend(this.topButtons),this.$(this.elem.clear).removeClass("hidden"),t&&this.topButtons.trigger("content:changed")},hideTopButtons(){this.$(this.elem.clear).addClass("hidden"),this.topButtons&&this.topButtons instanceof n()&&"string"!=typeof this.topButtons&&this.topButtons.detach()},async clearRows(){const t=this.$(this.elem.rows).addClass("stale");await this.addRows(this.rowsCountInitial),this.listenToOnce(this,"rows-initialization-done",(async()=>{await window.sleep(0);const e=r().chunk(t,this.options.rowsBatchSize);await e.map((async t=>{await window.sleep(0);const e=n()(t);this.componentManager.eraseElement(e),e.remove()}))}))},checkRowsQuantity(t,e){!this.disposed&&this.collection.length<this.rowsCountInitial&&this.addRows(this.rowsCountInitial-this.collection.length)},checkRowsAvailability(){const t=this.collection.filter((t=>!t.has("index"))).length;t?this.addRows(t):this.trigger("rows-initialization-done")},async addRows(t){const e=this.options.rowsBatchSize,i=this._initProgress=new T(2*Math.ceil(t/e));for(this.listenTo(i,"progress",(t=>{this.trigger("rows-initialization-progress",t)})),this.listenToOnce(i,"done",(()=>{this.stopListening(i),delete this._initProgress,this.$(this.elem.rowsCollection).children().removeClass("hidden"),this.trigger("rows-initialization-done")}));t>0;){await window.sleep(0);const o=t>e?e:t;this.$(this.elem.add).trigger({type:"add-rows",count:o,htmlProcessor(t){const e=document.createElement("template");e.innerHTML=t;for(const t of e.content.children)t.classList.add("hidden");return e.content}}),i.step(),t-=o}},getRowsCount(){return this.$(this.elem.rows).filter(":not(.stale)").length},onProductSkuUpdate(){this.$(this.elem.collectionValidation).valid()}}),W=S},"./bundles/oroproduct/js/app/widget/product-popup-gallery-widget.js":(t,e,i)=>{var o;void 0===(o=function(t){"use strict";const e=i("./bundles/orofrontend/js/app/components/popup-gallery-widget.js"),o=i("./bundles/oroui/js/extend/jquery.js"),n=e.extend({constructor:function(t){n.__super__.constructor.call(this,t)},setDependentSlide:function(t){if(t){const e=o(t.currentTarget).data("gallery-image-index");this.$gallery.slick("slickGoTo",e,!0),this.useThumb()&&this.$thumbnails.slick("slickGoTo",e,!0)}n.__super__.setDependentSlide.call(this,t)}});return n}.call(e,i,e,t))||(t.exports=o)},"./bundles/oroproduct/js/widget/zoom-widget.js":(t,e,i)=>{var o;void 0===(o=function(t){"use strict";const e=i("./bundles/oroui/js/extend/jquery.js"),o=i("./bundles/oroui/js/extend/underscore.js"),n=i("./bundles/oroui/js/mediator.js");return i("../node_modules/@oroinc/elevatezoom/jquery.elevatezoom.js"),i("../node_modules/jquery-ui/ui/widget.js"),e.widget("oroproduct.zoomWidget",{options:{scrollZoom:!0,zoomWindowPosition:"zoom-container",minZoomWindowWidth:376,maxZoomWindowWidth:700,zoomWindowWidth:376,zoomWindowHeight:376,zoomWindowFadeIn:400,zoomLevel:.4,maxZoomLevel:.8,borderSize:1,borderColour:"#ebebeb",lensBorderColour:"#7d7d7d",lensColour:"#000",lensOpacity:.22},_zoomedImageLoadedState:!1,_zoomedImageLoadedQueue:[],_init:function(){this.options.onZoomedImageLoaded=this._onZoomedImageLoaded.bind(this),this.element.on("slider:activeImage",((t,e)=>{this.element.is(e)||this._updateZoomContainer(e)}));const t=this.element.data("slider:activeImage")||this.element.get(0);n.on("widget:doRefresh",this._reset,this),this._ensureLoadedZoomInit(t)},_ensureLoadedZoomInit:function(t){t.complete?this._zoomInit(t):e(t).one("load",this._zoomInit.bind(this,t))},_zoomInit:function(t){this.element=e(t),this._setZoomWindowSize(t),this.element.elevateZoom(this.options)},_updateZoomContainer:function(t){this._zoomedImageLoadedState?this._reInitZoomContainer(t):this._zoomedImageLoadedQueue.push((function(){this._reInitZoomContainer(t)}))},_reInitZoomContainer:function(t){this._removeZoomContainer(),this._zoomInit(t)},_reset:function(){this._updateZoomContainer(this.element.get(0))},_onZoomedImageLoaded:function(){this._zoomedImageLoadedState=!0;for(let t=0;t<this._zoomedImageLoadedQueue.length;t++)"function"==typeof this._zoomedImageLoadedQueue[t]&&this._zoomedImageLoadedQueue[t].call(this);this._zoomedImageLoadedQueue=[],this._resetImageProperty()},_resetImageProperty:function(){const t=this.element.data("elevateZoom");if(!t)return;const i=t.largeWidth,o=t.largeHeight,n=this.options.zoomWindowWidth,s=this.options.zoomWindowHeight;if(i<=n||o<=s){const n=3*i,s=3*o;t.largeWidth=n,t.largeHeight=s,e(".zoomWindowContainer").remove(),e(".zoomContainer").remove(),t.startZoom()}},_setZoomWindowSize:function(t){const i=e(t).width(),n=e(t).height(),s=this.options.zoomWindowHeight,r=this.options.maxZoomWindowWidth,a=this.options.minZoomWindowWidth;let l=s*i/n;l=l>r?r:l,l=l<a?a:l,this.options.zoomWindowWidth=l,o.isRTL()&&(this.options.zoomWindowOffetx=-l)},_removeZoomContainer:function(){const t=this.element.data("elevateZoom");t&&t.zoomContainer&&(t.zoomContainer.remove(),t.zoomWindow.parent().remove()),this.element.removeData("elevateZoom"),this.element.removeData("zoomImage"),this._unBindZoomEvents()},_unBindZoomEvents:function(){this.element.unbind("mousemove touchmove touchend mousewheel DOMMouseScroll MozMousePixelScroll")},_destroy:function(){this._removeZoomContainer(),e("."+this.element[0].className).off("slider:activeImage"),this._unBindZoomEvents()}}),"zoomWidget"}.call(e,i,e,t))||(t.exports=o)},"./bundles/orosale/js/app/components/quote-demand-component.js":(t,e,i)=>{var o;void 0===(o=function(t){"use strict";const e=i("./bundles/oroui/js/app/components/base/component.js"),o=i("./bundles/oroui/js/extend/underscore.js"),n=i("./bundles/oroui/js/extend/jquery.js"),s=i("./bundles/fosjsrouting/js/router.js"),r=e.extend({options:{subtotalsRoute:"oro_sale_quote_frontend_subtotals",quoteDemandId:null,subtotalSelector:null,formSelector:null,lineItemsSelector:null},$form:null,subtotalUrl:null,constructor:function t(e){t.__super__.constructor.call(this,e)},initialize:function(t){this.options=o.defaults(t||{},this.options),this.$el=t._sourceElement,this.subtotalUrl=s.generate(this.options.subtotalsRoute,{id:this.options.quoteDemandId}),this.$form=this.$el.find(this.options.formSelector||"form"),this.loadSubtotals=this.loadSubtotals.bind(this),n(this.options.lineItemsSelector).on("quote-items-changed",this.loadSubtotals)},dispose:function(){this.disposed||(n(this.options.lineItemsSelector).off("quote-items-changed",this.loadSubtotals),r.__super__.dispose.call(this))},loadSubtotals:function(){if(this.subtotalUrl){if(this.inProgress)return;this.inProgress=!0,this.$form.ajaxSubmit({url:this.subtotalUrl,data:{_widgetContainer:"ajax"},success:this.onSubtotalSuccess.bind(this)})}},onSubtotalSuccess:function(t){this.inProgress=!1;const e=n("<div/>").html(t);n(this.options.subtotalSelector).html(e.find(this.options.subtotalSelector).html())}});return r}.call(e,i,e,t))||(t.exports=o)},"./bundles/orosale/js/app/components/quote-product-to-order-component.js":(t,e,i)=>{var o;void 0===(o=function(t){"use strict";const e=i("./bundles/oroui/js/app/components/base/component.js"),o=i("./bundles/oroui/js/extend/underscore.js"),n=i("./bundles/oroui/js/extend/jquery.js"),s=i("./bundles/fosjsrouting/js/router.js"),r=i("./bundles/oroproduct/js/app/quantity-helper.js"),a=e.extend({options:{unitPrecisions:null,offerSelector:".radiobox",quantitySelector:".quantity",unitInputSelector:".unitInput",unitSelector:".unit",unitPriceSelector:".unitPrice",data_attributes:{unit:"unit",formatted_unit:"formatted-unit",quantity:"quantity",price:"price",allow_increment:"allow-increment"},matchOfferRoute:"oro_sale_quote_frontend_quote_product_match_offer",quoteProductId:null,quoteDemandId:null,calculatingMessage:"Calculating...",notAvailableMessage:"N/A"},$quantity:null,$unitInput:null,$unit:null,$unitPrice:null,$offerSelector:null,quantityChange:null,quantityEventsEnabled:!0,constructor:function t(e){t.__super__.constructor.call(this,e)},initialize:function(t){this.options=o.defaults(t||{},this.options),this.$el=t._sourceElement,this.blockQuantityUpdate=!1,this.$quantity=this.$el.find(this.options.quantitySelector),this.$unitInput=this.$el.find(this.options.unitInputSelector),this.$unit=this.$el.find(this.options.unitSelector),this.$unitPrice=this.$el.find(this.options.unitPriceSelector),this.$offerSelector=this.$el.find(this.options.offerSelector),this.$offerSelector.on("change",this.onOfferChange.bind(this)),this.addQuantityEvents(),this.updateQuantityInputPrecision(this.$offerSelector.filter(":checked"))},onOfferChange:function(t){const e=n(t.target);this.quantityEventsEnabled=!1,this.updateQuantityInputPrecision(e),this.blockQuantityUpdate||this.updateQuantityInputValue(e.data(this.options.data_attributes.quantity)),this.setValidAttribute(this.$quantity,!0),this.updateUnitValue(String(e.data(this.options.data_attributes.unit)),String(e.data(this.options.data_attributes.formatted_unit))),this.updateUnitPriceValue(String(e.data(this.options.data_attributes.price))),this.updateSubtotals(),this.quantityEventsEnabled=!0},onQuantityChange:function(){const t=this,e=this.$quantity.val();r.isQuantityLocalizedValueValid(e)&&n.ajax({url:s.generate(this.options.matchOfferRoute,{id:this.options.quoteProductId,demandId:this.options.quoteDemandId,unit:this.$unitInput.val(),qty:e}),type:"GET",success:function(e){o.isEmpty(e)?(t.updateUnitPriceValue(t.options.notAvailableMessage),t.setValidAttribute(t.$quantity,!1)):(t.updateUnitPriceValue(String(e.price)),t.updateSelector(e.id),t.setValidAttribute(t.$quantity,!0),t.updateSubtotals())}})},updateSubtotals:function(t){this.$el.trigger("quote-items-changed")},setValidAttribute:function(t,e){const i=n(t);i.data("valid",e),i.attr("data-valid",e.toString()),i.valid()},addQuantityEvents:function(){const t=Boolean(o.reduce(this.$offerSelector,(function(t,e){return t&!n(e).data(this.options.data_attributes.allow_increment)}),!0,this));this.$quantity.prop("readonly",t),this.$quantity.toggleClass("disabled",t),this.$quantity.on("change",(()=>{this.quantityEventsEnabled&&(this.quantityChange&&clearTimeout(this.quantityChange),this.onQuantityChange())})),this.$quantity.on("keyup",(()=>{r.isQuantityLocalizedValueValid(this.$quantity.val())?this.updateUnitPriceValue(this.options.calculatingMessage):this.updateUnitPriceValue(this.options.notAvailableMessage),this.quantityEventsEnabled&&(this.quantityChange&&clearTimeout(this.quantityChange),this.setValidAttribute(this.$quantity,!0),this.quantityChange=setTimeout(this.onQuantityChange.bind(this),1500))}))},updateQuantityInputValue:function(t){this.$quantity.val(r.formatQuantity(t)),this.$quantity.data(this.options.data_attributes.quantity,t)},updateUnitValue:function(t,e){this.$unitInput.val(t),this.$unit.text(e)},updateUnitPriceValue:function(t){this.$unitPrice.text(t)},updateQuantityInputPrecision:function(t){const e=t.data(this.options.data_attributes.unit);e in this.options.unitPrecisions&&this.$quantity.data("precision",this.options.unitPrecisions[e]).inputWidget("refresh")},updateSelector:function(t){this.blockQuantityUpdate=!0;const e=n(this.options.offerSelector+'[data-value="'+t+'"]');e.prop("checked","checked"),e.trigger("change"),this.blockQuantityUpdate=!1},dispose:function(){this.disposed||(this.options._sourceElement.off(),a.__super__.dispose.call(this))}});return a}.call(e,i,e,t))||(t.exports=o)},"./bundles/orosale/js/app/views/product-add-to-rfq-view.js":(t,e,i)=>{var o;void 0===(o=function(t){"use strict";const e=i("./bundles/oroui/js/app/views/base/view.js"),o=i("./bundles/orofrontend/js/app/elements-helper.js"),n=i("./bundles/oroui/js/extend/jquery.js"),s=i("./bundles/fosjsrouting/js/router.js"),r=i("./bundles/oroui/js/mediator.js"),a=i("./bundles/oroui/js/extend/underscore.js"),l=e.extend(a.extend({},o,{events:{click:"onClick"},dropdownWidget:null,constructor:function t(e){t.__super__.constructor.call(this,e)},initialize:function(t){l.__super__.initialize.call(this,t),this.deferredInitializeCheck(t,["productModel","dropdownWidget"])},deferredInitialize:function(t){this.dropdownWidget=t.dropdownWidget,t.productModel&&(this.model=t.productModel)},dispose:function(){delete this.dropdownWidget,l.__super__.dispose.call(this)},onClick:function(t){const e=n(t.currentTarget),i={};if(!this.dropdownWidget.validateForm())return;i[this.model.get("id")]=[{quantity:this.model.get("quantity"),unit:this.model.get("unit")}];const o=s.generate(e.data("url"),{product_items:i});r.execute("showLoading"),r.execute("redirectTo",{url:o},{redirect:!0})}}));return l}.call(e,i,e,t))||(t.exports=o)},"./bundles/oroshoppinglist/js/app/components/shopping-list-create-component.js":(t,e,i)=>{var o,n;o=[i("./bundles/oroui/js/widget/widget-manager.js"),i("./bundles/oroui/js/messenger.js"),i("./bundles/oroui/js/mediator.js"),i("./bundles/orotranslation/js/translator.js"),i("./bundles/oroui/js/extend/underscore.js")],void 0===(n=function(t,e,i,o,n){"use strict";return function(s){s.savedId&&t.getWidgetInstance(s._wid,(function(t){n.isEmpty(s.messages)&&(s.messages=[o("oro_frontend.widget_form_component.save_flash_success")]),s.messages.forEach(((t,i)=>{const o=0===i?{namespace:"shopping_list"}:{};e.notificationFlashMessage("success",t,o)})),i.trigger("widget_success:"+t.getAlias(),s),i.trigger("widget_success:"+t.getWid(),s),t.trigger("formSave",{savedId:s.savedId,shoppingListCreateEnabled:s.shoppingListCreateEnabled}),t.disposed||t.remove()}))}}.apply(e,o))||(t.exports=n)},"./bundles/oroshoppinglist/js/app/components/shoppinglist-create-order-button-component.js":(t,e,i)=>{var o;void 0===(o=function(t){"use strict";const e=i("./bundles/oroworkflow/js/app/components/button-component.js"),o=i("./bundles/oroui/js/standart-confirmation.js"),n=i("./bundles/orotranslation/js/translator.js"),s=i("./bundles/oroui/js/mediator.js"),r=e.extend({hasEmptyMatrix:null,shoppingListCollection:null,messages:{content:n("oro.shoppinglist.create_order_confirmation.message"),title:n("oro.shoppinglist.create_order_confirmation.title"),okText:n("oro.shoppinglist.create_order_confirmation.accept_button_title"),cancelText:n("oro.shoppinglist.create_order_confirmation.cancel_button_title")},constructor:function t(e){t.__super__.constructor.call(this,e)},initialize:function(t){return this.hasEmptyMatrix=t.hasEmptyMatrix,r.__super__.initialize.call(this,t)},_onClickButtonExecutor:function(t){this.showConfirmation(r.__super__._onClickButtonExecutor.bind(this,t))},_onClickButtonRedirect:function(t){this.showConfirmation(r.__super__._onClickButtonRedirect.bind(this,t))},showConfirmation:function(t){this.isConfirmationNeeded()?t():new o(this.messages).off("ok").on("ok").open(t)},isConfirmationNeeded:function(){let t;try{t=!s.execute("shoppinglist:hasEmptyMatrix")}catch(e){t=!this.hasEmptyMatrix}return t}});return r}.call(e,i,e,t))||(t.exports=o)},"./bundles/oroshoppinglist/js/app/views/matrix-grid-add-to-shopping-list-view.js":(t,e,i)=>{var o;void 0===(o=function(t){"use strict";const e=i("./bundles/oroshoppinglist/js/app/views/product-add-to-shopping-list-view.js"),o=i("./bundles/oroui/js/extend/underscore.js"),n=e.extend({constructor:function t(e){t.__super__.constructor.call(this,e)},_saveLineItem:function(t,e,i){return this._addLineItem(t,e,i)},_addLineItem:function(t,e,i){return n.__super__._addLineItem.call(this,"oro_shopping_list_frontend_matrix_grid_order",e,i)},validate:function(t,e,i,s){if(!n.__super__.validate.call(this,e,i,s))return!1;if("update"===t||"remove"===t||this.options.emptyMatrixAllowed)return!0;if(o.every(this.$form.find('[data-name="field__quantity"]:enabled'),(function(t){return o.isEmpty(t.value)}))){const t=this.$form.validate();return t.errorsFor(this.$form[0]).remove(),t.showLabel(this.$form[0],o.__("oro.product.validation.configurable.required")),!1}return!0}});return n}.call(e,i,e,t))||(t.exports=o)},"./bundles/oroshoppinglist/js/app/views/matrix-grid-popup-button-view.js":(t,e,i)=>{var o;void 0===(o=function(t){"use strict";const e=i("./bundles/oroshoppinglist/js/app/views/product-add-to-shopping-list-view.js"),o=i("./bundles/oroshoppinglist/js/app/widget/matrix-grid-order-widget.js");return e.extend({constructor:function t(e){t.__super__.constructor.call(this,e)},_openMatrixGridPopup:function(t){this.subview("popup",new o({model:this.model,shoppingListId:t})),this.subview("popup").render()},_saveLineItem:function(t,e,i){this._openMatrixGridPopup(e.shoppingListId)},_addLineItem:function(t,e,i){this._openMatrixGridPopup(e.shoppingListId)}})}.call(e,i,e,t))||(t.exports=o)},"./bundles/oroshoppinglist/js/app/views/product-kit-add-to-shopping-list-view.js":(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>g});var o=i("./bundles/oroshoppinglist/js/app/views/product-add-to-shopping-list-view.js"),n=i.n(o),s=i("./bundles/fosjsrouting/js/router.js"),r=i.n(s),a=i("./bundles/oroui/js/mediator.js"),l=i.n(a),d=i("./bundles/oroui/js/extend/jquery.js"),u=i.n(d),c=i("./bundles/oroui/js/extend/underscore.js"),h=i.n(c);const p=i("./bundles/orotranslation/js/translator.js"),m=n().extend({constructor:function t(e){t.__super__.constructor.call(this,e)},onClick:function(t){t.preventDefault(),this.validateForm()&&m.__super__.onClick.call(this,t)},validateForm:function(){const t=this.$form.validate().form(),e=u()(this.$form.data("extra-form-selector")).validate().form();return t&&e},addWidgetUrlOptions(){return this.model&&this.model.get("_widget_data")||{}},_collectAllButtons:function(){if(this.options.shoppingListAddToEnabled)return m.__super__._collectAllButtons.call(this);let t=[];if(this.modelAttr.shopping_lists.forEach((function(e){this._addShoppingListButtons(t,e)}),this),this.options.shoppingListCreateEnabled){let e=u()(this.options.createNewButtonTemplate({id:null,label:""}));e=this.updateLabel(e,null),t.push(e)}if(1===t.length){const e=this.dropdownWidget.options.decoreClass||"";t=h().first(t).find(this.options.buttonsSelector).addClass(e)}return t},_addProductToShoppingList(t,e,i){e={...e,...this.addWidgetUrlOptions()},m.__super__._addProductToShoppingList.call(this,t,e,i)},_removeLineItem:function(t,e,i){const o=this._removeProductFromShoppingList(t,{id:e.productId,onlyCurrent:1,...this.addWidgetUrlOptions()},i),n={namespace:"shopping_list"},s=p(this.options.messages.remove.success,{name:this.model.get("name")});o.done((t=>{l().execute("showFlashMessage","success",s,n)}))},_saveLineItem:function(t,e,i){this.model&&!this.model.get("line_item_form_enable")||(l().execute("showLoading"),l().trigger("shopping-list:line-items:before-response",this.model),u().ajax({type:"POST",url:r().generate("oro_shopping_list_frontend_product_kit_line_item_update",{id:e.productId,...this.addWidgetUrlOptions()}),data:i,success:t=>{l().trigger("shopping-list:line-items:update-response",this.model,t)},error:t=>{l().trigger("shopping-list:line-items:error-response",this.model,t)},complete:()=>{l().execute("hideLoading")}}))},_onQuantityEnter(){}}),g=m},"./bundles/oroshoppinglist/js/app/views/product-kit-configure-add-to-shopping-list-view.js":(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>g});var o=i("./bundles/oroui/js/app/views/base/view.js"),n=i.n(o),s=i("./bundles/orofrontend/js/app/elements-helper.js"),r=i.n(s),a=i("./bundles/oroshoppinglist/js/app/widget/product-kit-line-item-widget.js"),l=i("./bundles/fosjsrouting/js/router.js"),d=i.n(l),u=i("./bundles/oroui/js/extend/jquery.js"),c=i.n(u),h=i("./bundles/oroui/js/extend/underscore.js"),p=i.n(h);const m=n().extend(p().extend({},r(),{events:{click:"onClick"},constructor:function t(e){t.__super__.constructor.call(this,e)},initialize:function(t){m.__super__.initialize.call(this,t),this.deferredInitializeCheck(t,["productModel"])},deferredInitialize:function(t){this.options=c().extend(!0,{},this.options,p().pick(t,p().keys(this.options))),this.initModel(t)},initModel:function(t){const e=p().each(t.modelAttr,((e,i)=>{t.modelAttr[i]="undefined"===e?void 0:e}))||{};this.modelAttr=c().extend(!0,{},this.modelAttr,e),t.productModel&&(this.model=t.productModel),this.model&&p().each(this.modelAttr,((t,i)=>{this.model.has(i)&&void 0===e[i]||this.model.set(i,t)}),this)},onClick:function(t){t.preventDefault();const e=c()(t.currentTarget);if(e.data("disabled"))return!1;const i=e.data("url"),o={productId:this.model.get("id")};this.subview("popup",new a.default({url:d().generate(i,o),model:this.model})),this.subview("popup").render()}})),g=m},"./bundles/oroshoppinglist/js/app/views/product-quick-add-to-shopping-list-view.js":(t,e,i)=>{var o;void 0===(o=function(t){"use strict";const e=i("./bundles/oroshoppinglist/js/app/views/product-add-to-shopping-list-view.js"),o=i("./bundles/oroui/js/mediator.js"),n=e.extend({constructor:function t(e){t.__super__.constructor.call(this,e)},initialize:function(t){n.__super__.initialize.call(this,t),this.options.quickAddComponentPrefix=t.quickAddComponentPrefix},_addProductToShoppingList:function(t,e,i){o.trigger(this.options.quickAddComponentPrefix+":submit","oro_shopping_list_quick_add_processor",e.shoppingListId)},onClick:function(t){t.preventDefault(),this.formHasErrors()||n.__super__.onClick.call(this,t)},formHasErrors:function(){return!this.$form.validate().valid()||this.$form.find(".product-autocomplete-error .validation-failed:visible").length}});return n}.call(e,i,e,t))||(t.exports=o)}}]);