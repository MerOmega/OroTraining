(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[554],{"./bundles/orofixedproductshipping/js/app/components/product-shipping-cost-update-widget-component.js":(t,e,o)=>{var s;void 0===(s=function(t){"use strict";const e=o("./bundles/oroui/js/extend/jquery.js"),s=o("./bundles/oroui/js/extend/underscore.js"),i=o("./bundles/fosjsrouting/js/router.js"),n=o("./bundles/oroui/js/widget/widget-manager.js"),r=o("./bundles/oroui/js/app/components/base/component.js").extend({options:{widgetAlias:null,unitFormId:null,precisionFormId:null},constructor:function t(e){t.__super__.constructor.call(this,e)},initialize:function(t){this.options=s.defaults(t||{},this.options),this.options._sourceElement.closest("form").on("change",this.options.unitFormId,this.reloadShippingCostWidget.bind(this))},dispose:function(){this.disposed||(this.options._sourceElement.off("change"),r.__super__.dispose.call(this))},reloadShippingCostWidget:function(t){const o=e(this.options.unitFormId).val(),s=e(this.options.precisionFormId).val();n.getWidgetInstanceByAlias(this.options.widgetAlias,(function(t){t.setUrl(i.generate("oro_fixed_product_shipping_widget_shipping_cost_update",{unit:o,precision:s})),t.render()}))}});return r}.call(e,o,e,t))||(t.exports=s)},"./bundles/orofixedproductshipping/js/app/views/fixed-product-shipping-options-view.js":(t,e,o)=>{var s;void 0===(s=function(t){"use strict";const e=o("./bundles/oroui/js/extend/underscore.js"),s=o("./bundles/oroui/js/extend/jquery.js"),i=o("./bundles/oroui/js/app/views/base/view.js"),n=o("./bundles/oroui/js/mediator.js"),r=i.extend({options:{surchargeTypeSelector:"select.fixed-product-surcharge-type",updateFlag:null},$form:null,listen:{"page:afterChange mediator":"_onPageAfterChange"},constructor:function t(e){t.__super__.constructor.call(this,e)},initialize:function(t){this.options=e.defaults(t||{},this.options),this.$form=s(this.el).closest("form"),this.$form.on("change",this.options.surchargeTypeSelector,this.updateFixedProductOptions.bind(this))},updateFixedProductOptions:function(){const t=this.$form.serializeArray();t.push({name:this.options.updateFlag,value:!0}),n.execute("submitPage",{url:this.$form.attr("action"),type:this.$form.attr("method"),data:s.param(t)})},_onPageAfterChange:function(){this.$form.find(this.options.surchargeTypeSelector).focus()},dispose:function(){this.disposed||(this.$form.off(this.eventNamespace()),delete this.options,delete this.$form,r.__super__.dispose.call(this))}});return r}.call(e,o,e,t))||(t.exports=s)},"./bundles/oromicrosoftintegration/js/app/components/enable-checkbox-component.js":(t,e,o)=>{var s;void 0===(s=function(t){"use strict";const e=o("./bundles/oroui/js/extend/jquery.js"),s=o("./bundles/oroui/js/app/components/base/component.js").extend({constructor:function t(e){t.__super__.constructor.call(this,e)},initialize:function(t){e('form[name="microsoft_settings"] :input[id*="microsoft_settings_oro_microsoft_integration"]').on("change.microsoft_enable_oauth",(function(){let o=!1;const s=t._sourceElement.closest('form[name="microsoft_settings"]');(0===e.trim(s.find('input[id*="client_id"]').val()).length||0===e.trim(s.find('input[id*="client_secret"]').val()).length||0===e.trim(s.find('input[id*="tenant"]').val()).length)&&(o=!0),t._sourceElement.find("input[type=checkbox]:not(:checked)").prop("disabled",o)}))},dispose:function(){return e('form[name="microsoft_settings"] :input[id*="microsoft_settings_oro_microsoft_integration"]').off("change.microsoft_enable_oauth"),s.__super__.dispose.call(this)}});return s}.call(e,o,e,t))||(t.exports=s)},"./bundles/oroproduct/js/app/components/product-kit-items-component.js":(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>j});var s=o("./bundles/oroui/js/extend/underscore.js"),i=o("./bundles/orotranslation/js/translator.js"),n=o.n(i),r=o("./bundles/fosjsrouting/js/router.js"),a=o.n(r),d=o("./bundles/oroui/js/app/components/base/component.js"),l=o.n(d),c=o("./bundles/oroui/js/app/views/base/view.js"),u=o.n(c);const p=u().extend({optionNames:u().prototype.optionNames.concat(["originField","collection"]),originField:void 0,collection:null,events:{"click .product-kit-item__add-product-button":"onAddProductButtonClick"},listen:{"sync collection":"handleCollectionChanges","remove collection":"handleCollectionChanges","change:sortOrder collection":"handleCollectionChanges"},constructor:function t(...e){t.__super__.constructor.apply(this,e)},initialize(t){p.__super__.initialize.call(this,t),this.updateValueToShow(),this.toggleButtonAvailability()},onAddProductButtonClick(){this.trigger("add-product-button-click")},handleCollectionChanges(){this.toggleButtonAvailability(),this.updateValueToShow(),this.updateOriginField()},toggleButtonAvailability(){const{length:t,state:e}=this.collection;this.$(".product-kit-item__add-product-button").attr("disabled",t>=e.pageSize)},updateOriginField(){const t=this.collection.map((t=>({productId:String(t.get("id")),sortOrder:Number(t.get("sortOrder"))})));this.$(this.originField).val(JSON.stringify(t)).trigger("change")},updateValueToShow(){const{collection:t}=this,e=t.length?t.map((t=>t.get("sku"))).join(", "):n()("N/A");this.$(this.originField).data("formatted-value",e).trigger("change")}}),h=p;var g=o("./bundles/orowindows/js/widget/dialog-widget.js"),m=o.n(g),_=o("./bundles/oroui/js/delete-confirmation.js"),b=o.n(_);const f=l().extend({relatedSiblingComponents:{gridComponent:"related-products-grid-name"},listen(){return{[`kit-item-products-remove:${this.gridComponent.grid.getGridScope()} mediator`]:"removeProductKitItem"}},constructor:function t(e){t.__super__.constructor.call(this,e)},initialize(t){if(f.__super__.initialize.call(this,t),!this.gridComponent){const e=t.relatedSiblingComponents.__initial__.gridComponent;throw new Error(`GridComponent with name "${e}" is not found, it is required for ProductKitItems functionality.`)}Object.assign(this,{addProductDialogOptions:{route:"oro_datagrid_widget",routeParams:{gridName:"kit-item-products-add-grid"},...t.addProductDialogOptions}}),this.initView(t)},delegateListeners(){f.__super__.delegateListeners.call(this),this.listenTo(this.view,{"add-product-button-click":this.addProductKitItem})},initView({_sourceElement:t,viewOptions:e}){this.view=new h({...e,el:t,collection:this.gridComponent.collection})},addProductKitItem(){const{collection:t}=this.gridComponent,{route:e,routeParams:o}=this.addProductDialogOptions,i=new(m())({autoRender:!0,title:n()("oro.product.product_kit.dialog.select.title"),method:"POST",url:a().generate(e,{...o,params:{selectedProductsIds:t.map((t=>t.get("id")))}}),dialogOptions:{modal:!0}});this.listenToOnce(i,{"grid-row-select":({model:t})=>{const{collection:e}=this.gridComponent,o=e.map((t=>String(t.get("id"))));e.assignUrlParams({selectedProductsIds:(0,s.uniq)(o.concat(t.get("id")))}),e.fetch({reset:!0}),i.remove()},dispose:()=>this.stopListening(i)})},removeProductKitItem(t){const e=new(b())({title:n()("oro.product.product_kit.confirmation.title"),content:n()("oro.product.product_kit.confirmation.desc")});e.on("ok",(()=>{const{collection:e}=this.gridComponent,o=e.map((t=>String(t.get("id"))));e.urlParams.selectedProductsIds=(0,s.difference)(o,t.map(String));const i=t.map((t=>e.get(t)));e.remove(i,{alreadySynced:!0})})),e.open()}}),j=f},"./bundles/oroproduct/js/app/views/product-kit/product-kit-sorting-view.js":(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>d});var s=o("./bundles/oroui/js/app/views/base/view.js"),i=o.n(s),n=o("./bundles/orotranslation/js/translator.js"),r=o.n(n);o("./bundles/oroui/js/extend/jquery-ui/widgets/sortable.js");const a=i().extend({autoRender:!0,sortOrderFieldSelector:'[name$="[sortOrder]"]',constructor:function t(...e){t.__super__.constructor.apply(this,e)},render(){this.$el.sortable({tolerance:"pointer",delay:100,containment:"parent",handle:'[data-name="sortable-handle"]',placeholder:{element:function(t){const e=document.createElement("div");return e.classList.add("product-kit-item__placeholder"),e.innerText=r()("oro.product.product_kit.drop_placeholder_label"),e.style.height=t.height(),e},update:function({currentItem:t},e){e.css("height",t.height())}},classes:{"ui-sortable-helper":"product-kit-item__sortable-helper"},beforePick:this.beforePick.bind(this),stop:this.onStop.bind(this)})},beforePick({currentTarget:t},{item:e}){e.addClass("product-kit-item__sortable-helper")},onStop(){this.$(this.sortOrderFieldSelector).each(((t,e)=>e.value=t+1))},dispose(){this.disposed||(this.$el.sortable("destroy"),a.__super__.dispose.call(this))}}),d=a},"./bundles/oroproduct/js/app/views/product-kit/product-kit-view.js":(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>p});var s=o("./bundles/orotranslation/js/translator.js"),i=o.n(s),n=o("./bundles/oroui/js/mediator.js"),r=o.n(n),a=o("./bundles/oroui/js/app/views/base/view.js"),d=o.n(a),l=o("./bundles/orolocale/js/formatter/datetime.js"),c=o.n(l);const u=d().extend({autoRender:!0,optionNames:d().prototype.optionNames.concat(["fieldsNamespace","fields","kitItemId","sortOrderFieldSelector","submitted"]),fields:null,kitItemId:null,sortOrderFieldSelector:null,events:{"change input[name], select":"onChangeInputs","show.bs.collapse":"onShow","hide.bs.collapse":"onHide"},constructor:function t(...e){t.__super__.constructor.apply(this,e)},render(){u.__super__.render.call(this),this.updateFields(),this.$el.data("rendered")||this.kitItemId||this.submitted||this.$(this.sortOrderFieldSelector).val(this.getMaxSortOrder()+1),this.$el.attr("data-rendered",!0)},getMaxSortOrder(){return Math.max(0,...this.$el.closest('[data-role="collection-container"]').find(this.sortOrderFieldSelector).not(this.$(this.sortOrderFieldSelector)).toArray().map((t=>t.value?parseFloat(t.value):0)))},validate(){const t=this.$el.closest("form");t.data("validator")&&t.validate()},onShow({target:t}){this.checkValidation(),"product-kit-form"===t.getAttribute("data-role")&&(this.$el.addClass("show"),r().trigger("layout:reposition"),this.$('[data-type="secondary"]').collapse("hide"))},onHide({target:t}){this.checkValidation(),"product-kit-form"===t.getAttribute("data-role")&&(this.$el.removeClass("show"),this.$('[data-type="secondary"]').collapse("show"))},updateFields(){Object.values(this.fields).forEach((({key:t,id:e})=>{const o=this.el.querySelector(`#${e}`);this.$(`[data-model="${t}"]`).text(this.getValueFromField(o))}))},onChangeInputs({target:t}){const{name:e}=t,{key:o}=this.getField(e);o&&this.$(t).valid()&&this.$(`[data-model="${o}"]`).text(this.getValueFromField(t))},checkValidation(){const t=this.$(".error");this.$el.toggleClass("has-error",!!t.length)},getField(t){return Object.values(this.fields).find((({name:e})=>t===e))||{}},getValueFromField(t){return this.$(t).data("formatted-value")?this.$(t).data("formatted-value"):"checkbox"===t.type?t.checked?i()("Yes"):i()("No"):t.value?c().isBackendDateTimeValid(t.value)?c().formatDateTime(t.value):c().isBackendDateValid(t.value)||"date"===t.getAttribute("type")?c().formatDate(t.value):t.value:i()("N/A")}}),p=u},"./bundles/oroproduct/js/app/views/product-kit/product-kit-widget-view.js":(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>c});var s=o("./bundles/fosjsrouting/js/router.js"),i=o.n(s),n=o("./bundles/oroui/js/app/views/base/view.js"),r=o.n(n),a=o("./bundles/oroui/js/widget/widget-manager.js"),d=o.n(a);const l=r().extend({autoRender:!0,optionNames:r().prototype.optionNames.concat(["widgetAlias","kitItemId","targetId"]),widgetAlias:null,kitItemId:null,targetId:null,loaded:!1,events:{'click [data-toggle="collapse"]':"onClick","show.bs.collapse":"onShown","hide.bs.collapse":"onHidden"},constructor:function t(...e){t.__super__.constructor.apply(this,e)},render(){this.$('[data-role="kit-item-info-collapsed"]').attr("id",this.targetId),l.__super__.render.call(this)},onClick(t){this.loaded||(t.preventDefault(),t.stopPropagation(),this.updateWidget())},onShown({target:t}){"kit-item-info-expanded"===t.getAttribute("data-role")&&this.$('[data-role="kit-item-info-collapsed"]').collapse("hide")},onHidden({target:t}){"kit-item-info-expanded"===t.getAttribute("data-role")&&this.$('[data-role="kit-item-info-collapsed"]').collapse("show")},updateWidget(){d().getWidgetInstanceByAlias(this.widgetAlias,(t=>{t.loading&&t.loading.abort(),this.$('[data-toggle="collapse"]').prop("disabled",!0),t.setUrl(i().generate(t.options.route,{id:this.kitItemId,state:"both"})),t.render(),t.once("renderComplete",(()=>{this.$('[data-role="kit-item-info-expanded"]').attr("id",this.targetId).collapse("show"),this.$('[data-toggle="collapse"]').prop("disabled",!1).attr("aria-expanded",!0).removeClass("collapsed")})),this.loaded=!0,this.undelegate('click [data-toggle="collapse"]')}))}}),c=l},"./bundles/oroproduct/js/datagrid/builder/product-kit-items-builder.js":(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>a});var s=o("./bundles/oroui/js/extend/underscore.js"),i=o.n(s),n=o("./bundles/oroproduct/js/datagrid/editor/order-input-validation-editor.js"),r=o("./bundles/orodatagrid/js/datagrid/formatter/decimal-formatter.js");const a={SORT_ORDER_COLUMN_NAME:"sortOrder",processDatagridOptions(t,e){const o=this.SORT_ORDER_COLUMN_NAME;e.metadata.columns=e.metadata.columns.map((t=>(t.name===o&&t.editable&&(i().isDesktop()?Object.assign(t,{editable:!1,renderable:!1,manageable:!1}):(t.editor=n.A,t.formatter=r.A)),t)));const s=t=>{let s=Math.max(...t.map((t=>t[o]?Number(t[o]):0)));return t.map((t=>(t[o]=Number(t[o])||++s,t.constraints=e.gridBuildersOptions?.sortOrderConstraints||{},t)))};e.data.data=s(e.data.data);const{parseResponseModels:a}=e.metadata.options;return Object.assign(e.metadata.options,{parseResponseModels:function(t){if(a&&(t=a.call(this,t)),"data"in t){const e=this;t.data.forEach((t=>{const s=e.get(t.id);s&&(t[o]=s.get(o))}))}return"data"in t?s(t.data):t}}),t.resolve(),t},init(t,e){t.resolve()}}},"./bundles/orosellerdashboard/js/app/components/seller-dashboard-component.js":(t,e,o)=>{var s;void 0===(s=function(t){"use strict";const e=o("./bundles/fosjsrouting/js/router.js"),s=o("./bundles/oroui/js/extend/jquery.js"),i=o("./bundles/oroui/js/extend/underscore.js"),n=o("./bundles/orotranslation/js/translator.js"),r=o("./bundles/orolocale/js/locale-settings.js"),a=o("./bundles/orolocale/js/formatter/number.js"),d=o("./bundles/orofusioncharts/js/extend/fusioncharts.js"),l=o("./bundles/oroui/js/app/views/loading-mask-view.js"),c=o("./bundles/oroui/js/app/components/base/component.js").extend({dataSources:{},options:{currency:r.getCurrency(),selectors:{date:"#date",switcher:".buttonwrapper li",board:".seller-dashboard-container"},months:r.getCalendarMonthNames("wide",!0)},constructor:function t(e){t.__super__.constructor.call(this,e)},initialize:function(t){this.periods=t._sourceElement.find(this.options.selectors.switcher),this.periods.on("click",this.onPeriodChange.bind(this)),this.loadingMaskView=new l({container:this.options.selectors.board})},_collectChartDatasources:function(){i.each(d.items,function(t){this.dataSources[t.id]=t.options.dataSource}.bind(this))},_updateChartContainerOrderCount:function(t,e){const o=this.dataSources[t];o.data=e.data,e.annotations.count_total>0?(o.annotations.groups[0].items[0].text=e.annotations.count_value,o.annotations.groups[0].items[0].color=e.annotations.count_color,o.annotations.groups[0].items[1].text=e.annotations.count_label):(o.annotations.groups[0].items[0].text="",o.annotations.groups[0].items[1].text=""),o.chart.defaultCenterLabel=n("oro.seller_dashboard.chart.order_count.total_label",{value:e.annotations.count_total}),d.items[t].setJSONData(o),d.items[t].render()},_updateChartContainerOrderRevenue:function(t,e){const o=this.dataSources[t];o.data=e.data,e.annotations.amount_total>0?(o.annotations.groups[0].items[0].text=e.annotations.amount_value,o.annotations.groups[0].items[0].color=e.annotations.amount_color,o.annotations.groups[0].items[1].text=e.annotations.amount_label):(o.annotations.groups[0].items[0].text="",o.annotations.groups[0].items[1].text=""),o.chart.defaultCenterLabel=n("oro.seller_dashboard.chart.order_revenue.total_label",{value:a.formatCurrency(e.annotations.amount_total,this.options.currency)}),d.items[t].setJSONData(o),d.items[t].render()},_updateChartContainerTopSelling:function(t,e){const o=this.dataSources[t];o.data=e.data,d.items[t].setJSONData(o),d.items[t].render()},_updateChartContainerOrdersOvertime:function(t,e){const o=this.dataSources[t];o.categories=e.categories,o.dataset=e.dataset,d.items[t].setJSONData(o),d.items[t].render()},onPeriodChange:function(t){this.loadingMaskView.show(),i.isEmpty(this.dataSources)&&this._collectChartDatasources(this),i.each(t.currentTarget.parentElement.children,(function(t){s(t).removeClass("active")})),t.currentTarget.className="active";const o=new Date;switch(t.currentTarget.id){case"today":s(this.options.selectors.date).html(o.getDate()+" "+this.options.months[o.getMonth()]+" "+o.getFullYear());break;case"month":s(this.options.selectors.date).html(this.options.months[o.getMonth()]+" "+o.getFullYear());break;case"year":s(this.options.selectors.date).html(o.getFullYear())}const n=this;s.ajax({url:e.generate("oro_seller_dashboard_get_chart_data",{period:t.currentTarget.id}),type:"GET",dataType:"json",success:function(t){i.each(t,(function(t,e){switch(e){case"chart-container-order-count":n._updateChartContainerOrderCount(e,t);break;case"chart-container-order-revenue":n._updateChartContainerOrderRevenue(e,t);break;case"chart-container-top-selling-by-count":case"chart-container-top-selling-by-value":n._updateChartContainerTopSelling(e,t);break;case"chart-container-orders-overtime":n._updateChartContainerOrdersOvertime(e,t);break;default:console.log("Sorry, we are out of ${chartId}.")}}))},complete:function(){n.loadingMaskView.hide()}})},dispose:function(){this.disposed||(this.dataSources={},c.__super__.dispose.call(this))}});return c}.call(e,o,e,t))||(t.exports=s)}}]);