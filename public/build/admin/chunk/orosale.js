/*! For license information please see orosale.js.LICENSE.txt */
(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[934],{"../node_modules/@oroinc/oro-webpack-config-builder/loader/text-loader.js!./bundles/oropricing/templates/order/subtotals.html":e=>{e.exports='<div class="attribute-item">\n    <label class="attribute-item__term"><%- item.label %></label>\n    <div class="attribute-item__description"\n        <% if (item.signedAmount < 0) { %>\n         dir="ltr"\n        <% } %>\n    >\n        <label class="control-label"><%- item.formattedAmount %></label>\n        <% if (item.formattedBaseAmount) { %>\n            <div class="total-base-currency-wrapper">\n                <label class="control-label"><%- item.formattedBaseAmount %></label>\n            </div>\n        <% } %>\n    </div>\n</div>\n'},"../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/oroorder/js/app/templates/discount-item-hint.html":(module,__unused_webpack_exports,__webpack_require__)=>{var _=__webpack_require__("./bundles/oroui/js/extend/underscore.js");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+=(null==(__t=NumberFormatter.formatCurrency(amount,currency))?"":_.escape(__t))+" ("+(null==(__t=NumberFormatter.formatDecimal(percent))?"":_.escape(__t))+"%)\n";return __p}},"../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/oroorder/js/app/templates/no-shipping-methods-available.html":(module,__unused_webpack_exports,__webpack_require__)=>{var _=__webpack_require__("./bundles/oroui/js/extend/underscore.js");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<span class="alert alert-error" role="alert">'+(null==(__t=_.__("oro.order.possible_shipping_methods.no_method"))?"":_.escape(__t))+"</span>\n";return __p}},"../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/oroorder/js/app/templates/possible-shipping-methods-template.html":(module,__unused_webpack_exports,__webpack_require__)=>{var _=__webpack_require__("./bundles/oroui/js/extend/underscore.js");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<table class="table table-hover table-bordered grid">\n    <thead>\n    <tr>\n        <th>&nbsp;</th>\n        <th><span>'+(null==(__t=_.__("oro.shipping.methods_table.method.label"))?"":_.escape(__t))+"</span></th>\n        <th><span>"+(null==(__t=_.__("oro.shipping.methods_table.option.label"))?"":_.escape(__t))+"</span></th>\n        <th><span>"+(null==(__t=_.__("oro.shipping.methods_table.price.label"))?"":_.escape(__t))+"</span></th>\n    </tr>\n    </thead>\n    <tbody>\n    ",_.each(methods,(function(e){_.keys(e.types).length&&(__p+="\n    ",_.each(e.types,(function(t){if(null!==t.price.value){var i=areMethodsEqual(createMethodObject(e.identifier,t.identifier,t.price.value),selectedMethod);__p+='\n    <tr>\n        <td>\n            <input type="radio" '+(null==(__t=i?'checked="checked"':"")?"":__t)+'\n            id="'+(null==(__t="possible_shipping_method_"+e.identifier+"_"+t.identifier)?"":_.escape(__t))+'"\n            name="possibleShippingMethodType"\n            value="'+(null==(__t=t.identifier)?"":_.escape(__t))+'"\n            data-shipping-method="'+(null==(__t=e.identifier)?"":_.escape(__t))+'"\n            data-shipping-price="'+(null==(__t=t.price.value)?"":_.escape(__t))+'"\n            data-choice="'+(null==(__t=t.identifier)?"":_.escape(__t))+'"\n            />\n        </td>\n        <td>\n            <label for="'+(null==(__t="possible_shipping_method_"+e.identifier+"_"+t.identifier)?"":_.escape(__t))+'">'+(null==(__t=_.__("oro.shipping.method_type.backend.method.label",{translatedMethod:_.__(e.label)}))?"":_.escape(__t))+"</label>\n        </td>\n        <td>\n            ",e.label!==t.label&&(__p+="\n            "+(null==(__t=_.__("oro.shipping.method_type.backend.method_type.label",{translatedMethodType:_.__(t.label)}))?"":_.escape(__t))+"\n            "),__p+="\n        </td>\n        <td>"+(null==(__t=NumberFormatter.formatCurrency(t.price.value,t.price.currency))?"":_.escape(__t))+"</td>\n    </tr>\n    "}})),__p+="\n    ")})),__p+="\n    </tbody>\n</table>\n";return __p}},"../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/oroorder/js/app/templates/selected-shipping-method-template.html":(module,__unused_webpack_exports,__webpack_require__)=>{var _=__webpack_require__("./bundles/oroui/js/extend/underscore.js");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="control-group">\n    <label class="control-label">\n        '+(null==(__t=shippingMethodLabel)?"":_.escape(__t))+'\n    </label>\n    <div class="controls">\n        <div class="control-label '+(null==(__t=shippingMethodClass)?"":_.escape(__t))+'">\n            '+(null==(__t=selectedShippingMethod)?"":_.escape(__t))+"\n        </div>\n    </div>\n</div>\n";return __p}},"../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/oropricing/templates/debug/currency-template.html":(module,__unused_webpack_exports,__webpack_require__)=>{var _=__webpack_require__("./bundles/oroui/js/extend/underscore.js");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="choice-widget-expanded__item">\n    <label for="oro_currency_selection_'+(null==(__t=ftid)?"":_.escape(__t))+"-uid-"+(null==(__t=uid)?"":_.escape(__t))+'" class="checkbox-label">\n        <input type="checkbox"\n               id="oro_currency_selection_'+(null==(__t=ftid)?"":_.escape(__t))+"-uid-"+(null==(__t=uid)?"":_.escape(__t))+'"\n               name="oro_currency_selection[]"\n               data-ftid="oro_currency_selection_'+(null==(__t=ftid)?"":_.escape(__t))+'"\n               value="'+(null==(__t=value)?"":_.escape(__t))+'" '+(null==(__t=checked)?"":_.escape(__t))+" >\n        "+(null==(__t=text)?"":_.escape(__t))+"\n    </label>\n</div>\n";return __p}},"../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/oropricing/templates/order/totals-no-data.html":(module,__unused_webpack_exports,__webpack_require__)=>{var _=__webpack_require__("./bundles/oroui/js/extend/underscore.js");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="no-data">\n    '+(null==(__t=_.__("oro.pricing.totals.no_data"))?"":_.escape(__t))+"\n</div>\n";return __p}},"../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/oropricing/templates/order/totals.html":(module,__unused_webpack_exports,__webpack_require__)=>{var _=__webpack_require__("./bundles/oroui/js/extend/underscore.js");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="attribute-item">\n    <label class="attribute-item__term">'+(null==(__t=item.label)?"":_.escape(__t))+'</label>\n    <div class="attribute-item__description"\n        ',item.signedAmount<0&&(__p+='\n         dir="ltr"\n        '),__p+='\n   >\n        <label class="control-label">'+(null==(__t=item.formattedAmount)?"":_.escape(__t))+"</label>\n        ",item.formattedBaseAmount&&(__p+='\n            <div class="total-base-currency-wrapper">\n                <label class="control-label">'+(null==(__t=item.formattedBaseAmount)?"":_.escape(__t))+"</label>\n            </div>\n        "),__p+="\n    </div>\n</div>\n";return __p}},"../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/oropricing/templates/product/line-item-matched-price.html":(module,__unused_webpack_exports,__webpack_require__)=>{var _=__webpack_require__("./bundles/oroui/js/extend/underscore.js");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="line-item-matched-price">\n    <span>'+(null==(__t=_.__("oro.pricing.matched_price"))?"":_.escape(__t))+": <strong>"+(null==(__t=matchedPrice)?"":_.escape(__t))+"</strong></span>\n</div>\n";return __p}},"../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/oropricing/templates/product/line-item-per-unit.html":(module,__unused_webpack_exports,__webpack_require__)=>{var _=__webpack_require__("./bundles/oroui/js/extend/underscore.js");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+="";const unitTranslationKey="oro.product.product_unit."+unit+".label.short";__p+="\n";const unitTranslation=_.__(unitTranslationKey);__p+='\n<span class="prices-tier-per-item">'+(null==(__t=_.__("oro.pricing.per_item",{unit:unitTranslationKey!==unitTranslation?unitTranslation:unit}))?"":_.escape(__t))+"</span>\n"}return __p}},"../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/oropricing/templates/product/price.html":(module,__unused_webpack_exports,__webpack_require__)=>{var _=__webpack_require__("./bundles/oroui/js/extend/underscore.js");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<span class="hidden" itemprop="priceCurrency" aria-hidden="true">'+(null==(__t=price.currency)?"":_.escape(__t))+'</span><span itemprop="price" class="hidden" aria-hidden="true">'+(null==(__t=numeral(price.price).format("0.00"))?"":_.escape(__t))+"</span>"+(null==(__t=price.formatted_price.trim())?"":_.escape(__t))+"\n";return __p}},"../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/oropricing/templates/product/prices-price-overridden.html":(module,__unused_webpack_exports,__webpack_require__)=>{var _=__webpack_require__("./bundles/oroui/js/extend/underscore.js");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="product-price-overridden" style="display: none;">\n    <i class="fa-info-circle"\n       data-toggle="popover"\n       data-placement="bottom"\n       data-close="false"\n       data-class="product-price-hint"\n       data-content="'+(null==(__t=["<div class='hint-title'>",_.__("oro.pricing.product_prices.price_is_overridden"),"</div>","<a class='btn' href='#'>","<span class='fa-refresh'></span>",_.__("oro.pricing.product_prices.reset_price"),"</a>"].join(""))?"":__t)+'">\n    </i>\n</div>\n';return __p}},"../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/oropricing/templates/product/prices-tier-button.html":(module,__unused_webpack_exports,__webpack_require__)=>{var _=__webpack_require__("./bundles/oroui/js/extend/underscore.js");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="add-on btn btn-icon btn-square-default product-tier-prices"\n     data-class="prices-tier-popover"\n     role="button"\n     aria-label="'+(null==(__t=_.__("oro.pricing.view_all_prices"))?"":_.escape(__t))+'"\n    >\n    <span class="fa-bars"\n       data-toggle="popover"\n       data-placement="bottom"\n       data-close="false"\n       aria-hidden="true"\n    ></span>\n</div>\n';return __p}},"../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/oropricing/templates/product/prices-tier-table.html":(module,__unused_webpack_exports,__webpack_require__)=>{var _=__webpack_require__("./bundles/oroui/js/extend/underscore.js");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="prices-tier">\n    ',clickable&&(__p+='\n    <h3 class="prices-tier-title">'+(null==(__t=_.__("oro.pricing.click_to_select"))?"":_.escape(__t))+"</h3>\n    "),__p+='\n    <table class="table">\n        ',clickable&&(__p+='\n        <thead>\n            <tr>\n                <th class="text-uppercase">'+(null==(__t=_.__("oro.pricing.qty"))?"":_.escape(__t))+"</th>\n                <th>"+(null==(__t=_.__("oro.pricing.unit_price"))?"":_.escape(__t))+"</th>\n            </tr>\n        </thead>\n        "),__p+="\n        <tbody>\n        ",_.each(prices,(function(e,t){__p+='\n        <tr>\n            <td colspan="2">\n                <b>'+(null==(__t=_.__("oro.product.product_unit."+t+".label.full"))?"":_.escape(__t))+"</b>\n            </td>\n        </tr>\n        ",_.each(e,(function(e){__p+='\n        <tr class="',_.isEmpty(matchedPrice)||t!==matchedPrice.unit||parseFloat(e.price)!==parseFloat(matchedPrice.price)||(__p+="matched-tier-price"),__p+='">\n            <td>'+(null==(__t=e.quantity)?"":_.escape(__t))+"</td>\n            <td>\n                ",clickable?(__p+='\n                <a href="#" data-price="'+(null==(__t=parseFloat(e.price))?"":_.escape(__t))+'"\n                   data-unit="'+(null==(__t=t)?"":_.escape(__t))+'"\n                   role="button"\n                   data-emulate-btn-press=""\n                ',ariaControlsId&&(__p+='\n                aria-controls="'+(null==(__t=ariaControlsId)?"":_.escape(__t))+'"\n                '),__p+="\n                > "+(null==(__t=formatter.formatCurrency(e.price,e.currency))?"":_.escape(__t))+"</a>\n                "):__p+="\n                    "+(null==(__t=formatter.formatCurrency(e.price,e.currency))?"":_.escape(__t))+"\n                ",__p+="\n            </td>\n        </tr>\n        "})),__p+="\n        "})),__p+="\n        </tbody>\n    </table>\n</div>\n";return __p}},"../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/oropricing/templates/product/unit.html":(module,__unused_webpack_exports,__webpack_require__)=>{var _=__webpack_require__("./bundles/oroui/js/extend/underscore.js");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<span class="product-price__unit-full">\n    '+(null==(__t=_.__("oro.product.product_unit."+price.unit+".label.full"))?"":_.escape(__t))+'\n</span>\n<span class="product-price__unit-short">\n    '+(null==(__t=_.__("oro.product.product_unit."+price.unit+".label.short"))?"":_.escape(__t))+"\n</span>\n";return __p}},"../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/oroui/templates/tab-collection-container.html":(module,__unused_webpack_exports,__webpack_require__)=>{var _=__webpack_require__("./bundles/oroui/js/extend/underscore.js");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div data-page-component-responsive-tabs="'+(null==(__t=JSON.stringify(tabOptions))?"":_.escape(__t))+'">\n    <ul class="'+(null==(__t=templateClassName)?"":_.escape(__t))+'" role="tablist" data-name="tabs-list"></ul>\n</div>\n';return __p}},"../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/oroui/templates/tab-collection-item.html":(module,__unused_webpack_exports,__webpack_require__)=>{var _=__webpack_require__("./bundles/oroui/js/extend/underscore.js");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<a  href="#"\n    id="'+(null==(__t=uniqueId)?"":_.escape(__t))+'"\n    class="nav-link ',obj.active&&(__p+="active"),__p+='"\n    role="tab"\n    data-emulate-btn-press=""\n    data-toggle="tab"\n    aria-controls="',obj.controlTabPanel?__p+=""+(null==(__t=controlTabPanel)?"":_.escape(__t)):__p+=""+(null==(__t=id)?"":_.escape(__t)),__p+='"\n    aria-selected="',obj.active?__p+="true":__p+="false",__p+='"\n    >\n    '+(null==(__t=label)?"":_.escape(__t))+"\n</a>\n";return __p}},"../node_modules/jquery-ui/ui/effect.js":(e,t,i)=>{var n,s,o;!function(r){"use strict";s=[i("./bundles/oroui/js/extend/jquery.js"),i("../node_modules/jquery-ui/ui/jquery-var-for-color.js"),i("../node_modules/jquery-ui/ui/vendor/jquery-color/jquery.color.js"),i("../node_modules/jquery-ui/ui/version.js")],n=function(e){var t,i="ui-effects-",n="ui-effects-style",s="ui-effects-animated";return e.effects={effect:{}},function(){var t,i=["add","remove","toggle"],n={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};function s(e){var t,i,n,s=e.ownerDocument.defaultView?e.ownerDocument.defaultView.getComputedStyle(e,null):e.currentStyle,o={};if(s&&s.length&&s[0]&&s[s[0]])for(i=s.length;i--;)"string"==typeof s[t=s[i]]&&(o[(n=t,n.replace(/-([\da-z])/gi,(function(e,t){return t.toUpperCase()})))]=s[t]);else for(t in s)"string"==typeof s[t]&&(o[t]=s[t]);return o}e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],(function(t,i){e.fx.step[i]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(jQuery.style(e.elem,i,e.end),e.setAttr=!0)}})),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e.effects.animateClass=function(t,o,r,l){var a=e.speed(o,r,l);return this.queue((function(){var o,r=e(this),l=r.attr("class")||"",d=a.children?r.find("*").addBack():r;d=d.map((function(){return{el:e(this),start:s(this)}})),(o=function(){e.each(i,(function(e,i){t[i]&&r[i+"Class"](t[i])}))})(),d=d.map((function(){return this.end=s(this.el[0]),this.diff=function(t,i){var s,o,r={};for(s in i)o=i[s],t[s]!==o&&(n[s]||!e.fx.step[s]&&isNaN(parseFloat(o))||(r[s]=o));return r}(this.start,this.end),this})),r.attr("class",l),d=d.map((function(){var t=this,i=e.Deferred(),n=e.extend({},a,{queue:!1,complete:function(){i.resolve(t)}});return this.el.animate(this.diff,n),i.promise()})),e.when.apply(e,d.get()).done((function(){o(),e.each(arguments,(function(){var t=this.el;e.each(this.diff,(function(e){t.css(e,"")}))})),a.complete.call(r[0])}))}))},e.fn.extend({addClass:(t=e.fn.addClass,function(i,n,s,o){return n?e.effects.animateClass.call(this,{add:i},n,s,o):t.apply(this,arguments)}),removeClass:function(t){return function(i,n,s,o){return arguments.length>1?e.effects.animateClass.call(this,{remove:i},n,s,o):t.apply(this,arguments)}}(e.fn.removeClass),toggleClass:function(t){return function(i,n,s,o,r){return"boolean"==typeof n||void 0===n?s?e.effects.animateClass.call(this,n?{add:i}:{remove:i},s,o,r):t.apply(this,arguments):e.effects.animateClass.call(this,{toggle:i},n,s,o)}}(e.fn.toggleClass),switchClass:function(t,i,n,s,o){return e.effects.animateClass.call(this,{add:i,remove:t},n,s,o)}})}(),function(){var t;function o(t,i,n,s){return e.isPlainObject(t)&&(i=t,t=t.effect),t={effect:t},null==i&&(i={}),"function"==typeof i&&(s=i,n=null,i={}),("number"==typeof i||e.fx.speeds[i])&&(s=n,n=i,i={}),"function"==typeof n&&(s=n,n=null),i&&e.extend(t,i),n=n||i.duration,t.duration=e.fx.off?0:"number"==typeof n?n:n in e.fx.speeds?e.fx.speeds[n]:e.fx.speeds._default,t.complete=s||i.complete,t}function r(t){return!(t&&"number"!=typeof t&&!e.fx.speeds[t])||"string"==typeof t&&!e.effects.effect[t]||"function"==typeof t||"object"==typeof t&&!t.effect}function l(e,t){var i=t.outerWidth(),n=t.outerHeight(),s=/^rect\((-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto)\)$/.exec(e)||["",0,i,n,0];return{top:parseFloat(s[1])||0,right:"auto"===s[2]?i:parseFloat(s[2]),bottom:"auto"===s[3]?n:parseFloat(s[3]),left:parseFloat(s[4])||0}}e.expr&&e.expr.pseudos&&e.expr.pseudos.animated&&(e.expr.pseudos.animated=(t=e.expr.pseudos.animated,function(i){return!!e(i).data(s)||t(i)})),!1!==e.uiBackCompat&&e.extend(e.effects,{save:function(e,t){for(var n=0,s=t.length;n<s;n++)null!==t[n]&&e.data(i+t[n],e[0].style[t[n]])},restore:function(e,t){for(var n,s=0,o=t.length;s<o;s++)null!==t[s]&&(n=e.data(i+t[s]),e.css(t[s],n))},setMode:function(e,t){return"toggle"===t&&(t=e.is(":hidden")?"show":"hide"),t},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var i={width:t.outerWidth(!0),height:t.outerHeight(!0),float:t.css("float")},n=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),s={width:t.width(),height:t.height()},o=document.activeElement;try{o.id}catch(e){o=document.body}return t.wrap(n),(t[0]===o||e.contains(t[0],o))&&e(o).trigger("focus"),n=t.parent(),"static"===t.css("position")?(n.css({position:"relative"}),t.css({position:"relative"})):(e.extend(i,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],(function(e,n){i[n]=t.css(n),isNaN(parseInt(i[n],10))&&(i[n]="auto")})),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(s),n.css(i).show()},removeWrapper:function(t){var i=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===i||e.contains(t[0],i))&&e(i).trigger("focus")),t}}),e.extend(e.effects,{version:"1.13.3",define:function(t,i,n){return n||(n=i,i="effect"),e.effects.effect[t]=n,e.effects.effect[t].mode=i,n},scaledDimensions:function(e,t,i){if(0===t)return{height:0,width:0,outerHeight:0,outerWidth:0};var n="horizontal"!==i?(t||100)/100:1,s="vertical"!==i?(t||100)/100:1;return{height:e.height()*s,width:e.width()*n,outerHeight:e.outerHeight()*s,outerWidth:e.outerWidth()*n}},clipToBox:function(e){return{width:e.clip.right-e.clip.left,height:e.clip.bottom-e.clip.top,left:e.clip.left,top:e.clip.top}},unshift:function(e,t,i){var n=e.queue();t>1&&n.splice.apply(n,[1,0].concat(n.splice(t,i))),e.dequeue()},saveStyle:function(e){e.data(n,e[0].style.cssText)},restoreStyle:function(e){e[0].style.cssText=e.data(n)||"",e.removeData(n)},mode:function(e,t){var i=e.is(":hidden");return"toggle"===t&&(t=i?"show":"hide"),(i?"hide"===t:"show"===t)&&(t="none"),t},getBaseline:function(e,t){var i,n;switch(e[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=e[0]/t.height}switch(e[1]){case"left":n=0;break;case"center":n=.5;break;case"right":n=1;break;default:n=e[1]/t.width}return{x:n,y:i}},createPlaceholder:function(t){var n,s=t.css("position"),o=t.position();return t.css({marginTop:t.css("marginTop"),marginBottom:t.css("marginBottom"),marginLeft:t.css("marginLeft"),marginRight:t.css("marginRight")}).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()),/^(static|relative)/.test(s)&&(s="absolute",n=e("<"+t[0].nodeName+">").insertAfter(t).css({display:/^(inline|ruby)/.test(t.css("display"))?"inline-block":"block",visibility:"hidden",marginTop:t.css("marginTop"),marginBottom:t.css("marginBottom"),marginLeft:t.css("marginLeft"),marginRight:t.css("marginRight"),float:t.css("float")}).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).addClass("ui-effects-placeholder"),t.data(i+"placeholder",n)),t.css({position:s,left:o.left,top:o.top}),n},removePlaceholder:function(e){var t=i+"placeholder",n=e.data(t);n&&(n.remove(),e.removeData(t))},cleanUp:function(t){e.effects.restoreStyle(t),e.effects.removePlaceholder(t)},setTransition:function(t,i,n,s){return s=s||{},e.each(i,(function(e,i){var o=t.cssUnit(i);o[0]>0&&(s[i]=o[0]*n+o[1])})),s}}),e.fn.extend({effect:function(){var t=o.apply(this,arguments),i=e.effects.effect[t.effect],n=i.mode,r=t.queue,l=r||"fx",a=t.complete,d=t.mode,c=[],u=function(t){var i=e(this),o=e.effects.mode(i,d)||n;i.data(s,!0),c.push(o),n&&("show"===o||o===n&&"hide"===o)&&i.show(),n&&"none"===o||e.effects.saveStyle(i),"function"==typeof t&&t()};if(e.fx.off||!i)return d?this[d](t.duration,a):this.each((function(){a&&a.call(this)}));function p(o){var r=e(this);function l(){"function"==typeof a&&a.call(r[0]),"function"==typeof o&&o()}t.mode=c.shift(),!1===e.uiBackCompat||n?"none"===t.mode?(r[d](),l()):i.call(r[0],t,(function(){r.removeData(s),e.effects.cleanUp(r),"hide"===t.mode&&r.hide(),l()})):(r.is(":hidden")?"hide"===d:"show"===d)?(r[d](),l()):i.call(r[0],t,l)}return!1===r?this.each(u).each(p):this.queue(l,u).queue(l,p)},show:function(e){return function(t){if(r(t))return e.apply(this,arguments);var i=o.apply(this,arguments);return i.mode="show",this.effect.call(this,i)}}(e.fn.show),hide:function(e){return function(t){if(r(t))return e.apply(this,arguments);var i=o.apply(this,arguments);return i.mode="hide",this.effect.call(this,i)}}(e.fn.hide),toggle:function(e){return function(t){if(r(t)||"boolean"==typeof t)return e.apply(this,arguments);var i=o.apply(this,arguments);return i.mode="toggle",this.effect.call(this,i)}}(e.fn.toggle),cssUnit:function(t){var i=this.css(t),n=[];return e.each(["em","px","%","pt"],(function(e,t){i.indexOf(t)>0&&(n=[parseFloat(i),t])})),n},cssClip:function(e){return e?this.css("clip","rect("+e.top+"px "+e.right+"px "+e.bottom+"px "+e.left+"px)"):l(this.css("clip"),this)},transfer:function(t,i){var n=e(this),s=e(t.to),o="fixed"===s.css("position"),r=e("body"),l=o?r.scrollTop():0,a=o?r.scrollLeft():0,d=s.offset(),c={top:d.top-l,left:d.left-a,height:s.innerHeight(),width:s.innerWidth()},u=n.offset(),p=e("<div class='ui-effects-transfer'></div>");p.appendTo("body").addClass(t.className).css({top:u.top-l,left:u.left-a,height:n.innerHeight(),width:n.innerWidth(),position:o?"fixed":"absolute"}).animate(c,t.duration,t.easing,(function(){p.remove(),"function"==typeof i&&i()}))}}),e.fx.step.clip=function(t){t.clipInit||(t.start=e(t.elem).cssClip(),"string"==typeof t.end&&(t.end=l(t.end,t.elem)),t.clipInit=!0),e(t.elem).cssClip({top:t.pos*(t.end.top-t.start.top)+t.start.top,right:t.pos*(t.end.right-t.start.right)+t.start.right,bottom:t.pos*(t.end.bottom-t.start.bottom)+t.start.bottom,left:t.pos*(t.end.left-t.start.left)+t.start.left})}}(),t={},e.each(["Quad","Cubic","Quart","Quint","Expo"],(function(e,i){t[i]=function(t){return Math.pow(t,e+2)}})),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,i=4;e<((t=Math.pow(2,--i))-1)/11;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(t,(function(t,i){e.easing["easeIn"+t]=i,e.easing["easeOut"+t]=function(e){return 1-i(1-e)},e.easing["easeInOut"+t]=function(e){return e<.5?i(2*e)/2:1-i(-2*e+2)/2}})),e.effects},void 0===(o=n.apply(t,s))||(e.exports=o)}()},"../node_modules/jquery-ui/ui/effects/effect-highlight.js":(e,t,i)=>{var n,s,o;!function(r){"use strict";s=[i("./bundles/oroui/js/extend/jquery.js"),i("../node_modules/jquery-ui/ui/version.js"),i("../node_modules/jquery-ui/ui/effect.js")],void 0===(o="function"==typeof(n=function(e){return e.effects.define("highlight","show",(function(t,i){var n=e(this),s={backgroundColor:n.css("backgroundColor")};"hide"===t.mode&&(s.opacity=0),e.effects.saveStyle(n),n.css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(s,{queue:!1,duration:t.duration,easing:t.easing,complete:i})}))})?n.apply(t,s):n)||(e.exports=o)}()},"../node_modules/jquery-ui/ui/jquery-var-for-color.js":(e,t,i)=>{var n,s,o;!function(r){"use strict";s=[i("./bundles/oroui/js/extend/jquery.js"),i("../node_modules/jquery-ui/ui/version.js")],void 0===(o="function"==typeof(n=function(e){})?n.apply(t,s):n)||(e.exports=o)}()},"../node_modules/jquery-ui/ui/vendor/jquery-color/jquery.color.js":function(e,t,i){var n,s,o;s=[i("./bundles/oroui/js/extend/jquery.js")],n=function(e,t){var i,n={},s=n.toString,o=/^([\-+])=\s*(\d+\.?\d*)/,r=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})?/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16),e[4]?(parseInt(e[4],16)/255).toFixed(2):1]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])?/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),e[4]?(parseInt(e[4]+e[4],16)/255).toFixed(2):1]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],l=e.Color=function(t,i,n,s){return new e.Color.fn.parse(t,i,n,s)},a={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},d={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},c=l.support={},u=e("<p>")[0],p=e.each;function h(e){return null==e?e+"":"object"==typeof e?n[s.call(e)]||"object":typeof e}function m(e,t,i){var n=d[t.type]||{};return null==e?i||!t.def?null:t.def:(e=n.floor?~~e:parseFloat(e),isNaN(e)?t.def:n.mod?(e+n.mod)%n.mod:Math.min(n.max,Math.max(0,e)))}function f(t){var n=l(),s=n._rgba=[];return t=t.toLowerCase(),p(r,(function(e,i){var o,r=i.re.exec(t),l=r&&i.parse(r),d=i.space||"rgba";if(l)return o=n[d](l),n[a[d].cache]=o[a[d].cache],s=n._rgba=o._rgba,!1})),s.length?("0,0,0,0"===s.join()&&e.extend(s,i.transparent),n):i[t]}function g(e,t,i){return 6*(i=(i+1)%1)<1?e+(t-e)*i*6:2*i<1?t:3*i<2?e+(t-e)*(2/3-i)*6:e}u.style.cssText="background-color:rgba(1,1,1,.5)",c.rgba=u.style.backgroundColor.indexOf("rgba")>-1,p(a,(function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}})),e.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){n["[object "+t+"]"]=t.toLowerCase()})),l.fn=e.extend(l.prototype,{parse:function(n,s,o,r){if(n===t)return this._rgba=[null,null,null,null],this;(n.jquery||n.nodeType)&&(n=e(n).css(s),s=t);var d=this,c=h(n),u=this._rgba=[];return s!==t&&(n=[n,s,o,r],c="array"),"string"===c?this.parse(f(n)||i._default):"array"===c?(p(a.rgba.props,(function(e,t){u[t.idx]=m(n[t.idx],t)})),this):"object"===c?(p(a,n instanceof l?function(e,t){n[t.cache]&&(d[t.cache]=n[t.cache].slice())}:function(t,i){var s=i.cache;p(i.props,(function(e,t){if(!d[s]&&i.to){if("alpha"===e||null==n[e])return;d[s]=i.to(d._rgba)}d[s][t.idx]=m(n[e],t,!0)})),d[s]&&e.inArray(null,d[s].slice(0,3))<0&&(null==d[s][3]&&(d[s][3]=1),i.from&&(d._rgba=i.from(d[s])))}),this):void 0},is:function(e){var t=l(e),i=!0,n=this;return p(a,(function(e,s){var o,r=t[s.cache];return r&&(o=n[s.cache]||s.to&&s.to(n._rgba)||[],p(s.props,(function(e,t){if(null!=r[t.idx])return i=r[t.idx]===o[t.idx]}))),i})),i},_space:function(){var e=[],t=this;return p(a,(function(i,n){t[n.cache]&&e.push(i)})),e.pop()},transition:function(e,t){var i=l(e),n=i._space(),s=a[n],o=0===this.alpha()?l("transparent"):this,r=o[s.cache]||s.to(o._rgba),c=r.slice();return i=i[s.cache],p(s.props,(function(e,n){var s=n.idx,o=r[s],l=i[s],a=d[n.type]||{};null!==l&&(null===o?c[s]=l:(a.mod&&(l-o>a.mod/2?o+=a.mod:o-l>a.mod/2&&(o-=a.mod)),c[s]=m((l-o)*t+o,n)))})),this[n](c)},blend:function(t){if(1===this._rgba[3])return this;var i=this._rgba.slice(),n=i.pop(),s=l(t)._rgba;return l(e.map(i,(function(e,t){return(1-n)*s[t]+n*e})))},toRgbaString:function(){var t="rgba(",i=e.map(this._rgba,(function(e,t){return null!=e?e:t>2?1:0}));return 1===i[3]&&(i.pop(),t="rgb("),t+i.join()+")"},toHslaString:function(){var t="hsla(",i=e.map(this.hsla(),(function(e,t){return null==e&&(e=t>2?1:0),t&&t<3&&(e=Math.round(100*e)+"%"),e}));return 1===i[3]&&(i.pop(),t="hsl("),t+i.join()+")"},toHexString:function(t){var i=this._rgba.slice(),n=i.pop();return t&&i.push(~~(255*n)),"#"+e.map(i,(function(e){return 1===(e=(e||0).toString(16)).length?"0"+e:e})).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),l.fn.parse.prototype=l.fn,a.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,i,n=e[0]/255,s=e[1]/255,o=e[2]/255,r=e[3],l=Math.max(n,s,o),a=Math.min(n,s,o),d=l-a,c=l+a,u=.5*c;return t=a===l?0:n===l?60*(s-o)/d+360:s===l?60*(o-n)/d+120:60*(n-s)/d+240,i=0===d?0:u<=.5?d/c:d/(2-c),[Math.round(t)%360,i,u,null==r?1:r]},a.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,i=e[1],n=e[2],s=e[3],o=n<=.5?n*(1+i):n+i-n*i,r=2*n-o;return[Math.round(255*g(r,o,t+1/3)),Math.round(255*g(r,o,t)),Math.round(255*g(r,o,t-1/3)),s]},p(a,(function(e,i){var n=i.props,s=i.cache,r=i.to,a=i.from;l.fn[e]=function(e){if(r&&!this[s]&&(this[s]=r(this._rgba)),e===t)return this[s].slice();var i,o=h(e),d="array"===o||"object"===o?e:arguments,c=this[s].slice();return p(n,(function(e,t){var i=d["object"===o?e:t.idx];null==i&&(i=c[t.idx]),c[t.idx]=m(i,t)})),a?((i=l(a(c)))[s]=c,i):l(c)},p(n,(function(t,i){l.fn[t]||(l.fn[t]=function(n){var s,r,l,a,d=h(n);return r=(s=this[a="alpha"===t?this._hsla?"hsla":"rgba":e]())[i.idx],"undefined"===d?r:("function"===d&&(d=h(n=n.call(this,r))),null==n&&i.empty?this:("string"===d&&(l=o.exec(n))&&(n=r+parseFloat(l[2])*("+"===l[1]?1:-1)),s[i.idx]=n,this[a](s)))})}))})),l.hook=function(t){var i=t.split(" ");p(i,(function(t,i){e.cssHooks[i]={set:function(t,n){var s,o,r="";if("transparent"!==n&&("string"!==h(n)||(s=f(n)))){if(n=l(s||n),!c.rgba&&1!==n._rgba[3]){for(o="backgroundColor"===i?t.parentNode:t;(""===r||"transparent"===r)&&o&&o.style;)try{r=e.css(o,"backgroundColor"),o=o.parentNode}catch(e){}n=n.blend(r&&"transparent"!==r?r:"_default")}n=n.toRgbaString()}try{t.style[i]=n}catch(e){}}},e.fx.step[i]=function(t){t.colorInit||(t.start=l(t.elem,i),t.end=l(t.end),t.colorInit=!0),e.cssHooks[i].set(t.elem,t.start.transition(t.end,t.pos))}}))},l.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor"),e.cssHooks.borderColor={expand:function(e){var t={};return p(["Top","Right","Bottom","Left"],(function(i,n){t["border"+n+"Color"]=e})),t}},i=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}},void 0===(o=n.apply(t,s))||(e.exports=o)},"./bundles/orocampaign/js/app/components/email-campaign-form.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/extend/underscore.js"),n=i("./bundles/oroui/js/extend/jquery.js"),s=i("./bundles/oroui/js/mediator.js");return function(e){const i=e._sourceElement.find(e.scheduleEl),o=e._sourceElement.find(e.scheduledForEl),r=e._sourceElement.find(e.transportEl),l=o.find("label"),a=e.hideOn||[],d=e.showOn||[];r.on("change",(function(){s.execute("showLoading");const e=r.closest("form"),t=e.serializeArray(),i=e.attr("action");t.push({name:"formUpdateMarker",value:1});const o={formEl:e,data:t,reloadManually:!0};s.trigger("integrationFormReload:before",o),o.reloadManually&&s.execute("submitPage",{url:i,type:e.attr("method"),data:n.param(t)})})),i.on("change",(function(){t.contains(a,n(this).val())&&(o.addClass("hide"),o.find("input").each((function(){n(this).rules("remove","NotBlank")})),l.hasClass("required")&&l.removeClass("required").find("em").html("&nbsp;")),t.contains(d,n(this).val())&&(o.removeClass("hide"),o.find("input").each((function(){n(this).removeClass("hide").rules("add","NotBlank")})),l.hasClass("required")||l.addClass("required").find("em").html("*"))}))}}.call(t,i,t,e))||(e.exports=n)},"./bundles/orocustomeraccountbridge/js/app/account-creating-strategy/view/use-default-view.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/extend/jquery.js"),n=i("./bundles/oroui/js/app/views/base/view.js"),s=i("./bundles/oroui/js/mediator.js");return n.extend({events:{'change input[type="checkbox"]':"_handleChangeUseDefault"},constructor:function e(t){e.__super__.constructor.call(this,t)},_handleChangeUseDefault:function(e){s.trigger("strategy-creation-account:changeUseDefault",t(e.target).is(":checked"))}})}.call(t,i,t,e))||(e.exports=n)},"./bundles/orocustomeraccountbridge/js/app/account-creating-strategy/view/warning-view.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/extend/jquery.js");return i("./bundles/oroui/js/app/views/base/view.js").extend({$messageContainer:null,$selectStrategy:null,rootMessage:null,eachMessage:null,currentStrategy:null,defaultStrategy:null,events:{"change select":"_handleChangeSelect"},listen:{"strategy-creation-account:changeUseDefault mediator":"_handleChangeUseDefault"},constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.$messageContainer=this.$el.find(e.warningContainer),this.$selectStrategy=this.$el.find("select"),this.rootMessage=e.rootMessage,this.eachMessage=e.eachMessage,this.defaultStrategy=e.defaultStrategy,this.currentStrategy=this._getSelectedStrategy(),this._hideMessages()},_handleChangeSelect:function(e){const i=t(e.target).val();this._changeStrategy(i)},_handleChangeUseDefault:function(e){!0===e?(this.$selectStrategy.val(this.defaultStrategy).trigger("change"),this._changeStrategy(this.defaultStrategy)):this._changeStrategy(this._getSelectedStrategy())},_changeStrategy:function(e){this._hideMessages(),e!==this.currentStrategy&&this._showMessage(e)},_showMessage:function(e){"root"===e?this.$messageContainer.text(this.rootMessage):this.$messageContainer.text(this.eachMessage),this.$messageContainer.show()},_hideMessages:function(){this.$messageContainer.hide()},_getSelectedStrategy:function(){return this.$selectStrategy.val()}})}.call(t,i,t,e))||(e.exports=n)},"./bundles/orofrontend/js/app/elements-helper.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/extend/jquery.js"),n=i("./bundles/oroui/js/extend/underscore.js");return i("./bundles/oroform/js/extend/validate.js"),{elementsInitialized:!1,$elements:null,elements:{},elementsEvents:null,modelElements:{},modelEvents:null,elementEventNamespace:".elementEvent",deferredInitializeCheck:function(e,t){const i=this.$el.parent().closest('[data-layout="deferred-initialize"]');if(void 0===t||!i.length)return this.deferredInitialize(e);let s=!1;if(n.each(t,(function(t){void 0===e[t]&&(s=!0)})),!s)return this.deferredInitialize(e);i.one("deferredInitialize",((t,i)=>{t.preventDefault(),t.stopPropagation(),this.deferredInitialize(n.extend({},e,i)),i.callback&&i.callback(this)}))},deferredInitialize:function(e){},initializeSubviews:function(e){this._deferredRender();const t=this.$el.data("layout");"deferred-initialize"===t?(this.$el.trigger("deferredInitialize",e),this.handleLayoutInit()):"separate"===t?this.initLayout(e).done(this.handleLayoutInit.bind(this)):this.handleLayoutInit()},handleLayoutInit:function(){this._resolveDeferredRender()},initializeElements:function(e){this.$html=t("html"),this.elementsInitialized=!0;const i=["elements","modelElements"];Object.assign(this,t.extend(!0,{},n.pick(this,i),n.pick(e,i))),this.$elements=this.$elements||{},this.elementsEvents=t.extend({},this.elementsEvents||{}),this.modelEvents=t.extend({},this.modelEvents||{}),this.initializeModelElements(),this.delegateElementsEvents()},disposeElements:function(){if(!this.elementsInitialized)return;this.undelegateElementsEvents();const e=["$elements","elements","elementsEvents","modelElements","modelEvents"];for(let t=0,i=e.length;t<i;t++)delete this[e[t]]},initializeModelElements:function(){this.model&&(n.each(this.modelElements,(function(e,t){void 0===this.elementsEvents[e+" setModelValue"]&&(this.elementsEvents[e+" setModelValue"]=["change",i=>this.setModelValueFromElement(i,t,e)]),void 0===this.modelEvents[t+" setElementValue"]&&(this.modelEvents[t+" setElementValue"]=["change",i=>this.setElementValueFromModel(i,t,e)]),void 0===this.modelEvents[t+" focus"]&&(this.modelEvents[t+" focus"]=["focus",()=>{this.getElement(e).focus()}])}),this),this.setModelValueFromElements())},setModelValueFromElements:function(){n.each(this.modelElements,(function(e,t){this.setModelValueFromElement(null,t,e)}),this)},delegateElementsEvents:function(){this.elementsInitialized&&(n.each(this.elementsEvents,(function(e,t){if(!e)return;const i=t.split(" ")[0],n=e[0],s=e[1];this.delegateElementEvent(i,n,s)}),this),n.each(this.modelEvents,(function(e,t){if(!e)return;const i=t.split(" ")[0],n=e[0],s=e[1];this.delegateModelEvent(i,n,s)}),this))},delegateElementEvent:function(e,t,i){const s=this;n.isFunction(i)||(i=this[i].bind(this)),this.getElement(e).on(t+this.elementEventNamespace+this.cid,(function(e,t){return(t=t||{}).manually=s.isChangedManually(this,e),i(e,t)}))},delegateModelEvent:function(e,t,i){n.isFunction(i)||(i=this[i].bind(this)),this.model.on(t+":"+e,(function(e,t,n){i(n||{})}),this)},undelegateElementsEvents:function(){if(this.elementsInitialized){if(this.$elements){const e=this.elementEventNamespace+this.cid;n.each(this.$elements,(function(t){t.off(e)}))}this.model&&this.model.off(null,null,this)}},createElementByTemplate:function(e){let i=this.getElement(e);return i.length>0?i.is("script")&&(i=t(i.html())):i="function"==typeof this.templates[e]?t(this.templates[e]()):n.template(t(this.templates[e]).html()),this.$elements[e]=i,i},getElement:function(e,i){return void 0===this.$elements[e]&&(this.$elements[e]=this._findElement(e)||i||t([])),this.$elements[e]},clearElementsCache:function(){this.$elements={}},_findElement:function(e){if(void 0===this.elements[e]&&void 0!==this[e])return this[e];let i,s=this.elements[e]||null;return s?s instanceof t?s:(n.isArray(s)?(i=this.getElement(s[0]),s=s[1]||null):i=this.getElement("$el"),i&&s?i.find(s):null):null},setModelValueFromElement:function(e,t,i){const n=this.getElement(i),s=n.get(0);if(!n.length)return!1;const o=n.val(),r=this.viewToModelElementValueTransform(o,i);if(r===this.model.get(t))return;const l={event:e,manually:this.isChangedManually(s,e)};l.manually&&this.model.set(t+"_changed_manually",!0),this.model.set(t,r,l)},setElementValueFromModel:function(e,t,i){const n=this.getElement(i);if(!n.length)return!1;const s=this.model.get(t),o=this.modelToViewElementValueTransform(s,i);o!==n.val()&&n.val(o).change()},modelToViewElementValueTransform:function(e,t){return e},viewToModelElementValueTransform:function(e,t){return e},isChangedManually:function(e,t){let i=!1;return t&&(i=void 0!==t.manually?t.manually:Boolean(t.originalEvent&&t.currentTarget===e),t.manually=i),i}}}.call(t,i,t,e))||(e.exports=n)},"./bundles/oroinventory/js/app/views/quantity-editor-view.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroform/js/app/views/editor/number-editor-view.js"),n=i("./bundles/oroproduct/js/app/quantity-helper.js"),s=t.extend({className:"decimals-number-editor",numberOfDecimals:null,constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){void 0!==e.decimalsField&&(e.decimals=parseInt(e.model.get(e.decimalsField)));const t=e.validationRules.DecimalsNumber;if(void 0!==t&&void 0!==t.decimalsField){const i=parseInt(e.model.get(t.decimalsField));t.decimals=i,this.numberOfDecimals=i}s.__super__.initialize.call(this,e)},formatRawValue:function(e){return n.formatQuantity(e,this.numberOfDecimals,!0,!0)},parseRawValue:function(e){return n.getQuantityNumberOrDefaultValue(e,NaN)},getValue:function(){const e=this.$("input[name=value]").val();if(""===e)return 0;const t=this.parseRawValue(e);return!1===t?NaN:t}});return s}.call(t,i,t,e))||(e.exports=n)},"./bundles/oromarketinglist/js/app/components/columns-component.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/extend/jquery.js"),n=i("./bundles/oroui/js/extend/underscore.js"),s=i("./bundles/oroui/js/mediator.js"),o=i("./bundles/fosjsrouting/js/router.js"),r={};let l,a;const d=function(e){!function(e){const i=t("<ul/>");n.each(e,(function(e){i.append(t("<li/>").html(e.label))})),a.html(i).closest(".alert").toggleClass("has-fields",e.length>0)}(e),function(e){n.each(e,(function(e){r[e.name]=e.contact_information_type}))}(e)},c=function(e,i,n){let s;if(n){"phone"===n?s="fa-phone":"email"===n&&(s="fa-envelope");const o=i.find('[data-cid="'+e.cid+'"] .name-cell');!o.hasClass("has-icon")&&s&&o.addClass("has-icon").prepend(t("<span></span>",{"aria-hidden":"true",class:"icon "+s}))}};return function(e){const i=t(e.formSelector);l=i.find(e.entityChoiceSelector),a=i.find(e.fieldsChoiceSelector),n.isEmpty(e.contactInformationFields)||d(e.contactInformationFields),l.on("change",(function(e){var i;(i=e.val)&&t.ajax({url:o.generate("oro_api_entity_marketinglist_contact_information_fields"),data:{entity:i},success:d})})),s.on("items-manager:table:add:item-container items-manager:table:change:item-container",(function(e,i,n){!function(e,i){const n=e.get("name");r.hasOwnProperty(n)?c(e,i,r[n]):n.indexOf(":")>-1&&t.ajax({url:o.generate("oro_api_contact_marketinglist_information_field_type"),data:{entity:l.select2("val"),field:n},success:function(t){r[n]=t,c(e,i,r[n])}})}(i,n)}))}}.call(t,i,t,e))||(e.exports=n)},"./bundles/oromarketinglist/js/app/components/grid-linker.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/extend/underscore.js"),n=i("./bundles/oroui/js/mediator.js");return function(e){t.each(e,(function(e){n.on("datagrid:afterRemoveRow:"+e.main,(function(){n.trigger("datagrid:doRefresh:"+e.secondary)}))}))}}.call(t,i,t,e))||(e.exports=n)},"./bundles/oroorder/js/app/components/data-load-component.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/extend/underscore.js"),n=i("./bundles/oroui/js/mediator.js");return i("./bundles/oroui/js/app/components/base/component.js").extend({options:{events:{before:"entry-point:order:load:before",load:"entry-point:order:load",after:"entry-point:order:load:after",listenersOff:"entry-point:listeners:off",listenersOn:"entry-point:listeners:on"},entityData:{}},constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.options=t.extend(this.options,e),this.listenTo(n,{"page:afterChange":this.updateOrderData})},updateOrderData:function(){n.trigger(this.options.events.listenersOff),n.trigger(this.options.events.before),n.trigger(this.options.events.load,this.options.entityData),n.trigger(this.options.events.after),n.trigger(this.options.events.listenersOn)}})}.call(t,i,t,e))||(e.exports=n)},"./bundles/oroorder/js/app/components/entry-point-component.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/extend/jquery.js"),n=i("./bundles/fosjsrouting/js/router.js"),s=i("./bundles/oroui/js/mediator.js"),o=i("./bundles/oroui/js/app/components/base/component.js").extend({options:{route:null,routeParams:{},events:{before:"entry-point:order:load:before",load:"entry-point:order:load",after:"entry-point:order:load:after",trigger:"entry-point:order:trigger",triggerDelayed:"entry-point:order:trigger-delayed",init:"entry-point:order:init",listenersOff:"entry-point:listeners:off",listenersOn:"entry-point:listeners:on",interruptPostpone:"entry-point:interrupt:postpone"},triggerTimeout:1500},listenerEnabled:null,postponedEntryPointAction:!1,timeoutId:null,listen(){return{[`${this.options.events.init} mediator`]:"listenerOn",[`${this.options.events.trigger} mediator`]:"callEntryPoint",[`${this.options.events.triggerDelayed} mediator`]:"callEntryPointDelayed",[`${this.options.events.listenersOff} mediator`]:"listenerOff",[`${this.options.events.listenersOn} mediator`]:"listenerOn",[`${this.options.events.interruptPostpone} mediator`]:"interruptPostpone"}},constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.options=t.extend(!0,{},this.options,e||{}),this.request=null,this.initializeListener()},initializeListener:function(){this.options._sourceElement.on("change","[data-entry-point-trigger]",this.callEntryPoint.bind(this)).on("keyup","[data-entry-point-trigger]",this.callEntryPointDelayed.bind(this))},interruptPostpone(){this.postponedEntryPointAction=!1},listenerOff:function(){this.listenerEnabled=!1},listenerOn:function(){this.listenerEnabled=!0,this.postponedEntryPointAction&&(this.postponedEntryPointAction=!1,this.callEntryPoint())},clearTimeout:function(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)},callEntryPointDelayed:function(e){!this.listenerEnabled&&e instanceof t.Event?this.postponedEntryPointAction=!0:(s.trigger(this.options.events.before),this.clearTimeout(),this.timeoutId=setTimeout((()=>{this._sendEntryPointAjax()}).bind(this),this.options.triggerTimeout))},callEntryPoint:function(e){!this.listenerEnabled&&e instanceof t.Event?this.postponedEntryPointAction=!0:(s.trigger(this.options.events.before),this._sendEntryPointAjax())},_sendEntryPointAjax:function(){if(this.request&&4!==this.request.readyState)return;const e=this;this.listenerOff(),this.request=t.post(n.generate(this.options.route,this.options.routeParams),t.param(this.getData())).done((function(t){s.trigger(e.options.events.load,t)})).fail((function(){s.trigger(e.options.events.load,{})})).always((function(){s.trigger(e.options.events.after),e.clearTimeout(),e.request=null,e.listenerOn()}))},getData:function(){const e=this.options._sourceElement.find("input:disabled[data-entry-point-trigger]").removeAttr("disabled"),t=this.options._sourceElement.serializeArray();return e.attr("disabled","disabled"),t},dispose:function(){this.disposed||(this.listenerOff(),o.__super__.dispose.call(this))}});return o}.call(t,i,t,e))||(e.exports=n)},"./bundles/oroorder/js/app/components/notes-component.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/extend/jquery.js"),n=i("./bundles/oroui/js/extend/underscore.js");return i("./bundles/oroui/js/app/components/base/component.js").extend({options:{selectors:{edit:".notes-widget-edit",preview:".notes-widget-preview",editBtn:".notes-widget-edit-btn",addBtn:".notes-widget-add-btn",removeBtn:".notes-widget-remove-btn"},template:"#order-notes-widget"},template:null,$el:null,$notes:null,$edit:null,$preview:null,$addBtn:null,$editBtn:null,$removeBtn:null,constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.options=t.extend(!0,{},this.options,e||{}),this.$el=e._sourceElement,this.template=n.template(t(this.options.template).text()),this.initUI()},initUI:function(){this.$notes=this.$el.find("textarea"),this.$el.html(this.template()),this.$edit=this.$el.find(this.options.selectors.edit),this.$preview=this.$el.find(this.options.selectors.preview),this.$addBtn=this.$el.find(this.options.selectors.addBtn),this.$editBtn=this.$el.find(this.options.selectors.editBtn),this.$removeBtn=this.$el.find(this.options.selectors.removeBtn),this.$edit.prepend(this.$notes),this.$notes.change(this.change.bind(this)),this.$notes.blur(this.change.bind(this)),this.$preview.click(this.addNotes.bind(this)),this.$addBtn.click(this.addNotes.bind(this)).mousedown(this.addNotes.bind(this)),this.$editBtn.click(this.addNotes.bind(this)).mousedown(this.addNotes.bind(this)),this.$removeBtn.click(this.removeNotes.bind(this)).mousedown(this.removeNotes.bind(this)),this.changed(),this.$el.show()},hasVal:function(){return this.$notes.val().replace(/\s/g,"").length>0},change:function(e){e.relatedTarget===this.$addBtn.get(0)||e.relatedTarget===this.$editBtn.get(0)?this.addNotes(e):e.relatedTarget===this.$removeBtn.get(0)?this.removeNotes(e):this.changed()},changed:function(){this.hasVal()?this.showPreview():this.removeNotes()},addNotes:function(e){this.$notes.show().focus(),this.$preview.hide(),this.$removeBtn.show(),this.$addBtn.hide(),this.$editBtn.hide(),e&&e.preventDefault()},removeNotes:function(e){this.$notes.val(""),this.showPreview(),e&&e.preventDefault()},showPreview:function(){this.hasVal()?(this.$preview.text(this.$notes.val()).show(),this.$addBtn.hide(),this.$editBtn.show()):(this.$notes.val(""),this.$preview.text("").hide(),this.$addBtn.show(),this.$editBtn.hide()),this.$notes.hide(),this.$removeBtn.hide()}})}.call(t,i,t,e))||(e.exports=n)},"./bundles/oroorder/js/app/components/products-prices-component.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/mediator.js"),n=i("./bundles/oropricing/js/app/components/products-prices-component.js").extend({constructor:function e(t){e.__super__.constructor.call(this,t)},loadProductsTierPrices:function(e,i){t.once("entry-point:order:load",(function(e){i(e.tierPrices||{})}))},reloadPrices:function(){n.__super__.reloadPrices.call(this),t.trigger("entry-point:order:trigger")}});return n}.call(t,i,t,e))||(e.exports=n)},"./bundles/oroorder/js/app/components/related-data-component.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/extend/jquery.js"),n=i("./bundles/oroui/js/mediator.js"),s=i("./bundles/oroui/js/app/components/base/component.js"),o=i("./bundles/orofrontend/js/app/views/form-view.js");return s.extend({options:{},constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.options=t.extend(!0,{},this.options,e||{}),this.view=new o(this.options),this.listenTo(n,{"customer-customer-user:change":this.onChangeCustomerUser,"entry-point:order:load":this.loadRelatedData})},onChangeCustomerUser:function(){n.trigger("order:load:related-data"),n.trigger("entry-point:order:trigger")},loadRelatedData:function(e){n.trigger("order:loaded:related-data",e)}})}.call(t,i,t,e))||(e.exports=n)},"./bundles/oroorder/js/app/components/select-switch-input-component.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/extend/jquery.js"),n=i("./bundles/oroui/js/extend/underscore.js"),s=i("./bundles/oroui/js/app/components/base/component.js").extend({MODE_SELECT:"select",MODE_INPUT:"input",requiredOptions:["mode","choices","value","_sourceElement"],$el:null,$mode:null,$choices:null,$select:null,$input:null,$select_to_input_btn:".select-to-input-btn",$input_to_select_btn:".input-to-select-btn",constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){const i=n.filter(this.requiredOptions,n.negate(e.hasOwnProperty.bind(e)));if(i.length)throw new Error("Following properties are required but weren't passed: "+i.join(", ")+".");this.$el=e._sourceElement,this.$mode=e.mode,this.$choices=e.choices,this.$select=this.$el.find(".selector");const s=this.$el.find("select").attr("name"),o=this.$el.find("select").attr("id"),r=this.$el.find("select").attr("data-validation");this.$input=t('<input type="text" style="width: 100px; margin-left: 5px;">').attr("id",o).attr("name",s),this.$el.find(".input-container").prepend(this.$input),this.$el.find(".input-container").attr("data-validation",r),this.$mode===this.MODE_SELECT?this._onInputToSelect():this.$mode===this.MODE_INPUT&&(this._onSelectToInput(),this.$el.find("input").val(e.value)),this.$el.find(this.$select_to_input_btn).on("click",this._onSelectToInput.bind(this)),this.$el.find(this.$input_to_select_btn).on("click",this._onInputToSelect.bind(this))},_onSelectToInput:function(e){void 0!==e&&e.preventDefault(),this.$mode=this.MODE_INPUT,this.$el.find(".validation-failed").remove(),this.$el.find("select").prop("disabled","disabled"),this.$el.find(".selector").hide(),this.$el.find(this.$select_to_input_btn).hide(),this.$el.find("input").prop("disabled",!1).val("").show(),this.$el.find(this.$input_to_select_btn).show()},_onInputToSelect:function(e){void 0!==e&&e.preventDefault(),this.$mode=this.MODE_SELECT,this.$el.find(".validation-failed").remove(),this.$el.find("input").prop("disabled","disabled").hide(),this.$el.find(this.$input_to_select_btn).hide(),this.$el.find("select").prop("disabled",!1),this.$el.find(".selector").show(),this.$el.find(this.$select_to_input_btn).show()},dispose:function(){this.disposed||(this.$el.find(this.$select_to_input_btn).off(),this.$el.find(this.$input_to_select_btn).off(),s.__super__.dispose.call(this))}});return s}.call(t,i,t,e))||(e.exports=n)},"./bundles/oroorder/js/app/components/totals-component.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/mediator.js"),n=i("./bundles/oroui/js/extend/jquery.js"),s=i("./bundles/oroui/js/extend/underscore.js"),o=i("./bundles/oropricing/js/app/components/totals-component.js"),r=i("./bundles/oroui/js/app/views/loading-mask-view.js"),l=o.extend({currentTotals:{},constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this._deferredInit(),n.when(...s.compact(e._subPromises)).then((()=>{this.handleSubLayoutInit(),this._resolveDeferredInit()})),this.options=s.defaults(e||{},this.options)},handleSubLayoutInit:function(){this.currentTotals=this._getDefaultTotals(),this.listenTo(t,{"entry-point:order:load:before":this.showLoadingMask,"entry-point:order:load":this.setTotals,"entry-point:order:load:after":this.hideLoadingMask,"line-items-totals:update":this.updateTotals,"shipping-cost:updated":this.setTotals,"order:totals:get:current":this.getCurrentTotals}),this.$totals=this.options._sourceElement.find(this.options.selectors.totals),this.resolveTemplates(),this.loadingMaskView=new r({container:this.options._sourceElement}),this.setTotals(this.options)},_getDefaultTotals:function(){return{totals:{total:{},subtotals:{}}}},getCurrentTotals:function(e){e.result=this.currentTotals},setTotals:function(e){this.currentTotals=s.defaults(e,this._getDefaultTotals()).totals,t.trigger("entry-point:order:trigger:totals",this.currentTotals),l.__super__.triggerTotalsUpdateEvent.call(this,e.totals),this.render(this.currentTotals)},updateTotals:function(){t.trigger("entry-point:order:trigger")}});return l}.call(t,i,t,e))||(e.exports=n)},"./bundles/oroorder/js/app/views/address-view.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/extend/jquery.js"),n=i("./bundles/oroui/js/extend/underscore.js"),s=i("./bundles/oroui/js/mediator.js"),o=i("./bundles/oroui/js/app/views/loading-mask-view.js");return i("./bundles/oroui/js/app/views/base/view.js").extend({options:{enterManuallyValue:"0",type:"",selectors:{address:"",subtotalsFields:[]}},ftid:"",$fields:null,$address:null,useDefaultAddress:null,fieldsByName:null,loadingMaskView:null,listen:{"customer-customer-user:change mediator":"handleCustomerChange","order:load:related-data mediator":"loadingStart","order:loaded:related-data mediator":"loadedRelatedData"},constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.options=t.extend(!0,{},this.options,e||{}),this.initLayout().done(this.handleLayoutInit.bind(this)),this.loadingMaskView=new o({container:this.$el})},handleCustomerChange:function(){this._fillAddressFields({label:""}),this.useDefaultAddress=!0},handleLayoutInit:function(){const e=this;this.ftid=this.$el.find("div[data-ftid]:first").data("ftid"),this.useDefaultAddress=!0,this.$fields=this.$el.find(":input[data-ftid]").filter(":not("+this.options.selectors.address+")"),this.fieldsByName={},this.$fields.each((function(){const i=t(this);i.val().length>0&&(e.useDefaultAddress=!1);const n=e.normalizeName(i.data("ftid").replace(e.ftid+"_",""));e.fieldsByName[n]=i})),this.options.selectors.subtotalsFields.length>0&&(n.each(this.options.selectors.subtotalsFields,(function(e){t(e).attr("data-entry-point-trigger",!0)})),s.trigger("entry-point:order:init")),this.options.selectors.address?(this.setAddress(this.$el.find(this.options.selectors.address)),this.$fields.each((function(){const e=t(this);e.data("select2")&&e.data("selected-data",e.select2("val"))})),this.customerAddressChange()):this._setReadOnlyMode(!0)},normalizeName:function(e){for(let t=1,i=(e=e.split("_")).length;t<i;t++)e[t]&&(e[t]=e[t][0].toUpperCase()+e[t].substr(1));return e.join("")},setAddress:function(e){this.$address=e;const t=this;this.$address.change((function(e){t.useDefaultAddress&&t.$address.data("default")&&t.$address.data("default")!==t.$address.val()&&(t.useDefaultAddress=!1),t.customerAddressChange(e)}))},customerAddressChange:function(e){if(this.$address.val()&&this.$address.val()!==this.options.enterManuallyValue){this._setReadOnlyMode(!0);const t=this.$address.data("addresses")[this.$address.val()]||null;t&&this._fillAddressFields(t,void 0!==e)}else{this._setReadOnlyMode(!1);const e=this.fieldsByName.country;e&&e.trigger("redraw")}},_fillAddressFields:function(e,t=!0){const i=this;n.each(e,(function(e,s){n.isObject(e)&&(e=n.first(n.values(e)));const o=i.fieldsByName[i.normalizeName(s)]||null;o&&o.val()!==(e||"")&&(o.val(e),o.data("select2")&&(o.data("selected-data",e),t&&o.change()))}))},_setReadOnlyMode:function(e){this.$fields.each((function(){t(this).prop("readonly",e).inputWidget("refresh")}))},loadingStart:function(){this.loadingMaskView.show()},loadingEnd:function(){this.loadingMaskView.hide()},loadedRelatedData:function(e){const i=e[this.options.type+"Address"]||null;if(!i)return void this.loadingEnd();const n=this.$address;this.setAddress(t(i)),n.parent().trigger("content:remove").empty().append(this.$address),this.useDefaultAddress&&this.$address.data("default")&&this.$address.val(this.$address.data("default")).change(),this.initLayout().done(this.loadingEnd.bind(this))}})}.call(t,i,t,e))||(e.exports=n)},"./bundles/oroorder/js/app/views/currency-select-view.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/app/views/base/view.js"),n=i("./bundles/oroui/js/mediator.js"),s=i("./bundles/oroui/js/extend/underscore.js"),o=i("./bundles/oroui/js/extend/jquery.js"),r=t.extend({$select:{},options:{selectors:{currency:'select[name$="[currency]"]'}},events:{'change select[name$="[currency]"]':"_triggerUpdateTotals"},listen:{"pricing:currency:load mediator":"_updateCurrency","pricing:refresh:products-tier-prices:before mediator":"_updateContext"},constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.options=s.defaults(e||{},this.options),this.$select=o(this.options.el).find(this.options.selectors.currency),r.__super__.initialize.call(this,e)},_updateContext:function(e){e.requestAttributes.currencyId=this.$select.val()},_updateCurrency:function(e){e({currency:this.$select.val()})},_triggerUpdateTotals:function(){this._resetEstimatedShippingAmount(),n.trigger("update:totals"),n.trigger("pricing:load:prices"),n.trigger("entry-point:order:trigger"),n.trigger("pricing:currency:changed",{currency:this.$select.val()})},_resetEstimatedShippingAmount:function(){this.$el.closest("form").find('input[name*="[estimatedShippingCostAmount]"]').val(null)}});return r}.call(t,i,t,e))||(e.exports=n)},"./bundles/oroorder/js/app/views/discount-collection-view.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/extend/jquery.js"),n=i("./bundles/oroui/js/extend/underscore.js"),s=i("./bundles/oroui/js/mediator.js"),o=i("./bundles/oroui/js/app/views/base/view.js"),r=i("./bundles/oroui/js/tools.js"),l=i("./bundles/oroui/js/app/views/loading-mask-view.js"),a=i("./bundles/orolocale/js/formatter/number.js");return o.extend({options:{discountType:null,totalType:null,dialogAlias:"add-order-discount-dialog",percentType:null,selectors:{discountsSumSelector:"[data-ftid=oro_order_type_discountsSum]",deleteButton:'a[data-role="remove"]',hiddenCollection:'[data-role="hidden-collection"]',hiddenInputsForIndex:'input[name*="[INDEX]"]',parentForLoadingMask:".responsive-section",formFields:{description:"[data-role=description]",type:"[data-role=type]",percent:"[data-role=percent]",amount:"[data-role=amount]",value:"[data-role=value]"}}},listen:{"totals:update mediator":"updateSumAndValidators","widget_initialize mediator":"attachDialogListeners","entry-point:order:load mediator":"refreshCollectionBlock"},constructor:function e(i){this.options=t.extend(!0,{},this.options,i||{}),e.__super__.constructor.call(this,i)},events:function(){const e={};return e["click "+this.options.selectors.deleteButton]="onDeleteClick",e},refreshCollectionBlock:function(e){if("discounts"in e){const i=t(e.discounts).html();this.$el.html(i),this.$el.trigger("content:changed")}this._hideLoading()},updateSumAndValidators:function(e){const i=this.$el.closest("form").find(this.options.selectors.discountsSumSelector),s=i.data("validation");let o=0,r=0;const l=this;n.each(e.subtotals,(function(e){e.type===l.options.discountType&&(o+=e.amount),e.type===l.options.totalType&&(r=e.amount)})),o=a.formatDecimal(o),i.val(o),s&&!n.isEmpty(s.Range)&&(s.Range.max=a.formatDecimal(r));const d=t(i.closest("form")).validate();d&&d.element(i)},attachDialogListeners:function(e){const t=this;"add-order-discount-dialog"===e.getAlias()?e.on("contentLoad",(function(){e.$el.on("submit",t.onAddSubmit.bind(t,e))})):"edit-order-discount-dialog"===e.getAlias()&&e.on("contentLoad",(function(){t._populateDialogForm(this),e.$el.on("submit",t.onEditSubmit.bind(t,e))}))},onAddSubmit:function(e,t){this._createInputsFromSubmission(e.form),this._showLoading(),e.remove(),s.trigger("entry-point:order:trigger"),t.preventDefault()},onEditSubmit:function(e,t){this._updateInputsFromSubmission(e),this._showLoading(),e.remove(),s.trigger("entry-point:order:trigger"),t.preventDefault()},onDeleteClick:function(e){const i=t(e.target).data("element-index");this._getSelectedHiddenInputs(i).remove(),this._showLoading(),s.trigger("entry-point:order:trigger")},_populateCollectionInputsWithSubmission:function(e,i){n.each(this.options.selectors.formFields,((n,s)=>{if("value"!==s){const s=t(n,e).val();i.filter(n).attr("value",s)}}),e)},_createInputsFromSubmission:function(e){const t=this._createNewHiddenCollectionInputs();this._populateCollectionInputsWithSubmission(e,t),this.$(this.options.selectors.hiddenCollection).append(t)},_updateInputsFromSubmission:function(e){const t=this._getSelectedHiddenInputs(e.options.dialogOptions.collectionElementIndex);this._populateCollectionInputsWithSubmission(e.form,t)},_createNewHiddenCollectionInputs:function(){const e=this.$(this.options.selectors.hiddenCollection).data("prototype"),i=this.$(this.options.selectors.hiddenCollection).data("prototype-name"),n=this.$(this.options.selectors.hiddenCollection).data("last-index"),s=e.replace(r.safeRegExp(i,"ig"),n);return t(s)},_populateDialogForm:function(e){const t=this._getSelectedHiddenInputs(e.options.dialogOptions.collectionElementIndex);this._setDialogFormInputs(t,e),this._triggerFormValueWidgetRefresh(e)},_getSelectedHiddenInputs:function(e){const t=this.options.selectors.hiddenInputsForIndex.replace(r.safeRegExp("INDEX","ig"),e);return this.$el.find(t)},_setDialogFormInputs:function(e,i){n.each(this.options.selectors.formFields,((n,s)=>{let o;if("value"===s){const s=i.$el.find(this.options.selectors.formFields.type).val();o=this.options.percentType===s?t(e).filter(this.options.selectors.formFields.percent).val():t(e).filter(this.options.selectors.formFields.amount).val(),i.$el.find(n).val(o)}else o=t(e).filter(n).val(),i.$el.find(n).val(o)}),i)},_triggerFormValueWidgetRefresh:function(e){e.$el.find(this.options.selectors.formFields.type).trigger("change")},_showLoading:function(){this._ensureLoadingMaskLoaded(),this.subview("loadingMask").isShown()||this.subview("loadingMask").show()},_hideLoading:function(){this._ensureLoadingMaskLoaded(),this.subview("loadingMask").isShown()&&this.subview("loadingMask").hide()},_ensureLoadingMaskLoaded:function(){this.subview("loadingMask")||this.subview("loadingMask",new l({container:this.$el.parents(this.options.selectors.parentForLoadingMask)}))}})}.call(t,i,t,e))||(e.exports=n)},"./bundles/oroorder/js/app/views/discount-item-view.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/extend/jquery.js"),n=i("./bundles/oroui/js/extend/underscore.js"),s=i("./bundles/orolocale/js/formatter/number.js"),o=i("./bundles/oroui/js/app/views/base/view.js"),r=i("./bundles/oroui/js/mediator.js"),l=o.extend({discountItemHint:i("../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/oroorder/js/app/templates/discount-item-hint.html"),options:{valueInput:"[data-ftid$=value]",typeInput:"[data-ftid$=type]",percentInput:"[data-ftid$=percent]",amountInput:"[data-ftid$=amount]",descriptionInput:"[data-ftid$=description]",valueCalculatedSelector:".discount-item-value-calculated",percentTypeValue:null,totalType:null,discountType:null},$valueInputElement:null,$typeInputElement:null,$percentInputElement:null,$amountInputElement:null,constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.options=t.extend(!0,{},this.options,e||{}),this.$valueInputElement=this.$el.find(this.options.valueInput).attr("data-validation",""),this.$typeInputElement=this.$el.find(this.options.typeInput),this.$percentInputElement=this.$el.find(this.options.percentInput),this.$amountInputElement=this.$el.find(this.options.amountInput),this._initValueValidation(),this.$el.on("change",this.options.valueInput,this.onValueInputChange.bind(this)),this.$el.on("change",this.options.typeInput,this.onValueInputChange.bind(this))},onValueInputChange:function(e){const t=this.$valueInputElement.val();this.$typeInputElement.val()===this.options.percentTypeValue?this.$percentInputElement.val(t):this.$amountInputElement.val(t),this._initValueValidation(),this._updateValidatorRules();const i=this.$valueInputElement.closest("form").validate();i.element(this.$valueInputElement),i.numberOfInvalids()||this._updateAmounts(s.unformatStrict(t))},_initValueValidation:function(){this.$typeInputElement.val()===this.options.percentTypeValue?this.$valueInputElement.data("validation",this.$percentInputElement.data("validation")):this.$valueInputElement.data("validation",this.$amountInputElement.data("validation")),this.$valueInputElement.data("validation",n.extend({NotBlank:{}},this.$valueInputElement.data("validation")))},_updateValidatorRules:function(){const e=this.$valueInputElement.rules(),t=n.result(e,"Range",[]),i=this._getTotal();for(let e=0;e<t.length;++e)t[e].max=i},_getTotal:function(){const e={};r.trigger("order:totals:get:current",e);const t=e.result;let i=0;const s=this;return n.each(t.subtotals,(function(e){e.type===s.options.totalType&&(i=parseFloat(e.amount))})),i},_updateAmounts:function(e){if(!e)return;let t=0,i=0;const n=this._getTotal();this.$typeInputElement.val()===this.options.percentTypeValue?(t=(n*e/100).toFixed(2),i=e):(t=e,i=n>0?(e/n*100).toFixed(2):0),this.$el.find(this.options.valueCalculatedSelector).html(this.discountItemHint({NumberFormatter:s,amount:t,currency:this.options.currency,percent:i})),this.$amountInputElement.val(s.formatDecimal(t,{grouping_used:!1})),this.$percentInputElement.val(s.formatDecimal(i,{grouping_used:!1}))},dispose:function(){this.disposed||l.__super__.dispose.call(this)}});return l}.call(t,i,t,e))||(e.exports=n)},"./bundles/oroorder/js/app/views/kit-item-line-item-view.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a});var n=i("./bundles/oroui/js/mediator.js"),s=i.n(n),o=i("./bundles/oroproduct/js/app/views/line-item-product-view.js"),r=i.n(o);const l=r().extend({optionNames:r().prototype.optionNames.concat(["minimumQuantity","maximumQuantity"]),elements:{id:'[data-name="field__product"]',product:'[data-name="field__product"]',quantity:'[data-name="field__quantity"]',priceValue:'[data-name="field__value"]',currency:'[data-name="field__currency"]',isPriceChanged:'[data-name="field__is-price-changed"]'},listen:{"pricing:product-price:lock mediator":"lineItemProductPriceLock","pricing:product-price:unlock mediator":"lineItemProductPriceUnlock"},modelElements:{id:"id",product:"product",quantity:"quantity",priceValue:"priceValue",currency:"currency"},modelAttr:{id:"",product:"",quantity:null,currency:"",unit:"",product_units:[]},modelEvents:{...r().prototype.modelEvents,"id onProductChange":["change","onProductChange"],"id resetChecksum":["change","resetChecksum"],"quantity resetChecksum":["change","resetChecksum"],"priceValue resetChecksum":["change","resetChecksum"]},lineItemModel:null,minimumQuantity:1,maximumQuantity:null,constructor:function e(t){this.setModelValueFromElement=this.setModelValueFromElement.bind(this),e.__super__.constructor.call(this,t)},initialize(e){if(this.lineItemModel=e.productModel||null,null===this.lineItemModel)throw Error('Option "productModel" cannot be null');l.__super__.initialize.call(this,e)},handleLayoutInit(e){this.entryPointTriggers([this.getElement("product"),this.getElement("quantity"),this.getElement("priceValue")]),l.__super__.handleLayoutInit.call(this,e)},entryPointTriggers(e){for(const t of e)t.attr("data-entry-point-trigger",!0);s().trigger("entry-point:order:init")},onProductChange(){this.model.get("id")?(this.resetData(),this.getElement("quantity").removeAttr("disabled",!1),this.getElement("priceValue").removeAttr("disabled",!1)):(this.model.set("quantity",null,{silent:!0}),this.model.set("priceValue",null,{silent:!0}),this.getElement("quantity").attr("disabled",!0).val(null),this.getElement("priceValue").attr("disabled",!0).val(null),this.getElement("quantity").valid(),this.getElement("priceValue").valid())},resetChecksum(){this.lineItemModel.get("checksum")&&this.lineItemModel.set("checksum","")},resetData(){s().trigger("entry-point:listeners:off"),this.getElement("priceValue").addClass("matched-price"),this.model.set("quantity",this.minimumQuantity),this.getElement("quantity").valid(),s().trigger("entry-point:order:trigger"),s().trigger("entry-point:listeners:on")},lineItemProductPriceLock(){this.getElement("isPriceChanged").val(1)},lineItemProductPriceUnlock(){this.getElement("isPriceChanged").val(0)},modelToViewElementValueTransform:e=>e,viewToModelElementValueTransform:e=>e}),a=l},"./bundles/oroorder/js/app/views/line-item-view.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/extend/jquery.js"),n=i("./bundles/oroui/js/extend/underscore.js"),s=i("./bundles/oroui/js/mediator.js"),o=i("./bundles/oroproduct/js/app/components/product-unit-component.js"),r=i("./bundles/oroproduct/js/app/views/line-item-product-view.js"),l=i("./bundles/oroui/js/app/views/loading-mask-view.js"),a=r.extend({elements:n.extend({},r.prototype.elements,{id:'.order-line-item-type [data-name="field__product"]:first',product:'.order-line-item-type [data-name="field__product"]:first',quantity:'.order-line-item-quantity [data-name="field__quantity"]:first',unit:'.order-line-item-quantity [data-name="field__product-unit"]:first',isPriceChanged:'.order-line-item-price [data-name="field__is-price-changed"]',priceValue:'.order-line-item-price [data-name="field__value"]',kitItemLineItems:".order-line-item-type .order-line-item-kit-item-line-items"}),listen:{"pricing:product-price:lock mediator":"lineItemProductPriceLock","pricing:product-price:unlock mediator":"lineItemProductPriceUnlock"},modelAttr:n.extend({},r.prototype.modelAttr,{checksum:""}),options:{fullName:"",selectors:{productSelector:'.order-line-item-type-product [data-name="field__product"]',quantitySelector:".order-line-item-quantity input",unitSelector:".order-line-item-quantity select",productSku:".order-line-item-sku .order-line-item-type-product",productType:".order-line-item-type-product",freeFormType:".order-line-item-type-free-form"},freeFormUnits:null},$form:null,$fields:null,fieldsByName:null,loadingMaskView:null,constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.options=t.extend(!0,{},this.options,e||{}),a.__super__.initialize.call(this,e),this.delegate("click",".removeLineItem",this.removeRow),this.initializeUnitLoader(),this.loadingMaskView=new l({container:this.getElement("kitItemLineItems")}),this.listenTo(s,{"entry-point:order:load":this.onOrderEntryPoint.bind(this)})},onOrderEntryPoint:function(e){this.model.set("checksum",e.checksum[this.options.fullName]||"",{silent:!0})},showLoadingMask:function(){this.loadingMaskView.show()},hideLoadingMask:function(){this.loadingMaskView.hide()},initializeUnitLoader:function(){const e={_sourceElement:this.$el,productSelector:this.options.selectors.productSelector,quantitySelector:this.options.selectors.quantitySelector,unitSelector:this.options.selectors.unitSelector,loadingMaskEnabled:!1,dropQuantityOnLoad:!1,defaultValues:this.options.freeFormUnits,model:this.model};this.subview("productUnitComponent",new o(n.extend({},e)))},handleLayoutInit:function(e){this.$form=this.$el.closest("form"),this.$fields=this.$el.find(":input[name]"),this.fieldsByName={},this.$fields.each(((e,i)=>{this.fieldsByName[this.formFieldName(i)]=t(i)})),this.initProduct(),this.fieldsByName.currency=this.$form.find(':input[data-ftid="'+this.$form.attr("name")+'_currency"]'),this.subtotalFields([this.fieldsByName.quantity,this.fieldsByName.productUnit,this.fieldsByName.priceValue,this.fieldsByName.priceType]),this.initTypeSwitcher(),a.__super__.handleLayoutInit.call(this,e)},initTypeSwitcher:function(){const e=this.$el.find("div"+this.options.selectors.productType),i=this.$el.find("div"+this.options.selectors.freeFormType),n=function(){e.hide(),i.show()},s=function(){i.hide(),e.show()};i.find("a"+this.options.selectors.productType).click((()=>{s(),i.find(":input").val("").change()})),e.find("a"+this.options.selectors.freeFormType).click((()=>{n(),t(this.getElement("product")).inputWidget("val",""),t(this.getElement("product")).change()})),""!==this.fieldsByName.freeFormProduct.val()?n():s()},formFieldName:function(e){let t="";const i=e.name.replace(/.*\[[0-9]+\]/,"").replace(/[\[\]]/g,"_").split("_");let n;for(let e=0,s=i.length;e<s;e++)n=i[e],n.length&&(0===t.length?t+=n:t+=n[0].toUpperCase()+n.substr(1));return t},subtotalFields:function(e){n.each(e,(function(e){t(e).attr("data-entry-point-trigger",!0)})),s.trigger("entry-point:order:init")},removeRow:function(){this.$el.trigger("content:remove"),this.remove(),s.trigger("entry-point:order:trigger")},resetData:function(){this.model.set("quantity",1),this.fieldsByName.hasOwnProperty("priceValue")&&this.fieldsByName.priceValue.val(null).addClass("matched-price")},initProduct:function(){this.getElement("product")&&this.getElement("product").on("change",this.onProductChange.bind(this))},onProductChange:function(){this.resetData();const e=this.getElement("product").inputWidget("data")||{};this.$el.find(this.options.selectors.productSku).text(e.sku||null),s.once("entry-point:order:load:before",this.showLoadingMask.bind(this)),s.once("entry-point:order:load",this.updateKitItemLineItems.bind(this)),s.once("entry-point:order:load:after",this.hideLoadingMask.bind(this))},updateKitItemLineItems:function(e){s.trigger("entry-point:interrupt:postpone"),this.getElement("kitItemLineItems").html(e.kitItemLineItems[this.options.fullName]||"").trigger("content:changed",{onInitialized:()=>{s.trigger("entry-point:listeners:off"),s.trigger("pricing:refresh:products-tier-prices",e.tierPrices),s.trigger("entry-point:order:trigger")}})},lineItemProductPriceLock:function(){this.getElement("isPriceChanged").val(1)},lineItemProductPriceUnlock:function(){this.getElement("isPriceChanged").val(0)}});return a}.call(t,i,t,e))||(e.exports=n)},"./bundles/oroorder/js/app/views/line-items-view.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/extend/jquery.js"),n=i("./bundles/oroui/js/extend/underscore.js"),s=i("./bundles/oroui/js/mediator.js"),o=i("./bundles/oroorder/js/app/components/products-prices-component.js");return i("./bundles/oroui/js/app/views/base/view.js").extend({options:{tierPrices:null,currency:null,customer:null,subtotalValidationSelector:"[data-ftid=oro_order_type_subtotalValidation]",totalValidationSelector:"[data-ftid=oro_order_type_totalValidation]",subtotalType:null},$form:null,$currency:null,constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.options=t.extend(!0,{},this.options,e||{}),this.initLayout({prices:this.options.tierPrices}).done(this.handleLayoutInit.bind(this)),this.listenTo(s,{"totals:update":this.updateValidators})},handleLayoutInit:function(){this.$el.find(".add-list-item").mousedown((function(e){t(this).click()})),this.subview("productsPricesComponent",new o({_sourceElement:this.$el,tierPrices:this.options.tierPrices,currency:this.options.currency,customer:this.options.customer}))},updateValidators:function(e){const t=this.$el.closest("form").find(this.options.subtotalValidationSelector),i=this.$el.closest("form").find(this.options.totalValidationSelector);let s=0;const o=e.total.amount,r=this;n.each(e.subtotals,(function(e){e.type===r.options.subtotalType&&(s=e.amount)})),t.val(s),i.val(o);const l=t.closest("form").validate();l&&(l.element(t),l.element(i))}})}.call(t,i,t,e))||(e.exports=n)},"./bundles/oroorder/js/app/views/payment-term-view.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";return i("./bundles/oropaymentterm/js/app/views/payment-term-view.js").extend({listen:{"order:loaded:related-data mediator":"loadedRelatedData"},constructor:function e(t){e.__super__.constructor.call(this,t)}})}.call(t,i,t,e))||(e.exports=n)},"./bundles/oroorder/js/app/views/possible-shipping-methods-view.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/extend/jquery.js"),n=i("./bundles/oroui/js/extend/underscore.js"),s=i("./bundles/oroui/js/mediator.js"),o=i("./bundles/oroui/js/app/views/base/view.js"),r=i("./bundles/orofrontend/js/app/elements-helper.js"),l=i("./bundles/oroui/js/app/views/loading-mask-view.js"),a=i("./bundles/oroui/js/standart-confirmation.js"),d=i("../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/oroorder/js/app/templates/possible-shipping-methods-template.html"),c=i("../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/oroorder/js/app/templates/selected-shipping-method-template.html"),u=i("../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/oroorder/js/app/templates/no-shipping-methods-available.html"),p=i("./bundles/orolocale/js/formatter/number.js"),h=o.extend(n.extend({},r,{autoRender:!0,options:{events:{before:"entry-point:order:load:before",load:"entry-point:order:load",after:"entry-point:order:load:after",trigger:"entry-point:order:trigger"},savedShippingMethod:null,savedShippingMethodLabel:null,possibleShippingMethodsTemplate:d,selectedShippingMethodTemplate:c,noShippingMethodsAvailableTemplate:u},elements:{toggleBtn:'[data-role="possible_shipping_methods_btn"]',possibleShippingMethodForm:'[data-content="possible_shipping_methods_form"]',calculateShipping:'[data-name="field__calculate-shipping"]',shippingMethod:'[data-name="field__shipping-method"]',shippingMethodType:'[data-name="field__shipping-method-type"]',estimatedShippingCostAmount:'[data-name="field__estimated-shipping-cost-amount"]',overriddenShippingCostAmount:["$document",'[name*="[overriddenShippingCostAmount]"]']},elementsEvents:{toggleBtn:["click","onToggleBtnClick"],overriddenShippingCostAmount:["change","onOverriddenShippingCostChange"],possibleShippingMethodForm:["change","onShippingMethodTypeChange"],$form:["submit","onSaveForm"]},constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){h.__super__.initialize.call(this,e),this.options=t.extend(!0,{},this.options,e||{}),this.orderHasChanged=!1,this.$form=this.$el.closest("form"),this.$document=t(document),this.initializeElements(e),this.listenTo(s,{[`${this.options.events.before}`]:this.showLoadingMask,[`${this.options.events.load}`]:this.onOrderChange,[`${this.options.events.after}`]:this.hideLoadingMask})},render:function(){this.getElement("possibleShippingMethodForm").hide()},onToggleBtnClick:function(e){this.getElement("calculateShipping").val(!0),s.trigger(this.options.events.trigger)},onSaveForm:function(e){this.getElement("calculateShipping").val(!0);const t=this.getElement("$form");return t.validate(),!(t.valid()&&this.orderHasChanged&&!this.getElement("overriddenShippingCostAmount").val()&&(this.showConfirmation(t),1))},showConfirmation:function(e){this.removeSubview("confirmation"),this.subview("confirmation",new a({title:n.__("oro.order.possible_shipping_methods.confirmation.title"),content:n.__("oro.order.possible_shipping_methods.confirmation.content"),okText:n.__("Save"),cancelText:n.__("oro.order.continue_editing")})),this.subview("confirmation").off("ok").on("ok",(()=>{this.orderHasChanged=!1,this.getElement("$form").trigger("submit")})).open()},showLoadingMask:function(){this.orderHasChanged=!0,this.getElement("calculateShipping").val()&&(this.removeSubview("loadingMask"),this.subview("loadingMask",new l({container:this.$el})),this.subview("loadingMask").show())},hideLoadingMask:function(){this.removeSubview("loadingMask")},onOrderChange:function(e){e.totals&&(this.$totals=e.totals),void 0!==e.possibleShippingMethods?(this.getElement("calculateShipping").val(null),this.getElement("toggleBtn").parent("div").hide(),this.updatePossibleShippingMethods(e.possibleShippingMethods),this.getElement("possibleShippingMethodForm").show(),this.orderHasChanged=!1):!0===this.recalculationIsNotRequired?(this.orderHasChanged=!1,this.recalculationIsNotRequired=!1):(this.getElement("possibleShippingMethodForm").hide(),this.getElement("toggleBtn").parent("div").show(),this.orderHasChanged=!0)},onOverriddenShippingCostChange:function(){this.recalculationIsNotRequired=!0},updatePossibleShippingMethods:function(e){let t=this.getSelectedMethod();!t&&this.options.savedShippingMethod&&(t=this.options.savedShippingMethod);let i=!1,s=this.options.noShippingMethodsAvailableTemplate();n.size(e)>0&&(s=this.options.possibleShippingMethodsTemplate({methods:e,selectedMethod:t,createMethodObject:this.createMethodObject,areMethodsEqual:this.areMethodsEqual,NumberFormatter:p}),i=this.isMethodAvailable(e,t)),this.removeSelectedShippingMethod(),i||(this.setElementsValue(null),this.options.savedShippingMethod&&this.renderPreviousSelectedShippingMethod()),this.getElement("possibleShippingMethodForm").html(s)},getSelectedMethod:function(){const e=this.getElement("shippingMethod").val(),t=this.getElement("shippingMethodType").val(),i=this.getElement("estimatedShippingCostAmount").val();return e&&t&&i?this.createMethodObject(e,t,i):null},isMethodAvailable:function(e,t){let i=!1;return t?(n.each(e,(function(e){e.identifier===t.method&&n.each(e.types,(function(e){null!==e.price.value&&e.identifier===t.type&&(i=parseFloat(t.cost)===parseFloat(e.price.value))}),this)}),this),i):i},setElementsValue:function(e){e||(e=this.createMethodObject(null,null,null)),this.getElement("shippingMethod").val(e.method),this.getElement("shippingMethodType").val(e.type),this.getElement("estimatedShippingCostAmount").val(e.cost)},removeSelectedShippingMethod:function(){this.$document.find(".selected-shipping-method").closest(".control-group").remove()},renderPreviousSelectedShippingMethod:function(e){this.removeSelectedShippingMethod();const i=t("<div>").html(this.options.selectedShippingMethodTemplate({shippingMethodLabel:n.__("oro.order.previous_shipping_method.label"),shippingMethodClass:"selected-shipping-method",selectedShippingMethod:this.options.savedShippingMethodLabel}));this.$el.closest(".responsive-cell").prepend(i)},onShippingMethodTypeChange:function(e){const i=t(e.target),n=this.createMethodObject(i.data("shipping-method"),i.val(),i.data("shipping-price"));this.setElementsValue(n),this.removeSelectedShippingMethod(),this.options.savedShippingMethod&&!this.areMethodsEqual(n,this.options.savedShippingMethod)&&this.renderPreviousSelectedShippingMethod(),this.updateTotals()},areMethodsEqual:function(e,t){let i=!1;return e&&t&&(i=e.method===t.method,i=i&&e.type===t.type,i=i&&parseFloat(e.cost)===parseFloat(t.cost)),i},createMethodObject:function(e,t,i){return{method:e,type:t,cost:i}},updateTotals:function(){const e=this.getElement("overriddenShippingCostAmount").val(),t=parseFloat(e);isNaN(t)&&(this.recalculationIsNotRequired=!0,s.trigger(this.options.events.trigger))},dispose:function(){this.disposed||(this.disposeElements(),delete this.$form,delete this.$document,delete this.options,h.__super__.dispose.call(this))}}));return h}.call(t,i,t,e))||(e.exports=n)},"./bundles/oroorder/js/app/views/shipping-cost-view.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/extend/jquery.js"),n=i("./bundles/oropricing/js/app/listener/totals-listener.js");return i("./bundles/oroui/js/app/views/base/view.js").extend({options:{},$form:null,$fields:null,fieldsByName:null,constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.options=t.extend(!0,{},this.options,e||{}),this.initLayout().done(this.handleLayoutInit.bind(this))},handleLayoutInit:function(){this.$form=this.$el.closest("form"),this.$fields=this.$el.find(":input[name]"),this.fieldsByName={},this.$fields.each(((e,i)=>{this.fieldsByName[this.formFieldName(i)]=t(i)})),this.subtotalFields(this.fieldsByName)},formFieldName:function(e){let t="";const i=e.name.replace(/.*\[[0-9]+\]/,"").replace(/[\[\]]/g,"_").split("_");let n;for(let e=0,s=i.length;e<s;e++)n=i[e],n.length&&(0===t.length?t+=n:t+=n[0].toUpperCase()+n.substr(1));return t},subtotalFields:function(e){n.listen(e)}})}.call(t,i,t,e))||(e.exports=n)},"./bundles/oroorder/js/app/views/shipping-tracking-collection-view.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/extend/jquery.js"),n=i("./bundles/oroui/js/app/views/base/view.js").extend({options:{},constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.options=t.extend(!0,{},this.options,e||{}),this.$el.on("content:changed",this.toggleTableVisibility.bind(this)).on("content:remove",this.toggleTableVisibility.bind(this)),this.$el.trigger("content:changed")},toggleTableVisibility:function(e){const t=this.$el.find("table"),i=this.$el.find('table tr[data-content*="shippingTrackings"]');i.length<1||1===i.length&&"content:remove"===e.type?t.hide():t.show()},dispose:function(){this.disposed||(this.$el.off("content:changed"),this.$el.off("content:remove"),n.__super__.dispose.call(this))}});return n}.call(t,i,t,e))||(e.exports=n)},"./bundles/oropayment/js/app/views/payment-rule-method-view.js":(e,t,i)=>{var n,s;n=[i("./bundles/oroui/js/extend/jquery.js"),i("./bundles/oroui/js/extend/backbone.js"),i("./bundles/oroui/js/extend/underscore.js"),i("./bundles/oroui/js/mediator.js")],void 0===(s=function(e,t,i,n){"use strict";return t.View.extend({requiredOptions:["methodSelectSelector","buttonSelector","updateFlags","methods"],constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(t){this.options=i.defaults(t||{},this.options);const n=this.requiredOptions.filter((function(e){return i.isUndefined(t[e])}));if(n.length)throw new TypeError("Missing required option(s): "+n.join(","));if(this.form=e(this.el).parents("form:first").get(0),void 0===this.form)throw new TypeError("Form not found");this.form=e(this.form),this.methodSelect=e(this.el).find(this.options.methodSelectSelector),this.button=e(this.el).find(t.buttonSelector),this.button.on("click",this.changeHandler.bind(this));const s=this.form.find(".oro-payment-rule-method-configs-collection .row-oro.oro-multiselect-holder");this.methodCount=s.length;const o=this;s.each((function(t,i){e(i).parent().on("content:remove",(function(e){o.updateMethodSelector(i)}))})),this.updateMethodSelector()},changeHandler:function(){const t=this.form,s=t.serializeArray(),o=t.attr("action"),r=e(this.el).find(this.options.methodSelectSelector).val();s.push({name:"oro_payment_methods_configs_rule[methodConfigs]["+this.methodCount+"][type]",value:r}),this.methodCount++,i.each(this.options.updateFlags,(function(e){s.push({name:e,value:!0})})),n.execute("submitPage",{url:o,type:t.attr("method"),data:e.param(s)})},updateMethodSelector:function(t){const i=this.form.find(".oro-payment-rule-method-configs-collection .row-oro.oro-multiselect-holder"),n=[],s=this;i.each((function(i,o){t&&s.getMethod(o)===s.getMethod(t)||n.push(e(o).find('input[data-name="field__type"]').val())})),n.length>=Object.keys(this.options.methods).length?e(this.el).hide():(this.methodSelect.empty(),e.each(s.options.methods,(function(t,i){-1===e.inArray(t,n)&&s.methodSelect.append(e("<option></option>").attr("value",t).text(i))})),e.uniform.update(this.methodSelect),e(this.el).show())},getMethod:function(t){return e(t).find('input[data-name="field__type"]').val()}})}.apply(t,n))||(e.exports=s)},"./bundles/oropaymentterm/js/app/views/payment-term-view.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/extend/jquery.js"),n=i("./bundles/oroui/js/extend/underscore.js");return i("./bundles/oroui/js/app/views/base/view.js").extend({options:{selectionTemplate:""},$input:null,inputChanged:!1,customerPaymentTerm:null,customerGroupPaymentTerm:null,constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.options=t.extend(!0,{},this.options,e||{}),this.$input=this.$el.find("input[data-customer-payment-term]"),this.selectionTemplate=n.template(this.options.selectionTemplate),this.configureInput(),this.initLayout().done(this.handleLayoutInit.bind(this))},handleLayoutInit:function(){const e=this;this.$input.change((function(){e.inputChanged=!0}))},configureInput:function(){const e=this;if(this.customerPaymentTerm=this.parseInt(this.$input.data("customer-payment-term")),this.customerGroupPaymentTerm=this.parseInt(this.$input.data("customer-group-payment-term")),!this.$input.data("pageComponentOptions"))return;const t=this.$input.data("pageComponentOptions").configs;t.selection_template=t.result_template=function(t){return t.isCustomerDefault=t.id===e.customerPaymentTerm,t.isCustomerGroupDefault=t.id===e.customerGroupPaymentTerm,e.selectionTemplate(t)}},parseInt:function(e){return e?parseInt(e,10):null},loadedRelatedData:function(e){this.customerPaymentTerm=this.parseInt(e.customerPaymentTerm||null),this.customerGroupPaymentTerm=this.parseInt(e.customerGroupPaymentTerm||null);const t=["customerPaymentTerm","customerGroupPaymentTerm"];let i;for(let n=0,s=t.length;n<s&&(i=e[t[n]]||null,!i);n++);i&&!this.inputChanged||(i=this.$input.val()),this.$input.inputWidget("val",i)}})}.call(t,i,t,e))||(e.exports=n)},"./bundles/oropricing/js/app/components/price-lists-errors-handler.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/extend/jquery.js");return i("./bundles/oroui/js/app/components/base/component.js").extend({constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){e._sourceElement.find('input[type="hidden"]').on("change",(function(e){t(this).closest("td").find(".validation-failed").remove(),t(this).closest(".error").removeClass("error")}))}})}.call(t,i,t,e))||(e.exports=n)},"./bundles/oropricing/js/app/components/product-prices-update-widget-component.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/extend/jquery.js"),n=i("./bundles/oroui/js/extend/underscore.js"),s=i("./bundles/fosjsrouting/js/router.js"),o=i("./bundles/oroui/js/widget/widget-manager.js"),r=i("./bundles/oroui/js/app/components/base/component.js").extend({options:{widgetAlias:null,unitFormId:null,precisionFormId:null},constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.options=n.defaults(e||{},this.options),this.options._sourceElement.closest("form").on("change",this.options.unitFormId,this.reloadPricesWidget.bind(this))},dispose:function(){this.disposed||(this.options._sourceElement.off("change"),r.__super__.dispose.call(this))},reloadPricesWidget:function(e){const i=t(this.options.unitFormId).val(),n=t(this.options.precisionFormId).val();o.getWidgetInstanceByAlias(this.options.widgetAlias,(function(e){e.setUrl(s.generate("oro_pricing_widget_prices_update",{unit:i,precision:n})),e.render()}))}});return r}.call(t,i,t,e))||(e.exports=n)},"./bundles/oropricing/js/app/components/product-sidebar-component.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/extend/jquery.js"),n=i("./bundles/oroui/js/extend/underscore.js"),s=i("./bundles/oroui/js/app/components/base/component.js"),o=i("./bundles/oroui/js/app/views/loading-mask-view.js"),r=i("./bundles/fosjsrouting/js/router.js"),l=i("./bundles/oroui/js/mediator.js"),a=i("./bundles/orotranslation/js/translator.js"),d=s.extend({options:{priceListSelector:".priceListSelectorContainer",currenciesSelector:".currenciesSelectorContainer",showTierPricesSelector:".showTierPricesSelectorContainer",sidebarAlias:"products-sidebar",routeName:"oro_pricing_price_list_currency_list",routingParams:{},currencyTemplate:'<label for="<%- id %>" class="checkbox-label">\n                <input type="checkbox" id="<%- id %>" value="<%- value %>"><%- text %>\n            </label>'},currenciesState:{},currenciesContainer:null,loadingMaskView:null,constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.options=n.defaults(e||{},this.options),this.loadingMaskView=new o({container:this.options._sourceElement}),this.currenciesContainer=this.options._sourceElement.find(this.options.currenciesSelector),this.onPriceListChange=this.onPriceListChange.bind(this),this.onCurrenciesChange=this.onCurrenciesChange.bind(this),this.onShowTierPricesChange=this.onShowTierPricesChange.bind(this),this.options._sourceElement.on("change",this.options.priceListSelector,this.onPriceListChange).on("change",this.options.currenciesSelector,this.onCurrenciesChange).on("change",this.options.showTierPricesSelector,this.onShowTierPricesChange)},onPriceListChange:function(e){const i=e.target.value,n=t.extend({},this.options.routingParams,{id:i});t.ajax({url:r.generate(this.options.routeName,n),beforeSend:this._beforeSend.bind(this),success:this._success.bind(this),complete:this._complete.bind(this),errorHandlerMessage:a(this.options.errorMessage)})},onCurrenciesChange:function(){this.triggerSidebarChanged(!0)},onShowTierPricesChange:function(){this.triggerSidebarChanged(!1)},triggerSidebarChanged:function(e){let i=[];n.each(t(this.options.currenciesSelector+" input"),(function(e){const n=e.checked,s=t(e).val();n&&i.push(s),this.currenciesState[s]=n}),this),n.isEmpty(i)&&(i=!1);const s={priceListId:t(this.options.priceListSelector).val(),priceCurrencies:i,showTierPrices:t(this.options.showTierPricesSelector).prop("checked")};l.trigger("grid-sidebar:change:"+this.options.sidebarAlias,{widgetReload:Boolean(e),params:s})},_beforeSend:function(){this.loadingMaskView.show()},_success:function(e){const t=[];let i=0;const s=n.template(this.options.currencyTemplate);this._hasActiveCurrencies(e)||(this.currenciesState={}),n.each(e,(function(e,o){let r="";this.currenciesState.hasOwnProperty(o)&&this.currenciesState[o]&&(r="checked"),t[i]=s({value:o,text:o,ftid:i,uid:n.uniqueId("ocs"),checked:r}),i++}),this),this.currenciesContainer.html(t.join("")),this.triggerSidebarChanged(!1)},_hasActiveCurrencies:function(e){for(const t in this.currenciesState)if(this.currenciesState.hasOwnProperty(t)&&e.hasOwnProperty(t)&&this.currenciesState[t])return!0;return!1},_complete:function(){this.loadingMaskView.hide(),this.currenciesContainer.inputWidget("seekAndCreate")},dispose:function(){this.disposed||(this.options._sourceElement.off(),d.__super__.dispose.call(this))}});return d}.call(t,i,t,e))||(e.exports=n)},"./bundles/oropricing/js/app/components/product-unit-precision-limitations-component.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/extend/jquery.js"),n=i("./bundles/oroui/js/extend/underscore.js"),s=i("./bundles/oroui/js/app/components/base/component.js"),o=i("./bundles/orotranslation/js/translator.js"),r=s.extend({options:{selectSelector:'select[name^="oro_product[prices]"][name$="[unit]"]',unitsAttribute:"units",unitRemovedSuffix:o("oro.product.productunit.removed.suffix")},listen:{"product:precision:remove mediator":"onChange","product:precision:add mediator":"onChange","product:primary:precision:change mediator":"onChange"},constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.options=n.defaults(e||{},this.options),this.options._sourceElement.on("content:changed",this.onChange.bind(this)),this.options._sourceElement.trigger("content:changed")},onChange:function(){const e=this,i=this.getUnits();n.each(this.getSelects(),(function(n){const s=t(n),o=e.clearOptions(i,s),r=e.addOptions(i,s);(o||r)&&s.trigger("change")}))},clearOptions:function(e,i){let s=!1;const o=this;return n.each(i.find("option"),(function(i){if(!i.value)return;const n=t(i);e.hasOwnProperty(i.value)||(!0!==i.selected?n.remove():i.text.indexOf(" - ")<0&&n.text(n.text()+" - "+o.options.unitRemovedSuffix),s=!0)})),s},addOptions:function(e,i){let s=!1;const o=i.find('option[value=""]');if(n.isEmpty(e)?o.show():o.hide(),n.each(i.find("option:contains( - )"),(function(n){if(e.hasOwnProperty(n.value)){const e=n.text,o=e.substring(0,e.indexOf(" - "));t(n).text(o),i.closest(".oro-multiselect-holder").find(".validation-failed").hide(),s=!0}})),n.each(e,(function(e,t){i.find('option[value="'+t+'"]').length||(i.append('<option value="'+t+'">'+e+"</option>"),s=!0)})),""===i.val()&&!n.isEmpty(e)){const t=n.keys(e)[0];i.val(t),s=!0}return s},getSelects:function(){return this.options._sourceElement.find(this.options.selectSelector)},getUnits:function(){const e={},i=this.options.unitsAttribute;return n.each(t(":data("+i+")"),(function(s){const o=t(s).data(i)||{};n.each(o,(function(t,i){e[i]=t}))})),e},getUnitsWithPrices:function(){const e={};return n.each(this.getSelects(),(function(i){const n=t(i).find("option:selected");e[n.val()]=n.text()})),e},dispose:function(){this.disposed||(this.options._sourceElement.off(),r.__super__.dispose.call(this))}});return r}.call(t,i,t,e))||(e.exports=n)},"./bundles/oropricing/js/app/components/products-prices-component.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/extend/jquery.js"),n=i("./bundles/oroui/js/extend/underscore.js"),s=i("./bundles/oroui/js/mediator.js"),o=i("./bundles/fosjsrouting/js/router.js");return i("./bundles/oroui/js/app/components/base/component.js").extend({options:{customer:null,currency:null,tierPrices:null,tierPricesRoute:"",requestKeys:{ACCOUNT:"customer_id",CURRENCY:"currency"}},constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.options=t.extend(!0,{},this.options,e||{}),this.initPricesListeners(),this.initFieldsListeners(),s.trigger("pricing:refresh:products-tier-prices",this.options.tierPrices)},initPricesListeners:function(){this.listenTo(s,{"pricing:load:prices":this.reloadPrices,"pricing:get:products-tier-prices":this.getProductsTierPrices,"pricing:load:products-tier-prices":this.loadProductsTierPrices})},initFieldsListeners:function(){this.listenTo(s,{"update:currency":this.setCurrency,"customer-customer-user:change":this.setCustomer})},getProductsTierPrices:function(e){e(this.options.tierPrices)},reloadPrices:function(){this.loadProductsTierPrices(this.getProductsId(),(function(e){s.trigger("pricing:refresh:products-tier-prices",e)}))},loadProductsTierPrices:function(e,i){const r={requestAttributes:{}};s.trigger("pricing:refresh:products-tier-prices:before",r),this.joinSubrequests(this.loadProductsTierPrices,e,i,((e,i)=>{let s={product_ids:e};s[this.options.requestKeys.CURRENCY]=this.getCurrency(),s[this.options.requestKeys.ACCOUNT]=this.getCustomer(),s=n.extend({},s,r.requestAttributes||{}),t.get(o.generate(this.options.tierPricesRoute,s),i)}))},joinSubrequests:function(e,t,i,s){e.timeoutId=e.timeoutId||null,e.data=e.data||[],e.callbacks=e.callbacks||[],e.data=n.union(e.data,t),e.callbacks.push(i),e.timeoutId&&clearTimeout(e.timeoutId),e.timeoutId=setTimeout((function(){const t=e.data,i=e.callbacks;e.timeoutId=null,e.data=[],e.callbacks=[],s(t,(function(e){n.each(i,(function(t){t(e)}))}))}),50)},getProductsId:function(){return n.map(this.getLineItems(),(function(e){return e.product}))},getLineItems:function(){const e=[];return s.trigger("pricing:collect:line-items",e),e},getCurrency:function(){return this.options.currency},setCurrency:function(e){this.options.currency=e,this.reloadPrices()},getCustomer:function(){return this.options.customer},setCustomer:function({customerId:e}){e!==this.options.customer&&(this.options.customer=e,this.reloadPrices())}})}.call(t,i,t,e))||(e.exports=n)},"./bundles/oropricing/js/app/components/totals-component.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("../node_modules/@oroinc/oro-webpack-config-builder/loader/text-loader.js!./bundles/oropricing/templates/order/subtotals.html"),n=i("../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/oropricing/templates/order/totals.html"),s=i("../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/oropricing/templates/order/totals-no-data.html"),o=i("./bundles/oroui/js/extend/jquery.js"),r=i("./bundles/oroui/js/extend/underscore.js"),l=i("./bundles/fosjsrouting/js/router.js"),a=i("./bundles/oroui/js/mediator.js"),d=i("./bundles/orolocale/js/formatter/number.js"),c=i("./bundles/oroui/js/app/views/loading-mask-view.js"),u=i("./bundles/oroui/js/app/components/base/component.js"),p=i("./bundles/orolocale/js/locale-settings.js"),h=u.extend({options:{route:"",entityClassName:"",entityId:0,selectors:{form:"",subtotalTemplate:null,template:null,noDataTemplate:null,totals:"[data-totals-container]"},events:["update:totals"],skipMaskView:!1,application:""},$el:null,$form:null,$method:null,$totals:null,template:n,subtotalTemplate:t,noDataTemplate:s,formData:"",eventName:"",loadingMaskView:null,items:[],constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){if(this.options=o.extend(!0,{},this.options,e||{}),0===this.options.route.length)return;this.$el=e._sourceElement,this.$form=o(this.options.selectors.form),this.$totals=this.$el.find(this.options.selectors.totals),this.resolveTemplates(),this.loadingMaskView=new c({container:this.$el}),this.eventName="total-target:changing",this.initializeListeners();const t=this.setDefaultTemplatesForData(this.options.data);this.render(t)},resolveTemplates:function(){"string"==typeof this.options.selectors.template&&(this.template=r.template(o(this.options.selectors.template).text())),"string"==typeof this.options.selectors.subtotalTemplate&&(this.subtotalTemplate=o(this.options.selectors.subtotalTemplate).text()),"string"==typeof this.options.selectors.noDataTemplate&&(this.noDataTemplate=r.template(o(this.options.selectors.noDataTemplate).text()))},setDefaultTemplatesForData:function(e){return e.subtotals&&r.map(e.subtotals,(e=>(e.template||(e.template=this.subtotalTemplate),e))),e},initializeListeners:function(){r.each(this.options.events,(e=>{this.listenTo(a,e,this.updateTotals)}))},showLoadingMask:function(){this.options.skipMaskView||this.loadingMaskView.show()},hideLoadingMask:function(){this.loadingMaskView.isShown()&&this.loadingMaskView.hide()},updateTotals:function(e){this.showLoadingMask(),this.getTotals.timeoutId&&clearTimeout(this.getTotals.timeoutId),this.getTotals.timeoutId=setTimeout((()=>{this.getTotals.timeoutId=null;const t=[];a.trigger(this.eventName,t),t.length?o.when(...t).done(this.updateTotals.bind(this,e)):this.getTotals((e=>{this.hideLoadingMask(),this.triggerTotalsUpdateEvent(e),e=this.setDefaultTemplatesForData(e),this.render(e)}))}),100)},triggerTotalsUpdateEvent:function(e){r.isUndefined(e)||r.isEmpty(e)||a.trigger("totals:update",e)},getTotals:function(e){const t=this;let i="GET",n=null;const s={entityClassName:this.options.entityClassName,entityId:this.options.entityId?this.options.entityId:0},r=this.$form.find(":input[data-ftid]").serialize();this.formData=r,r&&(i="POST",n=r),o.ajax({url:l.generate(this.options.route,s),type:i,data:n,success:function(i){r!==t.formData||t.disposed||e(i||{})}})},render:function(e){this.items=[],r.each(e.subtotals,this.pushItem.bind(this)),this.pushItem(e.total);let t=r.filter(this.items);r.isEmpty(t)&&(t=[this.noDataTemplate()]),this.$totals.html(t.join("")),this.items=[]},pushItem:function(e){const t=r.defaults(e,{amount:0,currency:p.getCurrency(),visible:!1,template:null,signedAmount:0,data:{}});if(!1===t.visible)return;e.formattedAmount=d.formatCurrency(e.signedAmount,e.currency),e.data&&e.data.baseAmount&&e.data.baseCurrency&&(e.formattedBaseAmount=d.formatCurrency(e.data.baseAmount,e.data.baseCurrency));let i=null;i=t.template?r.template(e.template)({item:e}):this.template({item:e}),this.items.push(i)},dispose:function(){this.disposed||(delete this.items,h.__super__.dispose.call(this))}});return h}.call(t,i,t,e))||(e.exports=n)},"./bundles/oropricing/js/app/listener/totals-listener.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/extend/jquery.js"),n=i("./bundles/oroui/js/extend/underscore.js"),s=i("./bundles/oroui/js/mediator.js"),o=i("./bundles/oropricing/js/app/listener/value-changing-listener.js");return{listen:function(e){o.listen("total-target:changing",e),n.each(e,(e=>{t(e).change(this.updateTotals.bind(this))}))},updateTotals:function(e){s.trigger("line-items-totals:update",e)}}}.call(t,i,t,e))||(e.exports=n)},"./bundles/oropricing/js/app/listener/value-changing-listener.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/extend/jquery.js"),n=i("./bundles/oroui/js/extend/underscore.js"),s=i("./bundles/oroui/js/mediator.js"),o=i("./bundles/oroui/js/extend/backbone.js");return{listen:function(e,i){n.each(i,(function(i){i=t(i).on("value:changing",(function(){const n=t.Deferred(),r=Object.create(o.Events),l=function(){n.resolve(),i.off("value:changed",l),r.stopListening()};i.on("value:changed",l),r.listenTo(s,e,(e=>e.push(n)))}))}))}}}.call(t,i,t,e))||(e.exports=n)},"./bundles/oropricing/js/app/prices-helper.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/extend/underscore.js"),n=i("./bundles/orolocale/js/numeral-l10n.js"),s={sortByLowQuantity:function(e=[]){return!t.isArray(e)||e.length<2?e:[...e].sort(((e,t)=>e.quantity<t.quantity?-1:1))},sortUnitPricesByLowQuantity:function(e={}){const t=Object.keys(e)[0],i=Object.values(e)[0],n={};return t&&(n[t]=s.sortByLowQuantity(i)),n},preparePrices:function(e){e=(e=t.sortBy(e,"quantity")).reverse();const i={};return t.each(e,(function(e){const t=e.unit;i[t]=i[t]||[],i[t].push(e)})),i},indexPrices:function(e){return Object.entries(e).reduce(((e,[t,i])=>(i.forEach((i=>e[`${t}_${i.quantity}`]=i)),e)),{})},findPrice:function(e,i,n){return t.isEmpty(e)||isNaN(n)||""===n||(n=parseFloat(n))<0?null:t.find(e[i],(function(e){return e.quantity<=n}))||null},findPriceValue:function(e,t,i){const n=this.findPrice(e,t,i);return n?n.price:0},calcTotalPrice:function(e,t,i){return n(this.findPriceValue(e,t,i)).multiply(i).value()}};return s}.call(t,i,t,e))||(e.exports=n)},"./bundles/oropricing/js/app/views/abstract-switcher.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/extend/underscore.js"),n=i("./bundles/oroui/js/app/views/base/view.js").extend({options:{selectors:{fieldType:null,expressionType:null},errorMessage:""},$form:null,field:null,expression:null,expressionInput:null,expressionLink:null,fieldLink:null,constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){if(this.visibleClass="visible",this.options=t.defaults(e||{},this.options),!this.options.selectors.fieldType)throw new Error("Option fieldType must be defined");if(!this.options.selectors.expressionType)throw new Error("Option expressionType must be defined");this.field=this.$el.find("div"+this.options.selectors.fieldType),this.expression=this.$el.find("div"+this.options.selectors.expressionType),this.expressionInput=this.expression.find("input"),this.expressionLink=this.expression.find("a"+this.options.selectors.fieldType),this.fieldLink=this.field.find("a"+this.options.selectors.expressionType),this.$form=this.$el.closest("form"),n.isFormValid=!0,this.resetSubmitCounter(),n.childrenCounter=n.childrenCounter+1||1},onSubmit:function(e){if(n.onSubmitCounter+=1,!this.isValid()){let e;n.isFormValid=!1,this.isVisible(this.field)?e=this.options.selectors.fieldType:this.isVisible(this.expression)&&(e=this.options.selectors.expressionType),this.addValidationError(e)}n.onSubmitCounter===n.childrenCounter&&(n.isFormValid?this.resetChildrenCounter():(e.preventDefault(),n.isFormValid=!0,this.resetSubmitCounter()))},resetSubmitCounter:function(){n.onSubmitCounter=0},resetChildrenCounter:function(){n.childrenCounter=0},isVisible:function(e){return e.hasClass(this.visibleClass)},getValue:function(e){let t=null;return e.find("select").length>0?t=e.find("select").find("option:selected").attr("value"):e.find("input").length>0&&(t=e.find("input").val()),t},setMouseLeaveEvent:function(e){e.mouseleave((()=>{this.disposeTooltip(e)}))},showTooltip:function(e){e.tooltip({title:e.attr("placeholder")+": "+e.val(),trigger:"manual"}),e.tooltip("show")},disposeTooltip:function(e){e.tooltip("dispose")},isValid:function(){throw new Error("Abstract method isValid not implemented")},addValidationError:function(){throw new Error("Abstract method addValidationError not implemented")},dispose:function(e){this.disposed||(delete this.options,delete this.field,delete this.$form,delete this.expression,delete this.expressionInput,delete this.expressionLink,delete this.fieldLink,n.__super__.dispose.call(this))}});return n}.call(t,i,t,e))||(e.exports=n)},"./bundles/oropricing/js/app/views/base-product-prices-view.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/app/views/base/view.js"),n=i("./bundles/orofrontend/js/app/elements-helper.js"),s=i("./bundles/oroui/js/layout.js"),o=i("./bundles/oroui/js/mediator.js"),r=i("./bundles/orolocale/js/formatter/number.js"),l=i("./bundles/orolocale/js/numeral-l10n.js"),a=i("./bundles/orolocale/js/locale-settings.js"),d=i("./bundles/oroui/js/app/models/base/model.js"),c=i("./bundles/oropricing/js/app/prices-helper.js"),u=i("../node_modules/@oroinc/bootstrap/js/dist/popover.js"),p=i("./bundles/oroui/js/extend/underscore.js"),h=i("./bundles/oroui/js/extend/jquery.js"),m=t.extend(p.extend({},n,{priceTemplate:i("../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/oropricing/templates/product/price.html"),unitTemplate:i("../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/oropricing/templates/product/unit.html"),keepElement:!0,optionNames:t.prototype.optionNames.concat(["changeQuantity","changeUnitLabel"]),options:{defaultQuantity:1},elements:{price:'[data-name="price"]',unit:'[data-name="unit"]',priceValue:'[data-name="price-value"]',priceNotFound:'[data-name="price-not-found"]',pricesHint:'[data-name="prices-hint"]',pricesHintContent:'[data-name="prices-hint-content"]'},modelAttr:{prices:{},price:0},modelEvents:{"prices setPrices":["change","setPrices"],"quantity setFoundPrice":["change","onQuantityChange"],"unit setFoundPrice":["change","onUnitChange"],"price updateUI":["change","updateUI"]},prices:null,foundPrice:null,changeQuantity:!1,changeUnitLabel:!1,rendered:!1,constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){m.__super__.initialize.call(this,e),this.deferredInitializeCheck(e,["productModel"])},deferredInitialize:function(e){this.initModel(e),this.model&&(this.initializeElements(e),this.render())},dispose:function(){delete this.modelAttr,delete this.prices,delete this.foundPrice,this.setUnitLabel(!0),this.disposeElements(),m.__super__.dispose.call(this)},render:function(){this.setPrices()},initModel:function(e){this.modelAttr=h.extend(!0,{},this.modelAttr,e.modelAttr||{}),e.productModel&&(this.model=e.productModel),this.model||(this.model=new d),p.each(this.modelAttr,(function(e,t){this.model.has(t)&&p.isEmpty(e)||this.model.set(t,e)}),this)},renderHint:function(){const e=this.getElement("pricesHint");if(!e.length)return;const t=this.getHintContent();e.toggleClass("disabled",0===t.length).attr("disabled",0===t.length),t.length&&(e.data(u.DATA_KEY)||s.initPopoverForElements(e,{container:"body",forceToShowTitle:!0},!0),e.data(u.DATA_KEY).updateContent(t))},getHintContent:function(){return this.getElement("pricesHintContent").html()||""},setPrices:function(){this.prices=c.preparePrices(this.model.get("prices")),this.foundPrice={},this.rendered?this.setFoundPrice():(this.setFoundPrice(!0),this.rendered||this.updateUI())},onQuantityChange:function(e){this.setFoundPrice()},onUnitChange:function(e){this.setFoundPrice(e.manually||!1)},setUnitLabel:function(e){if(!this.changeUnitLabel)return;const t=this.model.get("price");let i=null;!e&&t&&(i=p.__("oro.pricing.price.formatted.unit",{formattedUnit:p(t.formatted_unit).capitalize(),formattedPrice:t.formatted_price})),this.model.set("unit_label",i)},setFoundPrice:function(e){this.setPriceValue(this.findPrice(e))},setPriceValue:function(e){this.model.set("price",e),this.setUnitLabel()},findPrice:function(e){this.model.get("quantity_changed_manually")&&(this.changeQuantity=!1);const t=this.model.get("quantity"),i=this.model.get("unit"),n=i+" "+t+" "+((e=e&&this.changeQuantity)?1:0);let s=this.foundPrice[n]||null;if(s||(s=e?p.last(this.prices[i])||null:c.findPrice(this.prices,i,t),this.foundPrice[n]=s),e){const e=s?s.quantity:this.options.defaultQuantity;t.toString()!==e.toString()&&this.model.set("quantity",e)}return s},findPriceValue:function(){const e=this.findPrice();return e?e.price:null},updateUI:function(){this.rendered=!0;const e=this.model.get("price");null===e?(this.getElement("price").addClass("hidden"),this.getElement("priceNotFound").removeClass("hidden")):(this.getElement("unit").html(this.unitTemplate({price:e})),this.getElement("priceValue").html(this.priceTemplate({price:e,numberFormatter:r,localeSettings:a,numeral:l})),this.getElement("priceNotFound").addClass("hidden"),this.getElement("price").removeClass("hidden")),this.renderHint(),o.trigger("layout:reposition")}}));return m}.call(t,i,t,e))||(e.exports=n)},"./bundles/oropricing/js/app/views/expression-field-switcher.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/extend/jquery.js"),n=i("./bundles/oropricing/js/app/views/abstract-switcher.js"),s=n.extend({options:{selectors:{fieldType:null,expressionType:null},errorMessage:""},visibleClass:null,constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){s.__super__.initialize.call(this,e),this.initLayout().done(this.initSwitcher.bind(this)),this.$form.on("submit"+this.eventNamespace(),(e=>{this.onSubmit(e)}))},addValidationError:function(e){this.$el.closest(".price_rule").find("div.error-block"+e).addClass(this.visibleClass).append(t("<span></span>").addClass("validation-failed").text(this.options.errorMessage).show())},initSwitcher:function(){const e=this.options.selectors.expressionType;this.expressionLink.click((()=>{this.changeFieldVisibility(this.field,this.expression),this.expressionInput.val(""),t("div.error-block"+e).find(".validation-failed").remove()})),this.fieldLink.click((()=>{this.changeFieldVisibility(this.expression,this.field)})),""===this.expressionInput.val()?this.changeFieldVisibility(this.field,this.expression):this.changeFieldVisibility(this.expression,this.field),this.bindTooltipEvents(this.expressionInput)},bindTooltipEvents:function(e){e.mouseenter((()=>{e.val().length>12&&this.showTooltip(e)})),this.setMouseLeaveEvent(e)},changeFieldVisibility:function(e,t){t.removeClass(this.visibleClass).hide(),e.addClass(this.visibleClass).show()},isValid:function(){return!!(this.getValue(this.field)&&this.field.hasClass(this.visibleClass)||this.getValue(this.expression)&&this.expression.hasClass(this.visibleClass))},dispose:function(e){this.disposed||(delete this.options,delete this.visibleClass,this.$form.off(this.eventNamespace()),n.__super__.dispose.call(this))}});return s}.call(t,i,t,e))||(e.exports=n)},"./bundles/oropricing/js/app/views/line-item-product-prices-extended-view.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>m});var n=i("./bundles/oroui/js/extend/jquery.js"),s=i.n(n),o=i("./bundles/oropricing/js/app/views/line-item-product-prices-view.js"),r=i.n(o),l=i("./bundles/orolocale/js/formatter/number.js"),a=i.n(l),d=i("../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/oropricing/templates/product/line-item-matched-price.html"),c=i.n(d),u=i("../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/oropricing/templates/product/line-item-per-unit.html"),p=i.n(u);const h=r().extend({className:"line-item-product-prices-extended",constructor:function e(...t){e.__super__.constructor.apply(this,t)},render(){h.__super__.render.call(this),this.$elements.perUnit=s()(p()({unit:this.model.get("unit")})),this.getElement("priceValue").attr("data-floating-error",!0),this.getElement("pricesHint").after(this.$elements.perUnit),this.$el.addClass(this.className)},onUnitChange(e){h.__super__.onUnitChange.call(this,e),this.getElement("perUnit").replaceWith(p()({unit:this.model.get("unit")}))},updateUI(){h.__super__.updateUI.call(this),this.toggleAndUpdateMatchedPrice()},toggleAndUpdateMatchedPrice(){if(this.$elements.matchedPrice&&(this.$elements.matchedPrice.remove(),delete this.$elements.matchedPrice),this.isOverriddenPrice()){const{price:e,currency:t}=this.findPrice();this.$elements.matchedPrice=s()(c()({matchedPrice:a().formatCurrency(e,t)})),this.$el.append(this.$elements.matchedPrice)}},isOverriddenPrice(){const e=this.findPriceValue(),t=a().unformatStrict(this.model.get("price"));return null!==e&&this.calcTotalPrice(e)!==this.calcTotalPrice(t)}}),m=h},"./bundles/oropricing/js/app/views/line-item-product-prices-view.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/extend/underscore.js"),n=i("./bundles/oroui/js/extend/jquery.js"),s=i("./bundles/oroui/js/mediator.js"),o=i("./bundles/oropricing/js/app/views/product-prices-editable-view.js"),r=o.extend({elements:t.extend({},o.prototype.elements,{currency:'[data-name="field__currency"]'}),modelElements:t.extend({},o.prototype.modelElements,{currency:"currency"}),modelEvents:t.extend({},o.prototype.modelEvents,{"id updateTierPrices":["change","updateTierPrices"],"currency updatePriceValue":["change","updatePriceValue"],"unit updateTierPrices":["change","updateTierPrices"],"quantity updatePriceValue":["change","updatePriceValue"],"checksum updateTierPrices":["change","updateTierPrices"]}),storedValues:{},constructor:function e(t){e.__super__.constructor.call(this,t)},deferredInitialize:function(e){if(r.__super__.deferredInitialize.call(this,e),!this.options.editable){this.getElement("priceValue").prop("readonly",!0);const e=this.model.get("id");!t.isUndefined(e)&&e.length&&this.model.get("price")&&(this.storedValues=t.extend({},this.model.attributes))}this.listenTo(s,{"pricing:collect:line-items":this.collectLineItems,"pricing:refresh:products-tier-prices":this.refreshTierPrices,"pricing:currency:changed":this.currencyChanged}),s.trigger("pricing:currency:load",this.currencyChanged.bind(this)),s.trigger("pricing:get:products-tier-prices",(e=>{const i=this.model.get("id");!t.isUndefined(i)&&t.isUndefined(e[i])&&this.updateTierPrices(),this.setTierPrices(e,!1)}))},updateTierPrices:function(){const e=this.model.get("id");0===e.length?this.refreshTierPrices({}):s.trigger("pricing:load:products-tier-prices",[e],this.refreshTierPrices.bind(this))},setTierPrices:function(e,i){this.tierPrices=e;let n={};const s=this.model.get("id");if(!t.isUndefined(s)&&0!==s.length){const i=this.model.get("checksum");n=t.isUndefined(i)||0===i.length||t.isUndefined(e[s])?e[s]||{}:e[s][i]||{}}const o=this.model.get("currency");o&&(n=t.filter(n,(function(e){return e.currency===o}))),this.model.set("prices",n,{silent:i||!1})},refreshTierPrices:function(e){const t=this.model.get("id");this.setTierPrices(e,!1),this.options.editable||(this.filterValues(),t&&this.updatePriceValue())},collectLineItems:function(e){const i=this.model.get("id");!t.isUndefined(i)&&i.length&&e.push({product:i,unit:this.model.get("unit"),quantity:this.model.get("quantity"),currency:this.model.get("currency")})},filterValues:function(){const e=this.model.get("id");let i={};t.isUndefined(e)||0===e.length||(i=this.tierPrices[e]||{});const s=[],o=[];t.each(i,(function(e){s.push(e.currency),o.push(e.unit)})),t.isUndefined(this.storedValues.price)?(t.isUndefined(e)||0===e.length)&&(s.push(this.model.get("currency")),o.push(this.model.get("unit"))):(s.push(this.storedValues.currency),o.push(this.storedValues.unit)),this.getElement("currency").find("option").filter((function(){return-1===n.inArray(this.value,s)})).remove(),this.model.trigger("product:unit:filter-values",o)},updatePriceValue:function(){if(this.setTierPrices(this.tierPrices),!this.options.editable){let e;e=this.storedValues&&this.model.get("id")===this.storedValues.id&&this.model.get("checksum")===this.storedValues.checksum&&this.model.get("unit")===this.storedValues.unit&&this.model.get("quantity")===this.storedValues.quantity&&this.model.get("currency")===this.storedValues.currency?this.storedValues:this.findPrice(),this.setPriceValue(e?e.price:null),this.getElement("priceValue").addClass("matched-price")}},currencyChanged:function(e){e.currency&&this.model.set("currency",e.currency)},dispose:function(){this.disposed||(delete this.storedValues,r.__super__.dispose.call(this))}});return r}.call(t,i,t,e))||(e.exports=n)},"./bundles/oropricing/js/app/views/price-list-currency-limitations-view.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/extend/jquery.js"),n=i("./bundles/oroui/js/extend/underscore.js"),s=i("./bundles/fosjsrouting/js/router.js"),o=i("./bundles/oroui/js/app/views/loading-mask-view.js"),r=i("./bundles/oroui/js/app/views/base/view.js").extend({options:{priceListSelector:'input[name$="[priceList]"]',currencySelector:'select[name$="[price][currency]"]',container:".oro-item-collection",currenciesRoute:"oro_pricing_price_list_currency_list"},currencies:{},events:function(){const e={};return e["change "+this.options.priceListSelector]=this.prepareCurrencySelect.bind(this,!0),e},constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.options=n.defaults(e||{},this.options),this.currencies=this.$el.closest(e.container).data("currencies"),this.prepareCurrencySelect(!1)},delegateEvents:function(e){return r.__super__.delegateEvents.call(this,e),this.$el.one("change"+this.eventNamespace(),function(){this.$el.removeAttr("data-validation-ignore")}.bind(this)),this},getSystemSupportedCurrencyOptions:function(){const e=this.$el.closest(this.options.container);let i=e.data("systemSupportedCurrencyOptions");return i||(i={},t(e.data("prototype")).find(this.options.currencySelector+" option").each((function(e,t){const n=t.cloneNode(!0);n.removeAttribute("selected"),i[n.value]=n})),e.data("systemSupportedCurrencyOptions",i)),i},prepareCurrencySelect:function(e){const i=this.$(this.options.priceListSelector).val();if(!i){const e=this.$(this.options.currencySelector);return e.find('option[value=""]').show(),e.attr("disabled","disabled"),e.val(""),void e.trigger("change")}if(n.has(this.currencies,i))this.handleCurrencies(this.currencies[i],e);else{const o=this.getLoadingMaskView();t.ajax({url:s.generate(this.options.currenciesRoute,{id:i}),type:"GET",beforeSend:function(){o.show()},success:function(t){const s=n.keys(t);this.currencies[i]=s,this.$el.closest(this.options.container).data("currencies",this.currencies),this.handleCurrencies(s,e)}.bind(this),complete:function(){o.hide()}})}},handleCurrencies:function(e,t){-1===e.indexOf("")&&e.unshift("");const i=[],s=this.getSystemSupportedCurrencyOptions(),o=this.$(this.options.currencySelector),r=o.val();o.empty(),n.each(e,(function(e){e in s&&i.push(s[e].cloneNode(!0))}),this),o.append(i).removeAttr("disabled").find('option[value=""]').hide(),t&&n.isEmpty(r)?(o.val(e[1]),o.trigger("change")):o.val(r)},getLoadingMaskView:function(){let e=this.subview("loading-mask");return e||(e=new o({container:this.$el}),this.subview("loading-mask",e)),e}});return r}.call(t,i,t,e))||(e.exports=n)},"./bundles/oropricing/js/app/views/product-price-debug-details-sidebar-view.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>d});var n=i("./bundles/fosjsrouting/js/router.js"),s=i.n(n),o=i("./bundles/oroui/js/mediator.js"),r=i.n(o),l=i("./bundles/oroui/js/app/views/base/view.js"),a=i.n(l);const d=a().extend({optionNames:a().prototype.optionNames.concat(["websitesSelector","customersSelector","dateSelector","showDevelopersInfoSelector","showDetailedAssignmentInfoSelector","sidebarAlias","traceViewRoute","productId"]),websitesSelector:null,customersSelector:null,dateSelector:null,showDevelopersInfoSelector:null,showDetailedAssignmentInfoSelector:null,sidebarAlias:"product-prices-debug-view-sidebar",traceViewRoute:"oro_pricing_price_product_debug_trace",productId:null,events(){const e={[`change ${this.customersSelector}`]:"triggerSidebarChanged",[`change ${this.dateSelector}`]:"triggerSidebarChanged",[`change ${this.showDevelopersInfoSelector}`]:"triggerSidebarChanged",[`change ${this.showDetailedAssignmentInfoSelector}`]:"triggerSidebarChanged"};return this.websitesSelector&&(e[`change ${this.websitesSelector}`]="triggerSidebarChanged"),e},constructor:function e(...t){e.__super__.constructor.apply(this,t)},triggerSidebarChanged:function(){const e={id:this.productId,customer:this.$(this.customersSelector).val(),date:this.$(this.dateSelector).val(),showDevelopersInfo:this.$(this.showDevelopersInfoSelector).prop("checked"),showDetailedAssignmentInfo:this.$(this.showDetailedAssignmentInfoSelector).prop("checked")};this.websitesSelector&&(e.website=this.$(this.websitesSelector).val()),r().execute("redirectTo",{url:s().generate(this.traceViewRoute,e)},{redirect:!1})}})},"./bundles/oropricing/js/app/views/product-price-debug-sidebar-view.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>j});var n=i("./bundles/oroui/js/extend/jquery.js"),s=i.n(n),o=i("./bundles/oroui/js/extend/underscore.js"),r=i.n(o),l=i("./bundles/orotranslation/js/translator.js"),a=i.n(l),d=i("./bundles/fosjsrouting/js/router.js"),c=i.n(d),u=i("./bundles/oroui/js/mediator.js"),p=i.n(u),h=i("./bundles/oroui/js/app/views/base/view.js"),m=i.n(h),f=i("./bundles/oroui/js/app/views/loading-mask-view.js"),g=i.n(f),_=i("../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/oropricing/templates/debug/currency-template.html"),b=i.n(_);const v=m().extend({optionNames:m().prototype.optionNames.concat(["websitesSelector","customersSelector","currenciesSelector","showTierPricesSelector","sidebarAlias","currenciesRouteName","routingParams"]),websitesSelector:null,customersSelector:null,currenciesSelector:null,showTierPricesSelector:null,sidebarAlias:"product-prices-debug-sidebar",currenciesRouteName:"oro_pricing_price_product_debug_currency_list",currencyTemplate:b(),currenciesContainer:null,loadingMaskView:null,events(){const e={[`change ${this.customersSelector}`]:"onPriceListChange",[`change ${this.showTierPricesSelector}`]:"onShowTierPricesChange"};return this.websitesSelector&&(e[`change ${this.websitesSelector}`]="onPriceListChange"),this.currenciesSelector&&(e[`change ${this.currenciesSelector}`]="onCurrenciesChange"),e},constructor:function e(...t){this.currenciesState={},this.routingParams={},e.__super__.constructor.apply(this,t)},initialize(e){v.__super__.initialize.call(this,e),this.currenciesContainer=this.$(this.currenciesSelector),this.subview("loadingMaskView",new(g())({container:this.$el}))},onPriceListChange(){const e={...this.routingParams,website:this.$(this.websitesSelector).val(),customer:this.$(this.customersSelector).val()};this._saveCurrenciesState(),s().ajax({url:c().generate(this.currenciesRouteName,e),beforeSend:this._beforeSend.bind(this),success:this._success.bind(this),complete:this._complete.bind(this),errorHandlerMessage:a()(this.errorMessage)})},onCurrenciesChange(){this.triggerSidebarChanged(!0)},onShowTierPricesChange(){this.triggerSidebarChanged(!1)},triggerSidebarChanged(e){let t=this._saveCurrenciesState();r().isEmpty(t)&&(t=!1);const i={customer:this.$(this.customersSelector).val(),priceCurrencies:t,showTierPrices:this.$(this.showTierPricesSelector).prop("checked")};this.websitesSelector&&(i.website=this.$(this.websitesSelector).val()),p().trigger("grid-sidebar:change:"+this.sidebarAlias,{widgetReload:Boolean(e),params:i})},_saveCurrenciesState(){if(!this.currenciesSelector)return[];const e=[];return r().each(this.$(`${this.currenciesSelector} input`),(t=>{const i=t.checked,n=t.value;i&&e.push(n),this.currenciesState[n]=i})),e},_beforeSend(){this.subview("loadingMaskView").show()},_success(e){const t=[];let i=0;this._hasActiveCurrencies(e)||(this.currenciesState={}),r().each(e,(function(e,n){let s="";this.currenciesState.hasOwnProperty(n)&&this.currenciesState[n]&&(s="checked"),t[i]=this.currencyTemplate({value:n,text:n,ftid:i,uid:r().uniqueId("ocs"),checked:s}),i++}),this),this.currenciesContainer.html(t.join("")),this.triggerSidebarChanged(!1)},_hasActiveCurrencies(e){for(const t in this.currenciesState)if(this.currenciesState.hasOwnProperty(t)&&e.hasOwnProperty(t)&&this.currenciesState[t])return!0;return!1},_complete(){this.subview("loadingMaskView").hide(),this.currenciesContainer.inputWidget("seekAndCreate")}}),j=v},"./bundles/oropricing/js/app/views/product-price-debug-trace-page-view.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});var n=i("./bundles/oroui/js/app/views/base/view.js");const s=i.n(n)().extend({events:{"click .price-details-item":"onPriceItemClick"},highlightedClass:"highlighted",constructor:function e(...t){e.__super__.constructor.apply(this,t)},onPriceItemClick(e){const t=this.$(e.currentTarget),i=t.data("price-id"),n=t.hasClass(this.highlightedClass);i&&(this.$("[data-price-id]").removeClass(this.highlightedClass),n||this.$(`[data-price-id="${i}"]`).addClass(this.highlightedClass))}})},"./bundles/oropricing/js/app/views/product-prices-editable-view.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/oropricing/templates/product/prices-tier-button.html"),n=i("../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/oropricing/templates/product/prices-tier-table.html"),s=i("../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/oropricing/templates/product/prices-price-overridden.html"),o=i("./bundles/oropricing/js/app/views/base-product-prices-view.js"),r=i("./bundles/orolocale/js/formatter/number.js"),l=i("../node_modules/@oroinc/bootstrap/js/dist/popover.js"),a=i("./bundles/oroui/js/layout.js"),d=i("./bundles/oroui/js/extend/jquery.js"),c=i("./bundles/oroui/js/extend/underscore.js"),u=i("./bundles/oroui/js/mediator.js"),p=i("./bundles/oropricing/js/app/prices-helper.js"),h=o.extend({elements:c.extend({},o.prototype.elements,{pricesHint:null,pricesHintContent:null,priceOverridden:null,priceValue:'[data-name="field__value"]'}),modelAttr:{found_price:null},elementsEvents:c.extend({},o.prototype.elementsEvents,{"priceValue onPriceSetManually":["change","onPriceSetManually"]}),modelElements:c.extend({},o.prototype.modelElements,{price:"priceValue"}),options:{matchedPriceEnabled:!0,precision:4,editable:!0,ariaControlsId:null},templates:{priceOverridden:s,pricesHint:t,pricesHintContent:n},events:function(){const e={},t=this.eventNamespace(),i=function(e,i){const n=d(i.target).data(l.DATA_KEY);d(n.getTipElement()).off(t).on("click"+t,"a",(function(t){t.preventDefault(),n.hide(),e(this)}))};return e[l.Event.SHOWN+" .product-price-overridden"]=c.wrap(this.useFoundPrice.bind(this),i),e[l.Event.SHOWN+" .product-tier-prices"]=c.wrap(this.setPriceFromHint.bind(this),i),e[l.Event.HIDDEN+" [data-toggle=popover]"]=function(e){const i=d(e.target).data(l.DATA_KEY).getTipElement();d(i).off(t)},e},constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.options=d.extend(!0,{},this.options,c.pick(e,c.keys(this.options))),this.templates=d.extend(!0,{},this.templates,e.templates||{}),h.__super__.initialize.call(this,e)},deferredInitialize:function(e){h.__super__.deferredInitialize.call(this,e)},dispose:function(e){delete this.templates,h.__super__.dispose.call(this)},findPrice:function(...e){const t=h.__super__.findPrice.apply(this,e);return this.model.set("found_price",t),this.getElement("priceValue").data("found_price",t),t},setFoundPrice:function(){this.findPrice(),this.options.matchedPriceEnabled&&this.getElement("priceValue").hasClass("matched-price")&&this.setPriceValue(this.findPriceValue()),this.updateUI()},setPriceValue:function(e){this.model.set("price",this.calcTotalPrice(e)),this.getElement("priceValue").trigger("change")},updateUI:function(){this.renderPriceOverridden(),this.renderHint()},initPriceOverridden:function(){if(this.priceOverriddenInitialized=!0,!this.options.matchedPriceEnabled||!this.options.editable)return;if(!this.getElement("priceValue").val()&&!this.getElement("priceValue").data("match-price-on-null"))return;const e=this.createElementByTemplate("priceOverridden");a.initPopover(e),e.insertAfter(this.getElement("priceValue")),c.isEmpty(this.getElement("priceValue").val())&&this.options.matchedPriceEnabled&&this.unlockPrice()},initHint:function(){this.hintInitialized=!0,"function"!=typeof this.templates.pricesHintContent&&(this.templates.pricesHintContent=c.template(this.getElement("pricesHintContent").html()));const e=this.createElementByTemplate("pricesHint"),t=this.model.get("sku"),i=t=>{e.attr("aria-label",c.__("oro.pricing.view_all_prices_extended",{product_attrs:t}))};t&&i(t),this.model.on("change:sku",((e,t)=>i(t))),this.getElement("priceValue").after(e)},getHintContent:function(){return c.isEmpty(this.prices)?"":this.templates.pricesHintContent({model:this.model.toJSON(),prices:p.sortUnitPricesByLowQuantity(this.prices),matchedPrice:this.findPrice(),clickable:this.options.editable,formatter:r,ariaControlsId:this.options.ariaControlsId})},renderHint:function(){return this.hintInitialized||this.initHint(),h.__super__.renderHint.call(this)},onPriceSetManually:function(e,t){t.manually&&this.options.matchedPriceEnabled&&this.lockPrice()},setPriceFromHint:function(e){this.lockPrice();const t=d(e);this.model.set("unit",t.data("unit")),this.setPriceValue(t.data("price"))},renderPriceOverridden:function(){if(!this.options.matchedPriceEnabled)return;this.priceOverriddenInitialized||this.initPriceOverridden();const e=r.unformatStrict(this.model.get("price")),t=this.findPriceValue();null!==t&&this.calcTotalPrice(t)!==this.calcTotalPrice(e)?(this.getElement("priceOverridden").show(),this.getElement("priceValue").addClass("overridden-price")):(this.getElement("priceOverridden").hide(),this.getElement("priceValue").removeClass("overridden-price"))},calcTotalPrice:function(e){return null===e?e:r.formatMonetary(e)},useFoundPrice:function(){this.options.matchedPriceEnabled&&(this.setPriceValue(this.findPriceValue()),this.unlockPrice())},lockPrice:function(){this.getElement("priceValue").removeClass("matched-price"),u.trigger("pricing:product-price:lock",this.getElement("priceValue"))},unlockPrice:function(){this.getElement("priceValue").addClass("matched-price"),u.trigger("pricing:product-price:unlock",this.getElement("priceValue"))}});return h}.call(t,i,t,e))||(e.exports=n)},"./bundles/oropricing/js/app/views/quantity-switcher.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/extend/jquery.js"),n=i("./bundles/oropricing/js/app/views/abstract-switcher.js"),s=n.extend({options:{selectors:{fieldType:null,expressionType:null},errorMessage:""},visibleClass:null,fieldInput:null,constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){s.__super__.initialize.call(this,e),this.initLayout().done(this.initSwitcher.bind(this)),this.$form.on("submit"+this.eventNamespace(),(e=>{this.onSubmit(e)}))},addValidationError:function(e){this.$el.closest(".price_rule").find("div.error-block"+e).addClass(this.visibleClass).append(t("<span></span>").addClass("validation-failed").text(this.options.errorMessage).show())},initSwitcher:function(){this.fieldInput=this.field.find("input"),this.changeQuantityField(),this.expressionInput.mouseenter((()=>{isNaN(this.expressionInput.val())&&this.expressionInput.val().length>6?this.showTooltip(this.expressionInput):this.disposeTooltip(this.expressionInput)})),this.setMouseLeaveEvent(this.expressionInput),this.expressionInput.change((()=>{this.changeQuantityField()})),this.fieldInput.change((()=>{this.changeQuantityField()}))},changeQuantityField:function(){this.field.hasClass(this.visibleClass)&&isNaN(this.fieldInput.val())?this.changeVisibility(this.field,this.expression):this.expression.hasClass(this.visibleClass)&&(isNaN(this.expressionInput.val())?this.fieldInput.val(""):this.changeVisibility(this.expression,this.field))},changeVisibility:function(e,t){const i=e.find("input"),n=t.find("input");i.val()&&n.val(i.val()),t.addClass(this.visibleClass).show(),i.val(""),e.removeClass(this.visibleClass).hide()},isValid:function(){return!(!this.getValue(this.field)&&!this.getValue(this.expression))},dispose:function(e){this.disposed||(delete this.options,delete this.visibleClass,delete this.fieldInput,this.$form.off(this.eventNamespace()),n.__super__.dispose.call(this))}});return s}.call(t,i,t,e))||(e.exports=n)},"./bundles/oroproduct/js/app/components/config-single-unit-component.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/extend/underscore.js"),n=i("./bundles/oroui/js/app/components/base/component.js").extend({options:{selectors:{row_container:".control-group",dependend_checkbox:'[data-depends-on-field="single_unit_mode"]'}},$form:null,$el:null,$dependedEl:null,constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.options=t.defaults(e||{},this.options),this.$el=this.options._sourceElement,this.$el.inputWidget("create"),this.$form=this.$el.closest("form");const i=this.$el.data("dependency-id");this.$dependedEl=this.$form.find('[data-depends-on-field="'+i+'"]'),this.updateDependentFields(),this.$el.on("change."+this.cid,this.updateDependentFields.bind(this))},dispose:function(){this.disposed||(this.$el.off("."+this.cid),n.__super__.dispose.call(this))},updateDependentFields:function(){this.$el.prop("checked")?this.$dependedEl.closest(this.options.selectors.row_container).show():this.$dependedEl.closest(this.options.selectors.row_container).hide()}});return n}.call(t,i,t,e))||(e.exports=n)},"./bundles/oroproduct/js/app/components/product-collection-apply-query-component.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/app/components/base/component.js"),n=i("./bundles/oroui/js/standart-confirmation.js"),s=i("./bundles/orotranslation/js/translator.js"),o=i("./bundles/oroui/js/extend/underscore.js"),r=i("./bundles/oroui/js/extend/jquery.js"),l=i("./bundles/oroui/js/mediator.js"),a=i("./bundles/oroproduct/js/app/components/product-collection-inclusion-exclusion-subcomponent.js"),d=i("./bundles/oroproduct/js/app/components/product-collection-selected-product-grid-subcomponent.js"),c=t.extend({options:{segmentId:null,segmentDefinitionSelectorTemplate:'input[name="%s"]',controlsBlockAlias:null,gridName:null,scope:null,excludedControlsBlockAlias:null,includedControlsBlockAlias:null,excludedProductsGridName:null,includedProductsGridName:null,selectors:{reset:null,apply:null,included:null,excluded:null}},requiredOptions:["segmentDefinitionFieldName","segmentId","controlsBlockAlias","gridName","scope","excludedControlsBlockAlias","includedControlsBlockAlias","excludedProductsGridName","includedProductsGridName"],initialDefinitionState:null,initialIncluded:null,initialExcluded:null,currentDefinitionState:null,confirmed:!1,$form:null,$included:null,$excluded:null,namespace:null,inclusionExclusionSubComponent:null,selectedProductGridSubComponent:null,applyQueryEventName:null,constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.options=r.extend(!0,{},this.options,e||{}),this._checkOptions();const{selectors:t}=this.options;this.$included=this.options._sourceElement.find(t.included),this.$excluded=this.options._sourceElement.find(t.excluded),this.$form=this.options._sourceElement.closest("form");const i=this.eventNamespace();this.options._sourceElement.on(`click${i}`,t.apply,this.onApplyQuery.bind(this)).on(`click${i}`,t.reset,this.onReset.bind(this)).on(`patchInitialState${i}`,t.included,(()=>this.initialIncluded=this.$included.val())).on(`patchInitialState${i}`,t.excluded,(()=>this.initialExcluded=this.$excluded.val())).on(`query-designer:validate:not-empty-filters${i}`,this.onFiltersValidate.bind(this)),this.initialDefinitionState=this._getSegmentDefinition(),this.initialIncluded=this.$included.val(),this.initialExcluded=this.$excluded.val(),null!==this.initialDefinitionState&&""!==this.initialDefinitionState&&(this.currentDefinitionState=this.initialDefinitionState,l.on("grid-sidebar:load:"+this.options.controlsBlockAlias,this._applyQuery,this)),this.$form.on(`submit${i}`,this.onSubmit.bind(this)),this.applyQueryEventName=`productCollection:applyQuery:${i}`,l.on(this.applyQueryEventName,this.applyQuery.bind(this)),this._initializeInclusionExclusionSubComponent(),this._initializeSelectedProductGridsSubComponent(),this._enableHiddenFieldValidation()},eventNamespace:function(){return null===this.namespace&&(this.namespace=o.uniqueId(".applyQuery")),this.namespace},onSubmit:function(e){return!(r(e.target).valid()&&this._isCurrentDefinitionStateChange()&&!this._isConfirmed()&&(e.stopImmediatePropagation(),this._showConfirmModal(),1))},onApplyQuery:function(e){e.preventDefault(),this._isConditionBuilderValid()&&l.trigger(this.applyQueryEventName)},applyQuery:function(){this.currentDefinitionState=this._getSegmentDefinition(),this._applyQuery(!0)},onConfirmModalOk:function(){this._setConfirmed(),this.$form.trigger("submit")},onReset:function(e){const t=this.initialDefinitionState?JSON.parse(this.initialDefinitionState).filters:[];this.updateSegmentDefinitionValue("filters",t),this.currentDefinitionState=this.initialDefinitionState,this.$included.val(this.initialIncluded).trigger("change"),this.$excluded.val(this.initialExcluded).trigger("change"),this.onApplyQuery(e)},onFiltersValidate:function(e,t){const i=this.fetchSegmentDefinitionValue("filters");o.isEmpty(i)&&!this.$included.val()||(t.result=!0)},_checkOptions:function(){const e=this.requiredOptions.filter((e=>o.isUndefined(this.options[e])));if(e.length)throw new TypeError("Missing required option(s): "+e.join(", "));const t=[];if(o.each(this.options.selectors,(function(e,i){e||t.push(i)})),t.length)throw new TypeError("Missing required selectors(s): "+t.join(", "))},_applyQuery:function(e){const t={updateUrl:!1,reload:e,params:{}};t.params["si_"+this.options.gridName]=this.options.segmentId,t.params["sd_"+this.options.gridName]=this.currentDefinitionState,t.params["sd_"+this.options.gridName+":incl"]=this.$included.val(),t.params["sd_"+this.options.gridName+":excl"]=this.$excluded.val(),l.trigger("grid-sidebar:change:"+this.options.controlsBlockAlias,t)},_getSegmentDefinition:function(){return this._getSegmentDefinitionInput().val()},_getSegmentDefinitionInput:function(){const e=this.options.segmentDefinitionFieldName;return r(this.options.segmentDefinitionSelectorTemplate.replace("%s",e))},fetchSegmentDefinitionValue:function(e){let t={};const i=this._getSegmentDefinitionInput().val();if(i)try{t=JSON.parse(i)}catch(e){return}return e?t[e]:t},updateSegmentDefinitionValue:function(e,...t){let i,n=this.fetchSegmentDefinitionValue();1===t.length?(i=e,e=t[0],n[i]=e):n=e,this._getSegmentDefinitionInput().val(JSON.stringify(n)).trigger("change")},_isCurrentDefinitionStateChange:function(){return this.currentDefinitionState!==this._getSegmentDefinition()},_setConfirmed:function(){this.$form.data("apply-query-confirmed",!0)},_isConfirmed:function(){return this.$form.data("apply-query-confirmed")},_showConfirmModal:function(){const e=new n({content:s("oro.product.product_collection.filter_query.confirmation_modal_content"),okText:s("oro.product.product_collection.filter_query.continue")});e.on("ok",this.onConfirmModalOk.bind(this)),e.open()},_initializeInclusionExclusionSubComponent:function(){const e={_sourceElement:this.options._sourceElement,scope:this.options.scope,selectors:{included:this.options.selectors.included,excluded:this.options.selectors.excluded}};this.inclusionExclusionSubComponent=new a(e)},_initializeSelectedProductGridsSubComponent:function(){const e={_sourceElement:this.options._sourceElement,applyQueryEventName:this.applyQueryEventName,excludedControlsBlockAlias:this.options.excludedControlsBlockAlias,includedControlsBlockAlias:this.options.includedControlsBlockAlias,excludedProductsGridName:this.options.excludedProductsGridName,includedProductsGridName:this.options.includedProductsGridName,selectors:{included:this.options.selectors.included,excluded:this.options.selectors.excluded}};this.selectedProductGridSubComponent=new d(e)},_isConditionBuilderValid:function(){const e=this.$form;if(!e.data("validator"))return!0;e.valid();const t=e.validate().invalidElements();if(!t.length)return!0;const i=this.options._sourceElement.find(".condition-builder");return!o.filter(t,(e=>i[0]&&r.contains(i[0],e))).length},_enableHiddenFieldValidation:function(){const e=this.$form;e.data("validator")&&(e.validate().settings.ignore=":hidden:not([type=hidden]):not(:parent."+this.options.controlsBlockAlias+")")},dispose:function(){this.disposed||(this.options._sourceElement.off(this.eventNamespace()),this.$form.off(this.eventNamespace()),l.off("grid-sidebar:load:"+this.options.controlsBlockAlias),l.off(this.applyQueryEventName),c.__super__.dispose.call(this))}});return c}.call(t,i,t,e))||(e.exports=n)},"./bundles/oroproduct/js/app/components/product-collection-inclusion-exclusion-subcomponent.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/app/components/base/component.js"),n=i("./bundles/oroui/js/extend/underscore.js"),s=i("./bundles/oroui/js/extend/jquery.js"),o=i("./bundles/oroui/js/mediator.js");return t.extend({options:{scope:null,delimiter:",",selectors:{included:null,excluded:null}},requiredOptions:["scope"],$included:null,$excluded:null,constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.options=s.extend(!0,{},this.options,e||{}),this._checkOptions(),this.$included=this.options._sourceElement.find(this.options.selectors.included),this.$excluded=this.options._sourceElement.find(this.options.selectors.excluded),o.on("product-collection-add-to-included:"+this.options.scope,this.onAddToIncluded.bind(this)),o.on("product-collection-add-to-excluded:"+this.options.scope,this.onAddToExcluded.bind(this)),o.on("product-collection-remove-from-included:"+this.options.scope,this.onRemoveFromIncluded.bind(this)),o.on("product-collection-remove-from-excluded:"+this.options.scope,this.onRemoveFromExcluded.bind(this))},_checkOptions:function(){const e=n.filter(this.requiredOptions,(e=>n.isUndefined(this.options[e])));if(e.length)throw new TypeError("Missing required option(s): "+e.join(", "));const t=[];if(n.each(this.options.selectors,((e,i)=>{e||t.push(i)})),t.length)throw new TypeError("Missing required selectors(s): "+t.join(", "))},onAddToIncluded:function(e){this._removeFrom(this.$excluded,e),this._addTo(this.$included,e)},onAddToExcluded:function(e){this._removeFrom(this.$included,e),this._addTo(this.$excluded,e)},_addTo:function(e,t){if(!n.isArray(t))return;let i=e.val().split(this.options.delimiter).concat(t);i=n.filter(i,(function(e,t,i){return""!==e}));const s=n.uniq(i.sort(),!0).join(this.options.delimiter);e.val()!==s&&e.val(s).trigger("change")},onRemoveFromIncluded:function(e){this._removeFrom(this.$included,e)},onRemoveFromExcluded:function(e){this._removeFrom(this.$excluded,e)},_removeFrom:function(e,t){if(!n.isArray(t))return;t=n.map(t,(function(e){return parseInt(e)}));let i=e.val().split(this.options.delimiter);i=n.filter(i,(function(e){return""!==e&&n.indexOf(t,parseInt(e))<0}));const s=n.uniq(i.sort(),!0).join(this.options.delimiter);e.val()!==s&&e.val(s).trigger("change")},dispose:function(){this.disposed||o.off(null,null,this)}})}.call(t,i,t,e))||(e.exports=n)},"./bundles/oroproduct/js/app/components/product-collection-selected-product-grid-subcomponent.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/app/components/base/component.js"),n=i("./bundles/oroui/js/extend/underscore.js"),s=i("./bundles/oroui/js/extend/jquery.js"),o=i("./bundles/oroui/js/mediator.js"),r=i("./bundles/fosjsrouting/js/router.js");return i("../node_modules/jquery-ui/ui/effects/effect-highlight.js"),t.extend({options:{applyQueryEventName:null,excludedControlsBlockAlias:null,includedControlsBlockAlias:null,excludedProductsGridName:null,includedProductsGridName:null,wait:100,highlightColor:"#f1f7db",selectors:{excluded:null,included:null,tabFiltered:'[data-role="tab-filtered"]',tabExcluded:'[data-role="tab-excluded"]',tabIncluded:'[data-role="tab-included"]',counter:'[data-role="counter"]'},grids:[{name:"product-collection-grid",type:"filtered"},{name:"product-collection-content-variant-grid",type:"filtered"},{name:"product-collection-included-products-grid",type:"included"},{name:"product-collection-excluded-products-grid",type:"excluded"}],counterRoute:"oro_product_datagrid_count_get"},requiredOptions:["applyQueryEventName","excludedControlsBlockAlias","includedControlsBlockAlias","excludedProductsGridName","includedProductsGridName"],namespace:null,reloadMainGrid:null,listen:{"grid_load:complete mediator":"onGridLoadComplete"},constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.options=s.extend(!0,{},this.options,e||{}),this._checkOptions(),this.$excluded=this.options._sourceElement.find(this.options.selectors.excluded),this.$included=this.options._sourceElement.find(this.options.selectors.included),this._initializeTabElements(),o.on("grid-sidebar:load:"+this.options.excludedControlsBlockAlias,this.refreshExcludedGrid,this),o.on("grid-sidebar:load:"+this.options.includedControlsBlockAlias,this.refreshIncludedGrid,this),o.on(this.options.applyQueryEventName,this.onUpdateFilteredGrid,this),this.$excluded.on("change"+this.eventNamespace(),n.throttle(this.onChangeExcluded.bind(this),this.options.wait)),this.$included.on("change"+this.eventNamespace(),n.throttle(this.onChangeIncluded.bind(this),this.options.wait)),this.reloadMainGrid=n.debounce(this.triggerApplyQueryEvent.bind(this),this.options.wait)},_initializeTabElements:function(){this.tabs={filtered:{tab:this.options._sourceElement.find(this.options.selectors.tabFiltered),loadCounter:n.debounce(this._loadCounter.bind(this),this.options.wait),request:null,update:0},included:{tab:this.options._sourceElement.find(this.options.selectors.tabIncluded),loadCounter:n.debounce(this._loadCounter.bind(this),this.options.wait),request:null,update:0},excluded:{tab:this.options._sourceElement.find(this.options.selectors.tabExcluded),loadCounter:n.debounce(this._loadCounter.bind(this),this.options.wait),request:null,update:0}},this.tabs.filtered.counter=this.tabs.filtered.tab.find(this.options.selectors.counter),this.tabs.excluded.counter=this.tabs.excluded.tab.find(this.options.selectors.counter),this.tabs.included.counter=this.tabs.included.tab.find(this.options.selectors.counter)},onGridLoadComplete:function(e,t){const i=this._getGridType(e.inputName);!n.isUndefined(i)&&this.tabs[i].update>0&&this.options._sourceElement.find(t).length&&this.tabs[i].loadCounter(e,i)},_getGridType:function(e){for(let t=0;t<this.options.grids.length;t++)if(-1!==e.indexOf(this.options.grids[t].name))return this.options.grids[t].type},_loadCounter:function(e,t){const i=this.tabs[t],n=e.url,o=n.substring(n.indexOf("?"),n.length),l=r.generate(this.options.counterRoute,{gridName:e.inputName}),a=`tab${t.charAt(0).toUpperCase()+t.slice(1)}`,d=this.options._sourceElement.find(this.options.selectors[a]),c=d.data("counter-request-method")||"GET";let u=null,p=l+o;"POST"===c&&(p=l,u=o.substring(1)),i.request&&i.request.abort(),i.request=s.ajax({url:p,data:u,processData:!1,dataType:"json",type:c,success:e=>{d.find(this.options.selectors.counter).each(((t,i)=>{s(i).html(e)}))}}),i.request.done((()=>{d.effect("highlight",{color:this.options.highlightColor},1e3)})).always((()=>{i.update--,i.request=null}))},eventNamespace:function(){return null===this.namespace&&(this.namespace=n.uniqueId(".selectedProductsOnChange")),this.namespace},_checkOptions:function(){const e=n.filter(this.requiredOptions,(e=>n.isUndefined(this.options[e])));if(e.length)throw new TypeError("Missing required option(s): "+e.join(", "));const t=[];if(n.each(this.options.selectors,((e,i)=>{e||t.push(i)})),t.length)throw new TypeError("Missing required selectors(s): "+t.join(", "))},onChangeExcluded:function(){this.refreshExcludedGrid(!0),this.reloadMainGrid()},refreshExcludedGrid:function(e){!0===e&&this.tabs.excluded.update++,this._refreshGrid(this.options.excludedControlsBlockAlias,this.options.excludedProductsGridName,this.$excluded.val(),e)},onChangeIncluded:function(){this.refreshIncludedGrid(!0),this.reloadMainGrid()},refreshIncludedGrid:function(e){!0===e&&this.tabs.included.update++,this._refreshGrid(this.options.includedControlsBlockAlias,this.options.includedProductsGridName,this.$included.val(),e)},triggerApplyQueryEvent:function(){o.trigger(this.options.applyQueryEventName)},onUpdateFilteredGrid:function(){this.tabs.filtered.update++},_refreshGrid:function(e,t,i,n){const s={updateUrl:!1,reload:n,params:{}};s.params[t]={selectedProducts:i},o.trigger("grid-sidebar:change:"+e,s)},dispose:function(){this.disposed||(o.off(null,null,this),this.$excluded.off(this.eventNamespace()),this.$included.off(this.eventNamespace()))}})}.call(t,i,t,e))||(e.exports=n)},"./bundles/oroproduct/js/app/components/product-image-type-radio-control-component.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/app/components/base/component.js"),n=i("./bundles/oroui/js/extend/underscore.js");return t.extend({options:{},constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.options=n.defaults(e||{},this.options);const t=this.options._sourceElement.closest("form");t.on("change","input[type=radio][data-image-type]:checked",(function(){const e='input[type=radio][data-image-type="'+this.dataset.imageType+'"]:checked';t.find(e).not(this).prop("checked",!1)}))}})}.call(t,i,t,e))||(e.exports=n)},"./bundles/oroproduct/js/app/components/product-primary-unit-limitations-component.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/extend/jquery.js"),n=i("./bundles/oroui/js/extend/underscore.js"),s=i("./bundles/oroui/js/app/components/base/component.js"),o=i("./bundles/oroui/js/mediator.js"),r=s.extend({options:{unitsAttribute:"units",allUnitsAttribute:"all_units",deleteMessage:"oro.product.productunit.delete.confirmation",addButtonSelector:"a.add-list-item",selectParent:".oro-multiselect-holder",dataContent:"*[data-content]",unitSelect:'select[name$="[unit]"]',hiddenUnitClass:"hidden-unit",precisions:{},initialAdditionalUnits:{}},listen:{"product:precision:remove mediator":"onAdditionalPrecisionsChange","product:precision:add mediator":"onAdditionalPrecisionsChange"},constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.options=n.defaults(e||{},this.options),this.$select=this.options._sourceElement.find(this.options.unitSelect),this.options._sourceElement.on("change",this.onChange.bind(this)),this.saveInitialOptions(),this.options._sourceElement.trigger("change"),this.onAdditionalPrecisionsChange(this.options.initialAdditionalUnits)},onChange:function(){this.$select.on("change",this.onSelectChange.bind(this));const e=this.$select.find("option:selected"),t={};t.removed=this.getData()||{},this.saveData({});let i=this.getData();void 0!==e.val()?i[e.val()]=e.text():i=t.removed,this.saveData(i),t.added=i,t.added!==t.removed&&this.triggerChangeEvent(t)},onSelectChange:function(e){const i=t(e.target),n=i.find("option:selected"),s=this.options.precisions[n.val()];i.closest("tr").find('input[class="precision"]').val(s)},onAdditionalPrecisionsChange:function(e){const i=e,s=this.getInitialOptions();n.each(i,(function(e,t){delete s[t]}));const o=this.$select.find("option"),r=this.$select.find("option:selected");delete s[r.val()],n.each(o,(function(e){e.value!==r.val()&&t(e).remove()}));const l=this;n.each(s,(function(e,i){l.$select.append(t("<option></option>").val(i).text(e))})),l.$select.find(r.val()).selected(!0).trigger("change")},getData:function(){return this.options._sourceElement.data(this.options.unitsAttribute)||{}},getInitialOptions:function(){return n.clone(this.options._sourceElement.data(this.options.allUnitsAttribute)||{})},saveData:function(e){this.options._sourceElement.data(this.options.unitsAttribute,e)},saveInitialOptions:function(){const e=this.$select.find("option"),t={};n.each(e,(function(e){t[e.value]=e.text})),this.options._sourceElement.data(this.options.allUnitsAttribute,t)},triggerChangeEvent:function(e){o.trigger("product:primary:precision:change",e)},dispose:function(){this.disposed||(this.confirm&&this.confirm.off().remove(),this.options._sourceElement.off(),this.$select.off("change"),r.__super__.dispose.call(this))}});return r}.call(t,i,t,e))||(e.exports=n)},"./bundles/oroproduct/js/app/components/product-unit-component.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/app/components/base/component.js"),n=i("./bundles/oroui/js/app/models/base/model.js"),s=i("./bundles/oroproduct/js/app/units-util.js"),o=i("./bundles/oroui/js/app/views/loading-mask-view.js"),r=i("./bundles/fosjsrouting/js/router.js"),l=i("./bundles/oroui/js/extend/underscore.js"),a=i("./bundles/oroui/js/extend/jquery.js"),d=i("./bundles/orotranslation/js/translator.js"),c=t.extend({options:{productSelector:'.product-product [data-name="field__product"]',quantitySelector:".product-quantity input",unitSelector:".product-unit select",routeName:"oro_product_unit_product_units",routingParams:{},errorMessage:"Sorry, an unexpected error has occurred.",loadingMaskEnabled:!0,dropQuantityOnLoad:!0,defaultValues:null},loadingMaskView:null,productSelector:null,quantitySelector:null,unitSelector:null,constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.options=l.defaults(e||{},this.options),this.model||(this.model=new n),this.initializeLoadingMask(e),this.options._sourceElement.on("change",this.options.productSelector,this.onProductChange.bind(this)),this.quantitySelector=this.options._sourceElement.find(this.options.quantitySelector),this.unitSelector=this.options._sourceElement.find(this.options.unitSelector),this.productSelector=this.options._sourceElement.find(this.options.productSelector),this.productSelector.val()||this._dropValues()},initializeLoadingMask:function(e){e.loadingMaskEnabled&&(this.loadingMaskView=new o({container:this.options._sourceElement}))},onProductChange:function(e){this.unitSelector.trigger("value:changing");const t=e.target.value;if(!t)return void this._dropValues();const i=a.extend({},this.options.routingParams,{id:t});a.ajax({url:r.generate(this.options.routeName,i),beforeSend:this._beforeSend.bind(this),success:this._success.bind(this),complete:this._complete.bind(this),errorHandlerMessage:d(this.options.errorMessage),error:this._dropValues.bind(this)})},_beforeSend:function(){this.loadingMaskView&&this.loadingMaskView.show()},_dropValues:function(){this.options.dropQuantityOnLoad&&this.handleQuantityState(!0),this.handleUnitsState(this.options.defaultValues)},_success:function(e){this.handleQuantityState(!1),this.handleUnitsState(e.units)},_complete:function(){this.loadingMaskView&&this.loadingMaskView.hide()},handleQuantityState:function(e){this.quantitySelector.prop("disabled",e),this.options.dropQuantityOnLoad&&this.quantitySelector.val(null)},handleUnitsState:function(e){this.model.set("product_units",e),s.updateSelect(this.model,this.unitSelector),this.unitSelector.trigger("value:changed").trigger("change")},dispose:function(){this.disposed||(this.options._sourceElement.off(),c.__super__.dispose.call(this))}});return c}.call(t,i,t,e))||(e.exports=n)},"./bundles/oroproduct/js/app/components/product-unit-selection-limitations-component.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/extend/jquery.js"),n=i("./bundles/oroui/js/extend/underscore.js"),s=i("./bundles/oroui/js/app/components/base/component.js"),o=i("./bundles/oroui/js/delete-confirmation.js"),r=i("./bundles/orotranslation/js/translator.js"),l=i("./bundles/oroui/js/mediator.js"),a=s.extend({options:{unitsAttribute:"units",deleteMessage:"oro.product.productunit.delete.confirmation",errorTitle:"oro.product.productunit.delete.error.title",errorMessage:"oro.product.productunit.delete.error.message",addButtonSelector:"a.add-list-item",selectParent:".oro-multiselect-holder",dataContent:"*[data-content]",unitSelect:'select[name$="[unit]"]',conversionRateInput:'input[name$="[conversionRate]"]',hiddenUnitClass:"hidden-unit",parentTableSelector:"",pricesUnitsSelector:'select[name^="oro_product[prices]"][name$="[unit]"]',precisions:{}},listen:{"product:primary:precision:change mediator":"onPrimaryPrecisionChange"},constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.options=n.defaults(e||{},this.options),this.options._sourceElement.on("content:changed",this.onChange.bind(this)).on("content:remove",this.askConfirmation.bind(this)).on("click",".removeLineItem",this.onRemoveRow.bind(this)).on("change",this.options.unitSelect,this.onSelectChange.bind(this)),l.on("page:afterChange",this.onChange,this)},getAddButton:function(){return this.options._sourceElement.find(this.options.addButtonSelector)},onRemoveRow:function(e){e.stopPropagation();const i=t(e.target).closest(this.options.selectParent).find(this.options.unitSelect+" option:selected");void 0!==this.getUnitsWithPrices()[i.val()]?this.showError():t(e.target).closest(this.options.dataContent).trigger("content:remove")},onChange:function(){const e=this.options._sourceElement.find(this.options.unitSelect),i=n.first(n.values(this.getPrimaryData()));this.toggleTableVisibility(),n.each(e.get(),(function(s){s=t(s),i&&s.find('option[value="'+i+'"]').remove();const o=s.find("option:selected");if(e.not(s).find('option[value="'+o.val()+'"]').remove(),s.find("option").length<=1&&this.getAddButton().hide(),o.val()!==s.data("prevValue")&&!s.hasClass(this.options.hiddenUnitClass)){const e=this.options.precisions[o.val()];n.isUndefined(e)||s.parents(this.options.selectParent).find('input[class="precision"]').val(e)}s.data("prevValue",o.val()).data("prevText",o.text()),this.addData({value:o.val(),text:o.text()})}),this),n.each(this.getPrimaryData(),(function(e,t){this.addConversionRateLabels(t)}),this)},onPrimaryPrecisionChange:function(e){const t=e.removed,i=e.added,s=this;n.isEmpty(t)||n.each(t,(function(e,t){s.addOptionToAllSelects(t,e)})),n.isEmpty(i)||n.each(i,(function(e,t){s.addConversionRateLabels(t),s.removeOptionFromAllSelects(t,e)}))},onRemoveItem:function(e){const i=t(e.target).find("select:enabled option:selected");i&&(this.removeData({value:i.val(),text:i.text()}),this.addOptionToAllSelects(i.val(),i.text()),this.getAddButton().show(),t(e.target).remove()),this.toggleTableVisibility()},onSelectChange:function(e){const i=t(e.target);this.removeData({value:i.data("prevValue"),text:i.data("prevText")}),this.addOptionToAllSelects(i.data("prevValue"),i.data("prevText")),this.onChange()},addOptionToAllSelects:function(e,i){this.options._sourceElement.find(this.options.unitSelect).each((function(){const n=t(this);n.data("prevValue")!==e&&n.append(t("<option></option>").val(e).text(i))}))},addConversionRateLabels:function(e){this.options._sourceElement.find(this.options.conversionRateInput).each((function(){const i=t(this),n=r("oro.product.product_unit."+e+".label.short_plural"),s="conversion-rate-label";i.siblings("."+s).remove(),i.after(t("<span></span>",{class:s,text:n.toLowerCase()}))}))},removeOptionFromAllSelects:function(e,i){this.options._sourceElement.find(this.options.unitSelect).each((function(){const i=t(this).find('option[value="'+e+'"]');i.length&&i.remove()}))},askConfirmation:function(e){const t=new o({content:r(this.options.deleteMessage)});t.on("ok",this.onRemoveItem.bind(this,e)),t.open()},showError:function(){new o({title:r(this.options.errorTitle),content:r(this.options.errorMessage),allowOk:!1}).open()},addData:function(e){const t=this.getData(),i=this.getPrimaryData();t.hasOwnProperty(e.value)||i.hasOwnProperty(e.value)||(t[e.value]=e.text,this.saveData(t),this.triggerAddEvent(t))},removeData:function(e){const t=this.getData();delete t[e.value],this.saveData(t),this.triggerRemoveEvent(t)},getData:function(){return this.options._sourceElement.data(this.options.unitsAttribute)||{}},getPrimaryData:function(){return t(":data("+this.options.unitsAttribute+")").data(this.options.unitsAttribute)||{}},getUnitsWithPrices:function(){const e=t(this.options.pricesUnitsSelector),i={};return n.each(e,(function(e){const n=t(e).find("option:selected");i[n.val()]=n.text()})),i},saveData:function(e){this.options._sourceElement.data(this.options.unitsAttribute,e)},toggleTableVisibility:function(){const e=this.options._sourceElement.find(this.options.unitSelect),t=this.options._sourceElement.find("table");e.length<1?(t.hide(),0===this.getAddButton().length&&this.options._sourceElement.parents(".control-group:first").hide()):t.show()},triggerAddEvent:function(e){l.trigger("product:precision:add",e)},triggerRemoveEvent:function(e){l.trigger("product:precision:remove",e)},dispose:function(){this.disposed||(this.options._sourceElement.off(),a.__super__.dispose.call(this))}});return a}.call(t,i,t,e))||(e.exports=n)},"./bundles/oroproduct/js/app/components/product-variant-component.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/app/components/base/component.js"),n=i("./bundles/oroui/js/mediator.js"),s=i("./bundles/oroui/js/extend/underscore.js"),o=i("./bundles/oroui/js/extend/jquery.js"),r=t.extend({relatedSiblingComponents:{productVariantsGridComponent:"product-product-variants-edit"},options:{productVariantFieldsSelector:"input[type=checkbox]",datagridName:"product-product-variants-edit",datagridVariantFields:[]},variantFieldCheckboxes:[],constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.options=s.defaults(e||{},this.options),this.variantFieldCheckboxes=this.options._sourceElement.find(this.options.productVariantFieldsSelector),this.variantFieldCheckboxes&&this.options._sourceElement.on("change",this.productVariantFieldsSelector,this.onVariantFieldChange.bind(this)),this.productVariantsGridComponent&&(this.updateVisibilityChange(),this.listenTo(n,"grid_load:complete",(function(e){e.inputName===this.options.datagridName&&this.updateVisibilityChange()})))},onVariantFieldChange:function(){let e=[];this.variantFieldCheckboxes.each(((t,i)=>{i.checked&&e.push(this.getFieldName(i))})),0===e.length&&(e=null),this._updateProductVariantsGrid(e)},_updateProductVariantsGrid:function(e){this.updateVisibilityChange();const t=this.options.datagridName;n.trigger(`datagrid:setParam:${t}`,"selectedVariantFields",e),n.trigger(`datagrid:setParam:${t}`,"gridDynamicLoad",1),n.trigger(`datagrid:doReset:${t}`)},updateVisibilityChange:function(){const e=this.options.datagridVariantFields;this.variantFieldCheckboxes&&this.variantFieldCheckboxes.each(((t,i)=>{e[this.getFieldName(i)]=i.checked}));const t=this.options.datagridName;for(const[i,s]of Object.entries(e)){n.trigger(`datagrid:changeColumnParam:${t}`,i,"renderable",s);const{grid:e}=this.productVariantsGridComponent;if(e){const{[i]:t}=e.collection.initialState.columns;t&&e.collection.patchInitialState({columns:{...e.collection.initialState.columns,[i]:{...t,renderable:s}}})}}},getFieldName:function(e){return o(e).attr("data-original-name")},dispose:function(){this.disposed||(this.options._sourceElement.off("change"),r.__super__.dispose.call(this))}});return r}.call(t,i,t,e))||(e.exports=n)},"./bundles/oroproduct/js/app/components/product-variant-field-component.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/extend/underscore.js"),n=i("./bundles/oroui/js/extend/jquery.js"),s=i("./bundles/oroui/js/app/components/view-component.js"),o=i("./bundles/oroui/js/error.js"),r=i("./bundles/oroui/js/tools.js"),{validator:l}=i("./bundles/oroform/js/extend/validate.js"),a=s.extend({options:{simpleProductVariants:{}},$el:null,filteredOptions:null,_filtered:null,_hierarchy:null,state:null,simpleProductVariants:{},constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.filteredOptions=[],this._hierarchy=[],this.state={},this.options=t.defaults(e||{},r.deepClone(this.options)),a.__super__.initialize.call(this,e),this.$el=this.options._sourceElement,this._prepareProductVariants(),this.deferredInit.done(this._initVariantInstances.bind(this))},setState:function(e,i){return t.isUndefined(i)?o.showErrorInConsole("The value should be defined"):(this.state[e]=i,this.state)},getState:function(e){return e?this.state[e]:this.state},updateFields:function(){this.$el.find("select").each(((e,t)=>{-1===this._filtered.indexOf(n(t).val())&&(n(t).val(""),this.setState(this._extractName(n(t).data("name")),null)),n(t).trigger("change.select2")}))},dispose:function(){this.disposed||(this.$el.off(),delete this._filtered,delete this._hierarchy,delete this.state,delete this.filteredOptions,a.__super__.dispose.call(this))},_initVariantInstances:function(){const e=this._onVariantFieldChange.bind(this,this.simpleProductVariants);this.view.el.reset(),this.$el.find("select").length&&this.$el.find("select").each(((e,t)=>{const i=n(t),s=this._extractName(i.data("name"));this.filteredOptions=this.filteredOptions.concat(i.find("option").get().filter((e=>(e.value=""!==e.value?s+"_"+e.value:"",!e.disabled&&""!==e.value)))),this._appendToHierarchy(s),this.setState(s,i.val())})),this._resolveVariantFieldsChain(this.simpleProductVariants),this.$el.on("change","select",e)},_prepareProductVariants:function(){this.simpleProductVariants=t.mapObject(this.options.simpleProductVariants,(function(e){return t.reduce(e.attributes,(function(e,t,i){return e[this._extractName(i)]=this._extractName(i)+"_"+this._normalizeBool(t),e}),{},this)}),this)},_appendToHierarchy:function(e){return t.isString(e)?-1!==this._hierarchy.indexOf(e)?o.showErrorInConsole("Item: "+e+" is already exist!"):(this._hierarchy.push(e),this._hierarchy):o.showErrorInConsole(e+" should be string")},_onVariantFieldChange:function(e,t){const i=n(t.target);this.setState(this._extractName(i.data("name")),i.val()),this._resolveVariantFieldsChain(e)},_resolveVariantFieldsChain:function(e){this._filtered=this._resolveHierarchy(e),this.filteredOptions.forEach((e=>{e.disabled=-1===t.indexOf(this._filtered,e.value)})),this._updateProduct(),this.updateFields()},_resolveHierarchy:function(e){let i=[];return this._hierarchy.forEach(((n,s)=>{const o=this._hierarchy[s-1];e=t.isUndefined(o)?e:t.where(e,this._prepareFoundKeyValue(o)),i=i.concat(t.uniq(t.pluck(e,n)))})),i},_prepareFoundKeyValue:function(e){const t={};return t[e]=this.getState(e),t},_updateProduct:function(){const e=this.simpleProductVariants,i=!Object.values(this.getState()).some((e=>!e));if(this.view.$el.data("validator")&&l.preloadMethods().then((()=>this.view.$el.valid())),i){for(const i in e)if(e.hasOwnProperty(i)&&t.isEqual(this.getState(),e[i])){const{attributes:e,...t}=this.options.simpleProductVariants[i];this.view.updateProductModel({id:i,...t});break}}else this.view.updateProductModel({id:0},!0)},_extractName:function(e){return(e=e.toLowerCase().split("__").slice(-1)[0]).replace(/[-_]/g,"")},_normalizeBool:function(e){return t.isBoolean(e)?+e:e}});return a}.call(t,i,t,e))||(e.exports=n)},"./bundles/oroproduct/js/app/components/related-items-tabs-component.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/extend/underscore.js"),n=i("./bundles/oroui/js/app/components/base/component.js"),s=i("./bundles/oroui/js/app/models/base/collection.js"),o=i("./bundles/oroui/js/app/views/tab-collection-view.js"),r=i("./bundles/oroui/js/extend/jquery.js");return n.extend({constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){if(!e.data.length)return;const i=t.each(e.data,(function(e){e.uniqueId=t.uniqueId(e.id)}));this.categories=new s(i);const n=this.categories.first();n.set("active",!0),this.view=new o({el:e._sourceElement,animationDuration:0,collection:this.categories,useDropdown:e.useDropdown}),this._hideAllGrids(),this._showGrid(n.id),this.listenTo(this.categories,"change",this.onTabChange)},onTabChange:function(e){this._hideAllGrids(),e.hasChanged("active")&&!0===e.get("active")&&this._showGrid(e.id)},_getGrid:function(e){return r("#"+e)},_showGrid:function(e){this._getGrid(e).show()},_hideGrid:function(e){this._getGrid(e).hide()},_hideAllGrids:function(){this.categories.each((function(e){this._hideGrid(e.id)}),this)}})}.call(t,i,t,e))||(e.exports=n)},"./bundles/oroproduct/js/app/quantity-helper.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/orolocale/js/formatter/number.js"),n=i("./bundles/orolocale/js/locale-settings.js");return{formatQuantity:function(e,i,n,s){if(!e)return e;const o={grouping_used:!n};if(i&&"number"==typeof parseInt(i)){const e=parseInt(i);o.max_fraction_digits=e,s&&(o.min_fraction_digits=e)}return t.formatDecimal(e,o)},getQuantityNumberOrDefaultValue:function(e,t){void 0===t&&(t=e);const i=this.getNumberFromFormattedQuantityString(e);return!1===i?t:i},isQuantityLocalizedValueValid:function(e){return!1!==this.getNumberFromFormattedQuantityString(e)},getNumberFromFormattedQuantityString:function(e){if(!e||""===e)return!1;const i=t.unformatStrict(e);return!isNaN(i)&&i},getDefaultMaxFractionDigits:()=>n.settings.format.number.decimal.max_fraction_digits}}.call(t,i,t,e))||(e.exports=n)},"./bundles/oroproduct/js/app/units-util.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/extend/underscore.js"),n=i("./bundles/orotranslation/js/translator.js"),s=i("./bundles/oroui/js/input-widget-manager.js"),o={getUnitLabel:function(e,t){const i=e.get("unit_label_template")||"oro.product.product_unit.%s.label.full";return n(i.replace("%s",t))},getUnitsLabel:function(e){const i={};return t.each(e.get("product_units"),(function(t,n){i[n]=o.getUnitLabel(e,n)})),i},updateSelect:function(e,i,n=!1){const o=[],r=i.val(),l=this.getUnitsLabel(e);t.isEmpty(l)?i.prop("disabled",!0):(t.each(l,(function(e,t){o.push(this.generateSelectOption(t,e))}),this),i.prop("disabled",!1),i.prop("readonly",o.length<=1));let a=r||e.get("unit");const d=e.get("unit_label");if(t.isEmpty(l)||d&&!a){const t=e.get("unit_placeholder")||i.find('option[value=""]').text()||"";o.unshift(this.generateSelectOption("",t)),a=""}else t.isEmpty(l)||a&&-1!==Object.keys(l).indexOf(a)||(a=Object.keys(l)[0]);i.html(o.join("")),e.set("unit",a),a===r&&a===i.val()||(i.val(a),n||i.change()),s.hasWidget(i)&&i.inputWidget("refresh")},generateSelectOption:function(e,i){return'<option value="'+t.escape(e)+'">'+t.escape(i)+"</option>"}};return o}.call(t,i,t,e))||(e.exports=n)},"./bundles/oroproduct/js/app/views/base-product-view.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/app/views/base/view.js"),n=i("./bundles/orofrontend/js/app/elements-helper.js"),s=i("./bundles/oroui/js/app/models/base/model.js"),o=i("./bundles/oroui/js/mediator.js"),r=i("./bundles/fosjsrouting/js/router.js"),l=i("./bundles/oroui/js/extend/jquery.js"),a=i("./bundles/oroui/js/extend/underscore.js"),d=i("./bundles/oroproduct/js/app/quantity-helper.js"),c=t.extend(a.extend({},n,{optionNames:t.prototype.optionNames.concat(["normalizeQuantityField"]),normalizeQuantityField:!0,elements:{productItem:'[data-role="product-item"]',quantity:["lineItem",'[data-name="field__quantity"]'],unit:["lineItem",'[data-name="field__unit"]:first'],lineItem:'[data-role="line-item-form-container"]:first',lineItemFields:":input[data-name]"},elementsEvents:{quantity:["change","onQuantityChange"]},modelElements:{quantity:"quantity",unit:"unit"},modelAttr:{id:0,quantity:0,unit:"",product_units:{},line_item_form_enable:!0},modelEvents:{id:["change","onProductChanged"],line_item_form_enable:["change","onLineItemFormEnableChanged"],unit_label:["change","changeUnitLabel"],unit:["change","onUnitChange"],product_units:["change","onProductUnitsChange"]},originalProductId:null,constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){c.__super__.initialize.call(this,e),this.rowId=this.$el.parent().data("row-id"),this.initModel(e),this.initializeElements(e),this.getElement("quantity").inputWidget("create"),this.setPrecision(),this.onQuantityChange(null),this.originalProductId=this.model.get("parentProduct"),this.initializeSubviews({productModel:this.model,options:{productModel:this.model}})},delegateEvents:function(e){return c.__super__.delegateEvents.call(this,e),this.$el.one("change"+this.eventNamespace(),function(){this.$el.removeAttr("data-validation-ignore")}.bind(this)),this},initModel:function(e){this.modelAttr=l.extend(!0,{},this.modelAttr,e.modelAttr||{}),this.model||(this.model=a.isObject(this.collection)&&this.collection.get(this.rowId)?this.collection.get(this.rowId):new s),a.each(this.modelAttr,(function(e,t){this.model.has(t)||this.model.set(t,e)}),this)},onProductChanged:function(){const e=this.model.get("id");this.model.set("line_item_form_enable",Boolean(e));const t=e||this.originalProductId;o.trigger("layout-subtree:update:product",{layoutSubtreeUrl:r.generate("oro_product_frontend_product_view",{id:t,parentProductId:this.model.get("parentProduct"),ignoreProductVariant:!0}),layoutSubtreeCallback:this.afterProductChanged.bind(this)})},viewToModelElementValueTransform:function(e,t){return"quantity"===t?"number"===this.getElement(t).attr("type").toLowerCase()?parseFloat(e):d.getQuantityNumberOrDefaultValue(e,NaN):e},modelToViewElementValueTransform:function(e,t){if("quantity"===t){const t=this.getElement("quantity").data("precision");return d.formatQuantity(e,t,!0)}return e},onQuantityChange:function(e){this.setModelValueFromElement(e,"quantity","quantity")},onUnitChange:function(){this.setPrecision()},onProductUnitsChange:function(){this.setPrecision()},setPrecision:function(){const e=this.model.get("product_units")[this.model.get("unit")];this.getElement("quantity").data("precision",e).inputWidget("refresh")},changeUnitLabel:function(){const e=this.getElement("unit"),t=this.model.get("unit_label");e.find("option").each((function(){const e=l(this);e.data("originalText")||e.data("originalText",this.text),t&&this.selected?this.text=t:this.text=e.data("originalText")})),e.inputWidget("refresh")},afterProductChanged:function(){this.undelegateElementsEvents(),this.clearElementsCache(),this.setModelValueFromElements(),this.delegateElementsEvents(),this.onLineItemFormEnableChanged(),this.model.set("product_units",this.getElement("unit").data("unit-precisions")),this.setPrecision()},onLineItemFormEnableChanged:function(){this.model.get("line_item_form_enable")?this.enableLineItemForm():this.disableLineItemForm()},enableLineItemForm:function(){this.getLineItemFields().prop("disabled",!1).inputWidget("refresh"),this.getLineItem().removeClass("disabled")},disableLineItemForm:function(){this.getLineItemFields().prop("disabled",!0).inputWidget("refresh"),this.getLineItem().addClass("disabled")},getLineItem:function(){const e=this.getElement("productItem").find(this.elements.lineItem);return this.getElement("lineItem").not(e)},getLineItemFields:function(){return this.getLineItem().find(this.elements.lineItem)},dispose:function(){delete this.modelAttr,delete this.rowId,this.disposeElements(),c.__super__.dispose.call(this)}}));return c}.call(t,i,t,e))||(e.exports=n)},"./bundles/oroproduct/js/app/views/line-item-product-view.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroproduct/js/app/views/base-product-view.js"),n=i("./bundles/oroui/js/extend/underscore.js");return t.extend({elements:n.extend({},t.prototype.elements,{id:'[data-name="field__product"]',quantity:'[data-name="field__quantity"]:first',unit:'[data-name="field__product-unit"]'}),modelElements:n.extend({},t.prototype.modelElements,{id:"id"}),constructor:function e(t){e.__super__.constructor.call(this,t)}})}.call(t,i,t,e))||(e.exports=n)},"./bundles/oroproduct/js/app/views/variant-fields-view.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/extend/jquery.js"),n=i("./bundles/oroui/js/app/views/base/view.js");return i("./bundles/oroui/js/extend/jquery-ui/widgets/sortable.js"),n.extend({events:{"click a.add-list-item":"reindexValues"},constructor:function e(t){e.__super__.constructor.call(this,t)},render:function(){return this.initSortable(),this.reindexValues(),this},reindexValues:function(){let e=1;this.$('[name$="[priority]"]').each((function(){t(this).val(e++)}))},initSortable:function(){this.$('[data-name="field__variant-fields"]').sortable({handle:'[data-name="sortable-handle"]',tolerance:"pointer",delay:100,containment:"parent",stop:this.reindexValues.bind(this)})}})}.call(t,i,t,e))||(e.exports=n)},"./bundles/oroproduct/js/app/widget/product-collection-popup-add-products-widget.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/orowindows/js/widget/dialog-widget.js"),n=i("./bundles/oroui/js/extend/jquery.js"),s=i("./bundles/oroui/js/extend/underscore.js"),o=i("./bundles/oroui/js/mediator.js"),r=t.extend({requiredOptions:["gridName","hiddenProductsSelector"],options:s.extend({},t.prototype.options,{triggerEventOnMessagesRemoved:!1}),constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.options=s.defaults(e||{},this.options),r.__super__.initialize.call(this,e),this._checkOptions(),this.getAction("addProducts","adopted",(e=>{e.on("click",this._triggerEvent.bind(this))})),o.on("product-collection-add-to-excluded",this._closeDialogWidget,this),o.on("product-collection-add-to-included",this._closeDialogWidget,this)},_checkOptions:function(){const e=this.requiredOptions.filter((e=>s.isUndefined(this.options[e])));if(e.length)throw new TypeError("Missing required option(s): "+e.join(", "))},_triggerEvent:function(){o.trigger("get-selected-products-mass-action-run:"+this.options.gridName)},_closeDialogWidget:function(){this.remove()},_getWidgetData:function(){const e=r.__super__._getWidgetData.call(this),t=n(this.options.hiddenProductsSelector).val();return t&&(e.hiddenProducts=t),e},loadContent:function(...e){if(e.length)r.__super__.loadContent.apply(this,e);else{const e=this.firstRun;this.firstRun=!1,r.__super__.loadContent.call(this,void 0,"post"),this.firstRun=e}},dispose:function(){this.disposed||(o.off(null,null,this),r.__super__.dispose.call(this))}});return r}.call(t,i,t,e))||(e.exports=n)},"./bundles/oroproduct/js/app/widget/related-items-widget.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/orowindows/js/widget/dialog-widget.js"),n=i("./bundles/orofrontend/js/app/elements-helper.js"),s=i("./bundles/oroui/js/mediator.js"),o=i("./bundles/oroui/js/extend/underscore.js"),r=i("./bundles/orotranslation/js/translator.js"),l=i("./bundles/oroui/js/extend/jquery.js"),a=t.extend(o.extend({},n,{elements:{appendedIds:'[data-role="related-items-appended-ids"]',removedIds:'[data-role="related-items-removed-ids"]',selectButtonSelector:'[data-role="related-items-submit-button"]',limitError:'[data-role="related-items-limit-error"]',widgetActions:'[data-section="adopted"]'},events:{"change .grid-body-cell-isRelated input":"recalculateSelectedItemsCount"},listen:{contentLoad:"onContentLoad","datagrid:rendered mediator":"setSelectedCount"},selectedCount:0,constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.options=o.defaults(e||{},this.options),a.__super__.initialize.call(this,e),this.options.itemsLimit=isNaN(this.options.itemsLimit)?-1:this.options.itemsLimit,this.initializeElements()},setSelectedCount:function(e){const t=e.metadata.options.urlParams.relatedItemsIds;this.selectedCount="undefined"!==t?t.length:0},onContentLoad:function(){this.clearElementsCache(),this.initializeElements(),this.prepareError(),this.recalculateSelectedItemsCount(),l(this.elements.selectButtonSelector).on("click",this.onSelectRelatedItems.bind(this))},prepareContentRequestOptions:function(e,t,i){const n=l(this.options.itemsIdsToAdd).val(),s=l(this.options.itemsIdsToRemove).val(),o=a.__super__.prepareContentRequestOptions.call(this,e,t,i);return o.data+="&"+l.param({addedProductRelatedItems:n,removedProductRelatedItems:s}),o},onSelectRelatedItems:function(e){l(e.target).hasClass("disabled")||(s.trigger("change:"+this.options.gridName,this.getAppendedIds(),this.getRemovedIds()),this.remove())},recalculateSelectedItemsCount:function(){this.recalculatedRelatedItemsCount=this.selectedCount+this.getAppendedIds().length-this.getRemovedIds().length,this.updateUI()},getAppendedIds:function(){const e=this.getElement("appendedIds").val();return e.length?e.split(","):[]},getRemovedIds:function(){const e=this.getElement("removedIds").val();return e.length?e.split(","):[]},isLimitExceeded:function(){return!(-1===this.options.itemsLimit||this.recalculatedRelatedItemsCount<=this.options.itemsLimit)},updateUI:function(){l(this.elements.selectButtonSelector).toggleClass("btn-primary",!this.isLimitExceeded()).toggleClass("disabled",this.isLimitExceeded()),l(this.elements.limitError).toggle(this.isLimitExceeded())},prepareError:function(){void 0===this.options.limitErrorTemplate&&(this.options.limitErrorTemplate=o.template('<span class="pull-left validation-failed" <%= dataAttr %>><%- msg %></span>'),l(this.elements.widgetActions).prepend(this.options.limitErrorTemplate({dataAttr:this.elements.limitError.replace(new RegExp(/\[|]/g),""),msg:r("oro.product.widgets.select_related_items.limit_has_been_reached")})))},dispose:function(){delete this.selectedCount,delete this.recalculatedRelatedItemsCount,a.__super__.dispose.call(this)}}));return a}.call(t,i,t,e))||(e.exports=n)},"./bundles/ororfp/js/app/components/order-line-item-offers.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/app/components/base/component.js"),n=i("./bundles/oroui/js/extend/underscore.js"),s=i("./bundles/oroui/js/extend/jquery.js"),o=i("./bundles/oroui/js/mediator.js"),r=t.extend({options:{offersSelector:".order-line-item-offers",priceSelector:".order-line-item-price input",quantitySelector:".order-line-item-quantity input",unitSelector:".order-line-item-quantity select",productSelector:".order-line-item-product input",productSkuSelector:".order-line-item-product-sku input",offersDataSelector:".order-line-item-offers-data input"},objects:{},$product:null,items:[],constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.options=n.defaults(e||{},this.options),this.options._sourceElement.on("click",this.options.offersSelector,this.onRadioClick.bind(this)),this.$product=s(this.options.productSelector),this.$product.on("change",this.onProductChange.bind(this)),this.objects={},o.trigger("entry-point:order:trigger-delayed")},onRadioClick:function(e){const t=s(e.target);let i=!1;o.trigger("entry-point:listeners:off"),n.each(["quantity","price","unit"],function(e){const n=t.data(e).toString(),s=this.findObject(this.options[e+"Selector"]);n.length>0&&s.val()!==n&&(s.val(n).trigger("change"),i=!0)}.bind(this)),i&&o.trigger("entry-point:order:trigger")},onProductChange:function(){s(this.options.offersDataSelector).val(null),s(this.options.productSkuSelector).val(null),this.$product.off(),this.options._sourceElement.remove()},findObject:function(e){return this.objects[e]||(this.objects[e]=s(e)),this.objects[e]},dispose:function(){this.disposed||(this.$product.off(),this.options._sourceElement.off(),r.__super__.dispose.call(this))}});return r}.call(t,i,t,e))||(e.exports=n)},"./bundles/ororfp/js/app/views/line-item-offer-view.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroproduct/js/app/views/base-product-view.js"),n=i("./bundles/oroui/js/extend/underscore.js"),s=t.extend({constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.$el.trigger("options:set:lineItemModel",e),this.deferredInitializeCheck(e,["lineItemModel"])},deferredInitialize:function(e){this.lineItemModel=e.lineItemModel,this.lineItemModel.on("change",this.updateModel,this),this.updateModel(),e.modelAttr=n.defaults(e.modelAttr||{},{sku:this.lineItemModel.get("sku")}),s.__super__.initialize.call(this,e)},updateModel:function(){this.model?this.model.set({id:this.lineItemModel.get("productId"),product_units:this.lineItemModel.get("product_units"),sku:this.lineItemModel.get("sku")}):(this.modelAttr.id=this.lineItemModel.get("productId"),this.modelAttr.product_units=this.lineItemModel.get("product_units"))}});return s}.call(t,i,t,e))||(e.exports=n)},"./bundles/ororfp/js/app/views/line-item-view.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/app/views/base/view.js"),n=i("./bundles/orofrontend/js/app/elements-helper.js"),s=i("./bundles/oroui/js/app/models/base/model.js"),o=i("./bundles/oroproduct/js/app/units-util.js"),r=i("./bundles/oroui/js/extend/jquery.js"),l=i("./bundles/oroui/js/extend/underscore.js"),a=i("./bundles/orotranslation/js/translator.js"),d=i("./bundles/oroui/js/app/views/loading-mask-view.js"),c=i("./bundles/fosjsrouting/js/router.js"),u=t.extend(l.extend({},n,{options:{ftid:"",selectors:{quantitySelector:'[data-name="field__quantity"]',unitSelector:'[data-name="field__product-unit"]'},syncClass:"synchronized",unitsRoute:"oro_product_frontend_ajaxproductunit_productunits",compactUnits:!1,itemsContainer:'[data-role="lineitems"]',itemWidget:'[data-role="lineitem"]',addItemButton:'[data-role="lineitem-add"]',skipLoadingMask:!1},$el:null,$itemsContainer:null,$addItemButton:null,units:{},loadingMask:null,elements:{productId:'[data-name="field__product"]'},modelElements:{productId:"productId"},modelAttr:{productId:0,product_units:{}},modelEvents:{productId:["change","onProductChanged"]},constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.options=r.extend(!0,{},this.options,e||{}),this.options.ftid||(this.options.ftid=this.$el.data("content").toString().replace(/[^a-zA-Z0-9]+/g,"_").replace(/_+$/,"")),this.delegate("click",".removeLineItem",this.removeRow),this.$itemsContainer=this.$el.find(this.options.itemsContainer),this.$addItemButton=this.$el.find(this.options.addItemButton),this.loadingMask=new d({container:this.$el}),this.$el.on("content:changed",this.onContentChanged.bind(this)),this.initModel(e),this.initializeElements(e),this.model.set("product_units",this.options.units[this.model.get("productId")]||[]),this.$el.on("options:set:lineItemModel",((e,t)=>{t.lineItemModel=this.model})),this.initializeSubviews({lineItemModel:this.model})},initModel:function(e){this.modelAttr=r.extend(!0,{},this.modelAttr,e.modelAttr||{}),this.model=new s,l.each(this.modelAttr,(function(e,t){this.model.has(t)||this.model.set(t,e)}),this)},handleLayoutInit:function(){this.checkAddButton(),this._resolveDeferredRender()},checkAddButton:function(){this.$addItemButton.toggle(Boolean(this.model.get("productId")))},initSelects:function(){this.$el.find(this.options.unitsSelect).addClass(this.options.syncClass)},removeRow:function(){this.$el.trigger("content:remove"),this.remove()},onProductChanged:function(e){void 0!==e&&e.event&&this.model.set("sku",e.event.added.sku),this.checkAddButton(),this.model.get("productId")&&!this.$itemsContainer.children().length&&this.$addItemButton.click(),this.$itemsContainer.children().length&&this.updateContent(!0)},onContentChanged:function(e){this.updateContent(!1)},updateContent:function(e){const t=this.model.get("productId"),i=this.units[t];if(!t||i)this.updateProductUnits(i,e||!1);else{const e=this,i={id:t};this.options.compactUnits&&(i.short=!0),r.ajax({url:c.generate(this.options.unitsRoute,i),type:"GET",beforeSend:function(){e.options.skipLoadingMask||e.loadingMask.show()},success:function(i){e.units[t]=i.units,e.updateProductUnits(i.units,!0)},complete:function(){e.loadingMask.hide()},errorHandlerMessage:a(this.options.errorMessage)})}},updateProductUnits:function(e,t){const i=this;this.model.set("product_units",e);const n=i.$el.find(i.options.itemWidget);r.each(n,(function(e,n){const s=r(n).find(i.options.selectors.unitSelector);!t&&s.hasClass(i.options.syncClass)||(o.updateSelect(i.model,s),s.addClass(i.options.syncClass))})),t&&this.$el.find("select").inputWidget("refresh")},dispose:function(){this.disposed||u.__super__.dispose.call(this)}}));return u}.call(t,i,t,e))||(e.exports=n)},"./bundles/ororfp/js/app/views/line-items-view.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/extend/jquery.js"),n=i("./bundles/oroui/js/extend/underscore.js"),s=i("./bundles/oroui/js/app/views/base/view.js"),o=i("./bundles/orofrontend/js/app/elements-helper.js"),r=i("./bundles/oropricing/js/app/components/products-prices-component.js"),l=i("./bundles/oroui/js/mediator.js"),a=s.extend(n.extend({},o,{options:{},constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.options=t.extend(!0,{},this.options,e||{}),a.__super__.initialize.call(this,e),this.subview("productsPricesComponent",new r({_sourceElement:this.$el,tierPrices:this.options.tierPrices,currency:this.options.currency,tierPricesRoute:this.options.tierPricesRoute})),this.initializeSubviews()},handleLayoutInit:function(){this.$el.find(".add-lineitem").mousedown((function(e){t(this).click()})),l.trigger("line-items:show:before"),this.$el.find(".view-loading").remove(),this.$el.find(".request-form__content").show(),this._resolveDeferredRender()},getProductsId:function(){let e=this.$el.find('input[data-ftid$="_product"]');return e=n.filter(e,(function(e){return e.value.length>0})),e=n.map(e,(function(e){return e.value})),e},getItems:function(){const e=this.$el.find(".order-line-item"),i=[];return n.each(e,(function(e){const n=t(e),s=n.find('input[data-ftid$="_product"]')[0].value;if(0===s.length)return;const o=n.find('select[data-ftid$="_productUnit"]')[0].value,r=n.find('input[data-ftid$="_quantity"]')[0].value;i.push({product:s,unit:o,qty:r})})),i},dispose:function(){this.disposed||a.__super__.dispose.call(this)}}));return a}.call(t,i,t,e))||(e.exports=n)},"./bundles/orosale/js/app/components/dependent-field-component.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/extend/underscore.js"),n=i("./bundles/oroui/js/app/components/base/component.js").extend({options:{selectors:{rowContainer:".control-group"}},$form:null,$el:null,$dependee:null,constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.options=t.defaults(e||{},this.options),this.$el=this.options._sourceElement,this.$form=this.$el.closest("form"),this.$dependee=this.$form.find('[data-dependee-id="'+this.$el.data("dependOn")+'"]'),this.updateDependentFields=this.updateDependentFields.bind(this),this.updateDependentFields(),this.$dependee.on("change",this.updateDependentFields),this.$el.inputWidget("create")},dispose:function(){this.disposed||(this.$el.off("change",this.updateDependentFields),n.__super__.dispose.call(this))},getDependeeValue:function(){let e=[];return e=this.$dependee.is(":checkbox")?this.$dependee.prop("checked")?"checked":"unchecked":this.$dependee.val(),e instanceof Array||(e=[e]),e},getShowIf:function(){return this.$el.data("showIf")},getHideIf:function(){return this.$el.data("hideIf")},evaluateCondition:function(){let e=this.evaluateDisjunction(this.getShowIf());return this.getHideIf()&&(e=e&&!this.evaluateDisjunction(this.getHideIf())),e},evaluateConjunction:function(e){const t="string"==typeof e?e.split(/\s?\&\s?/):[],i=this.getDependeeValue();for(const e in t)if(t.hasOwnProperty(e)&&-1===i.indexOf(t[e]))return!1;return!0},evaluateDisjunction:function(e){const t="string"==typeof e?e.split(/\s?\|\s?/):[],i=this.getDependeeValue();let n;for(const e in t)if(t.hasOwnProperty(e)&&(n=-1!==t[e].indexOf("&")?this.evaluateConjunction(t[e]):-1!==i.indexOf(t[e]),!0===n))return!0;return!1},updateDependentFields:function(){this.evaluateCondition()?this.$el.closest(this.options.selectors.rowContainer).show():this.$el.closest(this.options.selectors.rowContainer).hide()}});return n}.call(t,i,t,e))||(e.exports=n)},"./bundles/orosale/js/app/components/related-data-component.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/extend/jquery.js"),n=i("./bundles/fosjsrouting/js/router.js"),s=i("./bundles/oroui/js/mediator.js"),o=i("./bundles/oroui/js/app/components/base/component.js").extend({options:{relatedDataRoute:"oro_quote_related_data",formName:""},constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.options=t.extend(!0,{},this.options,e||{}),s.on("customer-customer-user:change",this.onAccountUserChange,this)},onAccountUserChange:function(e){this.loadRelatedData(e),s.trigger("entry-point:quote:trigger")},loadRelatedData:function(e){const i=n.generate(this.options.relatedDataRoute),o={customer:e.customerId,customerUser:e.customerUserId};let r={};this.options.formName?r[this.options.formName]=o:r=o,s.trigger("quote:load:related-data"),t.ajax({url:i,type:"GET",data:r,success:function(e){s.trigger("quote:loaded:related-data",e)},error:function(){s.trigger("quote:loaded:related-data",{})}})},dispose:function(){this.disposed||(s.off("customer-customer-user:change",this.loadRelatedData,this),o.__super__.dispose.call(this))}});return o}.call(t,i,t,e))||(e.exports=n)},"./bundles/orosale/js/app/views/address-view.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/extend/jquery.js"),n=i("./bundles/oroui/js/extend/underscore.js"),s=i("./bundles/oroui/js/mediator.js"),o=i("./bundles/oroui/js/app/views/loading-mask-view.js");return i("./bundles/oroui/js/app/views/base/view.js").extend({options:{enterManuallyValue:"0",type:"",selectors:{address:"",subtotalsFields:[]}},events:{'click [name="oro_sale_quote[shippingAddress][customerAddress]"]':"addressFormChange"},ftid:"",$fields:null,$address:null,fieldsByName:null,loadingMaskView:null,listen:{"quote:load:related-data mediator":"loadingStart","quote:loaded:related-data mediator":"loadedRelatedData"},constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.options=t.extend(!0,{},this.options,e||{}),this.initLayout().done(this.handleLayoutInit.bind(this)),this.loadingMaskView=new o({container:this.$el})},handleLayoutInit:function(){const e=this;this.ftid=this.$el.find("div[data-ftid]:first").data("ftid"),this.$fields=this.$el.find(":input[data-ftid]").filter(":not("+this.options.selectors.address+")"),this.fieldsByName={},this.$fields.each((function(){const i=t(this);i.val().length>0&&(e.useDefaultAddress=!1);const n=e.normalizeName(i.data("ftid").replace(e.ftid+"_",""));e.fieldsByName[n]=i})),this.options.selectors.subtotalsFields.length>0&&(n.each(this.options.selectors.subtotalsFields,(function(e){t(e).attr("data-entry-point-trigger",!0)})),s.trigger("entry-point:quote:init")),this.options.selectors.address&&(this.setAddress(this.$el.find(this.options.selectors.address)),this.$fields.each((function(){const e=t(this);e.data("select2")&&e.data("selected-data",e.select2("val"))})),this.customerAddressChange())},addressFormChange:function(){const e=this;this.$fields.each((function(){const i=t(this),n=e.normalizeName(i.data("ftid").replace(e.ftid+"_",""));e.fieldsByName[n]=i}))},normalizeName:function(e){for(let t=1,i=(e=e.split("_")).length;t<i;t++)e[t]=e[t][0].toUpperCase()+e[t].substr(1);return e.join("")},setAddress:function(e){this.$address=e;const t=this;this.$address.change((function(e){t.customerAddressChange(e)}))},customerAddressChange:function(){if(this.$address.val()&&this.$address.val()!==this.options.enterManuallyValue){this.$fields.each((function(){t(this).prop("readonly",!0).inputWidget("refresh")}));const e=this.$address.data("addresses")[this.$address.val()]||null;if(e){const t=this;n.each(e,(function(e,i){n.isObject(e)&&(e=n.first(n.values(e)));const s=t.fieldsByName[t.normalizeName(i)]||null;s&&s.val()!==(e||"")&&(s.val(e),s.data("select2")&&s.data("selected-data",e).change())}))}}else{this.$fields.each((function(){t(this).prop("readonly",!1).inputWidget("refresh")}));const e=this.fieldsByName.country;e&&e.trigger("redraw")}},loadingStart:function(){this.loadingMaskView.show()},loadingEnd:function(){this.loadingMaskView.hide()},resetAddressForm:function(){this.$fields.each((function(){const e=t(this);e.val(""),e.prop("readonly",!0).inputWidget("refresh"),e.data("select2")&&e.data("selected-data","").change()}))},resetAddressSelector:function(){this.$address.empty(),this.$address.data("addresses",{}),this.$address.data("select2")&&this.$address.data("selected-data","").change()},loadedRelatedData:function(e){const i=e[this.options.type+"Address"]||null;if(!i)return this.resetAddressSelector(),this.resetAddressForm(),void this.loadingEnd();const n=this.$address;this.setAddress(t(i)),this.resetAddressForm(),n.parent().trigger("content:remove").empty().append(this.$address),this.initLayout().done(this.loadingEnd.bind(this))}})}.call(t,i,t,e))||(e.exports=n)},"./bundles/orosale/js/app/views/line-item-offer-view.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/extend/jquery.js"),n=i("./bundles/oroui/js/extend/underscore.js"),s=i("./bundles/oroproduct/js/app/views/line-item-product-view.js").extend({options:{allUnits:[],$:{product:""}},constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.elementsEvents.unit=["product-units:change","onProductUnitsChange"],this.elements.id=t(e.$.product),this.options=t.extend(!0,{},this.options,e||{}),n.each(this.options.$,((e,i)=>{this.options.$[i]=t(e)})),s.__super__.initialize.call(this,e),n.each(this.getElement("unit").find("option"),(e=>{this.options.allUnits.push({code:e.value,label:e.text})})),this.model.on("product:unit:filter-values",this.filterUnits.bind(this)),this.initializeProductUnits()},onProductUnitsChange:function(){this.model.set("product_units",this.getElement("unit").data("product-units")),s.__super__.onProductUnitsChange.call(this)},filterUnits:function(e){const i=this.getElement("unit"),s=i.val();i.val(null).find("option").remove(),e&&(n.each(this.options.allUnits,(n=>{-1!==t.inArray(n.code,e)&&i.append(t("<option/>").val(n.code).text(n.label))})),i.val(s),null===i.val()&&i.val(e[0])),i.trigger("value:changed").trigger("change")},initializeProductUnits:function(){const e=this.getElement("unit").data("product-units");void 0!==e&&this.model.set("product_units",e)}});return s}.call(t,i,t,e))||(e.exports=n)},"./bundles/orosale/js/app/views/line-item-view.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/extend/jquery.js"),n=i("./bundles/oroui/js/extend/underscore.js"),s=i("./bundles/orotranslation/js/translator.js"),o=i("./bundles/oroui/js/app/views/base/view.js"),r=i("./bundles/oroproduct/js/app/units-util.js"),l=i("./bundles/oroui/js/app/models/base/model.js"),a=i("./bundles/oroui/js/app/views/loading-mask-view.js"),d=i("./bundles/oroui/js/mediator.js"),c=i("./bundles/fosjsrouting/js/router.js");i("./bundles/oroform/js/extend/validate.js");const u=o.extend({options:{classNotesSellerActive:"quote-lineitem-notes-seller-active",productSelect:'.quote-lineitem-product-select input[type="hidden"]',productSkuLabel:".quote-lineitem-product-sku-label",productSkuInput:'.quote-lineitem-product-free-form input[data-name="field__product-sku"]',productReplacementSelect:'.quote-lineitem-product-replacement-select input[type="hidden"]',offersQuantitySelector:".quote-lineitem-offers-quantity input",offersPriceValueSelector:".quote-lineitem-offers-price input:first",typeSelect:".quote-lineitem-product-type-select",unitsSelect:".quote-lineitem-offer-unit-select",productFreeFormInput:".quote-lineitem-product-freeform-input",productReplacementFreeFormInput:".quote-lineitem-productreplacement-freeform-input",unitsRoute:"oro_product_unit_product_units",compactUnits:!1,addItemButton:".add-list-item",itemCollection:".oro-item-collection",productSelectLink:".quote-lineitem-product-select-link",freeFormLink:".quote-lineitem-free-form-link",allowEditFreeForm:!0,productFormContainer:".quote-lineitem-product-form",freeFormContainer:".quote-lineitem-product-free-form",fieldsRowContainer:".fields-row",notesContainer:".quote-lineitem-notes",addNotesButton:".quote-lineitem-notes-add-btn",removeNotesButton:".quote-lineitem-notes-remove-btn",itemsCollectionContainer:".quote-lineitem-collection",itemsContainer:".quote-lineitem-offers-items",itemWidget:".quote-lineitem-offers-item",syncClass:"synchronized",productReplacementContainer:".quote-lineitem-product-replacement-row",sellerNotesContainer:".quote-lineitem-notes-seller",requestsOnlyContainer:".sale-quoteproductrequest-only",errorMessage:"Sorry, an unexpected error has occurred.",submitButton:"button#save-and-transit",allUnits:{},units:{},events:{before:"entry-point:quote:load:before",after:"entry-point:quote:load:after",trigger:"entry-point:quote:trigger"}},typeOffer:null,typeReplacement:null,isFreeForm:!1,units:{},allUnits:{},$el:null,$productSelect:null,$productReplacementSelect:null,$typeSelect:null,$addItemButton:null,$itemsContainer:null,$requestsOnlyContainer:null,$notesContainer:null,$sellerNotesContainer:null,$productReplacementContainer:null,loadingMask:null,constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.model||(this.model=new l),this.options=n.defaults(e||{},this.options),this.units=n.defaults(this.units,e.units),this.allUnits=n.defaults(this.allUnits,e.allUnits),this.typeOffer=e.typeOffer,this.typeReplacement=e.typeReplacement,this.isFreeForm=e.isFreeForm||!1,this.loadingMask=new a({container:this.$el}),this.delegate("click",".removeLineItem",this.removeRow),this.delegate("click",".removeRow",this.removeOfferRow),this.$productSelect=this.$el.find(this.options.productSelect),this.$productReplacementSelect=this.$el.find(this.options.productReplacementSelect),this.$typeSelect=this.$el.find(this.options.typeSelect),this.$addItemButton=this.$el.find(this.options.addItemButton),this.$itemCollection=this.$el.find(this.options.itemCollection),this.$itemsContainer=this.$el.find(this.options.itemsContainer),this.$productReplacementContainer=this.$el.find(this.options.productReplacementContainer),this.$notesContainer=this.$el.find(this.options.notesContainer),this.$sellerNotesContainer=this.$el.find(this.options.sellerNotesContainer),this.$requestsOnlyContainer=this.$el.find(this.options.requestsOnlyContainer),this.$el.on("change",this.options.productSelect,this.onProductChanged.bind(this)).on("change",this.options.offersQuantitySelector,this.onOffersQuantitySelectorChange.bind(this)).on("change",this.options.productReplacementSelect,this.onProductChanged.bind(this)).on("change",this.options.typeSelect,this.onTypeChanged.bind(this)).on("click",this.options.addNotesButton,this.onAddNotesClick.bind(this)).on("click",this.options.removeNotesButton,this.onRemoveNotesClick.bind(this)).on("click",this.options.freeFormLink,this.onFreeFormLinkClick.bind(this)).on("click",this.options.productSelectLink,this.onProductSelectLinkClick.bind(this)).on("content:changed",this.onContentChanged.bind(this)),this.listenTo(d,this.options.events.before,this.disableSubmit),this.listenTo(d,this.options.events.after,this.enableSubmit),this.$typeSelect.trigger("change"),this.$form=this.$el.closest("form"),this.$fields=this.$el.find(":input[name]"),this.fieldsByName={},this.$fields.each(((e,i)=>{this.fieldsByName[this.formFieldName(i)]||(this.fieldsByName[this.formFieldName(i)]=[]),this.fieldsByName[this.formFieldName(i)].push(t(i))})),this.entryPointTriggers([this.fieldsByName.quantity,this.fieldsByName.productUnit,this.fieldsByName.priceValue,this.fieldsByName.priceType]),this.checkAddButton(),this.checkAddNotes(),this.isFreeForm&&!this.options.allowEditFreeForm&&this.setReadonlyState(),this.updateValidation(),this.$el.trigger("content:initialized")},disableSubmit:function(){t(this.options.submitButton).prop("disabled",!0)},enableSubmit:function(){t(this.options.submitButton).prop("disabled",!1)},formFieldName:function(e){let t="";const i=e.name.replace(/.*\[[0-9]+\]/,"").replace(/[\[\]]/g,"_").split("_");let n;for(let e=0,s=i.length;e<s;e++)n=i[e],n.length&&(0===t.length?t+=n:t+=n[0].toUpperCase()+n.substr(1));return t},checkAddButton:function(){const e=Boolean(this.getProductId())||this.isFreeForm&&this.options.allowEditFreeForm;this.$addItemButton.toggleClass("hide",!e),this.$itemCollection.toggleClass("hide",!e)},removeOfferRow:function(){d.trigger(this.options.events.trigger)},removeRow:function(){this.$el.trigger("content:remove"),this.remove(),d.trigger(this.options.events.trigger)},entryPointTriggers:function(e){n.each(e,(function(e){n.each(e,(function(e){t(e).attr("data-entry-point-trigger",!0)}))})),d.trigger("entry-point:quote:init")},onProductChanged:function(e){this.checkAddButton(),this.getProductId()&&!this.$itemsContainer.children().length&&this.$addItemButton.click(),this.$itemsContainer.children().length&&this.updateContent(!0),this.updateSkuLabelAndValue(),this.$el.find(this.options.offersQuantitySelector).trigger("change"),d.trigger(this.options.events.trigger)},onOffersQuantitySelectorChange:function(e){d.trigger(this.options.events.trigger)},onTypeChanged:function(e){const t=parseInt(this.$typeSelect.val());this.$productReplacementContainer.toggle(this.typeReplacement===t),this.$requestsOnlyContainer.toggle(this.typeOffer!==t),this.$productSelect.trigger("change")},onContentChanged:function(e){this.updateContent(!1)},updateContent:function(e){this.updateValidation();const i=this.getProductId(),n=i?this.units[i]:this.allUnits;if(!i||n)this.updateProductUnits(n,e||!1);else{const n=this,o={id:i};this.options.compactUnits&&(o.short=!0),t.ajax({url:c.generate(this.options.unitsRoute,o),type:"GET",beforeSend:function(){n.loadingMask.show()},success:function(t){n.units[i]=t.units,n.updateProductUnits(t.units,e||!1)},complete:function(){n.loadingMask.hide()},errorHandlerMessage:s(this.options.errorMessage)})}},updateProductUnits:function(e,i){const n=this;n.model.set("product_units",e||{});const s=n.$el.find(n.options.itemWidget);t.each(s,(function(e,s){const o=t(s).find(n.options.unitsSelect);!i&&o.hasClass(n.options.syncClass)||(r.updateSelect(n.model,o),o.addClass(n.options.syncClass),o.data("product-units",n.model.get("product_units")),o.trigger("product-units:change"))})),i&&this.$el.find("select").inputWidget("refresh")},checkAddNotes:function(){this.$sellerNotesContainer.find("textarea").val()&&(this.$notesContainer.addClass(this.options.classNotesSellerActive),this.$sellerNotesContainer.find("textarea").focus())},onAddNotesClick:function(e){e.preventDefault(),this.$notesContainer.addClass(this.options.classNotesSellerActive),this.$sellerNotesContainer.find("textarea").focus()},onRemoveNotesClick:function(e){e.preventDefault(),this.$notesContainer.removeClass(this.options.classNotesSellerActive),this.$sellerNotesContainer.find("textarea").val("")},onFreeFormLinkClick:function(e){e.preventDefault(),this.clearInputs(),this.$el.find(this.options.productFormContainer).toggleClass("hide",!0),this.$el.find(this.options.freeFormContainer).toggleClass("hide",!1),this.isFreeForm=!0,this.checkAddButton()},onProductSelectLinkClick:function(e){e.preventDefault(),this.clearInputs(),this.$el.find(this.options.productFormContainer).toggleClass("hide",!1),this.$el.find(this.options.freeFormContainer).toggleClass("hide",!0),this.isFreeForm=!1,this.checkAddButton()},clearInputs:function(){this.$el.find(this.options.productFormContainer).find("input").val("").change(),this.$el.find(this.options.freeFormContainer).find("input").val("");const e=this,i=this.$el.find(this.options.itemWidget);t.each(i,(function(i,n){t(n).find(e.options.offersPriceValueSelector).addClass("matched-price")})),this.updateSkuLabelAndValue()},updateSkuLabelAndValue:function(){const e=this.$el.find(this.options.productSelect).inputWidget("data")||{};this.$el.find(this.options.productSkuLabel).text(e.sku||""),this.$el.find(this.options.productSkuInput).val(e.sku||"")},getProductId:function(){return this.isProductReplacement()?this.$productReplacementSelect.val():this.$productSelect.val()},isProductReplacement:function(){return this.typeReplacement===parseInt(this.$typeSelect.val())},updateValidation:function(){const e=this;e.$el.find(e.options.productFreeFormInput).rules("add",{required:{param:!0,depends:function(){return!e.isProductReplacement()&&e.isFreeForm}},messages:{required:s("oro.sale.quoteproduct.free_form_product.blank")}}),e.$el.find(e.options.productReplacementFreeFormInput).rules("add",{required:{param:!0,depends:function(){return e.isProductReplacement()&&e.isFreeForm}},messages:{required:s("oro.sale.quoteproduct.free_form_product.blank")}}),e.$productSelect.rules("add",{required:{param:!0,depends:function(){return!e.isProductReplacement()&&!e.isFreeForm}},messages:{required:s("oro.sale.quoteproduct.product.blank")}}),e.$productReplacementSelect.rules("add",{required:{param:!0,depends:function(){return e.isProductReplacement()&&!e.isFreeForm}},messages:{required:s("oro.sale.quoteproduct.product.blank")}})},setReadonlyState:function(){const e=this;e.$el.find(e.options.productFreeFormInput).prop("readonly",!0),e.$el.find(e.options.productSkuInput).prop("readonly",!0),e.$el.find(e.options.productReplacementFreeFormInput).prop("readonly",!0),e.$el.find(".removeLineItem").prop("disabled",!0),e.$el.find(".removeRow").prop("disabled",!0);const i=this.$el.find(e.options.itemWidget);t.each(i,(function(i,n){t(n).find(e.options.unitsSelect).prop("readonly",!0),t(n).find(e.options.offersPriceValueSelector).prop("readonly",!0),t(n).find(e.options.offersQuantitySelector).prop("readonly",!0)}))},dispose:function(){this.disposed||(this.$el.off(),u.__super__.dispose.call(this))}});return u}.call(t,i,t,e))||(e.exports=n)},"./bundles/orosale/js/app/views/line-items-view.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/extend/jquery.js"),n=i("./bundles/oropricing/js/app/components/products-prices-component.js");return i("./bundles/oroui/js/app/views/base/view.js").extend({options:{tierPrices:null,tierPricesRoute:"",currency:null,customer:null},constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.options=t.extend(!0,{},this.options,e||{}),this.subview("productsPricesComponent",new n({tierPrices:this.options.tierPrices,tierPricesRoute:this.options.tierPricesRoute,customer:this.options.customer})),this.initLayout().done(this.handleLayoutInit.bind(this))},handleLayoutInit:function(){this.$el.find(".add-lineitem").mousedown((function(){t(this).click()}))}})}.call(t,i,t,e))||(e.exports=n)},"./bundles/orosale/js/app/views/product-add-to-rfq-view.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/app/views/base/view.js"),n=i("./bundles/orofrontend/js/app/elements-helper.js"),s=i("./bundles/oroui/js/extend/jquery.js"),o=i("./bundles/fosjsrouting/js/router.js"),r=i("./bundles/oroui/js/mediator.js"),l=i("./bundles/oroui/js/extend/underscore.js"),a=t.extend(l.extend({},n,{events:{click:"onClick"},dropdownWidget:null,constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){a.__super__.initialize.call(this,e),this.deferredInitializeCheck(e,["productModel","dropdownWidget"])},deferredInitialize:function(e){this.dropdownWidget=e.dropdownWidget,e.productModel&&(this.model=e.productModel)},dispose:function(){delete this.dropdownWidget,a.__super__.dispose.call(this)},onClick:function(e){const t=s(e.currentTarget),i={};if(!this.dropdownWidget.validateForm())return;i[this.model.get("id")]=[{quantity:this.model.get("quantity"),unit:this.model.get("unit")}];const n=o.generate(t.data("url"),{product_items:i});r.execute("showLoading"),r.execute("redirectTo",{url:n},{redirect:!0})}}));return a}.call(t,i,t,e))||(e.exports=n)},"./bundles/orosale/js/app/views/quote-possible-shipping-methods-view.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/extend/jquery.js"),n=i("./bundles/oroorder/js/app/views/possible-shipping-methods-view.js"),s=n.extend({constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){s.__super__.initialize.call(this,e)},updatePossibleShippingMethods:function(e){s.__super__.updatePossibleShippingMethods.call(this,e),this.allowUnlistedAndLockFlags()},onShippingMethodTypeChange:function(e){s.__super__.onShippingMethodTypeChange.call(this,e),this.allowUnlistedAndLockFlags()},allowUnlistedAndLockFlags:function(){const e=t('[name$="[shippingMethodLocked]"]'),i=t('[name$="[allowUnlistedShippingMethod]"]');if(e.length<=0||i.length<=0)return;const n=t('[name$="[estimatedShippingCostAmount]"]').val()<=0;e.prop("disabled",n),i.prop("disabled",n)},dispose:function(){this.disposed||n.__super__.dispose.call(this)}});return s}.call(t,i,t,e))||(e.exports=n)},"./bundles/oroshoppinglist/js/app/components/add-product-component.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/extend/underscore.js"),n=i("./bundles/oroui/js/app/components/base/component.js").extend({options:{shoppingListSelector:".oro-shoppinglist select",shoppingListLabelSelector:".oro-shoppinglist-label"},shoppingListLabelSelector:null,constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.options=t.defaults(e||{},this.options),this.shoppingListLabelSelector=this.options._sourceElement.find(this.options.shoppingListLabelSelector),this.options._sourceElement.on("change",this.options.shoppingListSelector,this.onShoppingListChange.bind(this))},onShoppingListChange:function(e){""===e.target.value?this.shoppingListLabelSelector.parent("div").removeClass("hidden"):this.shoppingListLabelSelector.parent("div").addClass("hidden")},dispose:function(){this.disposed||(this.options._sourceElement.off(),n.__super__.dispose.call(this))}});return n}.call(t,i,t,e))||(e.exports=n)},"./bundles/orotax/js/app/components/order-line-item-item-component.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/extend/underscore.js"),n=i("./bundles/oroui/js/extend/jquery.js"),s=i("./bundles/oroui/js/mediator.js"),o=i("./bundles/oroui/js/app/components/base/component.js"),r=i("./bundles/orotax/js/formatter/tax.js");return o.extend({options:{selectors:{templateSelector:"#tax-item",lineItemDataAttr:"data-tax-item",valueContainer:"[data-value-container]"},type:null,value:null,currencyProp:"currency"},template:null,$valueContainer:null,constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.options=t.defaults(e||{},this.options);const i=this.getAttribute();this.options._sourceElement.attr(i,n("["+i+"]").length),this.template=t.template(n(this.getTemplateName()).html()),this.$valueContainer=this.options._sourceElement.find(this.options.selectors.valueContainer),this.listenTo(s,{"entry-point:order:load":this.setItemValue,"entry-point:order:load:before":this.initializeAttribute})},initializeAttribute:function(){const e=this.getAttribute();n("["+e+"]").each((function(t){n(this).attr(e,t)}))},getAttribute:function(){return[this.options.selectors.lineItemDataAttr,this.options.type,this.options.value].join("-")},getTemplateName:function(){return[this.options.selectors.templateSelector,this.options.type,this.options.value].join("-")},setItemValue:function(e){const i=t.defaults(e,{taxItems:{}}),n=this.options._sourceElement.attr(this.getAttribute());if(!t.has(i.taxItems,n))return;const s=t.defaults(e.taxItems[n],{});if(!t.has(s,this.options.type))return;if(!t.has(s[this.options.type],this.options.value))return;const o=r.formatElement(s[this.options.type][this.options.value],s[this.options.type][this.options.currencyProp]);this.$valueContainer.html(this.template({value:o}))}})}.call(t,i,t,e))||(e.exports=n)},"./bundles/orotax/js/app/components/order-line-item-taxes-component.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/extend/jquery.js"),n=i("./bundles/oroui/js/extend/underscore.js"),s=i("./bundles/oroui/js/mediator.js"),o=i("./bundles/oroui/js/app/components/base/component.js"),r=i("./bundles/oroui/js/app/views/loading-mask-view.js"),l=i("./bundles/orotax/js/formatter/tax.js");return o.extend({options:{selectors:{appliedTaxesTemplate:"#line-item-taxes-template",tableContainer:"[data-table-container]",lineItemDataAttr:"data-tax-item",lineItemDataAttrSelector:"[data-tax-item]"},result:null},appliedTaxesTemplate:null,emptyData:{unit:{},row:{},taxes:{}},loadingMaskView:null,$tableContainer:null,constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.options=n.defaults(e||{},this.options),this.options._sourceElement.attr(this.options.selectors.lineItemDataAttr,t(this.options.selectors.lineItemDataAttrSelector).length),this.listenTo(s,{"entry-point:order:load:before":()=>{this.initializeAttribute(),this.showLoadingMask()},"entry-point:order:load":this.setOrderTaxes,"entry-point:order:load:after":this.hideLoadingMask}),this.appliedTaxesTemplate=n.template(t(this.options.selectors.appliedTaxesTemplate).html()),this.$tableContainer=this.options._sourceElement.find(this.options.selectors.tableContainer),this.loadingMaskView=new r({container:this.options._sourceElement}),this.render(this.options.result)},initializeAttribute:function(){const e=this;t(this.options.selectors.lineItemDataAttrSelector).each((function(i){t(this).attr(e.options.selectors.lineItemDataAttr,i)}))},showLoadingMask:function(){this.loadingMaskView.show()},hideLoadingMask:function(){this.loadingMaskView.hide()},render:function(e){const t=this.options.productModel.attributes.currency;(e=n.defaults(e,this.emptyData)).row=l.formatItem(e.row,t),e.unit=l.formatItem(e.unit,t),e.taxes=n.map(e.taxes,l.formatTax),this.$tableContainer.html(this.appliedTaxesTemplate(e))},setOrderTaxes:function(e){const t=n.defaults(e,{taxItems:{}}),i=this.options._sourceElement.attr(this.options.selectors.lineItemDataAttr);if(!n.has(t.taxItems,i))return;const s=n.defaults(e.taxItems[i],this.emptyData);this.render(s)}})}.call(t,i,t,e))||(e.exports=n)},"./bundles/orotax/js/app/components/order-taxes-component.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/extend/underscore.js"),n=i("./bundles/oroui/js/extend/jquery.js"),s=i("./bundles/oroui/js/mediator.js"),o=i("./bundles/oroui/js/app/components/base/component.js"),r=i("./bundles/orotax/js/formatter/tax.js");return o.extend({options:{selectors:{totalsTemplate:"#order-taxes-totals-template",collapseSelector:'[data-role="order-taxes-totals"]'}},totalsTemplate:null,constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.options=t.defaults(e||{},this.options),this.listenTo(s,"entry-point:order:trigger:totals",this.appendTaxResult),this.totalsTemplate=n(this.options.selectors.totalsTemplate).html()},appendTaxResult:function(e){const i=t.extend({subtotals:{}},e).subtotals;t.map(t.where(i,{type:"tax"}),this.prepareItem.bind(this))},prepareItem:function(e,i){e.data.total=r.formatItem(e.data.total),e.data.shipping=r.formatItem(e.data.shipping),e.data.taxes=t.map(e.data.taxes,r.formatTax),e.data.show=n(this.options.selectors.collapseSelector).eq(i).hasClass("show"),e.template=this.totalsTemplate}})}.call(t,i,t,e))||(e.exports=n)},"./bundles/orotax/js/app/views/editor/product-tax-code-editor-view.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroform/js/app/views/editor/abstract-relation-editor-view.js"),n=i("./bundles/oroui/js/extend/underscore.js");i("./bundles/oroui/js/extend/select2.js");const s=t.extend({constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){if(s.__super__.initialize.call(this,e),!e.value_field_name&&!e.ignore_value_field_name)throw new Error("`value_field_name` option is required");this.valueFieldName=e.value_field_name},getInitialResultItem:function(){return{id:this.getModelValue(),label:this.model.get(this.fieldName)}},getSelect2Options:function(){const e=n.omit(s.__super__.getSelect2Options.call(this),"data");return n.extend(e,{allowClear:!0,noFocus:!0,formatSelection:e=>e.label,formatResult:e=>e.label,initSelection:(e,t)=>{t(this.getInitialResultItem())},query:e=>{this.currentTerm=e.term,this.currentRequest&&""!==this.currentRequest.term&&"resolved"!==this.currentRequest.state()&&this.currentRequest.abort();const t=n.extend(this.model.toJSON(),{term:e.term,page:e.page,per_page:this.perPage});""===e.term||this.autocompleteApiAccessor.isCacheExistsFor(t)?this.makeRequest(e,t):this.debouncedMakeRequest(e,t)}})},getChoiceLabel:function(){const e=n.result(this.getSelect2Data(),"label");return void 0!==e?e:""},getServerUpdateData:function(){const e={};return e[this.valueFieldName]=this.getValue(),e},getModelUpdateData:function(){const e=this.getServerUpdateData();return e[this.fieldName]=this.getChoiceLabel(),e}});return s}.call(t,i,t,e))||(e.exports=n)},"./bundles/orotax/js/formatter/tax.js":(e,t,i)=>{var n,s;n=[i("./bundles/oroui/js/extend/underscore.js"),i("./bundles/orolocale/js/formatter/number.js"),i("./bundles/orolocale/js/locale-settings.js")],void 0===(s=function(e,t,i){"use strict";return function(){const n=function(n,s){return e.isUndefined(s)&&(s=i.getCurrency()),e.isNaN(parseFloat(n))?n:t.formatCurrency(n,s)},s=function(e){return e.indexOf("%")>-1?e:t.formatPercent(e)};return{formatItem:function(t,s){void 0===s&&(s=i.getCurrency());const o=e.extend({includingTax:0,excludingTax:0,taxAmount:0,currency:s},t);return{includingTax:n(o.includingTax,o.currency),excludingTax:n(o.excludingTax,o.currency),taxAmount:n(o.taxAmount,o.currency)}},formatTax:function(t){const o=e.extend({taxAmount:0,taxableAmount:0,rate:0,tax:"",currency:i.getCurrency()},t);return{tax:o.tax,taxAmount:n(o.taxAmount,o.currency),taxableAmount:n(o.taxableAmount,o.currency),rate:s(o.rate)}},formatElement:function(e,t){return n(e,t)}}}()}.apply(t,n))||(e.exports=s)},"./bundles/oroui/js/app/views/tab-collection-view.js":(e,t,i)=>{var n;n=function(e,t,n){"use strict";const s=i("./bundles/oroui/js/extend/underscore.js"),o=i("./bundles/oroui/js/mediator.js"),r=i("./bundles/oroui/js/app/views/base/collection-view.js");let l=i("./bundles/oroui/js/app/services/module-config.js").A(n.id);const a=i("./bundles/oroui/js/app/views/tab-item-view.js");l=s.extend({templateClassName:"nav nav-tabs responsive-tabs"},l);const d=r.extend({listSelector:'[data-name="tabs-list"]',className:"tab-collection oro-tabs clearfix",itemView:a,useDropdown:!1,listen:{"change collection":"onChange"},template:i("../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/oroui/templates/tab-collection-container.html"),constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){s.extend(this,s.defaults(s.pick(e,["useDropdown"]),this)),d.__super__.initialize.call(this,e)},onChange:function(e){e.get("active")&&this.collection.each((function(t){t!==e&&t.set("active",!1)}))},_ensureElement:function(){d.__super__._ensureElement.call(this),this.$el.addClass(s.result(this,"className"))},getTemplateData:function(){const e=d.__super__.getTemplateData.call(this);return e.templateClassName=l.templateClassName,e.tabOptions={useDropdown:this.useDropdown},e},render:function(){d.__super__.render.call(this),this.$el.attr("data-layout","separate"),this.initLayout().done(this.handleLayoutInit.bind(this))},handleLayoutInit:function(){o.trigger("widget:doRefresh")}});return d}.call(t,i,t,e),void 0===n||(e.exports=n)},"./bundles/oroui/js/app/views/tab-item-view.js":(e,t,i)=>{var n;n=function(e,t,n){"use strict";const s=i("./bundles/oroui/js/extend/underscore.js"),o=i("./bundles/oroui/js/extend/jquery.js"),r=i("./bundles/oroui/js/app/views/base/view.js");let l=i("./bundles/oroui/js/app/services/module-config.js").A(n.id);l=s.extend({className:"nav-item",templateClassName:"nav-link"},l);const a=r.extend({tagName:"li",className:l.className,template:i("../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/oroui/templates/tab-collection-item.html"),listen:{"change:active model":"updateStates","change:changed model":"updateStates"},events:{"shown.bs.tab":"onTabShown",click:"onTabClick"},constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){a.__super__.initialize.call(this,e),this.updateStates()},updateStates:function(){this.$el.toggleClass("changed",!!this.model.get("changed"));const e=this.$('[role="tab"]');if(e.attr("aria-selected")!==String(this.model.get("active"))&&e.attr("aria-selected",this.model.get("active")),this.model.get("active")){const e=this.model.get("controlTabPanel")||this.model.get("id");o("#"+e).attr("aria-labelledby",this.model.get("uniqueId"))}},onTabShown:function(e){this.model.set("active",!0),this.model.trigger("select",this.model)},onTabClick:function(e){this.model.trigger("click",this.model)}});return a}.call(t,i,t,e),void 0===n||(e.exports=n)},"./bundles/orowarehouse/js/app/views/warehouse-address-view.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/extend/jquery.js");return i("./bundles/oroui/js/app/views/base/view.js").extend({options:{selectors:{useSystem:""}},$useSystem:null,$fields:null,constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.options=t.extend(!0,{},this.options,e||{}),this.$fields=this.$el.find(":input[data-ftid]").filter(":not("+this.options.selectors.useSystem+")"),this.options.selectors.useSystem?(this.setUseSystem(this.$el.find(this.options.selectors.useSystem)),this.useSystemChange()):this._setReadOnlyMode(!0)},setUseSystem:function(e){this.$useSystem=e;const t=this;this.$useSystem.change((function(){t.useSystemChange()}))},useSystemChange:function(){this._setReadOnlyMode(this.$useSystem.is(":checked"))},_setReadOnlyMode:function(e){this.$fields.each((function(){t(this).prop("disabled",e)}))}})}.call(t,i,t,e))||(e.exports=n)}}]);