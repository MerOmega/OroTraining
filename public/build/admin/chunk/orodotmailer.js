(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[800],{"../node_modules/@oroinc/oro-webpack-config-builder/loader/text-loader.js!./bundles/orodotmailer/templates/field-choice-item.html":e=>{e.exports='<div class="field-row">\n    <input type="hidden">\n    <button class="btn btn-icon btn-square-light remove-item" type="button" data-role="remove-item" aria-label="<%- _.__(\'Remove row\') %>">\n        <span class="fa-trash-o" aria-hidden="true"></span>\n    </button>\n</div>\n'},"./bundles/orocommercemenu/js/app/views/target-fields-view.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/app/views/base/view.js"),n=i("./bundles/oroui/js/extend/underscore.js"),s=t.extend({options:{targetTypeField:null,contentNodeField:null,categoryField:null,maxTraverseLevelField:null,systemPageField:null,uriField:null},$targetTypeField:null,constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.options=n.extend({},this.options,e),n.each(["targetTypeField","contentNodeField","categoryField","maxTraverseLevelField","systemPageField","uriField"],function(e){if(!this.options[e])throw new Error(e+" option is required")}.bind(this)),this.$targetTypeField=this.$('[name="'+this.options.targetTypeField+'"]'),this.$targetTypeField.on("change",this._onTargetTypeChange.bind(this)),this._onTargetTypeChange(),s.__super__.initialize.call(this,e)},_onTargetTypeChange:function(){switch(this.$targetTypeField.val()){case"content_node":this._getField(this.options.contentNodeField).show(),this._getField(this.options.categoryField).hide(),this._getField(this.options.maxTraverseLevelField).show(),this._getField(this.options.systemPageField).hide(),this._getField(this.options.uriField).hide();break;case"category":this._getField(this.options.contentNodeField).hide(),this._getField(this.options.categoryField).show(),this._getField(this.options.maxTraverseLevelField).show(),this._getField(this.options.systemPageField).hide(),this._getField(this.options.uriField).hide();break;case"system_page":this._getField(this.options.contentNodeField).hide(),this._getField(this.options.categoryField).hide(),this._getField(this.options.maxTraverseLevelField).hide(),this._getField(this.options.systemPageField).show(),this._getField(this.options.uriField).hide();break;case"uri":this._getField(this.options.contentNodeField).hide(),this._getField(this.options.categoryField).hide(),this._getField(this.options.maxTraverseLevelField).hide(),this._getField(this.options.systemPageField).hide(),this._getField(this.options.uriField).show();break;case"none":this._getField(this.options.contentNodeField).hide(),this._getField(this.options.categoryField).hide(),this._getField(this.options.maxTraverseLevelField).hide(),this._getField(this.options.systemPageField).hide(),this._getField(this.options.uriField).hide()}},_getField:function(e){return this.$(e)},dispose:function(){if(!this.disposed)return this.$targetTypeField.off("change",this._onTargetTypeChange.bind(this)),s.__super__.dispose.call(this)}});return s}.call(t,i,t,e))||(e.exports=n)},"./bundles/orodotmailer/js/app/components/dm-resource-component.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/extend/underscore.js"),n=i("./bundles/orotranslation/js/translator.js"),s=i("./bundles/oroui/js/extend/jquery.js");return function(e){const i=e._sourceElement,o=s("input.dm-username"),a=s("input.dm-password"),r=i.find("button"),l=i.find(".connection-status"),d=i.find(".ping-holder"),c=function(e){e=e||n("oro.dotmailer.integration_transport.api_key.check.message"),l.removeClass("alert-info").addClass("alert-error").html(e)},h=function(){o.val().length&&a.val().length&&a.valid()?d.show():d.hide()};h(),o.on("keyup",(function(){h()})),a.on("keyup",(function(){h()})),r.on("click",(function(){o.valid()&&a.valid()?s.post(e.pingUrl,{username:o.val(),password:a.val()},(function(e){t.isUndefined(e.error)?l.removeClass("alert-error").addClass("alert-info").html(e.msg):c(e.error)})).always((function(){l.show()})).fail(c):(l.show(),c())}))}}.call(t,i,t,e))||(e.exports=n)},"./bundles/orodotmailer/js/app/components/mapping-component.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/extend/jquery.js"),n=i("./bundles/oroui/js/extend/underscore.js"),s=i("./bundles/orotranslation/js/translator.js"),o=i("./bundles/orosegment/js/app/components/segment-component.js"),a=i("./bundles/oroquerydesigner/js/app/models/entity-fields-collection.js"),r=i("./bundles/oroentity/js/app/services/entity-structure-data-provider.js"),l=i("./bundles/orodotmailer/js/app/views/field-choice-item-view.js"),d=i("./bundles/orodotmailer/js/app/models/mapping-model.js"),c=i("./bundles/oroui/js/delete-confirmation.js"),h=o.extend({defaults:{entityChoice:"",valueSource:"",dataProviderFilterPreset:"dotmailer",mapping:{editor:{},form:"",itemContainer:"",itemTemplate:""},channel:{channelChoice:"",changeChannelConfirmMessage:""},select2FieldChoiceTemplate:"",select2FieldChoicePlaceholoder:"",entities:[],initEntityChangeEvents:!0},fieldRowViews:null,constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.processOptions(e),this._deferredInit(),r.createDataProvider({},this).then(function(e){this._init(e),this._resolveDeferredInit()}.bind(this))},_init:function(e){this.dataProvider=e,this.$storage=t(this.options.valueSource),this.fieldRowViews=[],this.initEntityChangeEvents(),this.setupDataProvider(),this.initMapping(),this.initIntegrationChangeEvents(),this.form=this.$storage.closest("form")},eventNamespace:function(){return"."+this.cid},initIntegrationChangeEvents:function(){const e=new c({title:s("Change Integration Confirmation"),okText:s("Yes"),content:s(this.options.channel.changeChannelConfirmMessage)}),i=this,o=t(this.options.channel.channelChoice);o.data("previous",o.val()),o.on("change",(function(){const t=i.load()||[],s=function(){const e={};i.trigger("resetData",e),i.save(e),o.data("previous",o.val())};n.some(t,(function(e){return!n.isEmpty(e)}))?(e.on("ok",s),e.on("cancel",(function(){const e=o.data("previous");o.val(e).change()})),e.once("hidden",(function(){e.off("ok"),e.off("cancel")})),e.open()):s()})),this.once("dispose:before",(function(){e.dispose()}))},processOptions:function(e){this.options={},t.extend(!0,this.options,this.defaults,e)},addEntityFieldRow:function(e){const t=new l({autoRender:!0,noWrap:!0,fieldChoiceOptions:{entity:this.entityClassName,filterPreset:this.options.dataProviderFilterPreset,select2:{placeholder:this.options.select2FieldChoicePlaceholoder,pageableResults:!0,dropdownAutoWidth:!0}}});return this.$editorForm.find('[data-role="fields-container"]').append(t.el),this.fieldRowViews.push(t),this.listenTo(t,{change:function(){this.updateSyncCheckbox(),this.updateOriginField()},remove:function(e){const t=n.findWhere(this.fieldRowViews,{cid:e});t&&(this.removeFieldRowView(t),this.updateOriginField())}}),e&&t.setValue(e),this.updateSyncCheckbox(),t},removeFieldRowView:function(e){this.stopListening(e),this.fieldRowViews=n.without(this.fieldRowViews,e),e.dispose(),this.updateSyncCheckbox()},initSyncCheckbox:function(){this.$syncCheckbox=this.$editorForm.find("[data-purpose=two-way-sync-selector]"),this.$editorForm.on("after-reset"+this.eventNamespace(),function(){this.$syncCheckbox.prop("checked",!1)}.bind(this))},updateSyncCheckbox:function(){let e=this.fieldRowViews.length>1;e||(e=Boolean(n.detect(this.fieldRowViews,(function(e){const t=e.getValue();if(t&&this.dataProvider.pathToEntityChainSafely(t).length>2)return!0}),this))),e&&this.$syncCheckbox.prop("checked",!1),this.$syncCheckbox.prop("disabled",e)},initFieldTable:function(){this.confirmView=new c({content:""}),this.confirmView.on("ok",function(){this.collection.remove(this.confirmView.model)}.bind(this)),this.confirmView.on("hidden",(function(){delete this.model}));const e=n.template(t(this.options.select2FieldChoiceTemplate).text());this.$table.itemsManagerTable({collection:this.collection,itemTemplate:t(this.options.mapping.itemTemplate).html(),itemRender:function(t,i){try{const t=i.entityFields.split(","),s=n.map(t,(function(t){return this.formatChoice(t,e)}),this);i.entityFields=s.join(" + ")}catch(e){i.entityFields=s("oro.querydesigner.field_not_found"),i.deleted=!0}return i.dataField=i.dataField.name,i.isTwoWaySync?i.isTwoWaySync=s("Yes"):i.isTwoWaySync=s("No"),t(i)}.bind(this),deleteHandler:function(e,t){this.confirmView.setContent(t.message),this.confirmView.model=e,this.confirmView.open()}.bind(this)})},initFieldCollection:function(){const e=new a(this.load("mapping"),{model:d,dataProvider:this.dataProvider});this.listenTo(e,"add remove change",(function(){this.save(e.toJSON(),"mapping")})),this.collection=e},initEditorForm:function(){this.$editorForm.on("click"+this.eventNamespace(),".add-field",this.onAddFieldClick.bind(this)).on("before-save"+this.eventNamespace(),n.debounce(this.checkFieldRowExistOnError.bind(this))).on("change"+this.eventNamespace(),h.ORIGIN_FIELDS_SELECTOR,this.onOriginFieldsChange.bind(this)),this.$editorForm.itemsManagerEditor(t.extend(this.options.mapping.editor,{collection:this.collection,setter:function(e,t,i){return"dataField"===t&&(i=i.value),"isTwoWaySync"===t&&i&&e.prop("checked",!0),i},getter:function(e,t,i){return"dataField"===t&&(i=e.select2("data")&&{name:e.select2("data").name,value:i}),"isTwoWaySync"===t&&(i=e.is(":checked")?1:0),i}}))},initMapping:function(){this.$table=t(this.options.mapping.itemContainer),this.$editorForm=t(this.options.mapping.form),this.$entityFieldsInput=this.$editorForm.find(h.ORIGIN_FIELDS_SELECTOR),0!==this.$table.length&&0!==this.$editorForm.length&&(this.initSyncCheckbox(),this.initFieldCollection(),this.initFieldTable(),this.initEditorForm(),this.on("validate-data",function(e){this.$editorForm.itemsManagerEditor("hasChanges")&&e.push({component:s("oro.dotmailer.datafieldmapping.editor"),type:h.UNSAVED_CHANGES_ISSUE}),this.collection.isValid()||e.push({component:s("oro.dotmailer.datafieldmapping.editor"),type:h.INVALID_DATA_ISSUE})}.bind(this)),this.once("before-submit",function(){this.collection.removeInvalidModels(),this.$editorForm.itemsManagerEditor("reset")}.bind(this)),this.on("resetData",function(e){e.mappings=[],this.$table.itemsManagerTable("reset"),this.$editorForm.itemsManagerEditor("reset")}.bind(this)))},onAddFieldClick:function(){this.addEntityFieldRow()},checkFieldRowExistOnError:function(){0===this.fieldRowViews.length&&this.$entityFieldsInput.hasClass("error")&&this.addEntityFieldRow()},updateOriginField:function(){let e=n.invoke(this.fieldRowViews,"getValue");e=n.compact(e).join(","),this.$entityFieldsInput.val()!==e&&(this.ignoreFieldChange=!0,this.$entityFieldsInput.val(e).trigger("change"),delete this.ignoreFieldChange,this.checkFieldRowExistOnError())},onOriginFieldsChange:function(e){if(this.ignoreFieldChange)return;const i=t(e.currentTarget).val().split(",");n.each(this.fieldRowViews,this.removeFieldRowView,this),n.each(i,this.addEntityFieldRow,this)},dispose:function(){this.disposed||(this.$editorForm.off(this.eventNamespace()),this.$editorForm.itemsManagerEditor("destroy"),this.$table.itemsManagerTable("destroy"),delete this.$editorForm,delete this.$table,h.__super__.dispose.call(this))}},{INVALID_DATA_ISSUE:"INVALID_DATA",UNSAVED_CHANGES_ISSUE:"UNSAVED_CHANGES",ORIGIN_FIELDS_SELECTOR:"[data-purpose=multiple-entityfield-selector]"});return h}.call(t,i,t,e))||(e.exports=n)},"./bundles/orodotmailer/js/app/components/select2-autocomplete-channel-aware-address-book-component.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/extend/underscore.js"),n=i("./bundles/orochannel/js/app/components/select2-autocomplete-channel-aware-component.js").extend({marketingListId:"",constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.marketingListId=t.result(e,"marketing_list_id")||this.marketingListId,n.__super__.initialize.call(this,e)},makeQuery:function(e){return n.__super__.makeQuery.call(this,e)+";"+this.marketingListId}});return n}.call(t,i,t,e))||(e.exports=n)},"./bundles/orodotmailer/js/app/models/mapping-model.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/extend/underscore.js");return i("./bundles/oroquerydesigner/js/app/models/entity-field-model.js").extend({fieldAttribute:"entityFields",defaults:{id:null,entityFields:null,dataField:null,isTwoWaySync:null},constructor:function e(t,i){e.__super__.constructor.call(this,t,i)},validate:function(e,i){let n;try{const i=e[this.fieldAttribute].split(",");t.each(i,(function(e){this.dataProvider.pathToEntityChain(e)}),this)}catch(e){n=e.message}return n}})}.call(t,i,t,e))||(e.exports=n)},"./bundles/orodotmailer/js/app/views/field-choice-item-view.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/extend/underscore.js"),n=i("./bundles/oroui/js/app/views/base/view.js"),s=i("./bundles/oroentity/js/app/views/field-choice-view.js"),o=n.extend({template:i("../node_modules/@oroinc/oro-webpack-config-builder/loader/text-loader.js!./bundles/orodotmailer/templates/field-choice-item.html"),events:{'click [data-role="remove-item"]':"onRemove"},removable:!0,fieldChoiceOptions:null,constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){t.extend(this,t.pick(e,"fieldChoiceOptions")),o.__super__.getTemplateData.call(this,e)},render:function(){o.__super__.render.call(this);const e=this.$("input");this.subview("field-choice",new s(t.extend({autoRender:!0,el:e},this.fieldChoiceOptions))),this.listenTo(this.subview("field-choice"),"change",(function(e){this.trigger("change",e)}))},onRemove:function(e){e.preventDefault(),this.trigger("remove",this.cid)},getValue:function(){return this.subview("field-choice").getValue()},setValue:function(e){this.subview("field-choice").setValue(e)}});return o}.call(t,i,t,e))||(e.exports=n)},"./bundles/orodotmailer/js/datafield-view.js":(e,t,i)=>{var n,s;n=[i("./bundles/oroui/js/extend/jquery.js"),i("./bundles/oroui/js/extend/backbone.js"),i("./bundles/oroui/js/extend/underscore.js"),i("./bundles/orotranslation/js/translator.js"),i("./bundles/oroui/js/mediator.js")],void 0===(s=function(e,t,i,n,s){"use strict";return t.View.extend({UPDATE_MARKER:"formUpdateMarker",fieldsSets:{type:[]},requiredOptions:["typeSelector","fieldsSets","formSelector"],constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(t){this.options=i.defaults(t||{},this.options);const n=this.requiredOptions.filter((function(e){return i.isUndefined(t[e])}));if(n.length)throw new TypeError("Missing required option(s): "+n.join(","));i.extend(this.fieldsSets,t.fieldsSets),e(t.typeSelector).on("change",this.processChange.bind(this))},processChange:function(t){const n=e(this.options.formSelector);let o=n.serializeArray();const a=n.attr("action"),r=this.fieldsSets.type;o=i.filter(o,(function(e){return-1!==i.indexOf(r,e.name)})),o.push({name:this.UPDATE_MARKER,value:1}),s.execute("submitPage",{url:a,type:n.attr("method"),data:e.param(o)})}})}.apply(t,n))||(e.exports=s)},"./bundles/orodotmailer/js/integration-connection.js":(e,t,i)=>{var n,s;n=[i("./bundles/oroui/js/extend/jquery.js"),i("./bundles/oroui/js/extend/backbone.js"),i("./bundles/oroui/js/extend/underscore.js"),i("./bundles/orotranslation/js/translator.js"),i("./bundles/oroui/js/mediator.js")],void 0===(s=function(e,t,i,n,s){"use strict";return t.View.extend({fieldsSets:{channel:[]},requiredOptions:["channelSelector","fieldsSets","formSelector"],constructor:function e(...t){e.__super__.constructor.apply(this,t)},initialize:function(t){this.options=i.defaults(t||{},this.options);const n=this.requiredOptions.filter((function(e){return i.isUndefined(t[e])}));if(n.length)throw new TypeError("Missing required option(s): "+n.join(","));i.extend(this.fieldsSets,t.fieldsSets),e(t.channelSelector).on("change",this.changeHandler.bind(this))},changeHandler:function(t){const n=e(this.options.formSelector);let o=n.serializeArray();const a=n.attr("action"),r=this.fieldsSets.channel;o=i.filter(o,(function(e){return-1!==i.indexOf(r,e.name)})),s.execute("submitPage",{url:a,type:n.attr("method"),data:e.param(o)})}})}.apply(t,n))||(e.exports=s)},"./bundles/orodotmailer/js/sync-buttons-handler.js":(e,t,i)=>{var n,s;n=[i("./bundles/oroui/js/extend/jquery.js"),i("./bundles/oroui/js/mediator.js"),i("./bundles/oroui/js/app/components/widget-component.js")],void 0===(s=function(e,t,i){"use strict";const n=window.console;return function(s){const o=this;this.startSyncDelegate=function(){t.execute("showLoading"),e.post(this.data("url")).done((function(e){t.execute("addMessage","success",e.message),t.execute("refreshPage")})).always((function(){t.execute("hideLoading")}))},this.updateSettingsDelegate=function(){const e=this.data("message");new(i.extend({defaults:{type:"dialog",options:{stateEnabled:!1,incrementalPosition:!1,loadingMaskEnabled:!0,dialogOptions:{modal:!0,resizable:!1,width:510,autoResize:!0}}},constructor:function e(t){e.__super__.constructor.call(this,t)},_bindEnvironmentEvent:function(i){this.listenTo(i,"formSave",(function(){i.remove(),e&&t.execute("addMessage","success",e),t.execute("refreshPage")}))}}))({options:{url:this.data("url"),title:this.data("title")}}).openWidget()},this.syncButtonsClickHandlerDelegate=function(){const t=e(this);switch(t.data("action")){case"sync-with-dotmailer":return void o.startSyncDelegate.call(t);case"connect-with-dotmailer-setting-update":return void o.updateSettingsDelegate.call(t)}n&&n.warn&&n.warn("Unrecognized sync button action")},this.bindElementsEvents=function(){e(s).click(this.syncButtonsClickHandlerDelegate)},this.bindElementsEvents()}}.apply(t,n))||(e.exports=s)},"./bundles/oromultiwebsite/js/app/views/website-select-view.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/app/views/base/view.js"),n=i("./bundles/oroui/js/mediator.js"),s=i("./bundles/oroui/js/extend/underscore.js"),o=i("./bundles/oroui/js/extend/jquery.js"),a=t.extend({$select:{},options:{selectors:{website:'select[name$="[website]"]'}},constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.options=s.defaults(e||{},this.options),this.$select=o(this.options.el).find(this.options.selectors.website),this.$select.on("change",this._triggerUpdateTotals),this.listenTo(n,{"pricing:refresh:products-tier-prices:before":this._updateContext})},_updateContext:function(e){e.requestAttributes.websiteId=this.$select.val()},_triggerUpdateTotals:function(){n.trigger("update:totals"),n.trigger("pricing:load:prices"),n.trigger("entry-point:order:trigger"),n.trigger("entry-point:quote:trigger")},dispose:function(){this.disposed||(this.$select.off("change",this._triggerUpdateTotals),a.__super__.dispose.call(this))}});return a}.call(t,i,t,e))||(e.exports=n)},"./bundles/oromultiwebsite/js/app/views/website-select-with-preferred-localization-view.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/extend/underscore.js"),n=i("./bundles/oroui/js/app/views/base/view.js").extend({selectors:null,defaults:{selectors:{website:'[name$="[website]"]',preferredLocalization:'[name$="[enabledLocalization]"]'}},constructor:function e(i){t.extend(this,this.defaults,t.pick(i,"selectors")),e.__super__.constructor.call(this,i)},initialize:function(e){n.__super__.initialize.call(this,e),this._addWebsiteIdToAdditionalParams()},delegateEvents:function(){n.__super__.delegateEvents.call(this),this.delegate("change",this.selectors.website,this.onChange.bind(this))},onChange:function(){this.$el.find(this.selectors.preferredLocalization).inputWidget("val",""),this._addWebsiteIdToAdditionalParams()},_addWebsiteIdToAdditionalParams:function(){this.$el.find(this.selectors.preferredLocalization).data("select2_query_additional_params",{preferred_localization_website_id:this.$el.find(this.selectors.website).val()})}});return n}.call(t,i,t,e))||(e.exports=n)},"./bundles/orowebcatalog/js/app/components/content-variant-collection-component.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/extend/underscore.js"),n=i("./bundles/oroui/js/extend/jquery.js"),s=i("./bundles/oroui/js/mediator.js");return i("./bundles/oroui/js/app/components/base/component.js").extend({options:{buttonSelector:'[data-role="variant-button"]',variantRemoveSelector:'[data-action="remove"]',collectionContainerSelector:'[data-role="collection-container"]'},constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.options=t.defaults(e||{},this.options),this.$el=this.options._sourceElement,this.$el.on("click",this.options.buttonSelector,this.onAdd.bind(this)),this.$el.on("click",this.options.variantRemoveSelector,this.onRemove.bind(this)),this.prototypeName=this.$el.data("prototype-name")||"__name__",this.$collectionContainer=this.$el.find(this.options.collectionContainerSelector)},onAdd:function(e){e.preventDefault();const t=n(e.currentTarget);if(t.attr("disabled"))return;const i=this.$el.data("prototype-"+t.data("content-variant-type-name"));if(i){let e=parseInt(this.$el.data("last-index"));const t=i.replace(new RegExp(this.prototypeName,"g"),e);this.$collectionContainer.prepend(t).trigger("content:changed"),this.$el.data("last-index",++e)}s.trigger("webcatalog:content-variant-collection:add",this.$el)},onRemove:function(e){e.preventDefault();const t=n(e.target).closest("*[data-content]");t.trigger("content:remove"),t.remove(),s.trigger("webcatalog:content-variant-collection:remove",this.$el)}})}.call(t,i,t,e))||(e.exports=n)},"./bundles/orowebcatalog/js/app/views/content-node-from-webcatalog-view.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/app/views/base/view.js"),n=t.extend({optionNames:t.prototype.optionNames.concat(["listenedFieldName","triggeredFieldName","listenedElement","triggeredElement"]),listenedFieldName:null,triggeredFieldName:null,listenedElement:null,triggeredElement:null,constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){n.__super__.initialize.call(this,e),this._initElements(),this._bindEvents(),this._triggerUpdateAction()},_initElements:function(){this.listenedElement=this.$('[name="'+this.listenedFieldName+'"]'),this.triggeredElement=this.$('[name="'+this.triggeredFieldName+'"]')},_bindEvents:function(){this.$('[name="'+this.listenedFieldName+'"]').on("change",this._triggerUpdateAction.bind(this))},_triggerUpdateAction:function(){const e=this.listenedElement.select2("data");this.triggeredElement.trigger({type:"update:field",updatedData:{id:this.listenedElement.val(),name:e?e.name:null}})}});return n}.call(t,i,t,e))||(e.exports=n)},"./bundles/orowebcatalog/js/app/views/default-variant-collection-view.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroui/js/app/views/base/view.js"),n=i("./bundles/oroui/js/mediator.js"),s=i("./bundles/oroui/js/extend/jquery.js");return t.extend({$collection:null,options:{defaultSelector:'[name$="[default]"]',itemSelector:'[data-role="content-variant-item"]',defaultItemClass:"content-variant-item-default"},constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.options=s.extend(!0,{},this.options,e||{}),this.$el.on("click",this.options.defaultSelector,(e=>{this.onDefaultChange(s(e.target))})),n.on("webcatalog:content-variant-collection:add",this.handleAdd,this),n.on("webcatalog:content-variant-collection:remove",this.handleRemove,this),this.handleAdd()},handleRemove:function(e){0===e.find(this.options.defaultSelector+":checked").length&&this.checkDefaultVariant()},handleAdd:function(){this.$el.find(this.options.itemSelector).length&&0===this.$el.find(this.options.defaultSelector+":checked").length&&this.checkDefaultVariant()},checkDefaultVariant:function(){const e=this.$el.find(this.options.defaultSelector+":not(:checked)").first();e.prop("checked",!0).trigger("change"),this.onDefaultChange(e)},onDefaultChange:function(e){this.$el.find("."+this.options.defaultItemClass).removeClass(this.options.defaultItemClass),e.closest(this.options.itemSelector).addClass(this.options.defaultItemClass)}})}.call(t,i,t,e))||(e.exports=n)},"./bundles/orowebcatalog/js/app/views/variant-body-view.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>u});var n=i("./bundles/oroui/js/app/views/base/view.js"),s=i.n(n),o=i("./bundles/oroui/js/app/views/loading-mask-view.js"),a=i.n(o),r=i("./bundles/oroui/js/layout.js"),l=i.n(r),d=i("./bundles/oroui/js/extend/underscore.js"),c=i.n(d);const h=s().extend({options:{},selectors:{container:null,trigger:null,body:null},expanded:!1,loadingMaskView:null,$trigger:null,$container:null,constructor:function e(t){e.__super__.constructor.call(this,t)},initialize(e){this.options=c().defaults(e||{},this.options),this.initLayout().done(this.handleLayoutInit.bind(this))},dispose(){this.disposed||(this.$trigger.off(this.eventNamespace()),this.loadingMaskView&&(this.loadingMaskView.dispose(),delete this.loadingMaskView),h.__super__.dispose.call(this))},handleLayoutInit(){this.$trigger=this.options.el.closest(".content-variant-item").find(this.options.selectors.trigger),this.$container=this.options.el.closest(".content-variant-item").find(this.options.selectors.container),this.loadingMaskView=new(a())({container:this.$container}),this.initializeCollapsedState(),this.$trigger.on(`click${this.eventNamespace()}`,this.onToggle.bind(this)),l().initPopover(this.$container)},onToggle(e){0===this.$container.find(this.options.selectors.body).length&&(this.$container.hasClass("show")||(this.loadingMaskView.show(),this.loadBody()))},initializeCollapsedState(){this.options.expanded?(this.loadingMaskView.show(),this.$container.addClass("show"),this.loadBody()):this.$trigger.addClass("collapsed")},loadBody(){const e=this.$el.data("body-prototype");e&&(this.$container.append(e).trigger("content:changed").trigger("patchInitialState"),this.validate()),this.loadingMaskView.hide()},validate(){const e=this.$el.closest("form");e.data("validator")&&e.validate()}}),u=h},"./bundles/orowebcatalog/js/app/views/variants-collection-view.js":(e,t,i)=>{var n;void 0===(n=function(e){"use strict";const t=i("./bundles/oroform/js/app/views/fields-groups-collection-view.js"),n=i("./bundles/oroui/js/mediator.js"),s=t.extend({PRIMARY_FILED_SELECTOR:'[name$="[default]"]',events:{'click [name$="[default]"]':"onPrimaryClick","change >*":"onChangeInFiledGroup"},constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){s.__super__.initialize.call(this,e),this.listenToOnce(n,"page:afterChange",this.validateContainer)},validateContainer:function(){const e=this.$el.find('[data-name="collection-validation"]:first').closest("form").find(".validation-failed");if(e.length){const t=e.closest(".scrollable-container"),i=32,n=e.offset().top-t.offset().top-i;t.animate({scrollTop:n},n/2)}}});return s}.call(t,i,t,e))||(e.exports=n)}}]);