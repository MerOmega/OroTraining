(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[50],{"../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/orocms/templates/grapesjs-dropdown-action.html":(module,__unused_webpack_exports,__webpack_require__)=>{var _=__webpack_require__("./bundles/oroui/js/extend/underscore.js");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+="";var ID=_.uniqueId("dropdown-theme-selector");__p+='\n\n<div class="dropdown">\n    <button class="dropdown-toggle btn btn--plain" data-toggle="dropdown" id="'+(null==(__t=ID)?"":_.escape(__t))+'" aria-haspopup="true" aria-expanded="false" data-prevent-close-on-menu-click="true">\n        '+(null==(__t=currentTheme)?"":_.escape(__t))+'\n    </button>\n\n    <ul class="dropdown-menu" data-role="filterable-list" aria-labelledby="'+(null==(__t=ID)?"":_.escape(__t))+'">\n        <li class="nav-content">\n            <input type="text" name="theme-filter" placeholder="'+(null==(__t=_.__("oro.cms.wysiwyg.theme_selector.placeholder"))?"":_.escape(__t))+'">\n        </li>\n        ',_.each(options,(function(e,t){__p+='\n            <li class="dropdown-item ',currentTheme,__p+='" data-role="filterable-item" data-key="'+(null==(__t=t)?"":_.escape(__t))+'">'+(null==(__t=e)?"":_.escape(__t))+"</li>\n        "})),__p+="\n    </ul>\n</div>\n"}return __p}},"../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/orocms/templates/grapesjs-select-action.html":(module,__unused_webpack_exports,__webpack_require__)=>{var _=__webpack_require__("./bundles/oroui/js/extend/underscore.js");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="gjs-rte-select2">\n    <select name="'+(null==(__t=name)?"":_.escape(__t))+'">\n        ',_.each(options,(function(e,t){__p+='\n            <option value="'+(null==(__t=t)?"":_.escape(__t))+'">'+(null==(__t=e)?"":_.escape(__t))+"</option>\n        "})),__p+="\n    </select>\n</div>\n";return __p}},"../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/orocms/templates/grapesjs-select2-option.html":(module,__unused_webpack_exports,__webpack_require__)=>{var _=__webpack_require__("./bundles/oroui/js/extend/underscore.js");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<span class="gjs-rte-select2-option--'+(null==(__t=state.id)?"":_.escape(__t))+'">'+(null==(__t=state.text)?"":_.escape(__t))+"</span>\n";return __p}},"../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/orocms/templates/grapesjs-settings.html":(module,__unused_webpack_exports,__webpack_require__)=>{var _=__webpack_require__("./bundles/oroui/js/extend/underscore.js");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="gjs-sm-sectors gjs-one-bg gjs-two-color">\n    <div class="gjs-sm-sector no-select gjs-settings gjs-sm-open">\n        <div class="gjs-sm-sector-title">\n            <div class="gjs-sm-sector-caret">\n                <svg viewBox="0 0 24 24"><path fill="currentColor" d="M7,10L12,15L17,10H7Z"></path></svg>\n            </div>\n            <div class="gjs-sm-sector-label">\n                '+(null==(__t=_.__("oro.cms.wysiwyg.style_manager.settings"))?"":_.escape(__t))+'\n            </div>\n        </div>\n        <div class="gjs-sm-properties" style="display: block;"></div>\n    </div>\n</div>\n';return __p}},"../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/orocms/templates/plugins/rte-collection-view-template.html":(module,__unused_webpack_exports,__webpack_require__)=>{var _=__webpack_require__("./bundles/oroui/js/extend/underscore.js");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",_.each(groups,(function(e){__p+='\n    <div data-group-by="'+(null==(__t=e)?"":_.escape(__t))+'" class="actionbar-group"></div>\n'})),__p+="\n";return __p}},"../node_modules/grapesjs-parser-postcss/dist/index.js":function(e){var t;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window&&window,t=()=>(()=>{var e={241:e=>{var t=String,s=function(){return{isColorSupported:!1,reset:t,bold:t,dim:t,italic:t,underline:t,inverse:t,hidden:t,strikethrough:t,black:t,red:t,green:t,yellow:t,blue:t,magenta:t,cyan:t,white:t,gray:t,bgBlack:t,bgRed:t,bgGreen:t,bgYellow:t,bgBlue:t,bgMagenta:t,bgCyan:t,bgWhite:t}};e.exports=s(),e.exports.createColors=s},353:(e,t,s)=>{"use strict";let i=s(19);class o extends i{constructor(e){super(e),this.type="atrule"}append(...e){return this.proxyOf.nodes||(this.nodes=[]),super.append(...e)}prepend(...e){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...e)}}e.exports=o,o.default=o,i.registerAtRule(o)},932:(e,t,s)=>{"use strict";let i=s(631);class o extends i{constructor(e){super(e),this.type="comment"}}e.exports=o,o.default=o},19:(e,t,s)=>{"use strict";let i,o,r,{isClean:n,my:a}=s(513),l=s(258),c=s(932),d=s(631);function h(e){return e.map((e=>(e.nodes&&(e.nodes=h(e.nodes)),delete e.source,e)))}function u(e){if(e[n]=!1,e.proxyOf.nodes)for(let t of e.proxyOf.nodes)u(t)}class p extends d{push(e){return e.parent=this,this.proxyOf.nodes.push(e),this}each(e){if(!this.proxyOf.nodes)return;let t,s,i=this.getIterator();for(;this.indexes[i]<this.proxyOf.nodes.length&&(t=this.indexes[i],s=e(this.proxyOf.nodes[t],t),!1!==s);)this.indexes[i]+=1;return delete this.indexes[i],s}walk(e){return this.each(((t,s)=>{let i;try{i=e(t,s)}catch(e){throw t.addToError(e)}return!1!==i&&t.walk&&(i=t.walk(e)),i}))}walkDecls(e,t){return t?e instanceof RegExp?this.walk(((s,i)=>{if("decl"===s.type&&e.test(s.prop))return t(s,i)})):this.walk(((s,i)=>{if("decl"===s.type&&s.prop===e)return t(s,i)})):(t=e,this.walk(((e,s)=>{if("decl"===e.type)return t(e,s)})))}walkRules(e,t){return t?e instanceof RegExp?this.walk(((s,i)=>{if("rule"===s.type&&e.test(s.selector))return t(s,i)})):this.walk(((s,i)=>{if("rule"===s.type&&s.selector===e)return t(s,i)})):(t=e,this.walk(((e,s)=>{if("rule"===e.type)return t(e,s)})))}walkAtRules(e,t){return t?e instanceof RegExp?this.walk(((s,i)=>{if("atrule"===s.type&&e.test(s.name))return t(s,i)})):this.walk(((s,i)=>{if("atrule"===s.type&&s.name===e)return t(s,i)})):(t=e,this.walk(((e,s)=>{if("atrule"===e.type)return t(e,s)})))}walkComments(e){return this.walk(((t,s)=>{if("comment"===t.type)return e(t,s)}))}append(...e){for(let t of e){let e=this.normalize(t,this.last);for(let t of e)this.proxyOf.nodes.push(t)}return this.markDirty(),this}prepend(...e){e=e.reverse();for(let t of e){let e=this.normalize(t,this.first,"prepend").reverse();for(let t of e)this.proxyOf.nodes.unshift(t);for(let t in this.indexes)this.indexes[t]=this.indexes[t]+e.length}return this.markDirty(),this}cleanRaws(e){if(super.cleanRaws(e),this.nodes)for(let t of this.nodes)t.cleanRaws(e)}insertBefore(e,t){let s,i=0===(e=this.index(e))&&"prepend",o=this.normalize(t,this.proxyOf.nodes[e],i).reverse();for(let t of o)this.proxyOf.nodes.splice(e,0,t);for(let t in this.indexes)s=this.indexes[t],e<=s&&(this.indexes[t]=s+o.length);return this.markDirty(),this}insertAfter(e,t){e=this.index(e);let s,i=this.normalize(t,this.proxyOf.nodes[e]).reverse();for(let t of i)this.proxyOf.nodes.splice(e+1,0,t);for(let t in this.indexes)s=this.indexes[t],e<s&&(this.indexes[t]=s+i.length);return this.markDirty(),this}removeChild(e){let t;e=this.index(e),this.proxyOf.nodes[e].parent=void 0,this.proxyOf.nodes.splice(e,1);for(let s in this.indexes)t=this.indexes[s],t>=e&&(this.indexes[s]=t-1);return this.markDirty(),this}removeAll(){for(let e of this.proxyOf.nodes)e.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}replaceValues(e,t,s){return s||(s=t,t={}),this.walkDecls((i=>{t.props&&!t.props.includes(i.prop)||t.fast&&!i.value.includes(t.fast)||(i.value=i.value.replace(e,s))})),this.markDirty(),this}every(e){return this.nodes.every(e)}some(e){return this.nodes.some(e)}index(e){return"number"==typeof e?e:(e.proxyOf&&(e=e.proxyOf),this.proxyOf.nodes.indexOf(e))}get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}normalize(e,t){if("string"==typeof e)e=h(i(e).nodes);else if(Array.isArray(e)){e=e.slice(0);for(let t of e)t.parent&&t.parent.removeChild(t,"ignore")}else if("root"===e.type&&"document"!==this.type){e=e.nodes.slice(0);for(let t of e)t.parent&&t.parent.removeChild(t,"ignore")}else if(e.type)e=[e];else if(e.prop){if(void 0===e.value)throw new Error("Value field is missed in node creation");"string"!=typeof e.value&&(e.value=String(e.value)),e=[new l(e)]}else if(e.selector)e=[new o(e)];else if(e.name)e=[new r(e)];else{if(!e.text)throw new Error("Unknown node type in node creation");e=[new c(e)]}return e.map((e=>(e[a]||p.rebuild(e),(e=e.proxyOf).parent&&e.parent.removeChild(e),e[n]&&u(e),void 0===e.raws.before&&t&&void 0!==t.raws.before&&(e.raws.before=t.raws.before.replace(/\S/g,"")),e.parent=this.proxyOf,e)))}getProxyProcessor(){return{set:(e,t,s)=>(e[t]===s||(e[t]=s,"name"!==t&&"params"!==t&&"selector"!==t||e.markDirty()),!0),get:(e,t)=>"proxyOf"===t?e:e[t]?"each"===t||"string"==typeof t&&t.startsWith("walk")?(...s)=>e[t](...s.map((e=>"function"==typeof e?(t,s)=>e(t.toProxy(),s):e))):"every"===t||"some"===t?s=>e[t](((e,...t)=>s(e.toProxy(),...t))):"root"===t?()=>e.root().toProxy():"nodes"===t?e.nodes.map((e=>e.toProxy())):"first"===t||"last"===t?e[t].toProxy():e[t]:e[t]}}getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;let e=this.lastEach;return this.indexes[e]=0,e}}p.registerParse=e=>{i=e},p.registerRule=e=>{o=e},p.registerAtRule=e=>{r=e},e.exports=p,p.default=p,p.rebuild=e=>{"atrule"===e.type?Object.setPrototypeOf(e,r.prototype):"rule"===e.type?Object.setPrototypeOf(e,o.prototype):"decl"===e.type?Object.setPrototypeOf(e,l.prototype):"comment"===e.type&&Object.setPrototypeOf(e,c.prototype),e[a]=!0,e.nodes&&e.nodes.forEach((e=>{p.rebuild(e)}))}},671:(e,t,s)=>{"use strict";let i=s(241),o=s(868);class r extends Error{constructor(e,t,s,i,o,n){super(e),this.name="CssSyntaxError",this.reason=e,o&&(this.file=o),i&&(this.source=i),n&&(this.plugin=n),void 0!==t&&void 0!==s&&("number"==typeof t?(this.line=t,this.column=s):(this.line=t.line,this.column=t.column,this.endLine=s.line,this.endColumn=s.column)),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,r)}setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",void 0!==this.line&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}showSourceCode(e){if(!this.source)return"";let t=this.source;null==e&&(e=i.isColorSupported),o&&e&&(t=o(t));let s,r,n=t.split(/\r?\n/),a=Math.max(this.line-3,0),l=Math.min(this.line+2,n.length),c=String(l).length;if(e){let{bold:e,red:t,gray:o}=i.createColors(!0);s=s=>e(t(s)),r=e=>o(e)}else s=r=e=>e;return n.slice(a,l).map(((e,t)=>{let i=a+1+t,o=" "+(" "+i).slice(-c)+" | ";if(i===this.line){let t=r(o.replace(/\d/g," "))+e.slice(0,this.column-1).replace(/[^\t]/g," ");return s(">")+r(o)+e+"\n "+t+s("^")}return" "+r(o)+e})).join("\n")}toString(){let e=this.showSourceCode();return e&&(e="\n\n"+e+"\n"),this.name+": "+this.message+e}}e.exports=r,r.default=r},258:(e,t,s)=>{"use strict";let i=s(631);class o extends i{constructor(e){e&&void 0!==e.value&&"string"!=typeof e.value&&(e={...e,value:String(e.value)}),super(e),this.type="decl"}get variable(){return this.prop.startsWith("--")||"$"===this.prop[0]}}e.exports=o,o.default=o},461:(e,t,s)=>{"use strict";let i,o,r=s(19);class n extends r{constructor(e){super({type:"document",...e}),this.nodes||(this.nodes=[])}toResult(e={}){return new i(new o,this,e).stringify()}}n.registerLazyResult=e=>{i=e},n.registerProcessor=e=>{o=e},e.exports=n,n.default=n},250:(e,t,s)=>{"use strict";let i=s(258),o=s(981),r=s(932),n=s(353),a=s(995),l=s(25),c=s(675);function d(e,t){if(Array.isArray(e))return e.map((e=>d(e)));let{inputs:s,...h}=e;if(s){t=[];for(let e of s){let s={...e,__proto__:a.prototype};s.map&&(s.map={...s.map,__proto__:o.prototype}),t.push(s)}}if(h.nodes&&(h.nodes=e.nodes.map((e=>d(e,t)))),h.source){let{inputId:e,...s}=h.source;h.source=s,null!=e&&(h.source.input=t[e])}if("root"===h.type)return new l(h);if("decl"===h.type)return new i(h);if("rule"===h.type)return new c(h);if("comment"===h.type)return new r(h);if("atrule"===h.type)return new n(h);throw new Error("Unknown node type: "+e.type)}e.exports=d,d.default=d},995:(e,t,s)=>{"use strict";let{SourceMapConsumer:i,SourceMapGenerator:o}=s(209),{fileURLToPath:r,pathToFileURL:n}=s(414),{resolve:a,isAbsolute:l}=s(830),{nanoid:c}=s(961),d=s(868),h=s(671),u=s(981),p=Symbol("fromOffsetCache"),m=Boolean(i&&o),g=Boolean(a&&l);class f{constructor(e,t={}){if(null==e||"object"==typeof e&&!e.toString)throw new Error(`PostCSS received ${e} instead of CSS string`);if(this.css=e.toString(),"\ufeff"===this.css[0]||"￾"===this.css[0]?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,t.from&&(!g||/^\w+:\/\//.test(t.from)||l(t.from)?this.file=t.from:this.file=a(t.from)),g&&m){let e=new u(this.css,t);if(e.text){this.map=e;let t=e.consumer().file;!this.file&&t&&(this.file=this.mapResolve(t))}}this.file||(this.id="<input css "+c(6)+">"),this.map&&(this.map.file=this.from)}fromOffset(e){let t,s;if(this[p])s=this[p];else{let e=this.css.split("\n");s=new Array(e.length);let t=0;for(let i=0,o=e.length;i<o;i++)s[i]=t,t+=e[i].length+1;this[p]=s}t=s[s.length-1];let i=0;if(e>=t)i=s.length-1;else{let t,o=s.length-2;for(;i<o;)if(t=i+(o-i>>1),e<s[t])o=t-1;else{if(!(e>=s[t+1])){i=t;break}i=t+1}}return{line:i+1,col:e-s[i]+1}}error(e,t,s,i={}){let o,r,a;if(t&&"object"==typeof t){let e=t,i=s;if("number"==typeof t.offset){let i=this.fromOffset(e.offset);t=i.line,s=i.col}else t=e.line,s=e.column;if("number"==typeof i.offset){let e=this.fromOffset(i.offset);r=e.line,a=e.col}else r=i.line,a=i.column}else if(!s){let e=this.fromOffset(t);t=e.line,s=e.col}let l=this.origin(t,s,r,a);return o=l?new h(e,void 0===l.endLine?l.line:{line:l.line,column:l.column},void 0===l.endLine?l.column:{line:l.endLine,column:l.endColumn},l.source,l.file,i.plugin):new h(e,void 0===r?t:{line:t,column:s},void 0===r?s:{line:r,column:a},this.css,this.file,i.plugin),o.input={line:t,column:s,endLine:r,endColumn:a,source:this.css},this.file&&(n&&(o.input.url=n(this.file).toString()),o.input.file=this.file),o}origin(e,t,s,i){if(!this.map)return!1;let o,a,c=this.map.consumer(),d=c.originalPositionFor({line:e,column:t});if(!d.source)return!1;"number"==typeof s&&(o=c.originalPositionFor({line:s,column:i})),a=l(d.source)?n(d.source):new URL(d.source,this.map.consumer().sourceRoot||n(this.map.mapFile));let h={url:a.toString(),line:d.line,column:d.column,endLine:o&&o.line,endColumn:o&&o.column};if("file:"===a.protocol){if(!r)throw new Error("file: protocol is not available in this PostCSS build");h.file=r(a)}let u=c.sourceContentFor(d.source);return u&&(h.source=u),h}mapResolve(e){return/^\w+:\/\//.test(e)?e:a(this.map.consumer().sourceRoot||this.map.root||".",e)}get from(){return this.file||this.id}toJSON(){let e={};for(let t of["hasBOM","css","file","id"])null!=this[t]&&(e[t]=this[t]);return this.map&&(e.map={...this.map},e.map.consumerCache&&(e.map.consumerCache=void 0)),e}}e.exports=f,f.default=f,d&&d.registerInput&&d.registerInput(f)},939:(e,t,s)=>{"use strict";let{isClean:i,my:o}=s(513),r=s(505),n=s(88),a=s(19),l=s(461),c=(s(448),s(632)),d=s(964),h=s(25);const u={document:"Document",root:"Root",atrule:"AtRule",rule:"Rule",decl:"Declaration",comment:"Comment"},p={postcssPlugin:!0,prepare:!0,Once:!0,Document:!0,Root:!0,Declaration:!0,Rule:!0,AtRule:!0,Comment:!0,DeclarationExit:!0,RuleExit:!0,AtRuleExit:!0,CommentExit:!0,RootExit:!0,DocumentExit:!0,OnceExit:!0},m={postcssPlugin:!0,prepare:!0,Once:!0},g=0;function f(e){return"object"==typeof e&&"function"==typeof e.then}function y(e){let t=!1,s=u[e.type];return"decl"===e.type?t=e.prop.toLowerCase():"atrule"===e.type&&(t=e.name.toLowerCase()),t&&e.append?[s,s+"-"+t,g,s+"Exit",s+"Exit-"+t]:t?[s,s+"-"+t,s+"Exit",s+"Exit-"+t]:e.append?[s,g,s+"Exit"]:[s,s+"Exit"]}function b(e){let t;return t="document"===e.type?["Document",g,"DocumentExit"]:"root"===e.type?["Root",g,"RootExit"]:y(e),{node:e,events:t,eventIndex:0,visitors:[],visitorIndex:0,iterator:0}}function w(e){return e[i]=!1,e.nodes&&e.nodes.forEach((e=>w(e))),e}let v={};class _{constructor(e,t,s){let i;if(this.stringified=!1,this.processed=!1,"object"!=typeof t||null===t||"root"!==t.type&&"document"!==t.type)if(t instanceof _||t instanceof c)i=w(t.root),t.map&&(void 0===s.map&&(s.map={}),s.map.inline||(s.map.inline=!1),s.map.prev=t.map);else{let r=d;s.syntax&&(r=s.syntax.parse),s.parser&&(r=s.parser),r.parse&&(r=r.parse);try{i=r(t,s)}catch(e){this.processed=!0,this.error=e}i&&!i[o]&&a.rebuild(i)}else i=w(t);this.result=new c(e,i,s),this.helpers={...v,result:this.result,postcss:v},this.plugins=this.processor.plugins.map((e=>"object"==typeof e&&e.prepare?{...e,...e.prepare(this.result)}:e))}get[Symbol.toStringTag](){return"LazyResult"}get processor(){return this.result.processor}get opts(){return this.result.opts}get css(){return this.stringify().css}get content(){return this.stringify().content}get map(){return this.stringify().map}get root(){return this.sync().root}get messages(){return this.sync().messages}warnings(){return this.sync().warnings()}toString(){return this.css}then(e,t){return this.async().then(e,t)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let e of this.plugins)if(f(this.runOnRoot(e)))throw this.getAsyncError();if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[i];)e[i]=!0,this.walkSync(e);if(this.listeners.OnceExit)if("document"===e.type)for(let t of e.nodes)this.visitSync(this.listeners.OnceExit,t);else this.visitSync(this.listeners.OnceExit,e)}return this.result}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let e=this.result.opts,t=n;e.syntax&&(t=e.syntax.stringify),e.stringifier&&(t=e.stringifier),t.stringify&&(t=t.stringify);let s=new r(t,this.result.root,this.result.opts).generate();return this.result.css=s[0],this.result.map=s[1],this.result}walkSync(e){e[i]=!0;let t=y(e);for(let s of t)if(s===g)e.nodes&&e.each((e=>{e[i]||this.walkSync(e)}));else{let t=this.listeners[s];if(t&&this.visitSync(t,e.toProxy()))return}}visitSync(e,t){for(let[s,i]of e){let o;this.result.lastPlugin=s;try{o=i(t,this.helpers)}catch(e){throw this.handleError(e,t.proxyOf)}if("root"!==t.type&&"document"!==t.type&&!t.parent)return!0;if(f(o))throw this.getAsyncError()}}runOnRoot(e){this.result.lastPlugin=e;try{if("object"==typeof e&&e.Once){if("document"===this.result.root.type){let t=this.result.root.nodes.map((t=>e.Once(t,this.helpers)));return f(t[0])?Promise.all(t):t}return e.Once(this.result.root,this.helpers)}if("function"==typeof e)return e(this.result.root,this.result)}catch(e){throw this.handleError(e)}}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")}handleError(e,t){let s=this.result.lastPlugin;try{t&&t.addToError(e),this.error=e,"CssSyntaxError"!==e.name||e.plugin?s.postcssVersion:(e.plugin=s.postcssPlugin,e.setMessage())}catch(e){console&&console.error&&console.error(e)}return e}async runAsync(){this.plugin=0;for(let e=0;e<this.plugins.length;e++){let t=this.plugins[e],s=this.runOnRoot(t);if(f(s))try{await s}catch(e){throw this.handleError(e)}}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[i];){e[i]=!0;let t=[b(e)];for(;t.length>0;){let e=this.visitTick(t);if(f(e))try{await e}catch(e){let s=t[t.length-1].node;throw this.handleError(e,s)}}}if(this.listeners.OnceExit)for(let[t,s]of this.listeners.OnceExit){this.result.lastPlugin=t;try{if("document"===e.type){let t=e.nodes.map((e=>s(e,this.helpers)));await Promise.all(t)}else await s(e,this.helpers)}catch(e){throw this.handleError(e)}}}return this.processed=!0,this.stringify()}prepareVisitors(){this.listeners={};let e=(e,t,s)=>{this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push([e,s])};for(let t of this.plugins)if("object"==typeof t)for(let s in t){if(!p[s]&&/^[A-Z]/.test(s))throw new Error(`Unknown event ${s} in ${t.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`);if(!m[s])if("object"==typeof t[s])for(let i in t[s])e(t,"*"===i?s:s+"-"+i.toLowerCase(),t[s][i]);else"function"==typeof t[s]&&e(t,s,t[s])}this.hasListener=Object.keys(this.listeners).length>0}visitTick(e){let t=e[e.length-1],{node:s,visitors:o}=t;if("root"!==s.type&&"document"!==s.type&&!s.parent)return void e.pop();if(o.length>0&&t.visitorIndex<o.length){let[i,r]=o[t.visitorIndex];t.visitorIndex+=1,t.visitorIndex===o.length&&(t.visitors=[],t.visitorIndex=0),this.result.lastPlugin=i;try{return r(s.toProxy(),this.helpers)}catch(e){throw this.handleError(e,s)}}if(0!==t.iterator){let o,r=t.iterator;for(;o=s.nodes[s.indexes[r]];)if(s.indexes[r]+=1,!o[i])return o[i]=!0,void e.push(b(o));t.iterator=0,delete s.indexes[r]}let r=t.events;for(;t.eventIndex<r.length;){let e=r[t.eventIndex];if(t.eventIndex+=1,e===g)return void(s.nodes&&s.nodes.length&&(s[i]=!0,t.iterator=s.getIterator()));if(this.listeners[e])return void(t.visitors=this.listeners[e])}e.pop()}}_.registerPostcss=e=>{v=e},e.exports=_,_.default=_,h.registerLazyResult(_),l.registerLazyResult(_)},715:e=>{"use strict";let t={split(e,t,s){let i=[],o="",r=!1,n=0,a=!1,l=!1;for(let s of e)l?l=!1:"\\"===s?l=!0:a?s===a&&(a=!1):'"'===s||"'"===s?a=s:"("===s?n+=1:")"===s?n>0&&(n-=1):0===n&&t.includes(s)&&(r=!0),r?(""!==o&&i.push(o.trim()),o="",r=!1):o+=s;return(s||""!==o)&&i.push(o.trim()),i},space:e=>t.split(e,[" ","\n","\t"]),comma:e=>t.split(e,[","],!0)};e.exports=t,t.default=t},505:(e,t,s)=>{"use strict";let{SourceMapConsumer:i,SourceMapGenerator:o}=s(209),{dirname:r,resolve:n,relative:a,sep:l}=s(830),{pathToFileURL:c}=s(414),d=s(995),h=Boolean(i&&o),u=Boolean(r&&n&&a&&l);e.exports=class{constructor(e,t,s,i){this.stringify=e,this.mapOpts=s.map||{},this.root=t,this.opts=s,this.css=i}isMap(){return void 0!==this.opts.map?!!this.opts.map:this.previous().length>0}previous(){if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk((e=>{if(e.source&&e.source.input.map){let t=e.source.input.map;this.previousMaps.includes(t)||this.previousMaps.push(t)}}));else{let e=new d(this.css,this.opts);e.map&&this.previousMaps.push(e.map)}return this.previousMaps}isInline(){if(void 0!==this.mapOpts.inline)return this.mapOpts.inline;let e=this.mapOpts.annotation;return(void 0===e||!0===e)&&(!this.previous().length||this.previous().some((e=>e.inline)))}isSourcesContent(){return void 0!==this.mapOpts.sourcesContent?this.mapOpts.sourcesContent:!this.previous().length||this.previous().some((e=>e.withContent()))}clearAnnotation(){if(!1!==this.mapOpts.annotation)if(this.root){let e;for(let t=this.root.nodes.length-1;t>=0;t--)e=this.root.nodes[t],"comment"===e.type&&0===e.text.indexOf("# sourceMappingURL=")&&this.root.removeChild(t)}else this.css&&(this.css=this.css.replace(/(\n)?\/\*#[\S\s]*?\*\/$/gm,""))}setSourcesContent(){let e={};if(this.root)this.root.walk((t=>{if(t.source){let s=t.source.input.from;s&&!e[s]&&(e[s]=!0,this.map.setSourceContent(this.toUrl(this.path(s)),t.source.input.css))}}));else if(this.css){let e=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(e,this.css)}}applyPrevMaps(){for(let e of this.previous()){let t,s=this.toUrl(this.path(e.file)),o=e.root||r(e.file);!1===this.mapOpts.sourcesContent?(t=new i(e.text),t.sourcesContent&&(t.sourcesContent=t.sourcesContent.map((()=>null)))):t=e.consumer(),this.map.applySourceMap(t,s,this.toUrl(this.path(o)))}}isAnnotation(){return!!this.isInline()||(void 0!==this.mapOpts.annotation?this.mapOpts.annotation:!this.previous().length||this.previous().some((e=>e.annotation)))}toBase64(e){return Buffer?Buffer.from(e).toString("base64"):window.btoa(unescape(encodeURIComponent(e)))}addAnnotation(){let e;e=this.isInline()?"data:application/json;base64,"+this.toBase64(this.map.toString()):"string"==typeof this.mapOpts.annotation?this.mapOpts.annotation:"function"==typeof this.mapOpts.annotation?this.mapOpts.annotation(this.opts.to,this.root):this.outputFile()+".map";let t="\n";this.css.includes("\r\n")&&(t="\r\n"),this.css+=t+"/*# sourceMappingURL="+e+" */"}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}generateMap(){if(this.root)this.generateString();else if(1===this.previous().length){let e=this.previous()[0].consumer();e.file=this.outputFile(),this.map=o.fromSourceMap(e)}else this.map=new o({file:this.outputFile()}),this.map.addMapping({source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>",generated:{line:1,column:0},original:{line:1,column:0}});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}path(e){if(0===e.indexOf("<"))return e;if(/^\w+:\/\//.test(e))return e;if(this.mapOpts.absolute)return e;let t=this.opts.to?r(this.opts.to):".";return"string"==typeof this.mapOpts.annotation&&(t=r(n(t,this.mapOpts.annotation))),a(t,e)}toUrl(e){return"\\"===l&&(e=e.replace(/\\/g,"/")),encodeURI(e).replace(/[#?]/g,encodeURIComponent)}sourcePath(e){if(this.mapOpts.from)return this.toUrl(this.mapOpts.from);if(this.mapOpts.absolute){if(c)return c(e.source.input.from).toString();throw new Error("`map.absolute` option is not available in this PostCSS build")}return this.toUrl(this.path(e.source.input.from))}generateString(){this.css="",this.map=new o({file:this.outputFile()});let e,t,s=1,i=1,r="<no source>",n={source:"",generated:{line:0,column:0},original:{line:0,column:0}};this.stringify(this.root,((o,a,l)=>{if(this.css+=o,a&&"end"!==l&&(n.generated.line=s,n.generated.column=i-1,a.source&&a.source.start?(n.source=this.sourcePath(a),n.original.line=a.source.start.line,n.original.column=a.source.start.column-1,this.map.addMapping(n)):(n.source=r,n.original.line=1,n.original.column=0,this.map.addMapping(n))),e=o.match(/\n/g),e?(s+=e.length,t=o.lastIndexOf("\n"),i=o.length-t):i+=o.length,a&&"start"!==l){let e=a.parent||{raws:{}};("decl"!==a.type||a!==e.last||e.raws.semicolon)&&(a.source&&a.source.end?(n.source=this.sourcePath(a),n.original.line=a.source.end.line,n.original.column=a.source.end.column-1,n.generated.line=s,n.generated.column=i-2,this.map.addMapping(n)):(n.source=r,n.original.line=1,n.original.column=0,n.generated.line=s,n.generated.column=i-1,this.map.addMapping(n)))}}))}generate(){if(this.clearAnnotation(),u&&h&&this.isMap())return this.generateMap();{let e="";return this.stringify(this.root,(t=>{e+=t})),[e]}}}},647:(e,t,s)=>{"use strict";let i=s(505),o=s(88),r=(s(448),s(964));const n=s(632);class a{constructor(e,t,s){let r;t=t.toString(),this.stringified=!1,this._processor=e,this._css=t,this._opts=s,this._map=void 0;let a=o;this.result=new n(this._processor,r,this._opts),this.result.css=t;let l=this;Object.defineProperty(this.result,"root",{get:()=>l.root});let c=new i(a,r,this._opts,t);if(c.isMap()){let[e,t]=c.generate();e&&(this.result.css=e),t&&(this.result.map=t)}}get[Symbol.toStringTag](){return"NoWorkResult"}get processor(){return this.result.processor}get opts(){return this.result.opts}get css(){return this.result.css}get content(){return this.result.css}get map(){return this.result.map}get root(){if(this._root)return this._root;let e,t=r;try{e=t(this._css,this._opts)}catch(e){this.error=e}if(this.error)throw this.error;return this._root=e,e}get messages(){return[]}warnings(){return[]}toString(){return this._css}then(e,t){return this.async().then(e,t)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}sync(){if(this.error)throw this.error;return this.result}}e.exports=a,a.default=a},631:(e,t,s)=>{"use strict";let{isClean:i,my:o}=s(513),r=s(671),n=s(62),a=s(88);function l(e,t){let s=new e.constructor;for(let i in e){if(!Object.prototype.hasOwnProperty.call(e,i))continue;if("proxyCache"===i)continue;let o=e[i],r=typeof o;"parent"===i&&"object"===r?t&&(s[i]=t):"source"===i?s[i]=o:Array.isArray(o)?s[i]=o.map((e=>l(e,s))):("object"===r&&null!==o&&(o=l(o)),s[i]=o)}return s}class c{constructor(e={}){this.raws={},this[i]=!1,this[o]=!0;for(let t in e)if("nodes"===t){this.nodes=[];for(let s of e[t])"function"==typeof s.clone?this.append(s.clone()):this.append(s)}else this[t]=e[t]}error(e,t={}){if(this.source){let{start:s,end:i}=this.rangeBy(t);return this.source.input.error(e,{line:s.line,column:s.column},{line:i.line,column:i.column},t)}return new r(e)}warn(e,t,s){let i={node:this};for(let e in s)i[e]=s[e];return e.warn(t,i)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}toString(e=a){e.stringify&&(e=e.stringify);let t="";return e(this,(e=>{t+=e})),t}assign(e={}){for(let t in e)this[t]=e[t];return this}clone(e={}){let t=l(this);for(let s in e)t[s]=e[s];return t}cloneBefore(e={}){let t=this.clone(e);return this.parent.insertBefore(this,t),t}cloneAfter(e={}){let t=this.clone(e);return this.parent.insertAfter(this,t),t}replaceWith(...e){if(this.parent){let t=this,s=!1;for(let i of e)i===this?s=!0:s?(this.parent.insertAfter(t,i),t=i):this.parent.insertBefore(t,i);s||this.remove()}return this}next(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e+1]}prev(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e-1]}before(e){return this.parent.insertBefore(this,e),this}after(e){return this.parent.insertAfter(this,e),this}root(){let e=this;for(;e.parent&&"document"!==e.parent.type;)e=e.parent;return e}raw(e,t){return(new n).raw(this,e,t)}cleanRaws(e){delete this.raws.before,delete this.raws.after,e||delete this.raws.between}toJSON(e,t){let s={},i=null==t;t=t||new Map;let o=0;for(let e in this){if(!Object.prototype.hasOwnProperty.call(this,e))continue;if("parent"===e||"proxyCache"===e)continue;let i=this[e];if(Array.isArray(i))s[e]=i.map((e=>"object"==typeof e&&e.toJSON?e.toJSON(null,t):e));else if("object"==typeof i&&i.toJSON)s[e]=i.toJSON(null,t);else if("source"===e){let r=t.get(i.input);null==r&&(r=o,t.set(i.input,o),o++),s[e]={inputId:r,start:i.start,end:i.end}}else s[e]=i}return i&&(s.inputs=[...t.keys()].map((e=>e.toJSON()))),s}positionInside(e){let t=this.toString(),s=this.source.start.column,i=this.source.start.line;for(let o=0;o<e;o++)"\n"===t[o]?(s=1,i+=1):s+=1;return{line:i,column:s}}positionBy(e){let t=this.source.start;if(e.index)t=this.positionInside(e.index);else if(e.word){let s=this.toString().indexOf(e.word);-1!==s&&(t=this.positionInside(s))}return t}rangeBy(e){let t={line:this.source.start.line,column:this.source.start.column},s=this.source.end?{line:this.source.end.line,column:this.source.end.column+1}:{line:t.line,column:t.column+1};if(e.word){let i=this.toString().indexOf(e.word);-1!==i&&(t=this.positionInside(i),s=this.positionInside(i+e.word.length))}else e.start?t={line:e.start.line,column:e.start.column}:e.index&&(t=this.positionInside(e.index)),e.end?s={line:e.end.line,column:e.end.column}:e.endIndex?s=this.positionInside(e.endIndex):e.index&&(s=this.positionInside(e.index+1));return(s.line<t.line||s.line===t.line&&s.column<=t.column)&&(s={line:t.line,column:t.column+1}),{start:t,end:s}}getProxyProcessor(){return{set:(e,t,s)=>(e[t]===s||(e[t]=s,"prop"!==t&&"value"!==t&&"name"!==t&&"params"!==t&&"important"!==t&&"text"!==t||e.markDirty()),!0),get:(e,t)=>"proxyOf"===t?e:"root"===t?()=>e.root().toProxy():e[t]}}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}addToError(e){if(e.postcssNode=this,e.stack&&this.source&&/\n\s{4}at /.test(e.stack)){let t=this.source;e.stack=e.stack.replace(/\n\s{4}at /,`$&${t.input.from}:${t.start.line}:${t.start.column}$&`)}return e}markDirty(){if(this[i]){this[i]=!1;let e=this;for(;e=e.parent;)e[i]=!1}}get proxyOf(){return this}}e.exports=c,c.default=c},964:(e,t,s)=>{"use strict";let i=s(19),o=s(867),r=s(995);function n(e,t){let s=new r(e,t),i=new o(s);try{i.parse()}catch(e){throw e}return i.root}e.exports=n,n.default=n,i.registerParse(n)},867:(e,t,s)=>{"use strict";let i=s(258),o=s(852),r=s(932),n=s(353),a=s(25),l=s(675);const c={empty:!0,space:!0};e.exports=class{constructor(e){this.input=e,this.root=new a,this.current=this.root,this.spaces="",this.semicolon=!1,this.customProperty=!1,this.createTokenizer(),this.root.source={input:e,start:{offset:0,line:1,column:1}}}createTokenizer(){this.tokenizer=o(this.input)}parse(){let e;for(;!this.tokenizer.endOfFile();)switch(e=this.tokenizer.nextToken(),e[0]){case"space":this.spaces+=e[1];break;case";":this.freeSemicolon(e);break;case"}":this.end(e);break;case"comment":this.comment(e);break;case"at-word":this.atrule(e);break;case"{":this.emptyRule(e);break;default:this.other(e)}this.endFile()}comment(e){let t=new r;this.init(t,e[2]),t.source.end=this.getPosition(e[3]||e[2]);let s=e[1].slice(2,-2);if(/^\s*$/.test(s))t.text="",t.raws.left=s,t.raws.right="";else{let e=s.match(/^(\s*)([^]*\S)(\s*)$/);t.text=e[2],t.raws.left=e[1],t.raws.right=e[3]}}emptyRule(e){let t=new l;this.init(t,e[2]),t.selector="",t.raws.between="",this.current=t}other(e){let t=!1,s=null,i=!1,o=null,r=[],n=e[1].startsWith("--"),a=[],l=e;for(;l;){if(s=l[0],a.push(l),"("===s||"["===s)o||(o=l),r.push("("===s?")":"]");else if(n&&i&&"{"===s)o||(o=l),r.push("}");else if(0===r.length){if(";"===s){if(i)return void this.decl(a,n);break}if("{"===s)return void this.rule(a);if("}"===s){this.tokenizer.back(a.pop()),t=!0;break}":"===s&&(i=!0)}else s===r[r.length-1]&&(r.pop(),0===r.length&&(o=null));l=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(t=!0),r.length>0&&this.unclosedBracket(o),t&&i){if(!n)for(;a.length&&(l=a[a.length-1][0],"space"===l||"comment"===l);)this.tokenizer.back(a.pop());this.decl(a,n)}else this.unknownWord(a)}rule(e){e.pop();let t=new l;this.init(t,e[0][2]),t.raws.between=this.spacesAndCommentsFromEnd(e),this.raw(t,"selector",e),this.current=t}decl(e,t){let s=new i;this.init(s,e[0][2]);let o,r=e[e.length-1];for(";"===r[0]&&(this.semicolon=!0,e.pop()),s.source.end=this.getPosition(r[3]||r[2]||function(e){for(let t=e.length-1;t>=0;t--){let s=e[t],i=s[3]||s[2];if(i)return i}}(e));"word"!==e[0][0];)1===e.length&&this.unknownWord(e),s.raws.before+=e.shift()[1];for(s.source.start=this.getPosition(e[0][2]),s.prop="";e.length;){let t=e[0][0];if(":"===t||"space"===t||"comment"===t)break;s.prop+=e.shift()[1]}for(s.raws.between="";e.length;){if(o=e.shift(),":"===o[0]){s.raws.between+=o[1];break}"word"===o[0]&&/\w/.test(o[1])&&this.unknownWord([o]),s.raws.between+=o[1]}"_"!==s.prop[0]&&"*"!==s.prop[0]||(s.raws.before+=s.prop[0],s.prop=s.prop.slice(1));let n,a=[];for(;e.length&&(n=e[0][0],"space"===n||"comment"===n);)a.push(e.shift());this.precheckMissedSemicolon(e);for(let t=e.length-1;t>=0;t--){if(o=e[t],"!important"===o[1].toLowerCase()){s.important=!0;let i=this.stringFrom(e,t);i=this.spacesFromEnd(e)+i," !important"!==i&&(s.raws.important=i);break}if("important"===o[1].toLowerCase()){let i=e.slice(0),o="";for(let e=t;e>0;e--){let t=i[e][0];if(0===o.trim().indexOf("!")&&"space"!==t)break;o=i.pop()[1]+o}0===o.trim().indexOf("!")&&(s.important=!0,s.raws.important=o,e=i)}if("space"!==o[0]&&"comment"!==o[0])break}e.some((e=>"space"!==e[0]&&"comment"!==e[0]))&&(s.raws.between+=a.map((e=>e[1])).join(""),a=[]),this.raw(s,"value",a.concat(e),t),s.value.includes(":")&&!t&&this.checkMissedSemicolon(e)}atrule(e){let t,s,i,o=new n;o.name=e[1].slice(1),""===o.name&&this.unnamedAtrule(o,e),this.init(o,e[2]);let r=!1,a=!1,l=[],c=[];for(;!this.tokenizer.endOfFile();){if(t=(e=this.tokenizer.nextToken())[0],"("===t||"["===t?c.push("("===t?")":"]"):"{"===t&&c.length>0?c.push("}"):t===c[c.length-1]&&c.pop(),0===c.length){if(";"===t){o.source.end=this.getPosition(e[2]),this.semicolon=!0;break}if("{"===t){a=!0;break}if("}"===t){if(l.length>0){for(i=l.length-1,s=l[i];s&&"space"===s[0];)s=l[--i];s&&(o.source.end=this.getPosition(s[3]||s[2]))}this.end(e);break}l.push(e)}else l.push(e);if(this.tokenizer.endOfFile()){r=!0;break}}o.raws.between=this.spacesAndCommentsFromEnd(l),l.length?(o.raws.afterName=this.spacesAndCommentsFromStart(l),this.raw(o,"params",l),r&&(e=l[l.length-1],o.source.end=this.getPosition(e[3]||e[2]),this.spaces=o.raws.between,o.raws.between="")):(o.raws.afterName="",o.params=""),a&&(o.nodes=[],this.current=o)}end(e){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(e[2]),this.current=this.current.parent):this.unexpectedClose(e)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces}freeSemicolon(e){if(this.spaces+=e[1],this.current.nodes){let e=this.current.nodes[this.current.nodes.length-1];e&&"rule"===e.type&&!e.raws.ownSemicolon&&(e.raws.ownSemicolon=this.spaces,this.spaces="")}}getPosition(e){let t=this.input.fromOffset(e);return{offset:e,line:t.line,column:t.col}}init(e,t){this.current.push(e),e.source={start:this.getPosition(t),input:this.input},e.raws.before=this.spaces,this.spaces="","comment"!==e.type&&(this.semicolon=!1)}raw(e,t,s,i){let o,r,n,a,l=s.length,d="",h=!0;for(let e=0;e<l;e+=1)o=s[e],r=o[0],"space"!==r||e!==l-1||i?"comment"===r?(a=s[e-1]?s[e-1][0]:"empty",n=s[e+1]?s[e+1][0]:"empty",c[a]||c[n]||","===d.slice(-1)?h=!1:d+=o[1]):d+=o[1]:h=!1;if(!h){let i=s.reduce(((e,t)=>e+t[1]),"");e.raws[t]={value:d,raw:i}}e[t]=d}spacesAndCommentsFromEnd(e){let t,s="";for(;e.length&&(t=e[e.length-1][0],"space"===t||"comment"===t);)s=e.pop()[1]+s;return s}spacesAndCommentsFromStart(e){let t,s="";for(;e.length&&(t=e[0][0],"space"===t||"comment"===t);)s+=e.shift()[1];return s}spacesFromEnd(e){let t,s="";for(;e.length&&(t=e[e.length-1][0],"space"===t);)s=e.pop()[1]+s;return s}stringFrom(e,t){let s="";for(let i=t;i<e.length;i++)s+=e[i][1];return e.splice(t,e.length-t),s}colon(e){let t,s,i,o=0;for(let[r,n]of e.entries()){if(t=n,s=t[0],"("===s&&(o+=1),")"===s&&(o-=1),0===o&&":"===s){if(i){if("word"===i[0]&&"progid"===i[1])continue;return r}this.doubleColon(t)}i=t}return!1}unclosedBracket(e){throw this.input.error("Unclosed bracket",{offset:e[2]},{offset:e[2]+1})}unknownWord(e){throw this.input.error("Unknown word",{offset:e[0][2]},{offset:e[0][2]+e[0][1].length})}unexpectedClose(e){throw this.input.error("Unexpected }",{offset:e[2]},{offset:e[2]+1})}unclosedBlock(){let e=this.current.source.start;throw this.input.error("Unclosed block",e.line,e.column)}doubleColon(e){throw this.input.error("Double colon",{offset:e[2]},{offset:e[2]+e[1].length})}unnamedAtrule(e,t){throw this.input.error("At-rule without name",{offset:t[2]},{offset:t[2]+t[1].length})}precheckMissedSemicolon(){}checkMissedSemicolon(e){let t=this.colon(e);if(!1===t)return;let s,i=0;for(let o=t-1;o>=0&&(s=e[o],"space"===s[0]||(i+=1,2!==i));o--);throw this.input.error("Missed semicolon","word"===s[0]?s[3]+1:s[2])}}},20:(e,t,s)=>{"use strict";let i=s(671),o=s(258),r=s(939),n=s(19),a=s(723),l=s(88),c=s(250),d=s(461),h=s(728),u=s(932),p=s(353),m=s(632),g=s(995),f=s(964),y=s(715),b=s(675),w=s(25),v=s(631);function _(...e){return 1===e.length&&Array.isArray(e[0])&&(e=e[0]),new a(e)}_.plugin=function(e,t){let s,i=!1;function o(...s){console&&console.warn&&!i&&(i=!0,console.warn(e+": postcss.plugin was deprecated. Migration guide:\nhttps://evilmartians.com/chronicles/postcss-8-plugin-migration"),process.env.LANG&&process.env.LANG.startsWith("cn")&&console.warn(e+": 里面 postcss.plugin 被弃用. 迁移指南:\nhttps://www.w3ctech.com/topic/2226"));let o=t(...s);return o.postcssPlugin=e,o.postcssVersion=(new a).version,o}return Object.defineProperty(o,"postcss",{get:()=>(s||(s=o()),s)}),o.process=function(e,t,s){return _([o(s)]).process(e,t)},o},_.stringify=l,_.parse=f,_.fromJSON=c,_.list=y,_.comment=e=>new u(e),_.atRule=e=>new p(e),_.decl=e=>new o(e),_.rule=e=>new b(e),_.root=e=>new w(e),_.document=e=>new d(e),_.CssSyntaxError=i,_.Declaration=o,_.Container=n,_.Processor=a,_.Document=d,_.Comment=u,_.Warning=h,_.AtRule=p,_.Result=m,_.Input=g,_.Rule=b,_.Root=w,_.Node=v,r.registerPostcss(_),e.exports=_,_.default=_},981:(e,t,s)=>{"use strict";let{SourceMapConsumer:i,SourceMapGenerator:o}=s(209),{existsSync:r,readFileSync:n}=s(777),{dirname:a,join:l}=s(830);class c{constructor(e,t){if(!1===t.map)return;this.loadAnnotation(e),this.inline=this.startWith(this.annotation,"data:");let s=t.map?t.map.prev:void 0,i=this.loadMap(t.from,s);!this.mapFile&&t.from&&(this.mapFile=t.from),this.mapFile&&(this.root=a(this.mapFile)),i&&(this.text=i)}consumer(){return this.consumerCache||(this.consumerCache=new i(this.text)),this.consumerCache}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}startWith(e,t){return!!e&&e.substr(0,t.length)===t}getAnnotationURL(e){return e.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}loadAnnotation(e){let t=e.match(/\/\*\s*# sourceMappingURL=/gm);if(!t)return;let s=e.lastIndexOf(t.pop()),i=e.indexOf("*/",s);s>-1&&i>-1&&(this.annotation=this.getAnnotationURL(e.substring(s,i)))}decodeInline(e){if(/^data:application\/json;charset=utf-?8,/.test(e)||/^data:application\/json,/.test(e))return decodeURIComponent(e.substr(RegExp.lastMatch.length));if(/^data:application\/json;charset=utf-?8;base64,/.test(e)||/^data:application\/json;base64,/.test(e))return t=e.substr(RegExp.lastMatch.length),Buffer?Buffer.from(t,"base64").toString():window.atob(t);var t;let s=e.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+s)}loadFile(e){if(this.root=a(e),r(e))return this.mapFile=e,n(e,"utf-8").toString().trim()}loadMap(e,t){if(!1===t)return!1;if(t){if("string"==typeof t)return t;if("function"!=typeof t){if(t instanceof i)return o.fromSourceMap(t).toString();if(t instanceof o)return t.toString();if(this.isMap(t))return JSON.stringify(t);throw new Error("Unsupported previous source map format: "+t.toString())}{let s=t(e);if(s){let e=this.loadFile(s);if(!e)throw new Error("Unable to load previous source map: "+s.toString());return e}}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){let t=this.annotation;return e&&(t=l(a(e),t)),this.loadFile(t)}}}isMap(e){return"object"==typeof e&&("string"==typeof e.mappings||"string"==typeof e._mappings||Array.isArray(e.sections))}}e.exports=c,c.default=c},723:(e,t,s)=>{"use strict";let i=s(647),o=s(939),r=s(461),n=s(25);class a{constructor(e=[]){this.version="8.4.14",this.plugins=this.normalize(e)}use(e){return this.plugins=this.plugins.concat(this.normalize([e])),this}process(e,t={}){return 0===this.plugins.length&&void 0===t.parser&&void 0===t.stringifier&&void 0===t.syntax?new i(this,e,t):new o(this,e,t)}normalize(e){let t=[];for(let s of e)if(!0===s.postcss?s=s():s.postcss&&(s=s.postcss),"object"==typeof s&&Array.isArray(s.plugins))t=t.concat(s.plugins);else if("object"==typeof s&&s.postcssPlugin)t.push(s);else if("function"==typeof s)t.push(s);else if("object"!=typeof s||!s.parse&&!s.stringify)throw new Error(s+" is not a PostCSS plugin");return t}}e.exports=a,a.default=a,n.registerProcessor(a),r.registerProcessor(a)},632:(e,t,s)=>{"use strict";let i=s(728);class o{constructor(e,t,s){this.processor=e,this.messages=[],this.root=t,this.opts=s,this.css=void 0,this.map=void 0}toString(){return this.css}warn(e,t={}){t.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(t.plugin=this.lastPlugin.postcssPlugin);let s=new i(e,t);return this.messages.push(s),s}warnings(){return this.messages.filter((e=>"warning"===e.type))}get content(){return this.css}}e.exports=o,o.default=o},25:(e,t,s)=>{"use strict";let i,o,r=s(19);class n extends r{constructor(e){super(e),this.type="root",this.nodes||(this.nodes=[])}removeChild(e,t){let s=this.index(e);return!t&&0===s&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[s].raws.before),super.removeChild(e)}normalize(e,t,s){let i=super.normalize(e);if(t)if("prepend"===s)this.nodes.length>1?t.raws.before=this.nodes[1].raws.before:delete t.raws.before;else if(this.first!==t)for(let e of i)e.raws.before=t.raws.before;return i}toResult(e={}){return new i(new o,this,e).stringify()}}n.registerLazyResult=e=>{i=e},n.registerProcessor=e=>{o=e},e.exports=n,n.default=n},675:(e,t,s)=>{"use strict";let i=s(19),o=s(715);class r extends i{constructor(e){super(e),this.type="rule",this.nodes||(this.nodes=[])}get selectors(){return o.comma(this.selector)}set selectors(e){let t=this.selector?this.selector.match(/,\s*/):null,s=t?t[0]:","+this.raw("between","beforeOpen");this.selector=e.join(s)}}e.exports=r,r.default=r,i.registerRule(r)},62:e=>{"use strict";const t={colon:": ",indent:"    ",beforeDecl:"\n",beforeRule:"\n",beforeOpen:" ",beforeClose:"\n",beforeComment:"\n",after:"\n",emptyBody:"",commentLeft:" ",commentRight:" ",semicolon:!1};class s{constructor(e){this.builder=e}stringify(e,t){if(!this[e.type])throw new Error("Unknown AST node type "+e.type+". Maybe you need to change PostCSS stringifier.");this[e.type](e,t)}document(e){this.body(e)}root(e){this.body(e),e.raws.after&&this.builder(e.raws.after)}comment(e){let t=this.raw(e,"left","commentLeft"),s=this.raw(e,"right","commentRight");this.builder("/*"+t+e.text+s+"*/",e)}decl(e,t){let s=this.raw(e,"between","colon"),i=e.prop+s+this.rawValue(e,"value");e.important&&(i+=e.raws.important||" !important"),t&&(i+=";"),this.builder(i,e)}rule(e){this.block(e,this.rawValue(e,"selector")),e.raws.ownSemicolon&&this.builder(e.raws.ownSemicolon,e,"end")}atrule(e,t){let s="@"+e.name,i=e.params?this.rawValue(e,"params"):"";if(void 0!==e.raws.afterName?s+=e.raws.afterName:i&&(s+=" "),e.nodes)this.block(e,s+i);else{let o=(e.raws.between||"")+(t?";":"");this.builder(s+i+o,e)}}body(e){let t=e.nodes.length-1;for(;t>0&&"comment"===e.nodes[t].type;)t-=1;let s=this.raw(e,"semicolon");for(let i=0;i<e.nodes.length;i++){let o=e.nodes[i],r=this.raw(o,"before");r&&this.builder(r),this.stringify(o,t!==i||s)}}block(e,t){let s,i=this.raw(e,"between","beforeOpen");this.builder(t+i+"{",e,"start"),e.nodes&&e.nodes.length?(this.body(e),s=this.raw(e,"after")):s=this.raw(e,"after","emptyBody"),s&&this.builder(s),this.builder("}",e,"end")}raw(e,s,i){let o;if(i||(i=s),s&&(o=e.raws[s],void 0!==o))return o;let r=e.parent;if("before"===i){if(!r||"root"===r.type&&r.first===e)return"";if(r&&"document"===r.type)return""}if(!r)return t[i];let n=e.root();if(n.rawCache||(n.rawCache={}),void 0!==n.rawCache[i])return n.rawCache[i];if("before"===i||"after"===i)return this.beforeAfter(e,i);{let t="raw"+((a=i)[0].toUpperCase()+a.slice(1));this[t]?o=this[t](n,e):n.walk((e=>{if(o=e.raws[s],void 0!==o)return!1}))}var a;return void 0===o&&(o=t[i]),n.rawCache[i]=o,o}rawSemicolon(e){let t;return e.walk((e=>{if(e.nodes&&e.nodes.length&&"decl"===e.last.type&&(t=e.raws.semicolon,void 0!==t))return!1})),t}rawEmptyBody(e){let t;return e.walk((e=>{if(e.nodes&&0===e.nodes.length&&(t=e.raws.after,void 0!==t))return!1})),t}rawIndent(e){if(e.raws.indent)return e.raws.indent;let t;return e.walk((s=>{let i=s.parent;if(i&&i!==e&&i.parent&&i.parent===e&&void 0!==s.raws.before){let e=s.raws.before.split("\n");return t=e[e.length-1],t=t.replace(/\S/g,""),!1}})),t}rawBeforeComment(e,t){let s;return e.walkComments((e=>{if(void 0!==e.raws.before)return s=e.raws.before,s.includes("\n")&&(s=s.replace(/[^\n]+$/,"")),!1})),void 0===s?s=this.raw(t,null,"beforeDecl"):s&&(s=s.replace(/\S/g,"")),s}rawBeforeDecl(e,t){let s;return e.walkDecls((e=>{if(void 0!==e.raws.before)return s=e.raws.before,s.includes("\n")&&(s=s.replace(/[^\n]+$/,"")),!1})),void 0===s?s=this.raw(t,null,"beforeRule"):s&&(s=s.replace(/\S/g,"")),s}rawBeforeRule(e){let t;return e.walk((s=>{if(s.nodes&&(s.parent!==e||e.first!==s)&&void 0!==s.raws.before)return t=s.raws.before,t.includes("\n")&&(t=t.replace(/[^\n]+$/,"")),!1})),t&&(t=t.replace(/\S/g,"")),t}rawBeforeClose(e){let t;return e.walk((e=>{if(e.nodes&&e.nodes.length>0&&void 0!==e.raws.after)return t=e.raws.after,t.includes("\n")&&(t=t.replace(/[^\n]+$/,"")),!1})),t&&(t=t.replace(/\S/g,"")),t}rawBeforeOpen(e){let t;return e.walk((e=>{if("decl"!==e.type&&(t=e.raws.between,void 0!==t))return!1})),t}rawColon(e){let t;return e.walkDecls((e=>{if(void 0!==e.raws.between)return t=e.raws.between.replace(/[^\s:]/g,""),!1})),t}beforeAfter(e,t){let s;s="decl"===e.type?this.raw(e,null,"beforeDecl"):"comment"===e.type?this.raw(e,null,"beforeComment"):"before"===t?this.raw(e,null,"beforeRule"):this.raw(e,null,"beforeClose");let i=e.parent,o=0;for(;i&&"root"!==i.type;)o+=1,i=i.parent;if(s.includes("\n")){let t=this.raw(e,null,"indent");if(t.length)for(let e=0;e<o;e++)s+=t}return s}rawValue(e,t){let s=e[t],i=e.raws[t];return i&&i.value===s?i.raw:s}}e.exports=s,s.default=s},88:(e,t,s)=>{"use strict";let i=s(62);function o(e,t){new i(t).stringify(e)}e.exports=o,o.default=o},513:e=>{"use strict";e.exports.isClean=Symbol("isClean"),e.exports.my=Symbol("my")},852:e=>{"use strict";const t="'".charCodeAt(0),s='"'.charCodeAt(0),i="\\".charCodeAt(0),o="/".charCodeAt(0),r="\n".charCodeAt(0),n=" ".charCodeAt(0),a="\f".charCodeAt(0),l="\t".charCodeAt(0),c="\r".charCodeAt(0),d="[".charCodeAt(0),h="]".charCodeAt(0),u="(".charCodeAt(0),p=")".charCodeAt(0),m="{".charCodeAt(0),g="}".charCodeAt(0),f=";".charCodeAt(0),y="*".charCodeAt(0),b=":".charCodeAt(0),w="@".charCodeAt(0),v=/[\t\n\f\r "#'()/;[\\\]{}]/g,_=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,x=/.[\n"'(/\\]/,j=/[\da-f]/i;e.exports=function(e,C={}){let E,S,k,O,T,A,N,I,M,L,D=e.css.valueOf(),$=C.ignoreErrors,R=D.length,P=0,B=[],F=[];function V(t){throw e.error("Unclosed "+t,P)}return{back:function(e){F.push(e)},nextToken:function(e){if(F.length)return F.pop();if(P>=R)return;let C=!!e&&e.ignoreUnclosed;switch(E=D.charCodeAt(P),E){case r:case n:case l:case c:case a:S=P;do{S+=1,E=D.charCodeAt(S)}while(E===n||E===r||E===l||E===c||E===a);L=["space",D.slice(P,S)],P=S-1;break;case d:case h:case m:case g:case b:case f:case p:{let e=String.fromCharCode(E);L=[e,e,P];break}case u:if(I=B.length?B.pop()[1]:"",M=D.charCodeAt(P+1),"url"===I&&M!==t&&M!==s&&M!==n&&M!==r&&M!==l&&M!==a&&M!==c){S=P;do{if(A=!1,S=D.indexOf(")",S+1),-1===S){if($||C){S=P;break}V("bracket")}for(N=S;D.charCodeAt(N-1)===i;)N-=1,A=!A}while(A);L=["brackets",D.slice(P,S+1),P,S],P=S}else S=D.indexOf(")",P+1),O=D.slice(P,S+1),-1===S||x.test(O)?L=["(","(",P]:(L=["brackets",O,P,S],P=S);break;case t:case s:k=E===t?"'":'"',S=P;do{if(A=!1,S=D.indexOf(k,S+1),-1===S){if($||C){S=P+1;break}V("string")}for(N=S;D.charCodeAt(N-1)===i;)N-=1,A=!A}while(A);L=["string",D.slice(P,S+1),P,S],P=S;break;case w:v.lastIndex=P+1,v.test(D),S=0===v.lastIndex?D.length-1:v.lastIndex-2,L=["at-word",D.slice(P,S+1),P,S],P=S;break;case i:for(S=P,T=!0;D.charCodeAt(S+1)===i;)S+=1,T=!T;if(E=D.charCodeAt(S+1),T&&E!==o&&E!==n&&E!==r&&E!==l&&E!==c&&E!==a&&(S+=1,j.test(D.charAt(S)))){for(;j.test(D.charAt(S+1));)S+=1;D.charCodeAt(S+1)===n&&(S+=1)}L=["word",D.slice(P,S+1),P,S],P=S;break;default:E===o&&D.charCodeAt(P+1)===y?(S=D.indexOf("*/",P+2)+1,0===S&&($||C?S=D.length:V("comment")),L=["comment",D.slice(P,S+1),P,S],P=S):(_.lastIndex=P+1,_.test(D),S=0===_.lastIndex?D.length-1:_.lastIndex-2,L=["word",D.slice(P,S+1),P,S],B.push(L),P=S)}return P++,L},endOfFile:function(){return 0===F.length&&P>=R},position:function(){return P}}}},448:e=>{"use strict";let t={};e.exports=function(e){t[e]||(t[e]=!0,"undefined"!=typeof console&&console.warn&&console.warn(e))}},728:e=>{"use strict";class t{constructor(e,t={}){if(this.type="warning",this.text=e,t.node&&t.node.source){let e=t.node.rangeBy(t);this.line=e.start.line,this.column=e.start.column,this.endLine=e.end.line,this.endColumn=e.end.column}for(let e in t)this[e]=t[e]}toString(){return this.node?this.node.error(this.text,{plugin:this.plugin,index:this.index,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}}e.exports=t,t.default=t},868:()=>{},777:()=>{},830:()=>{},209:()=>{},414:()=>{},961:e=>{e.exports={nanoid:(e=21)=>{let t="",s=e;for(;s--;)t+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return t},customAlphabet:(e,t=21)=>(s=t)=>{let i="",o=s;for(;o--;)i+=e[Math.random()*e.length|0];return i}}}},t={};function s(i){var o=t[i];if(void 0!==o)return o.exports;var r=t[i]={exports:{}};return e[i](r,r.exports,s),r.exports}s.d=(e,t)=>{for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};return(()=>{"use strict";s.r(i),s.d(i,{default:()=>l});var e=s(20);const t=e;e.stringify,e.fromJSON,e.plugin,e.parse,e.list,e.document,e.comment,e.atRule,e.rule,e.decl,e.root,e.CssSyntaxError,e.Declaration,e.Container,e.Processor,e.Document,e.Comment,e.Warning,e.AtRule,e.Result,e.Input,e.Rule,e.Root,e.Node;var o=function(){return o=Object.assign||function(e){for(var t,s=1,i=arguments.length;s<i;s++)for(var o in t=arguments[s])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},o.apply(this,arguments)},r=function(e,t){return e&&e.log(t,{ns:"parser-poscss"})},n=function(e){var t=e.nodes||[],s={};return t.forEach((function(e){var t=e.prop,i=e.value,o=e.important;s[t]=i+(o?" !important":"")})),{selectors:e.selector||"",style:s}};const a=function(e,s){var i=[];r(s,["Input CSS",e]);var a=t().process(e).sync().root;return r(s,["PostCSS AST",a]),a.nodes.forEach((function(e){switch(e.type){case"rule":i.push(n(e));break;case"atrule":!function(e,t){var s=e.name,i=e.params;["media","keyframes"].indexOf(s)>=0?e.nodes.forEach((function(e){t.push(o(o({},n(e)),{atRule:s,params:i}))})):t.push(o(o({},n(e)),{atRule:s}))}(e,i)}})),r(s,["Output",i]),i},l=function(e){e.setCustomParserCss(a)}})(),i})(),e.exports=t()},"./bundles/orocms/js/app/components/content-variant-collection-component.js":(e,t,s)=>{var i;void 0===(i=function(e){"use strict";const t=s("./bundles/oroui/js/extend/underscore.js"),i=s("./bundles/oroui/js/extend/jquery.js"),o=s("./bundles/oroui/js/mediator.js");return s("./bundles/oroui/js/app/components/base/component.js").extend({options:{buttonSelector:'[data-role="variant-button"]',variantRemoveSelector:'[data-action="remove"]',collectionContainerSelector:'[data-role="collection-container"]',firstCollectionItemSelector:'[data-role="content-variant-item"]:first .collapse',autoShowFirstItem:!1},constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.options=t.defaults(e||{},this.options),this.$el=this.options._sourceElement,this.$el.on("click",this.options.buttonSelector,this.onAdd.bind(this)),this.$el.on("click",this.options.variantRemoveSelector,this.onRemove.bind(this)),this.prototypeName=this.$el.data("prototype-name")||"__name__",this.$collectionContainer=this.$el.find(this.options.collectionContainerSelector),this.showFirstItem(!0)},onAdd:function(e){if(e.preventDefault(),i(e.currentTarget).attr("disabled"))return;const t=this.$el.data("prototype");if(t){let e=parseInt(this.$el.data("last-index"));const s=t.replace(new RegExp(this.prototypeName,"g"),e);this.$collectionContainer.prepend(s).trigger("content:changed"),this.$el.data("last-index",++e),this.validateContainer()}o.trigger("cms:content-variant-collection:add",this.$el),this.showFirstItem(!0)},onRemove:function(e){e.preventDefault(),i(e.target).closest("*[data-content]").remove(),o.trigger("cms:content-variant-collection:remove",this.$el),this.showFirstItem()},showFirstItem(e=!1){this.options.autoShowFirstItem&&(!e&&this.$collectionContainer.find(".show").length||this.$collectionContainer.find(this.options.firstCollectionItemSelector).collapse("show"))},validateContainer:function(){const e=this.$el.find('[data-name="collection-validation"]:first'),t=e.closest("form");t.data("validator")&&t.validate().element(e.get(0))}})}.call(t,s,t,e))||(e.exports=i)},"./bundles/orocms/js/app/grapesjs/controls/theme-selector-view.js":(e,t,s)=>{var i;void 0===(i=function(e){"use strict";const t=s("./bundles/oroui/js/extend/jquery.js"),i=s("./bundles/oroui/js/extend/underscore.js"),o=s("./bundles/oroui/js/app/views/base/view.js"),r=s("../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/orocms/templates/grapesjs-dropdown-action.html"),n=o.extend({optionNames:o.prototype.optionNames.concat(["editor","themes"]),autoRender:!0,themes:[],template:r,className:"gjs-select-control",currentTheme:null,events:{"click .dropdown-item":"onClick",'input [name="theme-filter"]':"onInput"},constructor:function e(t){e.__super__.constructor.call(this,t)},initialize(e){this.setCurrentTheme(),n.__super__.initialize.call(this,e)},render(){const e=this.getTemplateData(),t=this.getTemplateFunction()(e);this.$el.html(t),this.$el.inputWidget("seekAndCreate")},getTemplateData(){const e=i.reduce(this.themes,(function(e,t){return e[t.name]=t.label,e}),{});return{currentTheme:this.currentTheme.label,options:e}},filterItems(e){this.$el.find('[data-role="filterable-item"]').each((function(s,i){t(i).toggle(-1!==t(i).text().toLowerCase().indexOf(e.toLowerCase()))}))},setCurrentTheme(e){e&&i.each(this.themes,(function(t){t.active=t.name===e}),this),this.currentTheme=i.find(this.themes,(function(e){return e.active}))},onClick(e){const s=t(e.target).data("key");s!==this.currentTheme&&(this.setCurrentTheme(s),this.editor.trigger("changeTheme",s),this.render())},onInput(e){this.filterItems(e.target.value)}});return n}.call(t,s,t,e))||(e.exports=i)},"./bundles/orocms/js/app/grapesjs/grapesjs-editor-component.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var i=s("./bundles/oroui/js/app/components/base/component.js"),o=s.n(i),r=s("./bundles/oroui/js/app/services/load-modules.js"),n=s.n(r),a=s("./bundles/oroui/js/error.js"),l=s.n(a),c=s("./bundles/orocms/js/app/grapesjs/grapesjs-editor-view.js");const d=o().extend({defaultModules:["orocms/js/app/grapesjs/plugins/component-types","orocms/js/app/grapesjs/plugins/components/grapesjs-components","orocms/js/app/grapesjs/plugins/grapesjs-style-isolation","orocms/js/app/grapesjs/plugins/import","orocms/js/app/grapesjs/plugins/export","orocms/js/app/grapesjs/plugins/code","orocms/js/app/grapesjs/plugins/panel-scrolling-hints","orocms/js/app/grapesjs/plugins/components/sorter-hints","orocms/js/app/grapesjs/plugins/code-mode","orocms/js/app/grapesjs/plugins/settings"],constructor:function e(...t){e.__super__.constructor.apply(this,t)},initialize({_sourceElement:e,jsmodules:t,builderPlugins:s,...i}={}){const o=this.initializeView.bind(this,{...i,builderPlugins:s,el:e});this._deferredInit(),n()(this.prepareModules({jsmodules:t,builderPlugins:s})).then(o)},prepareModules({jsmodules:e=[],builderPlugins:t={}}){const s=Object.values(t).filter((({jsmodule:e})=>e)).map((({jsmodule:e})=>e));return[...this.defaultModules,...e,...s]},initializeView(e){this.disposed?this._resolveDeferredInit():(this.view=new c.default(e),this.view.deferredRender?this.view.deferredRender.done(this._resolveDeferredInit.bind(this)).fail((e=>{l().showError(e||new Error("View rendering failed")),this._rejectDeferredInit()})):this._resolveDeferredInit())}})},"./bundles/orocms/js/app/grapesjs/grapesjs-editor-view.js":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>D});var i=s("./bundles/oroui/js/extend/jquery.js"),o=s.n(i),r=s("./bundles/oroui/js/extend/underscore.js"),n=s.n(r),a=s("./bundles/orotranslation/js/translator.js"),l=s.n(a),c=s("../node_modules/grapesjs/dist/grapes.min.js"),d=s.n(c),h=s("./bundles/oroui/js/tools.js"),u=s.n(h),p=s("./bundles/oroui/js/app/views/base/view.js"),m=s.n(p),g=s("./bundles/orocms/js/app/grapesjs/modules/style-manager-module.js"),f=s("./bundles/orocms/js/app/grapesjs/modules/panels-module.js"),y=s("./bundles/orocms/js/app/grapesjs/modules/devices-module.js"),b=s.n(y),w=s("./bundles/oroui/js/mediator.js"),v=s.n(w),_=s("./bundles/orocms/js/app/grapesjs/modules/state-model.js"),x=s("./bundles/oroui/js/app/views/loading-mask-view.js"),j=s.n(x),C=s("../node_modules/grapesjs-parser-postcss/dist/index.js"),E=s.n(C),S=s("./bundles/orocms/js/app/grapesjs/plugins/oro-rte-editor/index.js"),k=s("./bundles/orocms/js/app/grapesjs/plugins/components/content-isolation.js"),O=s("./bundles/orocms/js/app/grapesjs/plugins/i18n-messages.js"),T=s("./bundles/orocms/js/app/grapesjs/plugins/grapesjs-content-parser.js"),A=s("./bundles/orocms/js/app/grapesjs/plugins/code-validator.js"),N=s("./bundles/oroui/js/app/services/module-config.js");const I="data-lock-paste",M={allowBreakpoints:[],disableDeviceManager:!1,...(0,N.A)(e.id)},L=m().extend({optionNames:m().prototype.optionNames.concat(["autoRender","allow_tags","allowed_iframe_domains","currentTheme","canvasConfig","contextClass","storageManager","stylesInputSelector","storagePrefix","themes","entityClass","disableDeviceManager","disableIsolation","extraStyles"]),autoRender:!0,activeTheme:null,builder:null,allow_tags:null,allowed_iframe_domains:[],contextClass:"body cms-page cms-typography",componentUpdated:!1,entityClass:null,builderOptions:{height:"700px",avoidInlineStyle:!0,avoidFrameOffset:!0,allowScripts:1,pasteStyles:!1,requestParams:{},noticeOnUnload:!1,cssIcons:!1,showDevices:!1,log:u().debug?["warning","error"]:[],selectorManager:{componentFirst:!0},colorPicker:{appendTo:"body",showPalette:!1,chooseText:l()("oro.cms.wysiwyg.color_picker.choose_text"),cancelText:l()("oro.cms.wysiwyg.color_picker.cancel_text"),containerClassName:"prevent-click-outside"},codeManager:{direction:n().isRTL()?"rtl":"ltr"},textViewCode:l()("oro.cms.wysiwyg.export.title"),deviceManager:{devices:[]},Parser:{returnArray:!0},blockManager:{appendOnClick(e,t){const s=t.getSelected(),[i]=s&&!0===s.get("droppable")?s.append(e.get("content")):t.getWrapper().append(e.get("content"));e.get("activate")&&(t.selectAdd(i),i.trigger("active")),t.Canvas.scrollTo(i,{behavior:"smooth"})}}},storagePrefix:"gjs-",storageManager:{autosave:!1,autoload:!1},traitManager:{optionsTarget:[{value:"_self"},{value:"_blank"}]},canvasConfig:{},styleManager:{clearProperties:!0,sectors:[]},assetManagerConfig:{embedAsBase64:1},themes:[],stylesInputSelector:"[data-grapesjs-styles]",propertiesInputSelector:"[data-grapesjs-properties]",$stylesInputElement:null,wrapperSelector:".page-content-editor, .fallback-item-value, .content-variant-item",fallbackContainer:".fallback-container",$parent:null,rte:null,disableDeviceManager:M.disableDeviceManager,allowBreakpoints:M.allowBreakpoints,enabled:!1,inFallbackContainer:!1,disableIsolation:!1,extraStyles:[],builderPlugins:{"component-types-plugin":{},"grapesjs-export":{},"wysiwyg-settings":{},"sorter-hints":{},"grapesjs-components":{},"grapesjs-style-isolation":{},"grapesjs-import":{},"grapesjs-code":{},"grapesjs-panel-scrolling-hints":{},"grapesjs-code-mode":{}},events:{"wysiwyg:enable":"throttleEnableEditor","wysiwyg:disable":"throttleDisableEditor"},listen:{"layout:reposition mediator":"onLayoutReposition"},THROTTLE_TIMEOUT:250,constructor:function e(t){this.throttleEnableEditor=n().throttle(this.enableEditor.bind(this),this.THROTTLE_TIMEOUT),this.throttleDisableEditor=n().throttle(this.disableEditor.bind(this),this.THROTTLE_TIMEOUT),e.__super__.constructor.call(this,t)},initialize(e={}){this.builderOptions={...this.builderOptions,...e.builderOptions},this.setCurrentContentAlias(),this.inFallbackContainer=!!this.$el.closest(this.fallbackContainer).length,this.$parent=this.$el.closest(this.wrapperSelector),this.$stylesInputElement=this.$parent.find(this.stylesInputSelector),this.$propertiesInputElement=this.$parent.find(this.propertiesInputSelector),this.setAlternativeFields(),this.initStateModel(),this.setActiveTheme(this.getCurrentTheme());const t={};this.allow_tags&&(t.allowTags=this.allow_tags),this.allowed_iframe_domains&&(t.allowedIframeDomains=this.allowed_iframe_domains),e.builderPlugins&&(this.builderPlugins={...this.builderPlugins,...e.builderPlugins}),this.extendPluginOptions("component-types-plugin",e),this.extendPluginOptions("grapesjs-components",t),this.extendPluginOptions("grapesjs-import",{entityClass:this.entityClass,fieldName:this.$el.attr("data-grapesjs-field")}),this.extendPluginOptions("grapesjs-export",{entityLabels:e.entityLabels}),this.subview("loadingMask",new(j())({container:this.$el.parent()})),L.__super__.initialize.call(this,e)},extendPluginOptions(e,t={}){this.builderPlugins[e]&&(this.builderPlugins[e]={...this.builderPlugins[e],...t})},render(){if(this.editorRenderPromises=[],this.subview("loadingMask").show(),this._deferredRender(),this.renderStart=!0,this.timeoutId=null,n().isMobile()||n().isTouchDevice())return this.message=v().execute("showFlashMessage","error",l()("oro.cms.wysiwyg.mobile.flash_message"),{container:this.$el.parent(),hideCloseButton:!0}),void this.$el.parent().addClass("editor-unavailable");this.initContainer(),this.initBuilder()},dispose(){this.disposed||(this.disableEditor(),this.timeoutId&&clearTimeout(this.timeoutId),L.__super__.dispose.call(this))},timeoutEditor(e){this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=setTimeout((()=>e()),this.THROTTLE_TIMEOUT)},disableEditor(){if(this.renderStart)return this.timeoutEditor(this.disableEditor.bind(this));if(this.builder&&this.enabled){Object.values(this.builder.em._events).forEach((e=>{e.forEach((e=>{e.callback.cancel&&e.callback.cancel()}))})),this.builder.trigger("destroy"),this.builderUndelegateEvents();for(const e of Object.keys(this.builder.Commands.getActive()))this.builder.Commands.stop(e);this._panelManagerModule&&(this._panelManagerModule.dispose(),delete this._panelManagerModule),this._devicesModule&&(this._devicesModule.dispose(),delete this._devicesModule),this.builder.destroy(),this.disposeElements(),this.stopListening(),this.builder=null,this.enabled=!1}},enableEditor(){if(!this.builder&&!this.enabled)return this.renderStart&&this.inFallbackContainer&&!this.timeoutId?this.timeoutEditor(this.enableEditor.bind(this)):void this.render()},disposeElements(){this.$el.show(),this.$container.remove()},initContainer(){this.$container=o()('<div class="grapesjs" data-skip-input-widgets data-ignore-form-state-change />'),this.$container.appendTo(this.$el.parent())},initStateModel(){let e={};try{e=JSON.parse(this.$propertiesInputElement.val())}catch(e){}this.state=new _.A(e)},getState(){return this.state},isStateChanged(){return JSON.stringify(this.state.toJSON())===this.$propertiesInputElement.val()},initBuilder(){this.builder=d().init({avoidInlineStyle:1,container:this.$container.get(0),...this._prepareBuilderOptions()}),this.builder.parentView=this,this.builder.getState=this.getState.bind(this),this.builder.getBreakpoints=this.getBreakpoints.bind(this),this.builder.StyleManager.getSectors().reset(g.A),this.builderDelegateEvents(),this.rte=this.builder.RichTextEditor,n().isRTL()&&this.rtlFallback(),v().trigger("grapesjs:created",this.builder)},builderDelegateEvents(){const e=this.builder.Canvas,t=this.$el.closest("form");this.listenTo(this.builder,"load",this._onLoadBuilder.bind(this)),this.listenTo(this.builder,"update",this._onUpdatedBuilder.bind(this)),this.listenTo(this.builder,"component:update",this._onComponentUpdatedBuilder.bind(this)),this.listenTo(this.builder,"changeTheme",this._updateTheme.bind(this)),this.listenTo(this.builder,"component:add",this.componentAdd.bind(this)),this.listenTo(this.builder,"component:selected",this.componentSelected.bind(this)),this.listenTo(this.builder,"component:deselected",this.componentDeselected.bind(this)),this.listenTo(this.builder,"component:remove:before",this.componentBeforeRemove.bind(this)),this.listenTo(this.builder,"component:remove",this.componentRemove.bind(this)),this.listenTo(this.builder,"rteToolbarPosUpdate",this.updateRtePosition.bind(this)),this.listenTo(this.state,"change",this.updatePropertyField.bind(this)),o()(this.builder.Canvas.getBody()).on("paste",'[contenteditable="true"]',function(e){e.target.hasAttribute(I)?e.target.removeAttribute(I):this.builderOptions.pasteStyles||(e.preventDefault(),this.onPasteContent(e))}.bind(this)),t.on(`keyup${this.eventNamespace()} keydown${this.eventNamespace()}`,(e=>{if(13===(e.keyCode||e.which)&&this.$container.get(0).contains(e.target))return e.preventDefault(),!1})),o()(document).on(`mousedown${this.eventNamespace()}`,(e=>{[...document.querySelectorAll(".prevent-click-outside, .ui-dialog, .modal")].some((t=>t.contains(e.target)))||this.builder.getContainer().contains(e.target)||(this.builder.getContainer().querySelectorAll(":focus").forEach((e=>e.blur())),this.builder.getSelectedAll().forEach((e=>this.builder.selectRemove(e))))})),e.getCanvasView().$el.on(`scroll${this.eventNamespace()}`,(t=>{this.enabled&&(o()(t.target).find("#gjs-cv-tools").css({top:t.target.scrollTop}),this.builder.trigger("frame:updated",{frame:e.model.get("frame")}))})),this.$el.closest(".scrollable-container").on(`scroll${this.eventNamespace()}`,(()=>{this.enabled&&this.builder.trigger("change:canvasOffset")}))},builderUndelegateEvents(){this.$el.closest("form").off(this.eventNamespace()),this.$el.closest(".scrollable-container").off(this.eventNamespace()),this.$stylesInputElement.off(this.eventNamespace()),v().off("dropdown-button:click");const e=this.builder.Canvas;e&&(e.getCanvasView().$el.off(this.eventNamespace()),o()(e.getBody()).off()),this.stopListening(this.builder),o()(document).off(this.eventNamespace()),this.builder&&this.builder.editor.view.$el.find(".gjs-toolbar").off("mouseover")},onLayoutReposition(){this.builder&&this.builder.trigger("change:canvasOffset")},getCurrentTheme(){return n().find(this.themes,(function(e){return e.active}))},isEnabled(){return!!this.builder},setActiveButton(e,t){this.builder.Commands.run(t),this.builder.Panels.getButton(e,t).set("active",!0)},setCurrentContentAlias(){this.form=this.$el.closest("form");const e=this.form.find('[name="oro_cms_content_block[alias]"]');e.length&&e.val()&&(this.builderOptions.contentBlockAlias=e.val())},setAlternativeFields(){const e=this.$el.attr("data-ftid"),t=e+"_style",s=e+"_properties";this.$stylesInputElement.length||(this.$stylesInputElement=this.form.find(`[data-ftid="${t}"]`)),this.$propertiesInputElement.length||(this.$propertiesInputElement=this.form.find(`[data-ftid="${s}"]`)),this.$stylesInputElement.attr("data-editor-field-name",this.$el.attr("name")),this.$propertiesInputElement.attr("data-editor-field-name",this.$el.attr("name"))},getEditorContent(){return this.disableIsolation?this.builder.getHtml():this.builder.getIsolatedHtml()},getEditorStyles(){return this.disableIsolation?this.builder.getCss():this.builder.getIsolatedCss()},getToolbarItems(){return o()(this.builder.editor.view.$el.find(".gjs-toolbar .gjs-toolbar-item"))},componentBeforeRemove(e){e.trigger("model:remove:before",e)},componentRemove(e){e.trigger("model:remove",e)},componentAdd(e){"textnode"===e.get("type")&&"wrapper"===e.parent()?.get("type")&&e.replaceWith(`<div>${e.get("content")}</div>`)},componentDeselected(e){this.builder.editor.view.$el.find(".gjs-toolbar").off("mouseover"),this.getToolbarItems().each((function(){const e=o()(this).data("bs.tooltip");e&&e.dispose()})),e.trigger("model:deselected",e),this.togglePrivateClasses(e,!1)},componentSelected(e){let t=e.get("toolbar");n().isArray(t)&&(t=t.map((e=>{const t=e.attributes||{};if(e.label="",n().isFunction(e.command)&&!t.label&&!e.id)return t.label=l()("oro.cms.wysiwyg.toolbar.selectParent"),t.class="fa fa-arrow-up",e.attributes=t,e;switch(e.id||e.command){case"tlb-move":t.label=l()("oro.cms.wysiwyg.toolbar.move"),t.class="fa fa-arrows";break;case"tlb-clone":t.label=l()("oro.cms.wysiwyg.toolbar.clone"),t.class="fa fa-clone";break;case"tlb-delete":t.label=l()("oro.cms.wysiwyg.toolbar.delete"),t.class="fa fa-trash"}return e.attributes=t,e})),e.set("toolbar",t),e.trigger("model:selected",e),this.builder.Panels.getButton("views","open-sm").set("active",!0)),this.builder.editor.view.$el.find(".gjs-toolbar").off("mouseover").on("mouseover",".gjs-toolbar-item",(e=>{o()(e.target).tooltip({title:o()(e.target).attr("label")||""}),o()(e.target).tooltip("show")})),this.toggleSelectorManager(e),this.togglePrivateClasses(e,!0)},toggleSelectorManager(e){const{SelectorManager:t}=this.builder,s=t.selectorTags.el,i=document.createElement("div");i.classList.add("gjs-sm-header"),i.innerText=l()("oro.cms.wysiwyg.style_manager.unsupport"),e.get("disableSelectorManager")?(s.style.display="none",t.selectorTags.messageContainer||(s.after(i),t.selectorTags.messageContainer=i)):(s.style.display="",t.selectorTags.messageContainer&&(t.selectorTags.messageContainer.remove(),delete t.selectorTags.messageContainer))},togglePrivateClasses(e,t){const s=this.builder.Selectors.getSelected(),i=e.get("privateClasses")||[];s.forEach((e=>i.includes(e.get("name"))&&e.set("private",t)))},_addClassForFrameWrapper(){o()(this.builder.Canvas.getFrameEl().contentDocument).find("body").addClass(this.contextClass)},onPasteContent(e){if(e.originalEvent.clipboardData){const t=e.originalEvent.clipboardData.getData("text/plain");e.target.ownerDocument.execCommand("insertText",!1,t)}else if(window.clipboardData){const t=window.clipboardData.getData("Text");let s;try{s=JSON.parse(t).content}catch(e){s=t}e.target.setAttribute(I,""),e.target.ownerDocument.execCommand("paste",!1,s)}},_onLoadBuilder(){const{UndoManager:e}=this.builder;this._panelManagerModule=new f.A({builder:this.builder,themes:this.themes}),this.disableDeviceManager||(this._devicesModule=this.builder._devicesModule=new(b())({builder:this.builder,allowBreakpoints:this.allowBreakpoints}),this.editorRenderPromises.push(this._devicesModule.deferredInitPromise)),this.setActiveButton("views","open-blocks"),this._addClassForFrameWrapper(),v().trigger("grapesjs:loaded",this.builder),this.$el.closest(".ui-dialog-content").dialog("option","minWidth",1100),this.$el.valid()&&(e.stop(),this.builder.setComponents((0,k.escapeWrapper)(this.$el.val())),this.builder.setStyle(this.builder.getPureStyleString(this.$stylesInputElement.val())));const t=(0,k.getWrapperAttrs)(this.$el.val());n().isEmpty(t)||t.class&&this.builder.getWrapper().addClass(t.class),this.enabled=!0,Promise.all(this.editorRenderPromises).then((()=>{this.renderStart=!1,this.subview("loadingMask").hide(),this._resolveDeferredRender(),e.start(),this.builder.trigger("editor:rendered")})).catch((e=>console.error(e)))},_onUpdatedBuilder(){v().trigger("grapesjs:updated",this.builder),this._updateInitialField()},_onComponentUpdatedBuilder(e){this.componentUpdated||v().on("dropdown-button:click",this._onComponentUpdatedBuilder,this),this._updateInitialField(),v().trigger("grapesjs:components:updated",e),this.componentUpdated=!0},_updateTheme(e){if(!n().isUndefined(this.activeTheme)&&this.activeTheme.name===e)return this.setActiveTheme(e),!1;this.setActiveTheme(e),this.builder.activeDevice=this.builder.getDevice(),n().each(this.themes,(function(t){t.active=t.name===e}));const t=this.activeTheme,s=this.builder.Canvas.getFrameEl().contentDocument.head,i=s.querySelector("link"),o=i.cloneNode();o.setAttribute("href",this.activeTheme.stylesheet),o.onload=function(){i.remove(),v().trigger("grapesjs:theme:change",t)},s.appendChild(o)},setActiveTheme(e){this.activeTheme=n().find(this.themes,(function(e){return e.active}))},_updateInitialField(){if(!this.builder||this.builder.CodeValidator.isInvalid()||this.renderStart)return;const e=this.getEditorContent(),t=this.getEditorStyles();this.$el.val()!==e&&(this.$el.val(e).trigger("change"),this.$el.hasClass("error")&&this.$el.valid()),this.$stylesInputElement.val()!==t&&(this.$stylesInputElement.val(t).trigger("change"),this.$stylesInputElement.hasClass("error")&&this.$stylesInputElement.valid()),this.updatePropertyField()},updatePropertyField(){this.isStateChanged()||this.renderStart||this.$propertiesInputElement.val(JSON.stringify(this.state.toJSON()))},getCanvasStylesheets(){return this.extraStyles?this.extraStyles.reduce(((e,{name:t,url:s})=>{if("canvas"===t)return e.push(s),e}),[]):[]},_prepareBuilderOptions(){return n().extend(this.builderOptions,this._getPlugins(),this._getStorageManagerConfig(),this._getCanvasConfig(),this._getStyleManagerConfig(),this._getTaitManagerConfig(),this._getAssetConfig()),this.builderOptions},_getStorageManagerConfig(){return{storageManager:n().extend({},this.storageManager,{id:this.storagePrefix})}},_getStyleManagerConfig(){return{styleManager:this.styleManager}},_getTaitManagerConfig(){return{traitManager:this.traitManager}},_getCanvasConfig(){const e=this.getCurrentTheme(),t=this.getCanvasStylesheets();return n().extend({},this.canvasConfig,{canvas:{styles:e?[e.stylesheet,...t]:t},protectedCss:[]})},_getAssetConfig(){return{assetManager:this.assetManagerConfig}},_getPlugins(){const e={plugins:[E(),O.A,A.A,T.A,S.A,...Object.keys(this.builderPlugins)],pluginsOpts:this.builderPlugins},t=e=>("string"==typeof e&&(e=d().plugins.get(e)),e&&(e.priority??200));return e.plugins.sort(((e,s)=>t(e)-t(s))).forEach((t=>{"function"==typeof t&&t.bind({editorView:this}),e.pluginsOpts[t]&&(e.pluginsOpts[t].editorView=this)})),e},updateRtePosition(e){if(!this.builder)return;const t=this.builder.Canvas.canvasView.$el,{height:s,bottom:i,top:r}=this.builder.Canvas.getFrameEl().getBoundingClientRect(),n=this.builder.getSelected();if(!n)return;const a=n.view.$el,{width:l,height:c,top:d,bottom:h}=this.rte.actionbar.getBoundingClientRect();if(o()(this.rte.actionbar).parent().css("margin-left",""),a&&t.innerWidth()<=e.canvasOffsetLeft+l){let e=a.outerWidth()-l;o()(this.rte.actionbar).parent().css("margin-left",e);const s=o()(this.rte.actionbar).offset().left-t.offset().left;s<0&&(e-=s,o()(this.rte.actionbar).parent().css("margin-left",e))}e.top<0&&s>e.canvasOffsetTop+c+a.height()&&(e.top+=a.outerHeight()+c),this.rte.customRte&&this.rte.customRte.toggleVisibility(d>i||h<r)},rtlFallback(){const{LayerManager:e}=this.builder;e.render=n().wrap(e.render,(t=>{const s=t.call(e);return s.querySelectorAll("[data-toggle-select]").forEach((e=>{e.style.paddingRight=e.style.paddingLeft,e.style.paddingLeft=""})),s}))},getBreakpoints(e=[]){return this.disableDeviceManager?[]:this._devicesModule._getCSSBreakpoint(e)}}),D=L},"./bundles/orocms/js/app/grapesjs/modules/devices-module.js":(e,t,s)=>{var i;void 0===(i=function(e){"use strict";const t=s("./bundles/oroui/js/base-class.js"),i=s("./bundles/oroui/js/extend/jquery.js"),o=s("./bundles/oroui/js/mediator.js"),r=s("./bundles/oroui/js/extend/underscore.js"),n=s("./bundles/oroui/js/viewport-manager.js").A,a=s("./bundles/orotranslation/js/translator.js"),l=t.extend({$builderIframe:null,breakpoints:{},allowBreakpoints:["desktop","tablet","tablet-small","mobile-big","mobile-landscape","mobile","mobile-small"],canvasEl:null,constructor:function e(t){e.__super__.constructor.call(this,t)},initialize(e){if(!e.builder)throw new Error("Required option builder not found.");this.builder=e.builder,e.allowBreakpoints.length&&(this.allowBreakpoints=e.allowBreakpoints),this._deferredInit();const{Commands:t,Canvas:s}=this.builder;this.patchDeviceModel(),this.canvasEl=s.getElement(),this.$builderIframe=i(s.getFrameEl()),this.$framesArea=i(s.canvasView.framesArea),this.renderDeviceDecoration(),this.initButtons(),this.listenTo(o,"grapesjs:theme:change",this.initButtons.bind(this)),this.listenTo(o,"layout:reposition",this.adjustCurrentDeviceWidth.bind(this)),this.listenTo(this.builder,"change:device",this.updateSelectedElement.bind(this)),t.add("setDevice",{run(e,t){const{Devices:s}=e;s.get(t.id).updateCalcPreviewDeviceWidth(),e.setDevice(t.id),e.Canvas.getElement().classList.add(t.id),e.Canvas.deviceDecorator.classList.add(t.id)},stop(e,t){e.Canvas.getElement().classList.remove(t.id),e.Canvas.deviceDecorator.classList.remove(t.id)}})},_deferredInit(){this.deferredInitPromise=new Promise(((e,t)=>{this._deferredInitResolver=e,this._deferredInitRejecter=t}))},_resolveDeferredInit(){this._deferredInitResolver&&this._deferredInitResolver(this)},_rejectDeferredInit(e){this._deferredInitRejecter&&(e?this._deferredInitRejecter(e):this._deferredInitRejecter())},patchDeviceModel(){const{Devices:e,Canvas:t}=this.builder;e.Devices.prototype.model=e.Device.extend({editor:this.builder,updateCalcPreviewDeviceWidth(){const e=t.getElement();(parseInt(this.get("width"))||0)>=e.offsetWidth-100?this.set("width",e.offsetWidth-100+"px"):this.set("width",this.get("widthMedia"))}})},renderDeviceDecoration(){const{Canvas:e}=this.builder,{canvasView:t}=e,s=document.createElement("div");s.classList.add("gjs-canvas-device-decorator"),t.$el.before(s),e.deviceDecorator=s,this.deviceDecorator=s},adjustCurrentDeviceWidth(){const{Devices:e}=this.builder,t=e.getSelected();t&&t.updateCalcPreviewDeviceWidth()},initButtons(){this.getBreakpoints().then((()=>this.createButtons())).catch((e=>this._rejectDeferredInit(e)))},_getCSSBreakpoint(e=this.allowBreakpoints){if(this.disposed)return;const t=this.$builderIframe[0].contentDocument;if(null===t)return;const s=n.getBreakpoints(t.documentElement);return this.breakpoints=this._collectCSSBreakpoints(s).filter((({name:t})=>!e.length||e.includes(t))).map(((e,t)=>{const s=(e={...e}).max?e.max+"px":"";return e.widthDevice=s,e.name.includes("landscape")?(e.height=this.calculateDeviceHeight(s,!0),e.widthMedia=s):e.height=this.calculateDeviceHeight(s),e.isActiveByDefault=0===t,e})),this.breakpoints},_collectCSSBreakpoints(e){const t=/(max-width:\s?)([(\d+)]*)/g,s=/(min-width:\s?)([(\d+)]*)/g;return r.reduce(e,(function(e,i,o){let r;const n=i.match(t),a=i.match(s);return(n||a)&&(r={name:o},n&&(r.max=parseInt(n[0].replace("max-width:",""))),a&&(r.min=parseInt(a[0].replace("min-width:",""))),e.push(r)),e}),[],this)},collectBreakpoints(){const e=this.$builderIframe[0].contentDocument;if(null===e)return;const t=n.getBreakpoints(e.documentElement);return this._collectCSSBreakpoints(t)},getBreakpoints(){const e=i.Deferred();return this._intervalId=setInterval((()=>{this._getCSSBreakpoint(),!this.breakpoints.length&&this.allowBreakpoints.length||(clearInterval(this._intervalId),e.resolve())}),50),e.promise()},createButtons(){const{Panels:e,Devices:t,Canvas:s}=this.builder,o=[];this.breakpoints.forEach((e=>{const i=t.add({id:e.name,width:e.widthDevice,widthMedia:e.max?e.max+"px":"",height:e.height});o.push({id:e.name,command:"setDevice",togglable:!1,className:e.name,active:e.isActiveByDefault,attributes:{"data-toggle":"tooltip",title:this.concatTitle(e)}}),e.isActiveByDefault&&(s.getElement().classList.add(i.id),s.deviceDecorator.classList.add(i.id))}));const r=e.addPanel({id:"devices-c",visible:!0,buttons:o});i(r.view.$el.find('[data-toggle="tooltip"]')).tooltip(),this._resolveDeferredInit()},calculateDeviceHeight(e,t=!1){if(!e)return"";const s=(e=parseInt(e))<=640?1.7:1.3,i=t?e/s:e*s;return Math.round(i)+"px"},concatTitle(e){let t=a(`oro.cms.wysiwyg.device_manager.devices.${e.name.replace(/-/g,"_")}`);return e.max&&(t+=": "+e.max),e.height&&(t+="x"+e.height),t},updateSelectedElement(e,t){const{Devices:s}=this.builder,o=s.getSelected();this.deviceDecorator.style.setProperty("--device-width",o.get("width")),this.deviceDecorator.style.setProperty("--device-height",o.get("height"));const r=this.$builderIframe[0],n=this.$framesArea.find(".gjs-frame-wrapper"),a=this.builder.getConfig();a.el.style.height=a.height,i(this.canvasEl).css({height:""}),n.one("transitionend."+this.cid,(()=>{if(n[0].offsetHeight>=parseInt(a.height)-this.canvasEl.offsetTop){const e=getComputedStyle(a.el),t=getComputedStyle(this.deviceDecorator),s=[this.deviceDecorator.offsetHeight,t["padding-top"],t["padding-bottom"],t["margin-top"],t["margin-bottom"],t.top,e["padding-top"],e["padding-bottom"]].reduce(((e,t)=>e+parseInt(t)),0);a.el.style.height=s+"px"}else a.el.style.height=a.height;i(this.canvasEl).find("#gjs-cv-tools").css({height:r.clientHeight}),i(this.canvasEl).css({height:r.clientHeight}),this.builder.trigger("change:canvasOffset")}))},dispose(){this.disposed||(clearInterval(this._intervalId),this.deviceDecorator.remove(),this.$builderIframe.off(`.${this.cid}`),this.$framesArea.off(`.${this.cid}`),delete this.builder,delete this.breakpoints,delete this.canvasEl,delete this.$builderIframe,l.__super__.dispose.call(this))}});return l}.call(t,s,t,e))||(e.exports=i)},"./bundles/orocms/js/app/grapesjs/modules/panels-module.js":(e,t,s)=>{"use strict";s.d(t,{A:()=>g});var i=s("./bundles/oroui/js/base-class.js"),o=s.n(i),r=s("./bundles/orocms/js/app/grapesjs/controls/theme-selector-view.js"),n=s.n(r),a=s("../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/orocms/templates/grapesjs-settings.html"),l=s.n(a);const c={options:{props:{comparator:"order"},buttons:{"sw-visibility":{order:10},fullscreen:{order:10},undo:{order:30},redo:{order:30},"gjs-open-import-webpage":{order:20,className:"fa fa-code"},"canvas-clear":{order:50},"enable-code-mode":{order:40}}},views:{props:{comparator:"order"},buttons:{"open-sm":{order:10},"open-layers":{order:20},"open-blocks":{order:30}}}};var d=s("./bundles/oroui/js/extend/jquery.js"),h=s.n(d),u=s("./bundles/oroui/js/extend/underscore.js"),p=s.n(u);const m=o().extend({builder:null,themes:[],settingsTemplate:l(),constructor:function e(t){e.__super__.constructor.call(this,t)},initialize(e){if(p().extend(this,p().pick(e,["builder","themes"])),!this.builder)throw new Error("Required option builder not found.");this.modifyPanels(),this._moveSettings(),this._addOptionButtonTooltips(),this.createThemeSelector(),this.listenTo(this.builder,"component:selected",this.componentSelected.bind(this))},modifyPanels(){this.builder.Panels.getPanels().each((({buttons:e,id:t})=>{if(c[t]){for(const[i,o]of Object.entries(c[s=t]&&c[s].props?c[s].props:{}))e[i]=o;e.each((e=>e.set(((e,t)=>c[e]&&c[e].buttons[t]?c[e].buttons[t]:{})(t,e.get("id"))))),e.sort(),e.reset(e.toJSON())}var s}))},createThemeSelector(){const e=this.builder.Panels.getPanel("options");this.themeSelector=new(n())({editor:this.builder,themes:this.themes}),e.view.$el.prepend(this.themeSelector.$el)},_addOptionButtonTooltips(){const e=this.builder.Panels.getPanel("options");e.buttons.each((function(e){e.set("attributes",{"data-toggle":"tooltip"})}),this),h()(e.view.$el.find('[data-toggle="tooltip"]')).tooltip()},_moveSettings(){const{TraitManager:e,Panels:t}=this.builder,s=this.builder.editor.view.$el,i=t.getButton("views","open-tm");i&&i.set("active",1);const o=t.getButton("views","open-sm");o&&o.set("active",1);const r=h()(this.settingsTemplate()),n=r.find(".gjs-sm-properties");h()(t.getPanelsEl()).find(".gjs-sm-sectors").before(r),n.append(e.view.$el),r.find(".gjs-sm-sector-title").on("click",(({currentTarget:e})=>{const t=n.get(0).style,s="none"===t.display;e.parentNode.classList.toggle("gjs-sm-open",s),t.display=s?"block":"none"})),t.removeButton("views","open-tm"),s.find("#gjs-clm-tags-field").on("click","[data-tag-status]",(function(e){e.stopPropagation()}))},componentSelected(e){const t=this.builder.editor.view.$el;h()(t.find(".gjs-settings")).toggle(!!e.get("traits").length)},dispose(){this.disposed||(this.themeSelector.dispose(),delete this.themeSelector,delete this.themes,delete this.builder,delete this.settingsTemplate,m.__super__.dispose.call(this))}}),g=m},"./bundles/orocms/js/app/grapesjs/modules/state-model.js":(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var i=s("./bundles/oroui/js/app/models/base/model.js");const o=s.n(i)().extend({defaults:{codeMode:!1,isolateScopeId:null},constructor:function e(...t){return e.__super__.constructor.apply(this,t)},getIsolateScopeId(){return this.get("isolateScopeId")?this.get("isolateScopeId"):void 0},getCodeMode(){return this.get("codeMode")}})},"./bundles/orocms/js/app/grapesjs/plugins/code-validator.js":(e,t,s)=>{"use strict";s.d(t,{A:()=>w});var i=s("./bundles/orotranslation/js/translator.js"),o=s.n(i),r=s("./bundles/oroui/js/base-class.js"),n=s.n(r),a=s("./bundles/oroui/js/modal.js"),l=s.n(a),c=s("./bundles/oroui/js/extend/underscore.js");const d=/\sid=\"([^"]*?)(?=\")/g,h=function(e){const{cache:t,htmlStringLine:s,htmlFragment:i}=e,r=function(e){const t=[...e.querySelectorAll("[id]")],s=t.map((e=>e.id));return t.filter((e=>s.filter((t=>t===e.id)).length>1))}(i);let n,a=s.match(d);if(void 0===t.collectIds&&(t.collectIds=[]),r.length&&null!==a){a=a.map((e=>e.replace(/\sid=\"/g,"")));for(const e of a){const s=r.find((({id:t})=>t===e.trim()));s&&(t.collectIds.includes(s.id)&&(n=o()("oro.htmlpurifier.messages.AttrValidator: Attribute removed",{name:"id",value:s.id,tagName:`<${s.tagName}>`})),t.collectIds.push(s.id))}return n}};var u=s("./bundles/orocms/js/app/grapesjs/constants.js");const p=new RegExp(`\\bid=[\\"'].*${u.A.ISOLATION_PREFIX}`,"g");function m(e){const{cache:t,htmlStringLine:s}=e;if(t[s]||(t[s]=s.match(p)),t[s])return o()("oro.htmlpurifier.messages.reserved_id",{id:u.A.ISOLATION_PREFIX})}const g=function(e){const{cache:t,htmlFragment:s,editor:i,htmlStringLine:r,lineNumber:n}=e;if(t.styleTags||(t.styleTags=[...s.querySelectorAll("style")]),r.includes("<style>")&&0!==t.styleTags.length){try{const e=t.styleTags[0].innerText;t.styleTags.shift(),i.em.get("Parser").parseCss(e)}catch(e){t[r]||(t[r]=e)}return t[r]?{message:o()("oro.htmlpurifier.messages.invalid_styles",{reason:t[r].reason,column:t[r].column}),shortMessage:o()("oro.htmlpurifier.messages.invalid_styles_short",{reason:t[r].reason}),lineNumber:n+t[r].line-1}:void 0}},f=n().extend({editor:null,lineMessage:"oro.htmlpurifier.formatted_error_line",constructor:function e({editor:t,...s}){this.editor=t,e.__super__.constructor.call(this,{editor:t,...s})},getConstraints:({constraints:e=[]}={})=>[h,m,g,...e],validate(e,t={}){const s=[],i=new DOMParser,o=e.split("\n"),r=i.parseFromString(e,"text/html"),n=this.getConstraints(t).map((e=>{const t={};return s=>e({cache:t,...s})}));for(const i in o)if(o.hasOwnProperty(i)){const a=parseInt(i)+1;for(const l of n){const n=l({htmlStringLine:o[i],htmlString:e,htmlStringLines:o,htmlFragment:r,lineNumber:a,editor:this.editor});if("string"==typeof n)s.push(this.prepareErrorData(a,n,t));else if((0,c.isObject)(n)){const{lineNumber:e,message:i,shortMessage:o}=n;s.push(this.prepareErrorData(e,i,{...t,shortMessage:o}))}}}return s},prepareErrorData(e,t,{lineMessage:s,shortMessage:i=""}){return s||(s=this.lineMessage),{line:e,shortMessage:i,message:o()(s,{line:e,message:t})}}});var y=s("./bundles/orocms/js/app/grapesjs/plugins/components/content-isolation.js");const b=n().extend({validation:{rules:{content:{"Oro\\Bundle\\CMSBundle\\Validator\\Constraints\\WYSIWYG":{message:"oro.cms.wysiwyg.not_permitted_content.message"}},styles:{"Oro\\Bundle\\CMSBundle\\Validator\\Constraints\\WYSIWYGStyle":{message:"oro.cms.wysiwyg.not_permitted_style.message"}}}},constructor:function e(t){e.__super__.constructor.call(this,t)},initialize({editor:e}){this.editor=e,this.validator=new f({editor:e}),this.invalid=!1,this.restrictFaild=!1,this.editor.once("load",this.onLoadEditor.bind(this))},onLoadEditor(){this.parentView=this.editor.parentView,this.$stylesInputElement=this.parentView.$stylesInputElement,this.$textInputElement=this.parentView.$el,this.$stylesInputElement.data("wysiwyg:validation",{contentValidate:this.contentValidate.bind(this)}),this.$textInputElement.data("wysiwyg:validation",{restrictionValidate:this.restrictionValidate.bind(this)}),this.ComponentRestriction=this.editor.ComponentRestriction,this.listenTo(this.parentView,"dispose",this.onDispose),this.listenTo(this.editor.importDialogView,"import:after",this.unLockEditor),this.initValidation()},initValidation(){const e=this.$textInputElement.data("validation"),t=this.$stylesInputElement.data("validation");this.$textInputElement.data("validation",Object.assign({...this.validation.rules.content,...e})),this.$stylesInputElement.data("validation",Object.assign({...this.validation.rules.styles,...t})),this.$textInputElement.valid(),this.$stylesInputElement.valid()},getRawContent(){return`${(0,y.escapeWrapper)(this.$textInputElement.val())}\n            <style>${(0,y.escapeCss)(this.$stylesInputElement.val())}</style>`},openContentEditor(){const{Commands:e}=this.editor;e.has("gjs-open-import-webpage")&&e.run("gjs-open-import-webpage",{content:this.getRawContent(),exportButton:!1})},lockEditor(){this.isInvalid()&&this.createOverlay()},unLockEditor(){this.isInvalid()||this.removeOverlay()},createOverlay(){this.lockOverlay||(this.lockOverlay=new(l())({autoRender:!0,title:o()("oro.htmlpurifier.lock_editor.title"),content:o()("oro.htmlpurifier.lock_editor.desc"),okText:o()("oro.htmlpurifier.lock_editor.open_editor"),className:"modal oro-modal-danger editor-lock-overlay",allowClose:!1,allowCancel:!1,okButtonClass:"btn btn-danger open-code-editor",attributes:{role:"alertdialog"}}),this.lockOverlay.$el.appendTo(this.editor.getEl()),this.lockOverlay.$el.on(`click${this.lockOverlay.eventNamespace()}`,".open-code-editor",this.openContentEditor.bind(this)))},removeOverlay(){this.lockOverlay&&(this.lockOverlay.$el.off(this.lockOverlay.eventNamespace()),this.lockOverlay.dispose(),delete this.lockOverlay)},validate(e,{allowLock:t=!0,...s}={}){const i=this.validator.validate(e,s);return this.invalid=!!i.length,this.invalid&&t&&this.lockEditor(),i},isInvalid(){return this.invalid||this.restrictFaild},contentValidate(){return this.validate(this.getRawContent()).map((({shortMessage:e})=>e))},restrictionValidate(e){if(!this.parentView.allow_tags&&!e)return[];const t=this.ComponentRestriction.validate((0,y.escapeWrapper)(e??this.$textInputElement.val()));return this.restrictFaild=!!t.length,this.restrictFaild&&this.lockEditor(),t},onDispose(){this.$stylesInputElement.removeData("wysiwyg:validation"),this.$textInputElement.removeData("wysiwyg:validation"),this.removeOverlay(),delete this.parentView,delete this.$stylesInputElement,delete this.$textInputElement,delete this.ComponentRestriction,delete this.invalid,this.dispose()}}),w=(e,t)=>{e.CodeValidator=new b({editor:e,...t})}},"./bundles/orocms/js/app/grapesjs/plugins/grapesjs-content-parser.js":(e,t,s)=>{"use strict";s.d(t,{A:()=>o});const i=e=>{if(e.style&&"text"===e.type&&["padding-left","padding-right"].map((t=>{if(e.style[t]){const s=e.attributes.style?e.attributes.style.split(";"):[];s.push(`padding-left: ${e.style[t]}`),e.attributes={...e.attributes,style:s.join(";")+";"},delete e.style[t]}})),e.components){if(e.components.length){const t=e.components.every((({type:e,textComponent:t})=>"text"===e||t))||e.components.some((({type:e})=>"textnode"===e));!e.type&&t&&(e.type="text"),("text"===e.type||e.textComponent)&&e.components.forEach((e=>{e.type&&"text"!==e.type||!e.components||Object.assign(e,{layerable:0,selectable:0,hoverable:0,editable:0,draggable:0,droppable:0,highlightable:0})}))}e.components.type&&"textnode"===e.components.type&&(e.components=[{...e.components,tagName:""}])}return e.attributes&&"temporary-container"===e.attributes["data-type"]?e.components:e};function o(e){const t=e.Parser.parserHtml.parseNode;e.Parser.parserHtml.parseNode=(...s)=>t.apply(e.Parser.parserHtml,s).map(i).flat();const s=e.destroy;e.destroy=()=>{const t={...e.em.get("Parser")};s.call(e),e.em.set("Parser",t)}}},"./bundles/orocms/js/app/grapesjs/plugins/i18n-messages.js":(e,t,s)=>{"use strict";s.d(t,{A:()=>h});var i=s("./bundles/orotranslation/js/translator.js"),o=s.n(i),r=s("./bundles/orolocale/js/locale-settings.js"),n=s.n(r),a=s("./bundles/oroui/js/extend/jquery.js"),l=s.n(a);const c=n().getLocale(),d={[c]:{assetManager:{addButton:o()("oro.cms.wysiwyg.asset_manager.add_button"),inputPlh:o()("oro.cms.wysiwyg.asset_manager.input_plh"),modalTitle:o()("oro.cms.wysiwyg.asset_manager.modal_title"),uploadTitle:o()("oro.cms.wysiwyg.asset_manager.upload_title")},blockManager:{labels:{column1:o()("oro.cms.wysiwyg.component.column1.label"),column2:o()("oro.cms.wysiwyg.component.column2.label"),column3:o()("oro.cms.wysiwyg.component.column3.label"),"column3-7":o()("oro.cms.wysiwyg.component.column37.label"),image:o()("oro.cms.wysiwyg.component.image.label"),video:o()("oro.cms.wysiwyg.component.video.label"),map:o()("oro.cms.wysiwyg.component.map.label"),"link-block":o()("oro.cms.wysiwyg.component.link_block.label"),"link-button":o()("oro.cms.wysiwyg.component.link_button.label")},categories:{Basic:o()("oro.cms.wysiwyg.block_manager.categories.basic"),Forms:o()("oro.cms.wysiwyg.block_manager.categories.forms")}},panels:{buttons:{titles:{"sw-visibility":o()("oro.cms.wysiwyg.option_panel.show_borders"),preview:o()("oro.cms.wysiwyg.option_panel.preview"),fullscreen:o()("oro.cms.wysiwyg.option_panel.fullscreen"),"export-template":o()("oro.cms.wysiwyg.option_panel.export"),undo:o()("oro.cms.wysiwyg.option_panel.undo"),redo:o()("oro.cms.wysiwyg.option_panel.redo"),"gjs-open-import-webpage":o()("oro.cms.wysiwyg.option_panel.import"),"canvas-clear":o()("oro.cms.wysiwyg.option_panel.clear_canvas"),"open-tm":o()("oro.cms.wysiwyg.option_panel.settings"),"open-sm":o()("oro.cms.wysiwyg.option_panel.open_style_manager"),"open-layers":o()("oro.cms.wysiwyg.option_panel.open_layer_manager"),"open-blocks":o()("oro.cms.wysiwyg.option_panel.open_Blocks")}}},selectorManager:{label:o()("oro.cms.wysiwyg.selector_manager.label"),selected:o()("oro.cms.wysiwyg.selector_manager.selected"),emptyState:o()("oro.cms.wysiwyg.selector_manager.empty_state"),states:{hover:o()("oro.cms.wysiwyg.selector_manager.states.hover"),active:o()("oro.cms.wysiwyg.selector_manager.states.active"),"nth-of-type(2n)":o()("oro.cms.wysiwyg.selector_manager.states.even_odd")}},styleManager:{empty:o()("oro.cms.wysiwyg.style_manager.empty"),layer:o()("oro.cms.wysiwyg.style_manager.layer"),fileButton:o()("oro.cms.wysiwyg.style_manager.file_button"),sectors:{general:o()("oro.cms.wysiwyg.style_manager.sectors.general"),layout:o()("oro.cms.wysiwyg.style_manager.sectors.layout"),typography:o()("oro.cms.wysiwyg.style_manager.sectors.typography"),decorations:o()("oro.cms.wysiwyg.style_manager.sectors.decorations"),extra:o()("oro.cms.wysiwyg.style_manager.sectors.extra"),flex:o()("oro.cms.wysiwyg.style_manager.sectors.flex"),dimension:o()("oro.cms.wysiwyg.style_manager.sectors.dimension")}},traitManager:{empty:o()("oro.cms.wysiwyg.trait_manager.empty"),label:o()("oro.cms.wysiwyg.trait_manager.label"),traits:{labels:{id:o()("oro.cms.wysiwyg.trait_manager.traits.id.label"),alt:o()("oro.cms.wysiwyg.trait_manager.traits.alt.label"),title:o()("oro.cms.wysiwyg.trait_manager.traits.title.label"),href:o()("oro.cms.wysiwyg.trait_manager.traits.href.label"),target:o()("oro.cms.wysiwyg.trait_manager.traits.target.label"),provider:o()("oro.cms.wysiwyg.trait_manager.traits.provider.label"),src:o()("oro.cms.wysiwyg.trait_manager.traits.src.label"),poster:o()("oro.cms.wysiwyg.trait_manager.traits.poster.label"),videoId:o()("oro.cms.wysiwyg.trait_manager.traits.videoId.label"),rel:o()("oro.cms.wysiwyg.trait_manager.traits.rel.label"),modestbranding:o()("oro.cms.wysiwyg.trait_manager.traits.modestbranding.label"),color:o()("oro.cms.wysiwyg.trait_manager.traits.color.label"),autoplay:o()("oro.cms.wysiwyg.trait_manager.traits.autoplay.label"),loop:o()("oro.cms.wysiwyg.trait_manager.traits.loop.label"),controls:o()("oro.cms.wysiwyg.trait_manager.traits.controls.label")},title:{autoplay:o()("oro.cms.wysiwyg.trait_manager.traits.autoplay.title")},attributes:{id:{placeholder:o()("oro.cms.wysiwyg.trait_manager.traits.id.placeholder")},alt:{placeholder:o()("oro.cms.wysiwyg.trait_manager.traits.alt.placeholder")},title:{placeholder:o()("oro.cms.wysiwyg.trait_manager.traits.title.placeholder")},href:{placeholder:o()("oro.cms.wysiwyg.trait_manager.traits.href.placeholder")},src:{placeholder:o()("oro.cms.wysiwyg.trait_manager.traits.src.placeholder")},poster:{placeholder:o()("oro.cms.wysiwyg.trait_manager.traits.poster.placeholder")},videoId:{placeholder:o()("oro.cms.wysiwyg.trait_manager.traits.videoId.placeholder")},color:{placeholder:o()("oro.cms.wysiwyg.trait_manager.traits.color.placeholder")}},options:{target:{_self:o()("oro.cms.wysiwyg.trait_manager.traits.options.target.this_window"),_blank:o()("oro.cms.wysiwyg.trait_manager.traits.options.target.blank")}}}}}},h=e=>{const t=e.I18n;t.getLocale()===c?t.setMessages(l().extend(!0,{},t.getMessages(),d)):(t.setMessages(d),t.setLocale(c))}},"./bundles/orocms/js/app/grapesjs/plugins/oro-rte-editor/index.js":(e,t,s)=>{"use strict";s.d(t,{A:()=>G});var i=s("./bundles/oroui/js/base-class.js"),o=s.n(i),r=s("./bundles/oroui/js/app/models/base/collection.js"),n=s.n(r),a=s("./bundles/oroui/js/app/models/base/model.js");const l=s.n(a)().extend({defaults:{event:"click",classes:{button:"gjs-rte-action",active:"gjs-rte-active",disabled:"gjs-rte-disabled",inactive:"gjs-rte-inactive"}},constructor:function e(t){e.__super__.constructor.call(this,t)},getClass(e){return this.get("classes")[e]||""}}),c=n().extend({model:l,comparator:"order",constructor:function e(...t){e.__super__.constructor.apply(this,t)}});var d=s("./bundles/orotranslation/js/translator.js"),h=s.n(d);const u=[{name:"bold",command:"bold",order:20,group:"text-style",icon:'<span class="fa fa-bold" aria-hidden="true"></span>',attributes:{title:h()("oro.cms.wysiwyg.simple_actions.bold.title")}},{name:"italic",command:"italic",order:20,group:"text-style",icon:'<span class="fa fa-italic" aria-hidden="true"></span>',attributes:{title:h()("oro.cms.wysiwyg.simple_actions.italic.title")}},{name:"underline",command:"underline",order:20,group:"text-style",icon:'<span class="fa fa-underline" aria-hidden="true"></span>',attributes:{title:h()("oro.cms.wysiwyg.simple_actions.underline.title")}},{name:"strikethrough",command:"strikethrough",order:20,group:"text-style",icon:'<span class="fa fa-strikethrough" aria-hidden="true"></span>',attributes:{title:h()("oro.cms.wysiwyg.simple_actions.strikethrough.title")}},{name:"subscript",command:"subscript",order:40,group:"text-level",icon:'<span class="fa fa-subscript" aria-hidden="true"></span>',attributes:{title:h()("oro.cms.wysiwyg.simple_actions.subscript.title")}},{name:"superscript",command:"superscript",order:40,group:"text-level",icon:'<span class="fa fa-superscript" aria-hidden="true"></span>',attributes:{title:h()("oro.cms.wysiwyg.simple_actions.superscript.title")}}],p={name:"link",order:20,group:"text-style",icon:'<span class="fa fa-link" aria-hidden="true"></span>',attributes:{title:h()("oro.cms.wysiwyg.component.link.label"),class:"gjs-rte-action link-format"},result(e,t){const{editor:s}=this,i=e.selection();if(t.isSelectionALink(i)){const e=t.getLinkElement(i),s=document.createTextNode(e.innerText);i.removeAllRanges(),document.getSelection().removeAllRanges(),e.replaceWith(s)}else{e.exec("createLink"," ");const i=t.getLinkElement(e.selection());s.runCommand("open-create-link-dialog",{link:i})}},update(e,t){const s=e.selection();t.btn.firstChild.classList.toggle("unlink",t.isSelectionALink(s)),t.isSelectionALink(s)&&t.btn.classList.add(e.classes.active)},isSelectionALink(e){if(!e.anchorNode)return!1;const t=e.anchorNode.parentNode;return t&&"A"===t.nodeName},getLinkElement(e){let t=e.anchorNode;return t=t.parentElement&&"A"===t.parentElement.tagName?t.parentElement:t.nextSibling,t}};var m=s("./bundles/oroui/js/extend/jquery.js"),g=s.n(m),f=(s("./bundles/oroui/js/extend/select2.js"),s("../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/orocms/templates/grapesjs-select-action.html")),y=s.n(f),b=s("../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/orocms/templates/grapesjs-select2-option.html"),w=s.n(b),v=s("./bundles/orocms/js/app/grapesjs/plugins/components/rte/utils/utils.js");const _={name:"formatBlock",icon:y()({options:{normal:h()("oro.cms.wysiwyg.format_block.normal"),p:h()("oro.cms.wysiwyg.format_block.p"),h1:h()("oro.cms.wysiwyg.format_block.h1"),h2:h()("oro.cms.wysiwyg.format_block.h2"),h3:h()("oro.cms.wysiwyg.format_block.h3"),h4:h()("oro.cms.wysiwyg.format_block.h4"),h5:h()("oro.cms.wysiwyg.format_block.h5"),h6:h()("oro.cms.wysiwyg.format_block.h6")},name:"tag"}),event:"change",attributes:{title:h()("oro.cms.wysiwyg.format_block.title"),class:"gjs-rte-action text-format-action"},order:10,group:"format-block",init(e){g()(e.actionbar.querySelector('[name="tag"]')).inputWidget("create","select2",{initializeOptions:{minimumResultsForSearch:-1,dropdownCssClass:"gjs-rte-select2-dropdown",formatResult:e=>w()({state:e})}})},result(e){const t=(0,v.yz)(e),s=e.actionbar.querySelector('[name="tag"]').value,i=e.selection();if("None"===i.type)return;const o=i.getRangeAt(0),r=(0,v.LT)(e.doc),n=o.commonAncestorContainer,a=n.nodeType===Node.ELEMENT_NODE,l=n.nodeType===Node.TEXT_NODE,c=e=>{const t=e.parentNode;[...e.childNodes].forEach((s=>{t.insertBefore(s,e)})),e.remove(),this.editor.trigger("change:canvasOffset")};if("normal"===s){if(a)return n.childNodes.forEach((e=>{o.intersectsNode(e)&&(0,v.QE)(e)})),(0,v.OZ)(n)&&c(n),this.editor.trigger("change:canvasOffset"),void t();if(l)return c((0,v.jk)(n)),void t()}return!o.collapsed&&a&&(0,v.QP)(n)?(n.childNodes.forEach((e=>{o.intersectsNode(e)&&r(e,s)})),i.removeAllRanges(),this.editor.trigger("change:canvasOffset"),void t()):!l||(0,v.jk)(n)||(0,v.OZ)(n.parentNode)?(this.editor.trigger("change:canvasOffset"),t(),e.exec("formatBlock",s)):(((t,s)=>{const i=(0,v.jk)(t),o=e.doc.createElement(s);t=(0,v.cA)(n,["span",...v.CT]);const r=e=>e.nodeType===Node.TEXT_NODE||(0,v.E1)(e)||(0,v.dz)(e,"span"),a=[...(0,v.AR)(t,{callback:r,direction:"previous"}),t,...(0,v.AR)(t,{callback:r})];i?(i.after(o),o.append(...a),i.remove()):(t.after(o),o.append(...a)),this.editor.trigger("change:canvasOffset")})(n,s),void t())},update(e,t){const s=e.doc.queryCommandValue(t.name),i=e.actionbar.querySelector('[name="tag"]'),o=e.doc.getSelection();if(o.anchorNode){const e=o.getRangeAt(0);if(e.commonAncestorContainer.nodeType===Node.ELEMENT_NODE){const t=(0,v._p)(e);if(t.length)return void g()(i).select2("val",t[0])}}""===s&&(0,v.OZ)(e.el)?g()(i).select2("val",e.el.tagName.toLowerCase()):"false"!==s&&(v._A.includes(s)?g()(i).select2("val",s):g()(i).select2("val","normal"))}};class x{constructor(e,t){this.listType=e,this.oppositeListType=t,this.execCommandName="UL"===e?"insertUnorderedList":"insertOrderedList"}dispatchKeyDownEvent(e,t,s){switch(s.keyCode){case 8:this.processBackspace(e,t,s);break;case 9:this.processSubList(e,t,s.shiftKey);break;case 13:s.shiftKey||this.processEnter(e,t,s);break;case 90:s.shiftKey||!s.ctrlKey&&!s.metaKey||this.processUndo(e,t,s)}}mergeLists(e){const t=e.previousSibling;let s=e.nextSibling;(0,v.dz)(s,"br")&&(s.remove(),s=e.nextSibling),(0,v.dz)(t,this.listType)&&([...t.childNodes].reverse().forEach((t=>{e.prepend(t)})),(0,v.si)(e,t),t.remove()),(0,v.dz)(s,this.listType)&&([...s.childNodes].forEach((t=>{e.append(t)})),(0,v.si)(e,s),s.remove())}separateList(e,t){const s=e.cloneNode(),i=this.getNextSiblings(t);e.after(t),i.length&&(i.forEach((e=>s.appendChild(e))),t.after(s))}getNextSiblings(e){const t=[];let s=e.nextSibling;for(;s;)s.nodeType===Node.ELEMENT_NODE&&t.push(s),s=s.nextSibling;return t}clearOffset(e){if(e.nodeType!==Node.ELEMENT_NODE)return;const t=(0,v.hu)(),s=e.style[t];s&&parseInt(s)%40==0&&e.style.removeProperty(t)}checkDepth(e,t){return(0,v.IJ)(e,t).filter((e=>e.tagName===this.listType)).length<x.listDepth}isSubList(e,t){return(0,v.IJ)(e,t).filter((e=>e.tagName===this.listType)).length>1}insertNodeAfter(e,t="LI",s){const i=document.createElement(t);return s&&i.append(s),e.after(i),i}beforeListInsert(e){const t=e[0],s=e[e.length-1],i=e=>e.nodeType===Node.TEXT_NODE||(0,v.E1)(e),o=t&&i(t)?(0,v.AR)(t,{callback:i,direction:"previous"}):[],r=s&&i(s)?(0,v.AR)(s,{callback:i}):[];return[...o,...e,...r]}insertNodeToList(e){const t=document.createElement(this.listType);e.parentNode.insertBefore(t,e);const s=document.createElement("LI");s.append(e),this.clearOffset(e),t.append(s),this.mergeLists(t)}insertNodesToList(e,t){e=this.beforeListInsert(e);const s=document.createElement(this.listType);t.insertBefore(s,e[0]);for(const t of this.chunkNodes(e)){const e=document.createElement("LI");this.clearOffset(t),Array.isArray(t)?t.forEach((t=>e.append(t))):e.append(t),s.append(e),e.firstChild.nodeType===Node.ELEMENT_NODE&&e.firstChild.tagName===this.listType&&e.classList.add("list-style-none")}this.mergeLists(s)}chunkNodes(e){const t=[],s=e=>e&&e.nodeType===Node.ELEMENT_NODE&&e.tagName===this.listType;for(const i of e){const e=t.length-1;(0,v.OZ)(i)||"BR"===i.tagName||"DIV"===i.tagName||s(i.previousSibling)?t.push(i):s(i)?(t[e]||t.push([i]),Array.isArray(t[e])?t[e]=[...t[e],i]:t[e]=[t[e],i]):(0,v.E1)(i)||(0,v.dz)(i,"span")?Array.isArray(t[e])?t[e]=[...t[e],i]:1===t.length&&t[e].nodeType===Node.TEXT_NODE?t[e]=[t[e],i]:t.push([i]):Array.isArray(t[e])?t[e]=[...t[e],i]:t.push([i])}return t.filter((e=>!(!Array.isArray(e)&&"BR"===e.tagName&&(e.remove(),1))))}extractNodesFromList(e){const t=(0,v.cA)(e,this.listType.toLowerCase()),s=t.querySelectorAll("li"),i=t.querySelectorAll(this.listType),o=t.parentNode,r=t.childNodes.length;t.previousSibling&&t.previousSibling.nodeType===Node.TEXT_NODE&&o.insertBefore(document.createElement("BR"),t),[...s].forEach(((e,s)=>{e.childNodes.length&&((!(0,v.OZ)(e.firstChild)&&![this.listType,"DIV"].includes(e.firstChild.tagName)||e.childNodes[e.childNodes.length-1].nodeType===Node.TEXT_NODE&&s<r-1)&&e.append(document.createElement("BR")),[...e.childNodes].forEach((e=>{o.insertBefore(e,t)}))),e.remove()})),[...i].forEach((e=>e.remove())),t.remove()}processUndo(e,t){const{container:s}=this.exposeSelection(e),i=s=>{const i=s.previousSibling;i&&(0,v.VM)(e,i.firstChild,!0),s.remove(),t.trigger("change:canvasOffset")};s.nodeType!==Node.TEXT_NODE?s.nodeType!==Node.ELEMENT_NODE||"LI"!==s.tagName||s.childNodes.length||i(s):i((0,v.cA)(s,"li",!0))}processEnter(e,t,s){s.preventDefault();const{container:i,element:o,selection:r,range:n}=this.exposeSelection(e),a=(0,v.cA)(i,this.listType.toLowerCase(),!0),l=(0,v.cA)(i,"li",!0);let c;if(l.innerHTML.length){let t;if("Caret"===r.type&&i.nodeType===Node.TEXT_NODE&&(t=i.splitText(n.startOffset)),(0,v.OZ)(i.parentNode)){const e=document.createElement(i.parentNode.tagName);e.append(t),t=e}c=this.insertNodeAfter(l,"li",t),setTimeout((()=>(0,v.VM)(e,t||c)),0)}else this.isSubList(i,o)?this.processSubList(e,t,!0):(this.separateList(a,l),c=this.insertNodeAfter(l,"p"),c.append(document.createElement("br")),l.after(c),l.remove(),setTimeout((()=>(0,v.VM)(e,c)),0));t.trigger("change:canvasOffset"),s.preventDefault()}processBackspace(e,t,s){const{container:i}=this.exposeSelection(e),o=(0,v.cA)(i,this.listType.toLowerCase(),!0),r=(0,v.cA)(i,"li",!0);"LI"===o.parentNode.tagName&&(r.innerText.replace(/\n/gi,"").length||(this.processSubList(e,t,!0),r.childNodes.length||r.classList.add("list-style-none"),s.preventDefault()),this.mergeLists(o))}processSubList(e,t,s=!1){const{selection:i,range:o,cursor:r,container:n,element:a}=this.exposeSelection(e),l=()=>{const e=(0,v.cA)(n,this.listType.toLowerCase(),!0),s=(0,v.cA)(n,"li",!0),i=(0,v.cA)(e,"li",!0);if("LI"!==i.tagName)return;i.after(s);const o=e.querySelector(".list-style-none");o&&!o.childNodes.length&&o.remove(),e.childNodes.length||e.remove(),i.classList.contains("list-style-none")&&!i.childNodes.length&&i.remove(),t.trigger("change:canvasOffset"),r()},c=()=>{const e=(0,v.cA)(n,"li",!0),s=(0,v.cA)(n,this.listType.toLowerCase(),!0);let i=e.previousSibling;i||(i=document.createElement("LI"),s.prepend(i));const o=document.createElement(this.listType);o.append(e),i.childNodes.length||i.classList.add("list-style-none"),i.append(o),this.mergeLists(o),t.trigger("change:canvasOffset"),r()};if(this.checkDepth(n,a)||s){if("Caret"===i.type)return s?l():c();if("Range"===i.type){if(s){if(n.nodeType===Node.TEXT_NODE)return l();if((0,v.OZ)(n)||(0,v.dz)(n,"span"))return l(),r(),void t.trigger("change:canvasOffset");const e=(0,v.cA)(n,"li",!0),s=[...n.childNodes].filter((e=>o.intersectsNode(e)));if(e.parentNode.tagName!==this.listType)return;for(const t in s)"0"===t?e.after(s[t]):s[t-1].after(s[t]);const i=n.querySelector(".list-style-none");return i&&!i.childNodes.length&&i.remove(),n.childNodes.length||n.remove(),e.classList.contains("list-style-none")&&!e.childNodes.length&&e.remove(),t.trigger("change:canvasOffset"),void r()}{if(n.nodeType===Node.TEXT_NODE)return c();if((0,v.OZ)(n)||(0,v.dz)(n,"span"))return c(),r(),void t.trigger("change:canvasOffset");const e=[...n.childNodes].filter((e=>o.intersectsNode(e)));let s=e[0].previousSibling;const i=document.createElement(this.listType);s||(s=document.createElement("LI"),n.prepend(s));for(const t of e)i.append(t);s.childNodes.length||s.classList.add("list-style-none"),s.append(i),this.mergeLists(i),t.trigger("change:canvasOffset"),r()}}}}processList(e,t){const{selection:s,range:i,isList:o,cursor:r,container:n}=this.exposeSelection(e),a=(0,v.K3)(n,this.oppositeListType.toLowerCase());if(a)return this.changeListType(a,this.listType.toLowerCase()),r(),void t.trigger("change:canvasOffset");const l=()=>{const s=(0,v.jk)(n);if(s)return this.insertNodeToList(s),t.trigger("change:canvasOffset"),void r();e.exec(this.execCommandName),this.mergeLists((0,v.cA)(n,this.listType.toLowerCase())),t.trigger("change:canvasOffset")};if("Caret"===s.type){if(o)return this.extractNodesFromList(n),t.trigger("change:canvasOffset"),void r();if(n.nodeType===Node.TEXT_NODE)return l()}if("Range"===s.type){if(o)return this.extractNodesFromList(n),t.trigger("change:canvasOffset"),void r();{if(n.nodeType===Node.TEXT_NODE)return l();if((0,v.OZ)(n)||(0,v.dz)(n,"span"))return this.insertNodeToList(n),r(),void t.trigger("change:canvasOffset");if((0,v.E1)(n)){const[e,s]=(0,v.O3)(n);return this.insertNodesToList(e,s),r(),void t.trigger("change:canvasOffset")}const e=[...n.childNodes].filter((e=>i.intersectsNode(e)));this.isTag(e[e.length-1].nextSibling,"br")&&e.push(e[e.length-1].nextSibling),this.insertNodesToList(e,n),r()}}t.trigger("change:canvasOffset")}isTag(e,t){return e&&e.nodeType===Node.ELEMENT_NODE&&e.tagName.toLowerCase()===t.toLowerCase()}changeListType(e,t){const s=e.querySelectorAll(e.tagName.toLowerCase()),i=(0,v.es)(e,t);s.forEach((e=>(0,v.es)(e,t))),this.mergeLists(i)}isList(e){return e.doc.queryCommandSupported(this.execCommandName)&&e.doc.queryCommandState(this.execCommandName)}exposeSelection(e){const t=e.selection(),s=t.getRangeAt(0),i=(0,v.yz)(e),o=e.el;let r=s.commonAncestorContainer;return this.isList(e)&&r.tagName!==this.listType&&r.isEqualNode(e.el)?r=r.querySelector(this.listType.toLowerCase()):r.isEqualNode(e.el)&&1===r.childNodes.length&&(r=r.firstChild),{selection:t,range:s,isList:this.isList(e)||r.tagName===this.listType,cursor:i,container:r,element:o}}}x.listDepth=8;const j=new x("UL","OL"),C={name:"insertUnorderedList",order:30,group:"list-style",icon:'<span class="fa fa-list-ul" aria-hidden="true"></span>',attributes:{title:h()("oro.cms.wysiwyg.simple_actions.insert_unordered_list.title")},handlers:{"unordered:sublist:add":function(e){j.processSubList(e,this.editor,!1)},"unordered:sublist:remove":function(e){j.processSubList(e,this.editor,!0)}},result(e){j.processList(e,this.editor)},onKeyDown(e,t){j.isList(e)&&j.dispatchKeyDownEvent(e,this.editor,t)}},E=new x("OL","UL"),S={name:"insertOrderedList",order:30,group:"list-style",icon:'<span class="fa fa-list-ol" aria-hidden="true"></span>',attributes:{title:h()("oro.cms.wysiwyg.simple_actions.insert_ordered_list.title")},handlers:{"ordered:sublist:add":function(e){E.processSubList(e,this.editor,!1)},"ordered:sublist:remove":function(e){E.processSubList(e,this.editor,!0)}},result(e){E.processList(e,this.editor)},onKeyDown(e,t){E.isList(e)&&E.dispatchKeyDownEvent(e,this.editor,t)}},k={name:"indent",order:30,group:"indent-level",icon:'<span class="fa fa-indent" aria-hidden="true"></span>',attributes:{title:h()("oro.cms.wysiwyg.simple_actions.indent.title")},result(e){(e=>{const t=(0,v.yz)(e),s=e.selection().getRangeAt(0).commonAncestorContainer,i=(0,v.f$)(s);if(i)return e.execute(`${i}:sublist:add`);let o=(0,v.jk)(s);if(!o){o=e.doc.createElement("P");const i=(0,v.cA)(s,v.CT);i.parentNode.insertBefore(o,i),o.append(i),t()}const r=(0,v.hu)(),n=parseInt(o.style[r]||0)+40;o.style[r]=n+"px"})(e)},state(e,t,s){const i=s.selection();if("None"===i.type)return 0;const o=i.getRangeAt(0).commonAncestorContainer,r=(0,v.f$)(o);return r?(0,v.IJ)(o,s.el).filter((e=>e.tagName===("ordered"===r?"OL":"UL"))).length<x.listDepth?0:-1:void 0}},O={name:"outdent",order:30,group:"indent-level",icon:'<span class="fa fa-outdent" aria-hidden="true"></span>',attributes:{title:h()("oro.cms.wysiwyg.simple_actions.outdent.title")},result(e){(e=>{const t=e.selection().getRangeAt(0).commonAncestorContainer,s=(0,v.f$)(t);if(s)return e.execute(`${s}:sublist:remove`);const i=(0,v.jk)(t);if(!i)return;const o=(0,v.hu)(),r=parseInt(i.style[o]||0)-40;r>0?i.style[o]=r+"px":(i.style.removeProperty(o),i.id&&e.editor.em.get("DomComponents").getById(i.id).setAttributes({style:i.getAttribute("style")}))})(e)},state(e,t,s){const i=s.selection();if("None"===i.type)return 0;const o=i.getRangeAt(0).commonAncestorContainer,r=(0,v.jk)(o),n=(0,v.f$)(o);return n?(0,v.IJ)(o,s.el).filter((e=>e.tagName===("ordered"===n?"OL":"UL"))).length>1?0:-1:r&&r.style[(0,v.hu)()]?0:-1}},T=e=>{const{anchorNode:t,focusNode:s}=e.selection(),i=t?.parentNode,o=s?.parentNode;return(0,v.V$)(e,"SPAN")&&(i.nodeType===Node.ELEMENT_NODE&&"text-style"===i.getAttribute("data-type")||o.nodeType===Node.ELEMENT_NODE&&"text-style"===o.getAttribute("data-type"))},A={name:"wrap",order:20,group:"text-style",icon:'<span class="fa fa-paint-brush" aria-hidden="true"></span>',attributes:{title:h()("oro.cms.wysiwyg.wrap_action.title.default")},result(e){const t=(0,v.yz)(e),s=e.selection(),i=s.getRangeAt(0),o=i.commonAncestorContainer,r=e=>{const t=(0,v.K3)(e,"span",!0);(0,v.oA)(t)};if(T(e))"Caret"===s.type?r(o):"Range"===s.type&&(o.nodeType===Node.TEXT_NODE?r(o):[...o.childNodes].filter((e=>i.intersectsNode(e)&&"SPAN"===e.tagName)).forEach((e=>(0,v.oA)(e)))),e.el.normalize(),t();else{const{anchorNode:t,anchorOffset:r,extentNode:n,extentOffset:a}=s,l=(0,v.K3)(o,v.CT);let c=[];o.childNodes.length&&(c=[...o.childNodes].filter((e=>i.intersectsNode(e)))),l&&o.nodeType===Node.TEXT_NODE&&l.innerText===s.toString()&&(c=[l]);const d=c.length?c.reduce(((e,s,i)=>s.isSameNode(t)&&r>0?e+=0===i?s.nodeValue.slice(r):s.nodeValue.slice(0,r):s.isSameNode(n)&&a>0?e+=0===i?s.nodeValue.slice(a):s.nodeValue.slice(0,a):(e+=s.nodeType===Node.TEXT_NODE?s.nodeValue:s.outerHTML,0!==i&&i!==c.length-1||s.remove(),e)),""):s;e.insertHTML(`<span data-type="text-style" data-gjs-selectable="false">${d}</span>`,{select:!0})}},state(e,t,s){const i=s.selection();if("None"===i.type)return 0;const o=i.getRangeAt(0),r=o.commonAncestorContainer;return"Range"===i.type?[...r.childNodes].filter((e=>o.intersectsNode(e))).some((e=>(0,v.OZ)(e)||(0,v.QP)(e)||(0,v.dz)(e,"span")))?-1:T(s)?1:void 0:T(s)||"Range"===i.type&&o.commonAncestorContainer.nodeType===Node.TEXT_NODE?i&&T(s)?1:0:-1},update({classes:e},{$btn:t,attributes:s}){t.hasClass(e.active)?t.attr({title:h()("oro.cms.wysiwyg.wrap_action.title.active"),"data-original-title":h()("oro.cms.wysiwyg.wrap_action.title.active")}):t.hasClass(e.disabled)?t.attr({title:h()("oro.cms.wysiwyg.wrap_action.title.disabled"),"data-original-title":h()("oro.cms.wysiwyg.wrap_action.title.disabled")}):t.attr({title:s.title,"data-original-title":s.title}),t.tooltip("update")}},N=[...u,S,C,p,_,O,k,A];var I=s("./bundles/oroui/js/extend/underscore.js"),M=s("./bundles/oroui/js/app/views/base/collection-view.js"),L=s.n(M),D=s("../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/orocms/templates/plugins/rte-collection-view-template.html"),$=s.n(D),R=s("./bundles/oroui/js/app/views/base/view.js"),P=s.n(R);const B=P().extend({optionNames:P().prototype.optionNames.concat(["rte","editableEl","actionbar","editor"]),editor:null,editableEl:null,events(){return{[`${this.model.get("event")}`]:"onAction"}},constructor:function e(t){this.selectComponentsDebounced=(0,I.debounce)(this.selectComponents.bind(this)),e.__super__.constructor.call(this,t)},render(){if(!this.elementMounted())return;const{model:e}=this;return this.$el.addClass(e.getClass("button")).attr(e.get("attributes")).attr("data-action-name",e.get("name")).append(e.get("icon")),this.$el.tooltip(),this},dispose(){this.disposed||(this.$el.tooltip("dispose"),this.selectComponentsDebounced.cancel(),B.__super__.dispose.call(this))},onRender(){const e=this.model.get("init"),t=this.model.get("handlers");if(e&&"function"==typeof e&&e(this.getRteParams()),t)for(const[e,s]of Object.entries(t))this.listenTo(this.collection,e,(()=>{s.call(this,this.getRteParams()),this.emitEditableValueChange()}))},getDoc(){return this.editableEl.ownerDocument},elementMounted(){return this.getDoc().body.contains(this.editableEl)},getRteParams(){const e=this.getDoc();return{el:this.editableEl,doc:e,actionbar:this.actionbar,editor:this.editor,classes:this.model.get("classes"),selection(){return this.doc.getSelection()},exec(t,s=null){e.execCommand(t,!1,s)},insertHTML:this.insertHTML.bind(this),execute:this.executeHandler.bind(this)}},executeHandler(e,t){this.collection.trigger(e,t)},insertHTML(e,{select:t}={}){const s=this.getDoc(),i=s.getSelection();if(i&&i.rangeCount){const o=this.editor.Utils.helpers.getModel(this.editableEl),r=s.createElement("div"),n=i.getRangeAt(0);n.deleteContents(),r.innerHTML=e,[...r.childNodes].reverse().forEach((e=>{t&&e.setAttribute("data-temp","add"),n.insertNode(e)})),n.collapse(!0),i.removeAllRanges(),i.addRange(n),t&&(o.once("rte:disable",(()=>{const e=o.find('[data-temp="add"]');e.length&&(e.forEach((e=>{e.set("selectable",!0),e.removeAttributes("data-temp")})),this.selectComponentsDebounced(e))})),o.trigger("disable"))}},selectComponents(e=[]){this.editor.select(e)},onAction(){if(!this.$el.hasClass(this.model.getClass("disabled"))){const e=this.getDoc();this.model.get("result")?(this.model.get("result").call(this,this.getRteParams(),{...this.model.attributes,btn:this.el}),this.emitEditableValueChange()):this.model.get("command")&&e.execCommand(this.model.get("command"),!1,null)}this.disposed||this.updateActiveState()},onKeyDown(e){this.model.get("onKeyDown")&&(this.model.get("onKeyDown").call(this,this.getRteParams(),e),this.emitEditableValueChange())},emitEditableValueChange(){this.editableEl.dispatchEvent(new InputEvent("input",{isComposing:!0})),this.editableEl.focus()},updateActiveState(){const{model:e}=this,t=this.editableEl.ownerDocument,s=e.get("state"),i=e.get("update"),o=e.get("name");if(this.el.className=e.getClass("button"),s)switch(s(this,t,this.getRteParams())){case 1:this.$el.addClass(e.getClass("active"));break;case 0:this.$el.addClass(e.getClass("inactive"));break;case-1:this.$el.addClass(e.getClass("disabled"))}else t.queryCommandSupported(o)&&t.queryCommandState(o)&&this.$el.addClass(e.getClass("active"));i&&"function"==typeof i&&i(this.getRteParams(),{...this.model.attributes,btn:this.el,$btn:this.$el})}}),F=B;var V=s("./bundles/oroui/js/app/models/base/stateful-model.js");const z=s.n(V)().extend({defaults:{content:null,range:null,useOuterHTML:!1},observedAttributes:["content"],constructor:function e(...t){e.__super__.constructor.apply(this,t)},initialize(e={}){const{componentModel:t}=e;t&&(this.listenTo(t.em,"destroy",this.destroy.bind(this)),t.set("stateModel",this)),z.__super__.initialize.call(this,e)},execute(e){switch(e){case z.UNDO:this.undo();break;case z.REDO:this.redo()}},undo(){return!!this.history.setIndex(this.history.get("index")-1)&&this.updateCurrentState()},redo(){return!!this.history.setIndex(this.history.get("index")+1)&&this.updateCurrentState()},updateCurrentState(){const e=this.history.getCurrentState();return this.setState(e.get("data")),e},getState(){return{content:this.get("content"),range:this.get("range")}},setState({content:e,range:t}){e&&this.set({range:t,content:e},{silent:!0})}},{UNDO:"undo",REDO:"redo"}),U=z,q=P().extend({optionNames:["doc","editor"],HISTORY_TIMEOUT:200,events:{input:"onInputDebounced",keydown:"onKeydown"},constructor:function e(...t){this.onInputDebounced=(0,I.debounce)(this.onInput.bind(this),this.HISTORY_TIMEOUT),e.__super__.constructor.apply(this,t)},initialize(e){if(e.el.__cashData){const{model:t}=e.el.__cashData;this.model=new U({componentModel:t,useOuterHTML:t.get("wrapping")})}else this.model=new U;this.model.set("content",this.el.innerHTML),q.__super__.initialize.call(this,e)},dispatchAction:({keyCode:e,metaKey:t,shiftKey:s,ctrlKey:i})=>(i||t)&&90===e?U.UNDO:!!((i||t)&&s&&90===e||(i||t)&&89===e)&&U.REDO,onKeydown(e){const t=this.dispatchAction(e);t&&(e.preventDefault(),e.stopPropagation(),this.model.execute(t),this.syncContent())},syncContent(){const{content:e,range:t}=this.model.getState();this.el.innerHTML=e,(0,v.G)(this.el,t,this.doc)},onInput(){if(this.model.get("content")!==this.$el.html()){const{collapsed:e,startOffset:t,endOffset:s,startContainer:i,endContainer:o,commonAncestorContainer:r}=this.doc.getSelection().getRangeAt(0);this.model.set("range",{collapsed:e,startOffset:t,endOffset:s,startContainer:i.cloneNode(),endContainer:o.cloneNode(),commonAncestorContainer:r.cloneNode()}),this.model.set("content",this.el.innerHTML)}},dispose(){this.disposed||(this.onInputDebounced.cancel(),q.__super__.dispose.call(this))}}),W=q,H=L().extend({optionNames:L().prototype.optionNames.concat(["editableEl","$editableEl","editor"]),$editableEl:null,editor:null,template:$(),itemView:F,observer:null,events:{click:"updateActiveActions"},constructor:function e(t){this.spansToRemove=[],this.spansToSave=[],e.__super__.constructor.call(this,t)},initialize(e){H.__super__.initialize.call(this,e),this.spansToSave=this.$editableEl[0].querySelectorAll("span"),this.doc=this.editableEl.ownerDocument,this.subview("rteState",new W({el:this.$editableEl[0],doc:this.doc,editor:this.editor}))},delegateEvents(e){return H.__super__.delegateEvents.call(this,e),this.$editableEl.on(`mouseup${this.eventNamespace()} keyup${this.eventNamespace()}`,this.updateActiveActions.bind(this)),this.observer=new MutationObserver(this.onDOMMutation.bind(this)),this.observer.observe(this.editableEl,{childList:!0,subtree:!0}),this},undelegateEvents(){return this.observer&&this.observer.disconnect(),H.__super__.undelegateEvents.call(this),this.$editableEl.off(this.eventNamespace()),this},onDOMMutation(e){for(const t of e){const e=[...t.addedNodes].filter((e=>{const t=![...this.spansToSave].find((t=>t.isEqualNode(e)));return e.nodeType===Node.ELEMENT_NODE&&"SPAN"===e.tagName&&t&&"text-style"!==e.getAttribute("data-gjs-type")&&!(0,v.OZ)(e.parentNode)}));"childList"===t.type&&e.length&&this.spansToRemove.push(...e)}},getTemplateData(){const e=H.__super__.getTemplateData.call(this);return e.groups=(0,I.uniq)(this.collection.pluck("group")),e},initItemView(e){if(this.itemView)return new this.itemView({autoRender:!1,actionbar:this.el,editableEl:this.editableEl,$editableEl:this.$editableEl,editor:this.editor,model:e,collection:this});throw new Error("The CollectionView#itemView property must be defined or the initItemView() must be overridden.")},insertView(e,t,...s){return this.$list=this.$(`[data-group-by="${t.model.get("group")}"]`),H.__super__.insertView.apply(this,[e,t,...s])},renderAllItems(){const e=H.__super__.renderAllItems.call(this);return this.$list=this.$el,(0,I.invoke)(this.subviews,"onRender"),e},updateActiveActions(){(0,I.invoke)(this.subviews,"updateActiveState")},dispose(){this.disposed||(this.spansToRemove.forEach((e=>e.replaceWith(...e.childNodes))),this.spansToSave=[],this.spansToRemove=[],this.editableEl.normalize(),H.__super__.dispose.call(this),this.editor.trigger("rte:disable"))},focus(){this.$el.focus()},blur(){this.$el.blur()},emitEvent(e){"keydown"===e.type&&(0,I.invoke)(this.subviews,"onKeyDown",e)}}),K=H;function J(e){let t=[];if(e)for(const s of[...e.childNodes])s.nodeType===Node.TEXT_NODE?t.push(s):t=t.concat(J(s));return t}function X(e,t){const s=t.createRange(),i=J(e)[0];i&&s.selectNodeContents(i);const o=t.getSelection();o.removeAllRanges(),o.addRange(s)}const Y=o().extend({constructor:function e(...t){e.__super__.constructor.apply(this,t)},initialize({editor:e,...t}){this.editor=e;const{RichTextEditor:s}=this.editor;this.collection=new c(N,{rte:s}),this.listenTo(this.editor,"destroy",this.onDestroy.bind(this)),this.removeDefaultAllActions(),this.defineRteEditor(),Y.__super__.initialize.apply(this,t)},removeDefaultAllActions(){const{RichTextEditor:e}=this.editor;for(const{name:t}of[...e.actions])e.remove(t)},defineRteEditor(){const{RichTextEditor:e,Canvas:t,$:s}=this.editor,i=this;this.editor.setCustomRte({enable(o,r){return r&&!r.disposed?(this.focus(o,r),r):(o.contentEditable=!0,r=i.view=new K({el:e.actionbar,editableEl:o,$editableEl:s(o),editor:i.editor,doc:t.getDocument(),collection:i.collection}),this.focus(o,r),r)},disable(e,t){e.contentEditable=!1,t&&!t.disposed&&t.dispose()},focus(e,t){t&&t.disposed||(e.contentEditable=!0,t&&t.focus(),X(e,t.doc),t.updateActiveActions(),i.editor.trigger("change:canvasOffset"))},toggleVisibility(e=!0){i.view.$el.parent().css("visibility",e?"hidden":"")}})},addAction(e){this.collection.add(e)},removeAction(e){const t=this.collection.findWhere({name:e});t&&this.collection.remove(t)},onDestroy(){this.view&&this.view.dispose(),this.collection.dispose(),delete this.view,delete this.collection,delete this.editor,this.dispose()}}),G=e=>{const{UndoManager:t}=e,s=(e,t,{useOuterHTML:s=!1,selected:i=!1,sync:o=!0,...r}={})=>{const{editor:n}=e;if(s){const s=e.get("stateModel"),[o]=e.replaceWith(t,{updateStyle:!1});return o.set("stateModel",s),void(i&&n.select([o]))}e.components(t,r),i&&n.select([e]),o&&"function"==typeof e.syncContent()&&e.syncContent()},i=t.undo,o=t.redo;e.on("component:selected",((e,t)=>{t.wrapping&&e.get("stateModel")&&e.get("stateModel").set("useOuterHTML",!0),t.fromLayers&&t.useValid&&e.unset("stateModel")})),e.on("component:mount",(s=>{const i=s.parent(),[o,...r]=i.components().filter((({ccid:e})=>e===s.ccid||s.ccid.startsWith(e))).reverse();if(r.length&&t.skip((()=>{const e=r[0].getId();r.forEach((e=>e.remove())),o.setId(e)})),i.get("wrapping")){const o=i.index(),r=i.collection.at(o-1);s.ccid.startsWith(r.ccid)&&t.skip((()=>{i.remove(),e.select(r)}))}})),e.once("destroy",(()=>{e.off("component:selected"),e.off("component:mount")})),t.undo=function(...o){const r=e.getSelected();if(r&&r.get("stateModel")){const n=r.get("stateModel");return n.undo()?t.skip((()=>s(r,n.getState().content,{useOuterHTML:n.get("useOuterHTML"),selected:!0}))):(t.skip((()=>e.selectRemove(r))),i.apply(this,o))}return i.apply(this,o)},t.redo=function(...i){const r=e.getSelected();if(r&&r.get("stateModel")){const n=r.get("stateModel");return n.redo()?t.skip((()=>s(r,n.getState().content,{useOuterHTML:n.get("useOuterHTML"),selected:!0}))):(t.skip((()=>e.selectRemove(r))),o.apply(this,i))}return o.apply(this,i)},e.RteEditor=new Y({editor:e})}},"./bundles/orocms/js/app/validator/wysiwyg-style.js":(e,t,s)=>{var i;void 0===(i=function(){"use strict";const e=s("./bundles/orotranslation/js/translator.js"),t=s("./bundles/oroui/js/extend/jquery.js");return["Oro\\Bundle\\CMSBundle\\Validator\\Constraints\\WYSIWYGStyle",function(e,s){const i=t(s).data("wysiwyg:validation");return!i||!i.contentValidate().length},function({message:s},i){const o=t(i).data("wysiwyg:validation");if(!o)return!0;const r=o.contentValidate();return r.length?e(s,{errorsList:r.join(", ")}):void 0}]}.call(t,s,t,e))||(e.exports=i)},"./bundles/orocms/js/app/validator/wysiwyg.js":(e,t,s)=>{var i;void 0===(i=function(){"use strict";const e=s("./bundles/orotranslation/js/translator.js"),t=s("./bundles/oroui/js/extend/jquery.js");return["Oro\\Bundle\\CMSBundle\\Validator\\Constraints\\WYSIWYG",function(e,s){const i=t(s).data("wysiwyg:validation");return!i||!i.restrictionValidate().length},function({message:s},i){const o=t(i).data("wysiwyg:validation");if(!o)return!0;const r=o.restrictionValidate();return r.length?e(s,{errorsList:r.join(", ")}):void 0}]}.call(t,s,t,e))||(e.exports=i)},"./bundles/orocms/js/app/views/content-widget-view.js":(e,t,s)=>{var i,o;i=[s("./bundles/oroui/js/extend/jquery.js"),s("./bundles/oroui/js/extend/backbone.js"),s("./bundles/oroui/js/extend/underscore.js"),s("./bundles/orotranslation/js/translator.js"),s("./bundles/oroui/js/mediator.js"),s("./bundles/oroui/js/delete-confirmation.js")],void 0===(o=function(e,t,s,i,o,r){"use strict";return t.View.extend({options:{updateMarker:"formUpdateMarker",formSelector:null,typeSelector:null,fieldsSets:[]},requiredOptions:["formSelector","typeSelector"],constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(t){const i=this.requiredOptions.filter((function(e){return s.isUndefined(t[e])}));if(i.length)throw new TypeError("Missing required option(s): "+i.join(","));this.options=s.defaults(t||{},this.options),e(this.options.typeSelector).on("change",this.changeHandler.bind(this)),this.memoizeValue(this.options.typeSelector)},changeHandler:function(t){const s=e(t.currentTarget);if(!0===s.data("cancelled"))s.data("cancelled",!1);else{const e=s.data("current");if(this.isEmpty())this.processChange(s);else{const t=new r({title:i("oro.cms.change_type.confirmation.title"),okText:i("Yes"),content:i("oro.cms.change_type.confirmation.body")});t.on("ok",(()=>{this.processChange(s)})),t.on("cancel",(()=>{s.data("cancelled",!0).val(e).trigger("change"),this.memoizeValue(s)})),t.open()}}},processChange:function(t){this.memoizeValue(t);const i=e(this.options.formSelector),r=i.attr("action"),n=this.options.fieldsSets,a=s.filter(i.serializeArray(),(function(e){return-1!==s.indexOf(n,e.name)}));a.push({name:this.options.updateMarker,value:t.attr("name")}),o.execute("submitPage",{url:r,type:i.attr("method"),data:e.param(a)})},isEmpty:function(){const t=this.options.fieldsSets;return!e(this.options.formSelector).find('input[type="text"],textarea').filter((function(){return this.name&&-1===s.indexOf(t,this.name)&&""!==this.value})).length},memoizeValue:function(t){const s=e(t);s.data("current",s.val())}})}.apply(t,i))||(e.exports=o)},"./bundles/orocms/js/app/views/default-variant-collection-view.js":(e,t,s)=>{var i;void 0===(i=function(e){"use strict";const t=s("./bundles/oroui/js/app/views/base/view.js"),i=s("./bundles/oroui/js/extend/underscore.js"),o=s("./bundles/oroui/js/extend/jquery.js"),r=t.extend({$collection:null,options:{defaultSelector:'[name$="[default]"]',itemSelector:'[data-role="content-variant-item"]',itemContent:'[name$="[content]"]',activeItemSelector:".content-variant-item-content.show",defaultItemClass:"content-variant-item-default",defaultItemCollapseSelector:".content-variant-item-default .collapse"},events(){return{[`shown.bs.collapse ${this.options.itemSelector}`]:"handleToggleCollapse",[`hide.bs.collapse ${this.options.itemSelector}`]:"handleToggleCollapse",[`click ${this.options.defaultSelector}`]:e=>this.onDefaultChange(o(e.target))}},listen:{"cms:content-variant-collection:add mediator":"handleChange","cms:content-variant-collection:remove mediator":"handleChange"},constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){this.options=o.extend(!0,{},this.options,e||{}),this.handleChange(),this.enableActiveItem(),this.handleToggleCollapse=i.debounce(this.handleToggleCollapse,300),r.__super__.initialize.call(this,e)},handleToggleCollapse(e){"bs.collapse"===e.namespace&&o(e.currentTarget).find(this.options.itemContent).trigger("hide"===e.type?"wysiwyg:disable":"wysiwyg:enable")},handleChange(){this.$el.find(this.options.itemSelector).length&&0===this.$el.find(this.options.defaultSelector+":checked").length&&this.checkDefaultVariant()},checkDefaultVariant:function(){const e=this.$el.find(this.options.defaultSelector+":not(:checked)").first();e.prop("checked",!0).trigger("change"),this.onDefaultChange(e)},onDefaultChange:function(e){this.$el.find("."+this.options.defaultItemClass).removeClass(this.options.defaultItemClass),e.closest(this.options.itemSelector).addClass(this.options.defaultItemClass)},enableActiveItem(){const e=this.$el.find(this.options.activeItemSelector);e.length&&e.find(this.options.itemContent).trigger("wysiwyg:enable")}});return r}.call(t,s,t,e))||(e.exports=i)},"./bundles/orocms/js/app/views/variants-collection-view.js":(e,t,s)=>{var i;void 0===(i=function(e){"use strict";const t=s("./bundles/oroform/js/app/views/fields-groups-collection-view.js"),i=s("./bundles/oroui/js/mediator.js"),o=s("./bundles/oroui/js/extend/jquery.js"),r=t.extend({PRIMARY_FILED_SELECTOR:'[name$="[default]"]',options:{form:"oro_cms_content_block"},events:{'click [name$="[default]"]':"onPrimaryClick","change >*":"onChangeInFiledGroup",'shown.bs.collapse [data-role="content-variant-item"]':"scrollToFirstError"},constructor:function e(t){e.__super__.constructor.call(this,t)},initialize:function(e){r.__super__.initialize.call(this,e),this.listenToOnce(i,"page:afterChange",this.validateContainer)},validateContainer:function(){o(`form[name="${this.options.form}"]`).find(".validation-failed").each((function(e,t){const s=o(t.closest(".content-variant-item-content"));s.removeAttr("data-parent"),s.collapse("show")}))},scrollToFirstError:function(){const e=o(`form[name="${this.options.form}"]`).find(".validation-failed:first");if(e.length){const t=e.closest(".scrollable-container"),s=80,i=e.offset().top-t.offset().top-s;t.animate({scrollTop:i},i/2)}}});return r}.call(t,s,t,e))||(e.exports=i)},"./bundles/oroui/js/app/models/base/stateful-model.js":(e,t,s)=>{var i;void 0===(i=function(e){"use strict";const t=s("./bundles/oroui/js/extend/underscore.js"),i=s("./bundles/oroui/js/extend/backbone.js"),o=s("./bundles/oroui/js/app/models/base/model.js"),r=s("./bundles/oroui/js/app/models/history-model.js"),n=s("./bundles/oroui/js/app/models/history-state-model.js"),a=o.extend({constructor:function e(t,s){e.__super__.constructor.call(this,t,s)},initialize:function(e,s){const i={};a.__super__.initialize.call(this,e,s),"MAX_HISTORY_LENGTH"in this&&(i.maxLength=this.MAX_HISTORY_LENGTH),this.history=new r({},i),this.boundEvents=[],this.debouncedOnStateChange=t.debounce(this.onStateChange.bind(this),50),this.bindEvents()},destroy:function(){a.__super__.destroy.call(this),this.unbindEvents()},bindEvents:function(){"observedAttributes"in this?t.each(this.observedAttributes,(function(e){const t=this.get(e);if(t instanceof i.Collection){const s="change add remove";t.on(s,this.debouncedOnStateChange,this),this.on("change:"+e,(function(e,i){t.off(s,this.debouncedOnStateChange,this),i.on(s,this.debouncedOnStateChange,this)}),this)}else this.on("change:"+e,this.debouncedOnStateChange,this)}),this):this.on("change",this.debouncedOnStateChange,this)},unbindEvents:function(){"observedAttributes"in this?t.each(this.observedAttributes,(function(e){const t=this.get(e);t instanceof i.Collection?(t.off("change add remove",this.debouncedOnStateChange,this),this.off("change:"+e,null,this)):this.off("change:"+e,this.debouncedOnStateChange,this)}),this):this.off("change",this.debouncedOnStateChange,this)},onStateChange:function(){const e=new n({data:this.getState()});this.history.pushState(e)},getState:function(){throw new Error("Method getState should be defined in a inherited class.")},setState:function(){throw new Error("Method getState should be defined in a inherited class.")}});return a}.call(t,s,t,e))||(e.exports=i)},"./bundles/oroui/js/app/models/history-model.js":(e,t,s)=>{var i;void 0===(i=function(e){"use strict";const t=s("./bundles/oroui/js/extend/underscore.js"),i=s("./bundles/oroui/js/app/models/base/model.js"),o=s("./bundles/oroui/js/app/models/history-state-collection.js");return i.extend({defaults:{states:null,index:-1},constructor:function e(t,s){e.__super__.constructor.call(this,t,s)},initialize:function(e,s){this.options=t.defaults({},s,{maxLength:64}),this.set("states",new o),this.set("index",-1)},pushState:function(e){const t=this.get("states"),s=this.get("index");t.length>s+1&&t.reset(t.first(s+1)),t.length>=this.options.maxLength&&t.reset(t.last(this.options.maxLength-1)),t.add(e),this.set("index",t.length-1)},getCurrentState:function(){return this.get("states").at(this.get("index"))},setIndex:function(e){if(e>=0&&e<this.get("states").length)return this.set("index",e),!0}})}.call(t,s,t,e))||(e.exports=i)},"./bundles/oroui/js/app/models/history-state-collection.js":(e,t,s)=>{var i;void 0===(i=function(e){"use strict";const t=s("./bundles/oroui/js/app/models/history-state-model.js");return s("./bundles/oroui/js/app/models/base/collection.js").extend({model:t,constructor:function e(...t){e.__super__.constructor.apply(this,t)}})}.call(t,s,t,e))||(e.exports=i)},"./bundles/oroui/js/app/models/history-state-model.js":(e,t,s)=>{var i;void 0===(i=function(e){"use strict";return s("./bundles/oroui/js/app/models/base/model.js").extend({constructor:function e(t,s){e.__super__.constructor.call(this,t,s)},defaults:function(){return{data:{}}}})}.call(t,s,t,e))||(e.exports=i)}}]);