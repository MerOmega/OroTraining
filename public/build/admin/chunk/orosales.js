(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[129],{"../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/orodatagrid/templates/board/card-view.html":(module,__unused_webpack_exports,__webpack_require__)=>{var _=__webpack_require__("./bundles/oroui/js/extend/underscore.js");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="<span>\n    Generic card\n    ",console&&console.warn&&console.warn("Please configure `card_view` in datagrid board configuration"),__p+="\n</span>\n";return __p}},"../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/orosales/templates/board/opportunity-card-view.html":(module,__unused_webpack_exports,__webpack_require__)=>{var _=__webpack_require__("./bundles/oroui/js/extend/underscore.js");module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="card-actions" data-placeholder-for="actions"></div>\n<div class="card-title"><a href="'+(null==(__t=view_link)?"":_.escape(__t))+'" data-action="navigate" title="'+(null==(__t=name)?"":_.escape(__t))+'">'+(null==(__t=name)?"":_.escape(__t))+'</a></div>\n<div class="card-amount">',null!==budgetAmount?__p+=""+(null==(__t=numberFormatter.formatCurrency(budgetAmount,budgetCurrency))?"":_.escape(__t)):__p+="&nbsp;",__p+='</div>\n<div class="card-probability">',null!==probability?__p+=""+(null==(__t=numberFormatter.formatPercent(probability))?"":_.escape(__t)):__p+="&nbsp;",__p+='</div>\n<div class="card-additional">\n    <div class="card-additional-line">',accountName?__p+=""+(null==(__t=accountName)?"":_.escape(__t)):__p+="&nbsp;",__p+='</div>\n    <div class="card-additional-line">',contactName?__p+=""+(null==(__t=contactName)?"":_.escape(__t)):__p+="&nbsp;",__p+='</div>\n</div>\n<div class="card-date">'+(null==(__t=datetimeFormatter.formatDate(updatedAt))?"":_.escape(__t))+"</div>\n";return __p}},"./bundles/orodatagrid/js/app/views/board/card-view.js":(t,e,i)=>{var s;void 0===(s=function(t){"use strict";const e=i("./bundles/oroui/js/app/views/base/view.js"),s=i("./bundles/orolocale/js/formatter/number.js"),o=i("./bundles/orolocale/js/formatter/datetime.js"),n=i("./bundles/oroui/js/tools/scroll-helper.js"),r=i("./bundles/orodatagrid/js/app/views/grid/actions-view.js"),a=e.extend({className:"card-view",cardActionsElementSelector:'[data-placeholder-for="actions"]',template:i("../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/orodatagrid/templates/board/card-view.html"),keepElement:!1,earlyTransitionStatusChangeTimeout:2e3,events:{'click [data-action="navigate"]':"navigate"},listen:{"change model":"render"},constructor:function t(e){t.__super__.constructor.call(this,e)},initialize:function(t){a.__super__.initialize.call(this,t),this.readonly=t.readonly,this.datagrid=t.datagrid,this.actions=t.actions,this.actionOptions=t.actionOptions,t.earlyTransitionStatusChangeTimeout&&(this.earlyTransitionStatusChangeTimeout=t.earlyTransitionStatusChangeTimeout)},getTemplateData:function(){const t=a.__super__.getTemplateData.call(this);return t.numberFormatter=s,t.datetimeFormatter=o,t.readonly=this.readonly,t},render:function(){a.__super__.render.call(this),this.$el.attr({"data-transition-status":this.model.get("transitionStatus"),"data-readonly":this.readonly}),this.trackErrorTransitionStatus(),this.trackEarlyTransitionStatusChange(),this.model?(this.$el.removeAttr("data-non-valid"),this.$el.data({model:this.model})):this.$el.attr("data-non-valid",""),this.renderCardActionsDropdown(this.cardActionsElementSelector)},trackErrorTransitionStatus:function(){"error"===this.model.get("transitionStatus")?this.scrolledToErrorCard||(n.scrollIntoView(this.el,void 0,20,20),this.scrolledToErrorCard=!0):delete this.scrolledToErrorCard},trackEarlyTransitionStatusChange:function(){const t=this.$el;if(t.removeClass("transition-status-just-changed"),clearTimeout(this.transitionStatusUpdateTimeout),!this.model.get("transitionStatusUpdateTime"))return;const e=(new Date).getTime(),i=this.model.get("transitionStatusUpdateTime").getTime(),s=this.earlyTransitionStatusChangeTimeout-(e-i);s>0&&(t.addClass("transition-status-just-changed"),this.transitionStatusUpdateTimeout=setTimeout((function(){t.removeClass("transition-status-just-changed")}),s))},navigate:function(t){t.preventDefault(),this.trigger("navigate",this.model,{doExecute:!0})},renderCardActionsDropdown:function(t){const e=this.$(t);e.length&&(this.cardActionsView?this.cardActionsView.setElement(e):this.cardActionsView=new r({el:e,actions:this.actions,model:this.model,actionConfiguration:this.model.get("action_configuration"),datagrid:this.datagrid,actionOptions:this.actionOptions,showCloseButton:!1}),this.cardActionsView.render())}});return a}.call(e,i,e,t))||(t.exports=s)},"./bundles/orodatagrid/js/app/views/grid/actions-view.js":(t,e,i)=>{var s;void 0===(s=function(t){"use strict";const e=i("./bundles/oroui/js/extend/jquery.js"),s=i("./bundles/oroui/js/extend/underscore.js"),o=i("./bundles/orotranslation/js/translator.js"),n=i("./bundles/oroui/js/app/views/base/view.js"),r=i("./bundles/oroui/js/tools.js"),a=n.extend({actions:void 0,actionsHideCount:3,launchers:void 0,showCloseButton:!1,baseMarkup:s.template('<div class="more-bar-holder"><div class="dropleft"><a class="dropdown-toggle" href="#" role="button" id="<%- togglerId %>" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" aria-label="<%- label %>"><span class="icon fa-ellipsis-h" aria-hidden="true"></span></a><ul class="dropdown-menu dropdown-menu__action-cell launchers-dropdown-menu" aria-labelledby="<%- togglerId %>"></ul></div></div>'),simpleBaseMarkup:s.template('<div class="more-bar-holder action-row"></div>'),closeButtonTemplate:s.template('<li class="dropdown-close"><i class="fa-close hide-text">'+o("Close")+"</i></li>"),launchersContainerSelector:".launchers-dropdown-menu",launchersListTemplate:s.template('<% if (withIcons) { %><li><ul class="launchers-list"></ul></li><% } else { %><li class="well-small"><ul class="list-unstyled launchers-list"></ul></li><% } %>'),simpleLaunchersListTemplate:s.template('<% if (withIcons) { %><ul class="launchers-list"></ul><% } else { %><ul class="list-unstyled launchers-list"></ul><% } %>'),launcherItemTemplate:s.template('<li class="launcher-item"></li>'),events:function(){const t={click:"_showDropdown","click .dropdown-close .fa-close":"_hideDropdown"};return r.isTouchDevice()||(t["mouseover .dropdown-toggle"]="_showDropdown",t["mouseleave .dropleft.show"]="_hideDropdown"),t},constructor:function t(e){t.__super__.constructor.call(this,e)},initialize:function(t){const e=t||{};this.subviews=[],s.isEmpty(e.actionsHideCount)||(this.actionsHideCount=e.actionsHideCount),this.showCloseButton=e.showCloseButton,a.__super__.initialize.call(this,t),this.actions=this.createActions(e),s.each(this.actions,(function(t){this.listenTo(t,"preExecute",this.onActionRun)}),this),this.subviews.push(...this.actions)},dispose:function(){this.disposed||(delete this.actions,delete this.column,a.__super__.dispose.call(this))},onActionRun:function(t){this.$('.show > [data-toggle="dropdown"]').trigger("tohide.bs.dropdown")},createActions:function(t){const e=[],i=t.actions,o=t.actionConfiguration;return s.each(i,(function(i,s){o&&!1===o[s]||e.push(this.createAction(i,t))}),this),e},isEmpty:function(){return!this.actions.length},createAction:function(t,e){return new t(s.extend({model:e.model,datagrid:e.datagrid},e.actionOptions))},createLaunchers:function(){return s.map(this.actions,(function(t){return t.createLauncher({})}),this)},render:function(){let t=!1;return s.isEmpty(this.actions)?(this.$el.empty(),this):(this.actions.length<this.actionsHideCount&&(t=!0,this.baseMarkup=this.simpleBaseMarkup,this.launchersListTemplate=this.simpleLaunchersListTemplate,this.launchersContainerSelector=".more-bar-holder"),this.$el.html(this.baseMarkup(this.getTemplateData())),this.isLauncherListFilled=!1,t&&this.fillLauncherList(),this)},getTemplateData:function(){return{togglerId:"actions-view-dropdown-"+this.cid,label:o("oro.datagrid.card_actions.label")}},fillLauncherList:function(){if(!this.isLauncherListFilled){this.isLauncherListFilled=!0;const t=this.createLaunchers(),e=this.getLaunchersByIcons(t),i=this.$(this.launchersContainerSelector);this.showCloseButton&&t.length>=this.actionsHideCount&&i.append(this.closeButtonTemplate()),e.withIcons.length&&this.renderLaunchersList(e.withIcons,{withIcons:!0}).appendTo(i),e.withIcons.length&&e.withoutIcons.length&&i.append('<li class="divider"></li>'),e.withoutIcons.length&&this.renderLaunchersList(e.withoutIcons,{withIcons:!1}).appendTo(i)}},renderLaunchersList:function(t,i){i=i||{};const o=e(this.launchersListTemplate(i)),n=o.filter(".launchers-list").length?o:e(".launchers-list",o);return s.each(t,(function(t){n.append(this.renderLauncherItem(t))}),this),o},renderLauncherItem:function(t,i){i=i||{};const s=e(this.launcherItemTemplate(i)),o=s.filter(".launcher-item").length?s:e(".launcher-item",s);o.append(t.render().$el);const n="mode-"+t.launcherMode;return o.addClass(n),s},getLaunchersByIcons:function(t){const e={withIcons:[],withoutIcons:[]};return s.each(t,(function(t){t.icon?e.withIcons.push(t):e.withoutIcons.push(t)}),this),e},_showDropdown:function(t){this.fillLauncherList(),this.$('[data-toggle="dropdown"]').parent().hasClass("show")||this.$('[data-toggle="dropdown"]').dropdown("toggle"),t.stopPropagation()},_hideDropdown:function(t){this.$('[data-toggle="dropdown"]').parent().hasClass("show")&&this.$('[data-toggle="dropdown"]').dropdown("toggle"),t.stopPropagation()}});return a}.call(e,i,e,t))||(t.exports=s)},"./bundles/orosales/js/app/components/customer-component.js":(t,e,i)=>{var s;void 0===(s=function(t){"use strict";const e=i("./bundles/oroui/js/extend/underscore.js"),s=i("./bundles/oroui/js/tools.js"),o=i("./bundles/oroui/js/mediator.js"),n=i("./bundles/oroui/js/app/components/base/component.js"),r=i("./bundles/orosales/js/app/views/create-customer-view.js"),a=n.extend({views:[],$el:null,inputSelector:null,requiredOptions:["inputSelector","customerSelector"],constructor:function t(e){t.__super__.constructor.call(this,e)},initialize:function(t){e.each(this.requiredOptions,(function(i){if(!e.has(t,i))throw new Error('Required option "'+i+'" not found.')})),this.inputSelector=t.inputSelector,this.$el=t._sourceElement,o.on("customer-dialog:select",this.onCustomerDialogSelect,this),o.on("widget_registration:customer-dialog",this.onCustomerDialogInit,this);const i=this.$el.find(t.customerSelector);e.each(i,(function(t){this.views.push(new r({el:t,inputSelector:this.inputSelector}))}),this)},onCustomerDialogInit:function(t){let i=this.$el.find(this.inputSelector).data("select2_query_additional_params")||{};t.options.routeParams=i;let o=t.options.url;const n=o.substring(0,o.indexOf("?")),r=s.unpackFromQueryString(o.substring(o.indexOf("?"),o.length));e.isEmpty(i)||(i=e.extend({},r,{params:i},i),o=n||o+"?"+s.packToQueryString(i),t.options.url=o)},onCustomerDialogSelect:function(t){const e=this.$el.find(this.inputSelector);e.inputWidget("val",t,!0),e.inputWidget("focus")},dispose:function(){this.disposed||(o.off("customer-dialog:select",this.onCustomerSelect,this),a.__super__.dispose.call(this))}});return a}.call(e,i,e,t))||(t.exports=s)},"./bundles/orosales/js/app/views/account-multicustomer-view.js":(t,e,i)=>{var s;void 0===(s=function(t){"use strict";const e=i("./bundles/oroui/js/extend/underscore.js"),s=i("./bundles/oroui/js/extend/jquery.js"),o=i("./bundles/oroui/js/app/views/base/view.js").extend({activeTab:null,customerType:"sales_b2bcustomer",useChannel:!0,events:{"shown.bs.tab .tab-content":"onTabShown","shown.bs.tab >.oro-tabs>ul":"onCustomerShown"},listen:{"customer-info-widget:init mediator":function(t,e){0!==this.$(e.container||e.el).length&&t.setActiveTab(this.activeTab)}},constructor:function t(e){t.__super__.constructor.call(this,e)},initialize:function(t){e.extend(this,e.pick(t,["customerType","useChannel"])),o.__super__.initialize.call(this,t)},onTabShown:function(t){const i=this.$(t.target).data("target"),s=this.makeTargetRegExp("(.*)");this.activeTab=e.result(i.match(s),1,null)},onCustomerShown:function(t){if(this.activeTab){const t=this.makeTargetRegExp(this.activeTab),e=this.$("a[data-target]:visible").filter((function(){return t.test(s(this).data("target"))}));1!==e.length||e.parent().hasClass("active")||e.click()}},makeTargetRegExp:function(t){let e="#oro_"+this.customerType+"_"+t+"_customer_\\d+";return this.useChannel&&(e+="_channel_\\d+"),new RegExp(e)}});return o}.call(e,i,e,t))||(t.exports=s)},"./bundles/orosales/js/app/views/board/opportunity-card-view.js":(t,e,i)=>{var s;void 0===(s=function(t){"use strict";const e=i("./bundles/orodatagrid/js/app/views/board/card-view.js"),s=i("./bundles/orocurrency/js/formatter/multi-currency.js"),o=e.extend({className:"opportunity-card-view card-view",template:i("../node_modules/@oroinc/oro-webpack-config-builder/loader/tpl-loader.js!./bundles/orosales/templates/board/opportunity-card-view.html"),constructor:function t(e){t.__super__.constructor.call(this,e)},getTemplateData:function(){const t=o.__super__.getTemplateData.call(this),e=s.unformatMultiCurrency(t.budgetAmount);return t.budgetAmount=e.amount,t.budgetCurrency=e.currency,t}});return o}.call(e,i,e,t))||(t.exports=s)},"./bundles/orosales/js/app/views/create-customer-view.js":(t,e,i)=>{var s;void 0===(s=function(t){"use strict";const e=i("./bundles/oroui/js/extend/underscore.js"),s=i("./bundles/orotranslation/js/translator.js"),o=i("./bundles/oroui/js/mediator.js"),n=i("./bundles/fosjsrouting/js/router.js"),r=i("./bundles/orowindows/js/widget/dialog-widget.js"),a=i("./bundles/oroui/js/app/views/base/view.js").extend({events:{"click button":"onCreate"},dialogWidget:null,constructor:function t(e){t.__super__.constructor.call(this,e)},initialize:function(t){a.__super__.initialize.call(this,t),this.options=e.defaults(t||{},this.options)},onCreate:function(){const t=this.$("[data-customer]").data("customer"),e=this.$el.parents().find(this.options.inputSelector).data("select2_query_additional_params")||{};this.dialogWidget=new r({title:s("Create {{ entity }}",{entity:this.$el.text()}),url:n.generate(t.routeCreate,e),stateEnabled:!1,incrementalPosition:!0,dialogOptions:{modal:!0,allowMaximize:!0,width:1280,height:650}}),this.dialogWidget.once("formSave",(e=>{this.dialogWidget.remove(),this.dialogWidget=null,o.trigger("customer-dialog:select",JSON.stringify({entityClass:t.className,entityId:e}))})),this.dialogWidget.render()}});return a}.call(e,i,e,t))||(t.exports=s)},"./bundles/orosales/js/app/views/opportunity-status-select-view.js":(t,e,i)=>{var s;void 0===(s=function(t){"use strict";const e=i("./bundles/oroui/js/extend/underscore.js"),s=i("./bundles/oroui/js/app/views/base/view.js").extend({constructor:function t(e){t.__super__.constructor.call(this,e)},initialize:function(t){s.__super__.initialize.call(this,t),this.options=e.defaults(t||{},this.options),this.render()},render:function(){this.initLayout().then(this.afterLayoutInit.bind(this))},afterLayoutInit:function(){const t=this.$('select[data-name="field__status"]'),e=this.$('input[data-name="field__probability"]'),i=t.data("probabilities");let s=!1;i.hasOwnProperty(t.val())&&parseFloat(i[t.val()])===parseFloat(e.val())&&(s=!0),e.on("change",(function(t){s=!1})),t.on("change",(function(o){const n=t.val();s&&i.hasOwnProperty(n)&&e.val(i[n])}))}});return s}.call(e,i,e,t))||(t.exports=s)},"./bundles/orosales/js/app/views/update-page-view.js":(t,e,i)=>{var s;void 0===(s=function(t){"use strict";const e=i("./bundles/oroui/js/extend/underscore.js"),s=i("./bundles/oroui/js/app/views/base/view.js").extend({constructor:function t(e){t.__super__.constructor.call(this,e)},initialize:function(t){s.__super__.initialize.call(this,t),this.options=e.defaults(t||{},this.options),this.render()},render:function(){this.initLayout().then(this.afterLayoutInit.bind(this))},afterLayoutInit:function(){const t=this.pageComponent("oro_sales_opportunity_form_status").view.$el,e=this.$('input[data-name="field__probability"]:enabled'),i=t.data("probabilities");let s=!1;0!==e.length&&(i.hasOwnProperty(t.val())&&parseFloat(i[t.val()])===parseFloat(e.val())&&(s=!0),e.on("change",(function(t){s=!1})),t.on("change",(function(o){const n=t.val();s&&i.hasOwnProperty(n)&&e.val(i[n])})))}});return s}.call(e,i,e,t))||(t.exports=s)},"./bundles/oroshipping/js/app/components/product-shipping-freight-classes-component.js":(t,e,i)=>{var s;void 0===(s=function(t){"use strict";const e=i("./bundles/oroui/js/extend/jquery.js"),s=i("./bundles/oroui/js/extend/underscore.js"),o=i("./bundles/oroui/js/app/components/base/component.js"),n=i("./bundles/oroui/js/app/views/loading-mask-view.js"),r=i("./bundles/fosjsrouting/js/router.js"),a=i("./bundles/orotranslation/js/translator.js"),l=o.extend({options:{routeFreightClassUpdate:"oro_shipping_freight_classes",errorMessage:"Sorry, an unexpected error has occurred.",triggerTimeout:1500,activeUnitCodeParam:"activeUnitCode",excludeFields:["descriptions","shortDescriptions","prices"],excludeFilter:':not([name^="oro_product[{{name}}]"])',selectors:{itemContainer:"tr.list-item",unitSelect:'select[name^="oro_product[product_shipping_options]"][name$="[productUnit]"]',freightClassSelector:".freight-class-select",freightClassUpdateSelector:'input, select:not(".freight-class-select")'}},loadingMaskView:null,$freightClassesSelect:null,timeoutId:null,constructor:function t(e){t.__super__.constructor.call(this,e)},initialize:function(t){this.options=e.extend(!0,{},this.options,t||{}),this.initializeListener()},initializeListener:function(){this.listenerOff(),this.listenerOn()},listenerOff:function(){this.options._sourceElement.off("change",this.options.selectors.freightClassUpdateSelector).off("keyup",this.options.selectors.freightClassUpdateSelector)},listenerOn:function(){const t=this.callEntryPoint.bind(this);this.options._sourceElement.on("change",this.options.selectors.freightClassUpdateSelector,(i=>{(this.timeoutId||e(i.target).is("select"))&&t.call(this,i),this.clearTimeout()})).on("keyup",this.options.selectors.freightClassUpdateSelector,(e=>{this.clearTimeout(),this.timeoutId=setTimeout(t.bind(this,e),this.options.triggerTimeout)}))},clearTimeout:function(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)},callEntryPoint:function(t){const i=e(t.target).closest(this.options.selectors.itemContainer);let o=":input[data-ftid]";s.each(this.options.excludeFields,(function(t){o+=this.options.excludeFilter.replace("{{name}}",t)}),this);let l=i.closest("form").find(o).serialize();this.listenerOff(),this.$freightClassesSelect=i.find(this.options.selectors.freightClassSelector),this.loadingMaskView&&this.loadingMaskView.dispose(),this.loadingMaskView=new n({container:this.$freightClassesSelect.closest("td")}),l=l+"&"+this.options.activeUnitCodeParam+"="+encodeURI(i.find(this.options.selectors.unitSelect).val()),e.ajax({url:r.generate(this.options.routeFreightClassUpdate),type:"post",data:l,beforeSend:this._beforeSend.bind(this),success:this._success.bind(this),complete:this._complete.bind(this),errorHandlerMessage:a(this.options.errorMessage),error:this._dropValues.bind(this)})},_dropValues:function(t){this.$freightClassesSelect.prop("disabled",t).val(null).find('option:not([value=""])').remove()},_beforeSend:function(){this.loadingMaskView&&this.loadingMaskView.show()},_success:function(t){const i=this,o=t.units,n=s.isEmpty(o),r=this.$freightClassesSelect.val();this._dropValues(n),s.isEmpty(o)?this.$freightClassesSelect.val(""):(e.each(o,(function(t,s){i.$freightClassesSelect.find("option[value="+t+"]").length||i.$freightClassesSelect.append(e("<option/>").val(t).text(s))})),this.$freightClassesSelect.val(r).change(),this.$freightClassesSelect.val()||this.$freightClassesSelect.val(s.keys(o)[0]))},_complete:function(){this.$freightClassesSelect.trigger("value:changed").trigger("change"),this.loadingMaskView&&this.loadingMaskView.hide(),this.clearTimeout(),this.listenerOn()},dispose:function(){this.disposed||(this.listenerOff(),l.__super__.dispose.call(this))}});return l}.call(e,i,e,t))||(t.exports=s)},"./bundles/oroshipping/js/app/views/product-shipping-options-view.js":(t,e,i)=>{var s;void 0===(s=function(t){"use strict";const e=i("./bundles/oroui/js/extend/jquery.js"),s=i("./bundles/oroui/js/extend/underscore.js"),o=i("./bundles/oroui/js/app/views/base/view.js"),n=i("./bundles/oroui/js/mediator.js");return o.extend({options:{unitsAttribute:"units",selectSelector:'select[name^="oro_product[product_shipping_options]"][name$="[productUnit]"]',selectors:{itemsContainer:"table.list-items",itemContainer:"table tr.list-item",addButtonSelector:".product-shipping-options-collection .add-list-item",subselects:".shipping-weight select, .shipping-dimensions select, .shipping-freight-class select"}},listen:{"product:precision:remove mediator":"onPrecisionRemoved"},$itemsContainer:null,constructor:function t(e){t.__super__.constructor.call(this,e)},initialize:function(t){this.options=e.extend(!0,{},this.options,t||{}),this.$itemsContainer=this.$el.find(this.options.selectors.itemsContainer),this.initLayout().done(this.handleLayoutInit.bind(this))},handleLayoutInit:function(){this.$el.on("content:changed",this.onContentChanged.bind(this)),n.on("product:precision:add",this.onContentChanged,this),this.$itemsContainer.on("click",".removeRow",this.onRemoveRowClick.bind(this)).on("change",this.options.selectSelector,this.onContentChanged.bind(this)),this.$el.find(this.options.selectors.subselects).data("selected",!0),this.onContentChanged()},onContentChanged:function(){const t=this.$el.find(this.options.selectors.itemContainer),i=this,o=this.getProductUnits(),n=[],r=[];s.each(this.getSelects(),(function(t){const i=e(t).val();-1!==s.indexOf(s.keys(o),i)&&r.push(i)})),s.each(this.getSelects(),(function(t){const a=e(t);i.changeOptions(o,r,a),-1===s.indexOf(n,a.val())&&n.push(a.val())})),s.each(this.$el.find(this.options.selectors.subselects),(function(t){const i=e(t).find('option:not([value=""]):first');e(t).data("selected")||e(t).val()||!i.length||(e(t).val(i.val()).change(),e(t).data("selected",!0))})),this.$itemsContainer.toggle(t.length>0),e(this.options.selectors.addButtonSelector).toggle(s.keys(o).length>n.length)},onRemoveRowClick:function(t){t.preventDefault(),t.stopPropagation(),e(t.target).closest("*[data-content]").trigger("content:remove").remove(),this.onContentChanged()},onPrecisionRemoved:function(t){const i=this,o=this.$el.find(this.options.selectSelector);s.each(o,(function(s){t.hasOwnProperty(e(s).val())||e(s).closest(i.options.selectors.itemContainer).find(".removeRow").trigger("click")})),this.onContentChanged()},getProductUnits:function(){let t={};return e.each(e(":data("+this.options.unitsAttribute+")"),((i,s)=>{const o=e(s).data(this.options.unitsAttribute)||{};t=e.extend(t,o)})),t},getSelects:function(){return this.$itemsContainer.find(this.options.selectSelector)},changeOptions:function(t,i,o){let n=o.val();if(s.each(t,(function(t,i){o.find('option[value="'+i+'"]').length||o.append(e("<option/>").val(i).text(t))})),s.each(o.find("option"),(function(o){t.hasOwnProperty(o.value)&&o.value&&(-1===s.indexOf(i,o.value)||o.value===n)||(o.value===n&&(n=""),e(o).remove())})),!n){const t=o.find("option:first");o.val(t.length?t.val():""),t.length&&o.trigger("change")}}})}.call(e,i,e,t))||(t.exports=s)},"./bundles/oroshipping/js/app/views/shipping-rule-method-view.js":(t,e,i)=>{var s;void 0===(s=function(t){"use strict";const e=i("./bundles/oroui/js/extend/underscore.js"),s=i("./bundles/oroui/js/extend/jquery.js"),o=i("./bundles/oroui/js/app/views/base/view.js"),n=i("../node_modules/@oroinc/bootstrap/js/dist/popover.js"),r=i("./bundles/oroui/js/mediator.js"),a=i("./bundles/oroui/js/layout.js"),l=o.extend({options:{addSelector:".add-method",addAllSelector:".add-all-methods",gridSelector:".shipping-methods-grid",methodSelectSelector:'[name="oro_shipping_methods_configs_rule[method]"]',methodSelector:'input[data-name="field__method"]',methodViewSelector:'[data-role="method-view"]',methodPreviewSelector:'[data-role="method-preview"]',currencySelector:'select[data-name="field__currency"]',currencyFieldsSelector:"input:text[name]",focusFieldsSelector:"input:text[name]",previewFieldsSelector:"input:text[name],select[name]",enabledFieldSelector:'[data-name="field__enabled"]',additionalOptionSelector:".control-group-collection_entry",focus:!1,updateFlags:[]},events:{"click .add-all-methods":"_onAddAllClick","click .add-method":"_onAddClick",'change [name="oro_shipping_methods_configs_rule[method]"]':"_onMethodChange","content:remove":"_onMethodRemove","change :input":"_onInputsChange"},listen:{"page:afterChange mediator":"_onPageAfterChange"},methods:null,$form:null,$currency:null,$methodSelect:null,$methodSelectClone:null,$add:null,$addAll:null,constructor:function t(e){t.__super__.constructor.call(this,e)},initialize:function(t){this.options=e.defaults(t||{},this.options),this.$form=s(this.el).closest("form"),this.$currency=this.$form.find(this.options.currencySelector),this.$methodSelect=this.$(this.options.methodSelectSelector),this.$methodSelectClone=this.$methodSelect.find('option[value!=""]').clone(),this.$add=this.$(this.options.addSelector),this.$addAll=this.$(this.options.addAllSelector),this.bindEvents(),this.updateMethodsList(),this.updateMethodSelect(),this.updateLabels(),this.updateMethodPreview()},bindEvents:function(){this.$form.on("change"+this.eventNamespace(),this.options.currencySelector,this._onCurrencyChange.bind(this))},_onMethodChange:function(){this.toggleAddButton()},_onAddAllClick:function(){this.createAddRequest(!0)},_onAddClick:function(){this.createAddRequest(!1)},_onInputsChange:function(t){const e=s(t.target).closest(this.options.methodViewSelector);e.length&&this.updateMethodPreview(e)},_onCurrencyChange:function(){this.updateLabels(),this.updateMethodPreview()},_onMethodRemove:function(t){const e=s(t.target).find(this.options.methodSelector).val();this.updateMethodsList(e),this.updateMethodSelect(),0===this.methods.length&&this.$(this.options.gridSelector).remove()},_onPageAfterChange:function(){this.focus()},focus:function(){if(!this.options.focus)return;const t=this.options.focusFieldsSelector;this.$(this.options.methodViewSelector).each((function(){const e=s(this).find(t);if(0===e.filter((function(){return this.value.length>0})).length)return e.eq(0).attr("autofocus",!0).focus(),!1}))},toggleAddButton:function(){this.$add.toggleClass("disabled",e.isEmpty(this.$methodSelect.val()))},createAddRequest:function(t){let i=this.methods.length-1;const o=function(t){return i++,{name:"oro_shipping_methods_configs_rule[methodConfigs]["+i+"][method]",value:t.value}},n=this.$form.serializeArray();t?n.push(...this.$methodSelect.find('option[value][value!=""]').get().map(o)):n.push(o(this.$methodSelect.get(0))),e.each(this.options.updateFlags,(function(t){n.push({name:t,value:!0})})),r.execute("submitPage",{url:this.$form.attr("action"),type:this.$form.attr("method"),data:s.param(n)})},updateMethodsList:function(t){this.methods=[],e.each(this.$(this.options.methodSelector),(function(e){t&&e.value===t||this.methods.push(e.value)}),this)},updateMethodSelect:function(){this.$methodSelect.empty(),e.each(this.$methodSelectClone,(function(t){-1===e.indexOf(this.methods,t.value)&&this.$methodSelect.append(s(t).clone())}),this);const t=this.$methodSelect.find("option").length;this.$methodSelect.prop("disabled",0===t),this.$methodSelect.inputWidget("refresh"),this.$methodSelect.inputWidget("val",""),this.$addAll.toggle(t>1),this.toggleAddButton()},updateLabels:function(){const t=this.$currency.find("option:selected").text();e.each(this.$(this.options.currencyFieldsSelector),(function(e){const i=s(e);if(i.data("no-price"))return;i.data("currency",t);let o=this.$('label[for="'+e.id+'"]');o.length||(o=i.closest(this.options.additionalOptionSelector).find("label:first"),o.attr("for",e.id));const n=i.parent();n.is("label")&&(o=n),o.find(".currency").remove(),o.text()?o.find("em").before('<span class="currency">, '+t+"</span>"):o.prepend('<span class="currency">'+t+"</span>")}),this)},updateMethodPreview:function(t){if(e.isUndefined(t))return void e.each(this.$(this.options.methodViewSelector),(function(t){this.updateMethodPreview(s(t))}),this);const i=[];t.find(this.options.enabledFieldSelector).each((function(){s(this).is(":checkbox")&&!this.checked&&i.push(this.name.replace(/\[enabled\]$/,""))}));const o=t.find(this.options.methodPreviewSelector),n=[];e.each(t.find(this.options.previewFieldsSelector),(function(t){const o=s(t);let r=e.trim(t.value);if(0===r.length)return;if(e.filter(i,(function(e){return-1!==t.name.indexOf(e)})).length>0)return;o.is("select")&&(r=o.find("option:selected").text());const a=this.$('label[for="'+t.id+'"]').contents().eq(0).text()+": "+(o.data("currency")||"");n.push(a+r)}),this),o.html(n.map(e.escape).join(", ").replace(/ /g,"&nbsp;")),this.updatePreviewTooltip(o,n)},updatePreviewTooltip:function(t,e){void 0===t.data(n.DATA_KEY)&&a.initPopoverForElements(t,{placement:"bottom",trigger:"hover",close:!1},!0);const i=t.height();t.css({"word-wrap":"break-word",overflow:"auto","white-space":"normal"});const s=t.height()>i;t.attr("style","").data(n.DATA_KEY).updateContent(s?e.join("<br/>"):"")},dispose:function(){this.disposed||(this.$form.off(this.eventNamespace()),delete this.methods,delete this.options,delete this.$form,delete this.$currency,delete this.$methodSelect,delete this.$methodSelectClone,delete this.$add,delete this.$addAll,l.__super__.dispose.call(this))}});return l}.call(e,i,e,t))||(t.exports=s)},"./bundles/oroups/js/app/components/ups-transport-settings-component.js":(t,e,i)=>{var s;void 0===(s=function(t){"use strict";const e=i("./bundles/oroui/js/extend/jquery.js"),s=i("./bundles/oroui/js/extend/underscore.js"),o=i("./bundles/fosjsrouting/js/router.js"),n=i("./bundles/oroui/js/app/views/loading-mask-view.js"),r=i("./bundles/oroui/js/app/components/base/component.js").extend({options:{countrySelector:null,shippingServicesSelector:null,shippingServicesClosestParentSelector:null,shippingServiceByCountryRoute:null},country:null,shippingServices:null,shippingServicesHolder:null,shippingServiceByCountryRoute:null,constructor:function t(e){t.__super__.constructor.call(this,e)},initialize:function(t){this.options=s.defaults(t||{},this.options),this.$elem=t._sourceElement,this.country=e(t.countrySelector),this.shippingServices=e(t.shippingServicesSelector),this.shippingServicesHolder=this.shippingServices.closest(t.shippingServicesClosestParentSelector),this.shippingServiceByCountryRoute=t.shippingServiceByCountryRoute,this.loadingMaskView=new n({container:this.shippingServicesHolder}),this.$elem.find(this.country).on("change",this.onCountryChange.bind(this)),this.hideShippingServiceIfCountryNotSelected()},onCountryChange:function(){const t=this.country.val(),i=this;this.hideShippingServiceIfCountryNotSelected(),t&&e.ajax({url:o.generate(this.shippingServiceByCountryRoute,{code:t}),type:"GET",beforeSend:function(){i.shippingServicesHolder.show(),i.loadingMaskView.show()},success:function(t){i.shippingServices.find("option").remove(),e(t).each((function(t,e){i.shippingServices.append('<option value="'+e.id+'">'+e.description+"</option>")}))},complete:function(){i.loadingMaskView.hide()}})},hideShippingServiceIfCountryNotSelected:function(){this.country.val()||this.shippingServicesHolder.hide()},dispose:function(){this.disposed||(this.$elem.off(),this.$elem.find(this.country).off(),r.__super__.dispose.call(this))}});return r}.call(e,i,e,t))||(t.exports=s)}}]);